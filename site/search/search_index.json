{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"index.html","text":"Administraci\u00f3n de Sistemas Operativos \u00b6 Aqu\u00ed puedes encontrar los apuntes del m\u00f3dulo de Administraci\u00f3n de Sistemas Operativos , que se imparte en el segundo curso del ciclo formativo de grado superior de Administraci\u00f3n de Sistemas Inform\u00e1ticos en Red. La duraci\u00f3n del m\u00f3dulo es de 120 horas lectivas, a raz\u00f3n de 6 horas semanales , y se desarrolla a lo largo de los dos primeros trimestres del curso . Se ha planificado bas\u00e1ndose en 3 sesiones de 2 horas lectivas por semana. \u00bfQu\u00e9 voy a aprender? \u00b6 Administrar sistemas operativos de servidor, instalando y configurando el software, en condiciones de calidad para asegurar el funcionamiento del sistema. Administrar servicios de recursos compartidos (acceso a directorios, impresi\u00f3n, accesos remotos, entre otros) instalando y configurando el software, en condiciones de calidad. Administrar usuarios de acuerdo a las especificaciones de explotaci\u00f3n para garantizar los accesos y la disponibilidad de los recursos del sistema. Gestionar los recursos de diferentes sistemas operativos (programando y verificando su cumplimiento). Resultados de aprendizaje \u00b6 Utiliza lenguajes de guiones en sistemas operativos, describiendo su aplicaci\u00f3n y administrando servicios del sistema operativo. Administra el servicio de directorio interpretando especificaciones e integr\u00e1ndolo en una red. Administra procesos del sistema describi\u00e9ndolos y aplicando criterios de seguridad y eficiencia. Gestiona la automatizaci\u00f3n de tareas del sistema, aplicando criterios de eficiencia y utilizando comandos y herramientas gr\u00e1ficas. Administra de forma remota el sistema operativo en red valorando su importancia y aplicando criterios de seguridad. Administra servidores de impresi\u00f3n describiendo sus funciones e integr\u00e1ndolos en una red. Integra sistemas operativos libres y propietarios, justificando y garantizando su interoperabilidad. Unidades did\u00e1cticas / Temporalizaci\u00f3n \u00b6 A continuaci\u00f3n se muestran las unidades did\u00e1cticas y una estimaci\u00f3n temporal de cada una de ellas. La primera evaluaci\u00f3n contendr\u00eda las unidades comprendidas entre la 1 y 3, y parte de la unidad 4. As\u00ed pues, desde la mitad de la unidad 4 a la unidad 7 se ver\u00e1n en la segunda evaluaci\u00f3n. Primera evaluaci\u00f3n. (Duraci\u00f3n estimada: 68 sesiones) \u00b6 Tools: Scripting y Docker. (18h) Scripts de Linux. (bash). Scripts de PowerShell. Introducci\u00f3n a Docker. Administraci\u00f3n de servicio de directorio. (24h) LDAP. Directorio Activo con Windows Server. Administraci\u00f3n de procesos del sistema. (18h) El planificador. Algoritmos de planificaci\u00f3n de procesos. Sincronizaci\u00f3n, Interrupciones y excepciones. Secuencia de arranque del sistema. Segunda evaluaci\u00f3n. (Duraci\u00f3n estimada: 62 sesiones) \u00b6 Informaci\u00f3n del sistema. (16h). B\u00fasqueda de informaci\u00f3n del sistema. \u00d3rdenes. Herramientas gr\u00e1ficas. Gesti\u00f3n de la informaci\u00f3n del sistema. Rendimiento . Estad\u00edsticas. Servicios de acceso y administraci\u00f3n remota. (12h) Terminales en modo texto. Servicios de acceso remoto del propio sistema operativo. Escritorio remoto. Herramientas gr\u00e1ficas externas para la administraci\u00f3n remota. Administrador de servidores de impresi\u00f3n. (12h) Tipos de impresoras para trabajo en red. Protocolos de impresi\u00f3n. Servidores de impresi\u00f3n. Integraci\u00f3n de sistemas operativos. (20h) Samba. NFS. Instrumentos de calificaci\u00f3n \u00b6 La nota de cada evaluaci\u00f3n se calcula mediante: 40% Trabajo en Clase / Actividades Se eval\u00faan todas las actividades realizadas en clase y en casa. Las actividades se eval\u00faan mediante tareas de Aules con calificaciones comprendidas entre 0 y 3 puntos: 0: No entregada 1: Entregada pero soluci\u00f3n err\u00f3nea o incompleta 2: Entregada y soluci\u00f3n aceptable, aunque tiene alg\u00fan apartado incompleto 3: Entregada y soluci\u00f3n correcta. 60% Actividad de evaluaci\u00f3n Una o dos pruebas por evaluaci\u00f3n. La nota final se calcula mediante la media de cada una de las evaluaciones.","title":"Inicio"},{"location":"index.html#administracion-de-sistemas-operativos","text":"Aqu\u00ed puedes encontrar los apuntes del m\u00f3dulo de Administraci\u00f3n de Sistemas Operativos , que se imparte en el segundo curso del ciclo formativo de grado superior de Administraci\u00f3n de Sistemas Inform\u00e1ticos en Red. La duraci\u00f3n del m\u00f3dulo es de 120 horas lectivas, a raz\u00f3n de 6 horas semanales , y se desarrolla a lo largo de los dos primeros trimestres del curso . Se ha planificado bas\u00e1ndose en 3 sesiones de 2 horas lectivas por semana.","title":"Administraci\u00f3n de Sistemas Operativos"},{"location":"index.html#que-voy-a-aprender","text":"Administrar sistemas operativos de servidor, instalando y configurando el software, en condiciones de calidad para asegurar el funcionamiento del sistema. Administrar servicios de recursos compartidos (acceso a directorios, impresi\u00f3n, accesos remotos, entre otros) instalando y configurando el software, en condiciones de calidad. Administrar usuarios de acuerdo a las especificaciones de explotaci\u00f3n para garantizar los accesos y la disponibilidad de los recursos del sistema. Gestionar los recursos de diferentes sistemas operativos (programando y verificando su cumplimiento).","title":"\u00bfQu\u00e9 voy a aprender?"},{"location":"index.html#resultados-de-aprendizaje","text":"Utiliza lenguajes de guiones en sistemas operativos, describiendo su aplicaci\u00f3n y administrando servicios del sistema operativo. Administra el servicio de directorio interpretando especificaciones e integr\u00e1ndolo en una red. Administra procesos del sistema describi\u00e9ndolos y aplicando criterios de seguridad y eficiencia. Gestiona la automatizaci\u00f3n de tareas del sistema, aplicando criterios de eficiencia y utilizando comandos y herramientas gr\u00e1ficas. Administra de forma remota el sistema operativo en red valorando su importancia y aplicando criterios de seguridad. Administra servidores de impresi\u00f3n describiendo sus funciones e integr\u00e1ndolos en una red. Integra sistemas operativos libres y propietarios, justificando y garantizando su interoperabilidad.","title":"Resultados de aprendizaje"},{"location":"index.html#unidades-didacticas-temporalizacion","text":"A continuaci\u00f3n se muestran las unidades did\u00e1cticas y una estimaci\u00f3n temporal de cada una de ellas. La primera evaluaci\u00f3n contendr\u00eda las unidades comprendidas entre la 1 y 3, y parte de la unidad 4. As\u00ed pues, desde la mitad de la unidad 4 a la unidad 7 se ver\u00e1n en la segunda evaluaci\u00f3n.","title":"Unidades did\u00e1cticas / Temporalizaci\u00f3n"},{"location":"index.html#primera-evaluacion-duracion-estimada-68-sesiones","text":"Tools: Scripting y Docker. (18h) Scripts de Linux. (bash). Scripts de PowerShell. Introducci\u00f3n a Docker. Administraci\u00f3n de servicio de directorio. (24h) LDAP. Directorio Activo con Windows Server. Administraci\u00f3n de procesos del sistema. (18h) El planificador. Algoritmos de planificaci\u00f3n de procesos. Sincronizaci\u00f3n, Interrupciones y excepciones. Secuencia de arranque del sistema.","title":"Primera evaluaci\u00f3n. (Duraci\u00f3n estimada: 68 sesiones)"},{"location":"index.html#segunda-evaluacion-duracion-estimada-62-sesiones","text":"Informaci\u00f3n del sistema. (16h). B\u00fasqueda de informaci\u00f3n del sistema. \u00d3rdenes. Herramientas gr\u00e1ficas. Gesti\u00f3n de la informaci\u00f3n del sistema. Rendimiento . Estad\u00edsticas. Servicios de acceso y administraci\u00f3n remota. (12h) Terminales en modo texto. Servicios de acceso remoto del propio sistema operativo. Escritorio remoto. Herramientas gr\u00e1ficas externas para la administraci\u00f3n remota. Administrador de servidores de impresi\u00f3n. (12h) Tipos de impresoras para trabajo en red. Protocolos de impresi\u00f3n. Servidores de impresi\u00f3n. Integraci\u00f3n de sistemas operativos. (20h) Samba. NFS.","title":"Segunda evaluaci\u00f3n. (Duraci\u00f3n estimada: 62 sesiones)"},{"location":"index.html#instrumentos-de-calificacion","text":"La nota de cada evaluaci\u00f3n se calcula mediante: 40% Trabajo en Clase / Actividades Se eval\u00faan todas las actividades realizadas en clase y en casa. Las actividades se eval\u00faan mediante tareas de Aules con calificaciones comprendidas entre 0 y 3 puntos: 0: No entregada 1: Entregada pero soluci\u00f3n err\u00f3nea o incompleta 2: Entregada y soluci\u00f3n aceptable, aunque tiene alg\u00fan apartado incompleto 3: Entregada y soluci\u00f3n correcta. 60% Actividad de evaluaci\u00f3n Una o dos pruebas por evaluaci\u00f3n. La nota final se calcula mediante la media de cada una de las evaluaciones.","title":"Instrumentos de calificaci\u00f3n"},{"location":"013_Docker.html","text":"Docker \u00b6 Logo Docker. Docker (estibador en ingles) es un Sistema de Virtualizaci\u00f3n de Aplicaciones mediante contenedores , creado por Solomon Hykes y su equipo de ingenieros. En 2013 se convirti\u00f3 en un proyecto de software libre (licencia Apache) en el que participan cada vez m\u00e1s empresas. La versi\u00f3n 1.0 se public\u00f3 en junio de 2014 y ha tenido un desarrollo muy r\u00e1pido. En marzo de 2017 , Docker anunci\u00f3 un desarrollo todav\u00eda m\u00e1s r\u00e1pido, pasando a publicar una nueva versi\u00f3n cada mes. La numeraci\u00f3n de las versiones adopt\u00f3 al formato AA.MM (la primera fue Docker 17.03 ). En julio de 2018 , Docker anunci\u00f3 que volv\u00edan a un desarrollo m\u00e1s pausado. A partir de Docker 18.09 habr\u00eda una versi\u00f3n \"estable\" cada seis meses. Conceptos Previos \u00b6 Virtualizaci\u00f3n: Hipervisor \u00b6 En general, el objetivo de la virtualizaci\u00f3n es poder utilizar simult\u00e1neamente en un mismo ordenador dos o m\u00e1s sistemas operativos. Por lo tanto, para poder hablar de virtualizaci\u00f3n tienen que estar funcionando a la vez varios sistemas operativos . Note De acuerdo con esta definici\u00f3n, instalar dos sistemas operativos en un ordenador ( Windows y Linux , por ejemplo) y poder elegir uno u otro mediante un arranque dual no se considera virtualizaci\u00f3n , puesto que mediante un arranque dual no podemos ejecutar a la vez ambos sistemas. Y tampoco ser\u00eda virtualizaci\u00f3n la simulaci\u00f3n, que consiste en imitar el aspecto visual del sistema imitado. Por ejemplo, podr\u00edamos instalar un tema de escritorio en GNOME o KDE que imitara el escritorio de Windows. El problema de esta simulaci\u00f3n ser\u00eda que realmente no estar\u00edamos utilizando Windows sino simplemente algo que parece Windows. As\u00ed que, por ejemplo, no podr\u00edamos instalar una aplicaci\u00f3n de Windows puesto que el sistema operativo ser\u00eda Linux, que no acepta instaladores de Windows. Los sistemas operativos son los encargados de la gesti\u00f3n del hardware y requieren un control completo del mismo, por lo que dos sistemas operativos no pueden en principio estar funcionando a la vez sobre el mismo hardware. La soluci\u00f3n para la virtualizaci\u00f3n es la existencia de un hipervisor (en ingl\u00e9s, hypervisor). Ventajas Virtualizaci\u00f3n \u00b6 La virtualizaci\u00f3n tiene muchas aplicaciones interesantes: La m\u00e1s habitual es poder ejecutar aplicaciones que no est\u00e1n disponibles para el sistema operativo host , pero s\u00ed para otro sistema operativo que se instalar\u00eda como guest. La virtualizaci\u00f3n permite la conservaci\u00f3n del software . Debido al progreso del hardware, los procesadores antiguos dejan de fabricarse y los sistemas operativos y aplicaciones antiguos dejan de desarrollarse y dejan de funcionar en el hardware moderno. Pero si el sistema operativo puede instalarse como guest, puede seguir utiliz\u00e1ndose para siempre. La virtualizaci\u00f3n permite depurar y comprobar el funcionamiento de los programas y los sistemas operativos . Si un programa provoca un fallo de funcionamiento total, si se est\u00e1 ejecutando como guest, el sistema host puede recoger informaci\u00f3n sobre el motivo del fallo. La virtualizaci\u00f3n permite un mejor aprovechamiento del hardware , ya que un mismo ordenador puede contener muchos sistemas guests utilizados por usuarios diferentes, aislados unos de otros. Hipervisor \u00b6 El hipervisor es la pieza fundamental de la virtualizaci\u00f3n. Tradicionalmente, se distinguen dos tipos de hipervisores: Los hipervisores de tipo 1 , denominados \u00ab hipervisores bare metal \u00bb, dichos hipervisores est\u00e1n en contacto directo con el hardware de la m\u00e1quina, sin necesidad de ning\u00fan sistema operativo previo. Los hipervisores de tipo 2 , denominados \u00ab alojados \u00bb, y son una aplicaci\u00f3n m\u00e1s del sistema operativo instalado en la m\u00e1quina y el hipervisor accede al hardware de la m\u00e1quina a trav\u00e9s de ese sistema operativo. Tipos de Hipervisor. Note En el caso de los hipervisores de tipo 2 , el sistema operativo que tiene el control del hardware recibe el nombre de host (anfitri\u00f3n). Es el sistema operativo que se instal\u00f3 primero en el ordenador y el que se pone en marcha al arrancar el ordenador. Los dem\u00e1s sistemas operativos reciben el nombre de guests (hu\u00e9spedes) y pueden ejecutarse o no a voluntad del usuario. En el caso de los hipervisores de tipo 1 no hay un sistema operativo host, todos los sistemas operativos son guests del hipervisor. Example Tipo 1 : ejemplos de este tipo de hipervisores son VMware ESXi o Xen , los cuales son utilizados a nivel de centro de datos. Hyper-V de Microsoft se puede considerar un hipervisor de tipo 1 , porque aunque necesita que est\u00e9 instalado primero Windows para poder instalar Hyper-V , una vez instalado convierte a Windows en un guest m\u00e1s de Hyper-V (aunque con acceso prioritario con respecto al resto de guests). Tipo 1 / Tipo 2 : KVM , al estar integrado en el kernel de Linux, se puede considerar tanto de tipo 1 como de tipo 2 . Tipo 2 : VirtualBox es un hipervisor de tipo 2 . Contenedores \u00b6 El problema de los hipervisores y las m\u00e1quinas virtuales es que cada m\u00e1quina virtual es independiente de las dem\u00e1s. Al no reutilizarse ning\u00fan componente, se ocupa mucho espacio tanto en disco como en memoria y el tiempo de ejecuci\u00f3n siempre ser\u00e1 mayor que si s\u00f3lo hubiera un sistema operativo (sobre todo en el caso de hipervisores de tipo 2 ). Para resolver este problema se crearon los contenedores en los que se utilizan mecanismos existentes en el sistema operativo para aislar las aplicaciones , pero compartiendo el mayor n\u00famero posible de componentes del sistema operativo o incluso de las aplicaciones. Como definici\u00f3n, Un contenedor es el equivalente a una m\u00e1quina virtual de la virtualizaci\u00f3n cl\u00e1sica, pero mucho m\u00e1s ligera porque utiliza recursos del sistema operativo del hos t. Las aplicaciones de cada contenedor \"ven\" un sistema operativo, que puede ser diferente en cada contenedor, pero quien realiza el trabajo es el sistema operativo com\u00fan que hay por debajo . Note Los contenedores suelen ser elementos ef\u00edmeros . La facilidad con la que pueden crearse y ponerse en marcha hace m\u00e1s f\u00e1cil crear un nuevo contenedor que modificar uno ya existente. Por ello, los datos generados por las aplicaciones no se suelen guardar en los contenedores, sino fuera de ellos. Su ligereza hace m\u00e1s f\u00e1cil tener varios contenedores con una aplicaci\u00f3n en cada uno de ellos que tener un \u00fanico contenedor con varias aplicaciones en \u00e9l. Por ello, un aspecto importante de los contenedores es su orquestaci\u00f3n , es decir, la administraci\u00f3n simult\u00e1nea de muchos contenedores, una de las herramientas m\u00e1s utilizadas es Kubernetes . M\u00e1quinas Virtuales VS Contenedores \u00b6 Contenedores Vs M\u00e1quinas Virtuales. Caracter\u00edsticas principales Contenedores \u00b6 En resumen los contenedores: Consisten en Agrupar y Aislar Aplicaciones o grupos de aplicaciones que se ejecutan sobre un mismo n\u00facleo de sistema operativo . Su caracter\u00edstica principal se basa en su propio sistema de archivos ejecutable en cualquier Sistema Operativo . No es necesario emular el HW y SW completo como en las m\u00e1quinas virtuales, por lo tanto son mucho m\u00e1s ligeros , comparten el m\u00e1ximo de componentes con el sistema operativo host, y su rapidez, ya que gracias a que apenas a\u00f1aden capas adicionales consiguen casi velocidades nativas. Soluciona problemas de espacio y compatibilidades a la hora de puesta en marcha en servidores de producci\u00f3n. Los contenedores suelen ser elementos ef\u00edmeros . Caracter\u00edsticas principales de Docker \u00b6 Docker es una API amigable del tipo Open Source . Genera un proceso aislado del resto de los procesos de la m\u00e1quina gracias a: Ejecutar sobre su propio sistema de ficheros, con su propio espacio de usuarios y procesos, y sus propias interfaces de red... Es Modular ya que esta dividido en varios componentes. Es portable e inmutable utilizando la plataforma DockerHub . Su es lema \u201cBuild, Ship and Run, any app,\u201d . Lema Docker. Note Aunque un contenedor puede incluir cualquier n\u00famero de aplicaciones, lo habitual es que un contenedor contenga una sola aplicaci\u00f3n (y los programas necesarios para ponerse en marcha). Arquitectura Docker \u00b6 Docker Engine (\"Motor\" del Gestor Docker) : el cual basado en la arquitectura de Cliente-Servidor (que pueden estar en la misma m\u00e1quina, o en distintas), y realizada por mediante una API de REST que utiliza HTTP . API REST : interfaz de programaci\u00f3n con un estilo de arquitectura software para sistemas hipermedia distribuidos como la World Wide Web . \"Daemon Docker\" (Servicio) : lleva a cabo Gesti\u00f3n y enlace de los componentes del gestor. Im\u00e1genes : Las im\u00e1genes son una especie de plantillas que contienen como m\u00ednimo todo el software que necesita la aplicaci\u00f3n para ponerse en marcha. est\u00e1n formadas por una colecci\u00f3n ordenada de: Sistemas Archivos ; Repositorios ; Comandos ; Par\u00e1metros ; Aplicaciones . Contenedores : son el conjunto de procesos que encapsulan e identifican a una Imagen. Pueden ser: Creado, inicializado, parado, vuelto a ejecutar y destruido. Registros son im\u00e1genes son guardadas en registros para: Almacenar o Distribuir. Se realiza en Docker Hub y pueden ser P\u00fablicos y Privados. Componentes de Docker. Note El componente b\u00e1sico de Docker es el Docker Engine , pero Docker ofrece tambi\u00e9n una serie de herramientas para administrar, distribuir e instalar contenedores: Docker Compose , Docker Swarm . Las im\u00e1genes se pueden crear a partir de otras im\u00e1genes m\u00e1s b\u00e1sicas incluyendo software adicional en forma de capas. Todos los contenedores creados a partir de una imagen contienen el mismo software, aunque en el momento de su creaci\u00f3n se pueden personalizar algunos detalles Microservicios \u00b6 Uno de los objetivos principales de la configuraci\u00f3n e implantaci\u00f3n con Docker es es solucionar los problemas de: Errores de dependencias entre diferentes Sistemas Operativos de los trabajadores y m\u00e1quinas de puesta en marcha. Evitar la Elevada carga y capacidad de las M\u00e1quinas Virtuales. Caida de todos los servicios instalados de forma monol\u00edtica en los servidores. Tipos de despliegue: Monol\u00edtico \u2192 Todos los servicios en la misma m\u00e1quina. SOA (Service Oriented Architecture) \u2192 Diferentes M\u00e1quinas una con cada Servicio conectadas. MicroServicios \u2192Divisi\u00f3n m\u00e1s peque\u00f1a de los servicios. Momol\u00edtico Vs Microservicios. Instalaci\u00f3n \u00b6 Para la Instalaci\u00f3n de Docker es recomendable seguir la documentaci\u00f3n oficial. Adem\u00e1s se recomienda Instalar m\u00e1quina Ubuntu Server \u00faltima versi\u00f3n e instalar Docker en ella. Docker for Mac: Instalaci\u00f3n Mac Docker for Windows: Instalaci\u00f3n Windows Docker for ubuntu: Instalaci\u00f3n Ubuntu Warning Docker empez\u00f3 estando disponible solamente para distribuciones GNU/Linux, pero desde junio de 2016 tambi\u00e9n est\u00e1 disponible como aplicaci\u00f3n nativa en Windows Server 2016 y Windows 10. Docker utiliza la virtualizaci\u00f3n ofrecida por el sistema operativo. En el caso de Windows 10, eso significa que para usar Docker de forma nativa hay que activar Hyper-V que, por desgracia, es incompatible con VirtualBox. Para poder utilizar Docker en Windows 7 o en Windows 10 sin Hyper-V , Docker ofrece desde agosto de 2015 Docker Toolbox , que realmente es una m\u00e1quina virtual (que se ejecuta en VirtualBox) que contiene Docker. Principales Comandos \u00b6 A continuaci\u00f3n se muestran los comandos m\u00e1s utilizados: Comando Acci\u00f3n Comando Acci\u00f3n docker info obtener informaci\u00f3n relativa a docker docker start (docker container start) inicia la ejecuci\u00f3n docker run (docker container run) crea y ejecuta el contenedor docker rm (docker container eliminar) elimina el contenedor docker build crea una imagen docker cp (docker container copiar) docker ps muestra la lista de contenedores creados docker logs (docker container logs) muestra los errores docker inspect (docker container inspect) informaci\u00f3n detallada de los contenedores docker stats (docker container stats) muestra el estado docker stop (docker container stop) detiene la ejecuci\u00f3n del contenedor docker system prune limpiar todo el sistena de contenedores im\u00e1genes y volumenes Chuleta de Comandos Chuleta Docker. Primer Contenedor \u00b6 A continuaci\u00f3n se muestra un ejemplo guiado de la creaci\u00f3n del contenedor \"Hello World\" Comprobaci\u00f3n que inicialmente no hay ning\u00fan contenedor creado (la opci\u00f3n -a hace que se muestren tambi\u00e9n los contenedores detenidos, sin ella se muestran s\u00f3lo los contenedor que est\u00e9n en marcha): sudo docker ps -a o tambi\u00e9n sudo docker container ls -a Compruebe que inicialmente tampoco disponemos de ninguna imagen: sudo docker image ls Note Docker crea los contenedores a partir de im\u00e1genes locales (ya descargadas), pero si al crear el contenedor no se dispone de la imagen local, Docker descarga la imagen de su repositorio. La orden m\u00e1s simple para crear un contenedor sigue esta estructura: sudo docker run IMAGEN Example sudo docker run hello-world Note Como no tenemos todav\u00eda la imagen en nuestro ordenador, Docker descarga la imagen, crea el contenedor y lo pone en marcha. En este caso, la aplicaci\u00f3n que contiene el contenedor hello-world simplemente escribe un mensaje de salida al arrancar e inmediatamente se detiene el contenedor. Si listamos de nuevo imagenes y contenedores, las veremos creadas. Cada contenedor tiene un identificador (ID) y un nombre distinto. Docker \"bautiza\" los contenedores con un \" nombre peculiar \", compuesto de un adjetivo y un apellido. Podemos crear tantos contenedores como queramos a partir de una imagen. Una vez la imagen est\u00e1 disponible localmente, Docker no necesita descargarla y el proceso de creaci\u00f3n del contenedor es inmediato (aunque en el caso de hello-world la descarga es r\u00e1pida, con im\u00e1genes m\u00e1s grandes la descarga inicial puede tardar un rato). Tip Normalmente se aconseja usar siempre la opci\u00f3n -d , que arranca el contenedor en segundo plano ( detached ) y permite seguir teniendo acceso a la shell (aunque con hello-world no es estrictamente necesario porque el contenedor hello-world se detiene autom\u00e1ticamente tras mostrar el mensaje). Al crear el contenedor hello-world con la opci\u00f3n -d no se muestra el mensaje, simplemente muestra el identificador completo del contenedor. Los contenedores se pueden destruir mediante el comando rm, haciendo referencia a ellos mediante su nombre o su id. No es necesario indicar el id completo , basta con escribir los primeros caracteres (de manera que no haya ambig\u00fcedades). Adem\u00e1s podemos dar nombre a los contenedores al crearlos: sudo docker run -d --name=hola-1 hello-world Vol\u00famenes \u00b6 Docker simplifica enormemente la creaci\u00f3n de contenedores, y eso lleva a tratar los contenedores como un elemento ef\u00edmero , que se crea cuando se necesita y que no importa que se destruya puesto que puede ser reconstruido una y otra vez a partir de su imagen. Warning Pero si la aplicaci\u00f3n o aplicaciones incluidas en el contenedor generan datos y esos datos se guardan en el propio contenedor, en el momento en que se destruyera el contenedor perder\u00edamos esos datos . El objetivo principal de los volumenes es no perder datos si borro el contenedor y mejorar rendimiento del Docker . Para conseguir la persistencia de los datos, se pueden emplear dos t\u00e9cnicas: Los directorios enlazados (bind) , en la que la informaci\u00f3n se guarda fuera de Docker, en la m\u00e1quina host (por ejemplo si lo ejecutamos en la m\u00e1quina virtual de Ubuntu o la m\u00e1quina f\u00edsica de Lliurex en clase). Los vol\u00famenes , en la que la informaci\u00f3n se guarda mediante Docker, pero en unos elementos llamados vol\u00famenes , independientes de las im\u00e1genes y los contenedores. Adem\u00e1s los volumens se pueden catalogar en dos tipos. Volu\u0301menes de Datos : es como si montar\u00e1 un disco en el contenedor y por defecto se realizan en un path temporal. Volu\u0301menes de Host : Mismo concepto pero indic\u00e1ndole el path. Tip Aconsejable utilizar la t\u00e9cnica de volumenes , ya que, La ventaja frente a los directorios enlazados es que pueden ser gestionados por Docker. Otro detalle importante es que el acceso al contenido de los vol\u00famenes s\u00f3lo se puede hacer a trav\u00e9s de alg\u00fan contenedor que utilice el volumen. Ventajas Vol\u00famenes \u00b6 Los vol\u00famenes tienen varias ventajas sobre los directorios enlazados: Los vol\u00famenes son m\u00e1s f\u00e1ciles de respaldar o migrar que enlazar montajes. Puede administrar vol\u00famenes mediante los comandos de la CLI de Docker o la API de Docker. Los vol\u00famenes funcionan tanto en contenedores de Linux como de Windows. Los vol\u00famenes se pueden compartir de forma m\u00e1s segura entre varios contenedores. Los controladores de volumen le permiten almacenar vol\u00famenes en hosts remotos o proveedores en la nube, para cifrar el contenido de los vol\u00famenes o para agregar otras funciones. Los nuevos vol\u00famenes pueden tener su contenido precargado por un contenedor. Los vol\u00famenes en Docker Desktop tienen un rendimiento mucho mayor que los directorios enlazados de hosts de Mac y Windows. Note Adem\u00e1s, los vol\u00famenes suelen ser una mejor opci\u00f3n que los datos persistentes en la capa de escritura de un contenedor, porque un volumen no aumenta el tama\u00f1o de los contenedores que lo usan y el contenido del volumen existe fuera del ciclo de vida de un contenedor determinado. Gr\u00e1fico t\u00e9cnicas de persistencia de datos. Note Los vol\u00famenes son independientes de los contenedores, por lo que tambi\u00e9n podemos conservar los datos aunque se destruya el contenedor, reutilizarlos con otro contenedor, etc. Opciones \u00b6 Opciones: ` Docker volume (create|Is|inspect|rm)` para crear el volumen a la vez que creamos y ejecutamos un contenedor se utilzan las opciones v o --mount En general, --mount m\u00e1s expl\u00edcito y detallado. La mayor diferencia es que la sintaxis de -v combina todas las opciones juntas en un campo, mientras que la sintaxis --mount las separa. A continuaci\u00f3n se muestra una comparaci\u00f3n de la sintaxis de cada \"flag\". -v o --volume : consta de tres campos, separados por dos puntos ( :). Los campos deben estar en el orden correcto y el significado de cada campo no es inmediatamente obvio. En el caso de vol\u00famenes con nombre, el primer campo es el nombre del volumen y es \u00fanico en una m\u00e1quina host determinada. Para vol\u00famenes an\u00f3nimos, se omite el primer campo. El segundo campo es la ruta donde se monta el archivo o directorio en el contenedor. El tercer campo es opcional y es una lista de opciones separadas por comas, como ro (readonly). --mount : Consta de varios pares clave-valor, separados por comas (cada uno formado por una = dupla). La sintaxis de --mount es m\u00e1s detallada que -v o --volume ; adem\u00e1s el orden de las claves no es significativo, por lo tanto el valor de las \"flags\" son m\u00e1s f\u00e1ciles de entender. Valores de las duplas: type : puede ser bind , volume o tmpfs . source : Para vol\u00famenes con nombre, este es el nombre del volumen. Para vol\u00famenes an\u00f3nimos, este campo se omite. Puede especificarse como source o src. destination : toma como valor de la ruta en el archivo o directorio est\u00e1 montado en el contenedor. Puede ser especificado como destination, dst o target . readonly : si est\u00e1 presente, hace que el montaje de enlace se monte en el contenedor como de solo lectura. Puede especificarse como readonly o ro . volume-opt se puede especificar m\u00e1s de una vez, toma un par clave-valor que consta del nombre de la opci\u00f3n y su valor. Ejemplo: volume-opt=type=nfs Note Todas las opciones de vol\u00famenes est\u00e1n disponibles para los indicadores --mount y -v , por que a la hora de elegir uno u otro depende del t\u00e9cnico para su facilidad de configuraci\u00f3n donde por su sintaxis a priori ser\u00eda mejor --mount . Ejemplo \u00b6 A continuaci\u00f3n se muestra un ejemplo de creaci\u00f3n del servidor web NGINX. Example docker run -d \\ --name nginx1 -p 8080:80 \\ --mount type=volume,source=myvol1,target=/usr/share/nginx/html \\ nginx:latest Note Si en lugar de la opci\u00f3n -p 8080:80 se utiliza la opci\u00f3n -P hace que Docker asigne de forma aleatoria un puerto de la m\u00e1quina virtual al puerto asignado a Nginx en el contenedor. Si se creara una p\u00e1gina de incio del apache diferente a la de defecto podr\u00edamos copiarla en el volumen y esta cambiar\u00eda: nano index.html Nueva p\u00e1gina de inicio: <!DOCTYPE html> <html lang=\"es\"> <head> <meta charset=\"utf-8\"> <title>Apache en Docker</title> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> </head> <body> <h1>\u00a1Hola de nuevo, Mundo!</h1> </body> </html> Para cambiar la p\u00e1gina de inicio del apache se debe copiar dentro del volumen creado. docker cp index.html nginx1:/usr/share/nginx/html Si accedemos al servidor apache aparecer\u00e1 la nueva p\u00e1gina. Warning Si aparece el error forbiden 403, es debido a permisos del index.html, debemos entrar en container y cambiar los permisos. docker exec -it nginx1 /bin/bash cd /usr/share/nginx/html chown -R root:root index.html Adem\u00e1s podemos crear un nuevo contenedor con este volumen: docker run -d \\ --name nginx2 -p 8080:80 \\ --mount type=volume,source=myvol1,target=/usr/share/nginx/html \\ nginx:latest Se comprueba que el nuevo contenedor muestra la nueva p\u00e1gina index.html Warning Si se intenta borrar el volumen del ejemplo anterior mientras los contenedores est\u00e1n en marcha, Docker muestra un mensaje de error que indica los contenedores afectados . Redes \u00b6 Cuando se crean diferentes servicios o aplicaciones en contenedores distintos (siguiendo la premisa de microservicios), estos no estas conectados entre s\u00ed, en el caso que necesitar\u00e1n conexi\u00f3n se utilizar\u00edan \"redes Docker\". Este mecanismo funciona de manera distinta seg\u00fan la red docker donde est\u00e9n conectados los contenedores. Representaci\u00f3n Redes Docker. Opciones y tipos \u00b6 Opciones: docker network (create | Is | inspect | rm) A continuaci\u00f3n se introducen los distintos tipos de redes que nos ofrece docker: Bridge \u2192 por defecto. Todos los contenedores est\u00e1n en la misma red, separada del Host. Host \u2192 Cuando quiero que los contenedores est\u00e9n en mi misma red. None \u2192 contenedores aislados. Escenario de ejemplo de una Red Docker. Warning El uso de contenedores conectados a la red por defecto no est\u00e1 recomendado en entornos de producci\u00f3n. se podr\u00edan enlazar contenedores con el bridge por defecto con el flag --link . Tip La opci\u00f3n recomendable es definir una red bridge y crear los contenedores conectados a dicha red. El mayor problema es que ambos contenedores compartir\u00edan las variables de entorno y esto puede causar problemas de desarrollo. Por ejemplo: docker network create mired Se crean los contenedores conectados a dicha red: docker run -d --name servidor_mysql --network mired \\ -e MYSQL_DATABASE=bd_wp -e MYSQL_USER=user_wp -e MYSQL_PASSWORD=asdasd \\ -e MYSQL_ROOT_PASSWORD=asdasd mariadb docker run -d --name servidor --network mired javierhernandez/aplicacionweb:v1 Note En este caso no se comparten las variables de entorno. Tools \u00b6 Existen dos opciones destacables en Docker para agilizar el despliegue de Imagenes y contenedores: Dockerfile y Docker-compose Dockerfile : es un archivo de texto plano que contiene una serie de instrucciones necesarias para crear una imagen que, posteriormente, se convertir\u00e1 en una sola aplicaci\u00f3n utilizada para un determinado prop\u00f3sito. Summary Im\u00e1genes\u2192 docker build \u2192 docker_file Docker-compose : es una herramienta que permite simplificar el uso de Docker. A partir de archivos YAML es mas sencillo crear contendores, conectarlos, habilitar puertos, volumenes, etc. Summary Contenedores\u2192 docker run \u2192 docker_compose.yml Dockerfile \u00b6 Las instrucciones principales que pueden utilizarse en un Dockerfile son: Ver tambi\u00e9n: Best practices for writing Dockerfiles Example A continuaci\u00f3n se muestra un ejemplo para la realizaci\u00f3n de la pr\u00e1ctica de ampliaci\u00f3n extraido de Apache oficial de docker . Primer paso : generar imagen con un Dockerfile . Se crea el archivo de texto dockerfile. mkdir docker touch dockerfile nano dockerfile Ejemplo edici\u00f3n Dockerfile. # syntax=docker/dockerfile:1 FROM nginx:alpine RUN apk update COPY index.html/ /usr/share/nginx/html/ Nota Se puede probar a introducir el volumen en el docker file: VOLUME /myvol1 Se crea la imagen y el contenedor. docker build -t franciscojav1981/my-nginx . docker run -dit --name my-nginx -p 8081:80 franciscojav1981/my-nginx Warning Mucho cuidado con el \u00faltimo punto de la instucci\u00f3n de build, tiene un espacio antes. Es el \u00faltimo argumento (y el \u00fanico imprescindible) es el nombre del archivo Dockerfile que tiene que utilizar para generar la imagen. Como en este caso se encuentra en el mismo directorio y tiene el nombre predeterminado Dockerfile, se puede escribir simplemente punto ( . ). Para indicar el nombre de la imagen se debe a\u00f1adir la opci\u00f3n -t . El nombre de la imagen debe seguir el patr\u00f3n nombre-de-usuario/nombre-de-imagen . Si la imagen s\u00f3lo se va a utilizar localmente, el nombre de usuario y de la imagen pueden ser cualquier palabra. Segundo paso : subir imagen al Docker Hub. Se debe generar una cuenta de Docker Hub con la cuenta corporativa de Office 365: Sign Up Con el comando docker login , se realiza el acceso a la plataforma desde el terminal, introduciendo usuario y contrase\u00f1a. docker login Con el comando docker push , se realiza el \"Upload\" de la imagen. docker push franciscojav1981/my-nginx Por \u00faltimo Se debe comprobar accediendo a la platadorma de Docker Hub. Docker-compose \u00b6 Docker-compose es otro proyecto open source que permite definir aplicaciones muilti-contenedor de una manera sencilla y declarativa. Es una alternativa m\u00e1s c\u00f3moda al uso de los comandos docker run y docker build, que resultan un tanto tediosos cuando trabajamos con aplicaciones de varios componentes. Se define un fichero docker-compose.yml que se puede observar en el ejemplo realizado en la pr\u00e1ctica en el \u00faltimo apartado. Example A continuaci\u00f3n se muestra un ejemplo para la realizaci\u00f3n de la pr\u00e1ctica de ampliaci\u00f3n: Instalaci\u00f3n Wordpress Primer Paso : instalaci\u00f3n de Docker-compose. Install Docker Compose Segundo paso : Crear directorio del proyecto y dentro el archivo yaml . mkdir my_wordpress touch docker-compose.yml nano docker-compose.yml 3. Tercer paso : se edita el yaml . version : \"3.9\" services : db : image : mysql:5.7 volumes : - db_data:/var/lib/mysql restart : always environment : MYSQL_ROOT_PASSWORD : somewordpress MYSQL_DATABASE : wordpress MYSQL_USER : wordpress MYSQL_PASSWORD : wordpress wordpress : depends_on : - db image : wordpress:latest volumes : - wordpress_data:/var/www/html ports : - \"8000:80\" restart : always environment : WORDPRESS_DB_HOST : db:3306 WORDPRESS_DB_USER : wordpress WORDPRESS_DB_PASSWORD : wordpress WORDPRESS_DB_NAME : wordpress volumes : db_data : {} wordpress_data : {} Cuarto paso : en la carpeta creada del proyecto se ejecuta el comando de docker-compose up -d docker-compose up -d Por \u00faltimo Se comprueba que se ha creado el contenedor. Cuidado.","title":"Docker"},{"location":"013_Docker.html#docker","text":"Logo Docker. Docker (estibador en ingles) es un Sistema de Virtualizaci\u00f3n de Aplicaciones mediante contenedores , creado por Solomon Hykes y su equipo de ingenieros. En 2013 se convirti\u00f3 en un proyecto de software libre (licencia Apache) en el que participan cada vez m\u00e1s empresas. La versi\u00f3n 1.0 se public\u00f3 en junio de 2014 y ha tenido un desarrollo muy r\u00e1pido. En marzo de 2017 , Docker anunci\u00f3 un desarrollo todav\u00eda m\u00e1s r\u00e1pido, pasando a publicar una nueva versi\u00f3n cada mes. La numeraci\u00f3n de las versiones adopt\u00f3 al formato AA.MM (la primera fue Docker 17.03 ). En julio de 2018 , Docker anunci\u00f3 que volv\u00edan a un desarrollo m\u00e1s pausado. A partir de Docker 18.09 habr\u00eda una versi\u00f3n \"estable\" cada seis meses.","title":"Docker"},{"location":"013_Docker.html#conceptos-previos","text":"","title":"Conceptos Previos"},{"location":"013_Docker.html#virtualizacion-hipervisor","text":"En general, el objetivo de la virtualizaci\u00f3n es poder utilizar simult\u00e1neamente en un mismo ordenador dos o m\u00e1s sistemas operativos. Por lo tanto, para poder hablar de virtualizaci\u00f3n tienen que estar funcionando a la vez varios sistemas operativos . Note De acuerdo con esta definici\u00f3n, instalar dos sistemas operativos en un ordenador ( Windows y Linux , por ejemplo) y poder elegir uno u otro mediante un arranque dual no se considera virtualizaci\u00f3n , puesto que mediante un arranque dual no podemos ejecutar a la vez ambos sistemas. Y tampoco ser\u00eda virtualizaci\u00f3n la simulaci\u00f3n, que consiste en imitar el aspecto visual del sistema imitado. Por ejemplo, podr\u00edamos instalar un tema de escritorio en GNOME o KDE que imitara el escritorio de Windows. El problema de esta simulaci\u00f3n ser\u00eda que realmente no estar\u00edamos utilizando Windows sino simplemente algo que parece Windows. As\u00ed que, por ejemplo, no podr\u00edamos instalar una aplicaci\u00f3n de Windows puesto que el sistema operativo ser\u00eda Linux, que no acepta instaladores de Windows. Los sistemas operativos son los encargados de la gesti\u00f3n del hardware y requieren un control completo del mismo, por lo que dos sistemas operativos no pueden en principio estar funcionando a la vez sobre el mismo hardware. La soluci\u00f3n para la virtualizaci\u00f3n es la existencia de un hipervisor (en ingl\u00e9s, hypervisor).","title":"Virtualizaci\u00f3n: Hipervisor"},{"location":"013_Docker.html#contenedores","text":"El problema de los hipervisores y las m\u00e1quinas virtuales es que cada m\u00e1quina virtual es independiente de las dem\u00e1s. Al no reutilizarse ning\u00fan componente, se ocupa mucho espacio tanto en disco como en memoria y el tiempo de ejecuci\u00f3n siempre ser\u00e1 mayor que si s\u00f3lo hubiera un sistema operativo (sobre todo en el caso de hipervisores de tipo 2 ). Para resolver este problema se crearon los contenedores en los que se utilizan mecanismos existentes en el sistema operativo para aislar las aplicaciones , pero compartiendo el mayor n\u00famero posible de componentes del sistema operativo o incluso de las aplicaciones. Como definici\u00f3n, Un contenedor es el equivalente a una m\u00e1quina virtual de la virtualizaci\u00f3n cl\u00e1sica, pero mucho m\u00e1s ligera porque utiliza recursos del sistema operativo del hos t. Las aplicaciones de cada contenedor \"ven\" un sistema operativo, que puede ser diferente en cada contenedor, pero quien realiza el trabajo es el sistema operativo com\u00fan que hay por debajo . Note Los contenedores suelen ser elementos ef\u00edmeros . La facilidad con la que pueden crearse y ponerse en marcha hace m\u00e1s f\u00e1cil crear un nuevo contenedor que modificar uno ya existente. Por ello, los datos generados por las aplicaciones no se suelen guardar en los contenedores, sino fuera de ellos. Su ligereza hace m\u00e1s f\u00e1cil tener varios contenedores con una aplicaci\u00f3n en cada uno de ellos que tener un \u00fanico contenedor con varias aplicaciones en \u00e9l. Por ello, un aspecto importante de los contenedores es su orquestaci\u00f3n , es decir, la administraci\u00f3n simult\u00e1nea de muchos contenedores, una de las herramientas m\u00e1s utilizadas es Kubernetes .","title":"Contenedores"},{"location":"013_Docker.html#maquinas-virtuales-vs-contenedores","text":"Contenedores Vs M\u00e1quinas Virtuales.","title":"M\u00e1quinas Virtuales VS Contenedores"},{"location":"013_Docker.html#caracteristicas-principales-contenedores","text":"En resumen los contenedores: Consisten en Agrupar y Aislar Aplicaciones o grupos de aplicaciones que se ejecutan sobre un mismo n\u00facleo de sistema operativo . Su caracter\u00edstica principal se basa en su propio sistema de archivos ejecutable en cualquier Sistema Operativo . No es necesario emular el HW y SW completo como en las m\u00e1quinas virtuales, por lo tanto son mucho m\u00e1s ligeros , comparten el m\u00e1ximo de componentes con el sistema operativo host, y su rapidez, ya que gracias a que apenas a\u00f1aden capas adicionales consiguen casi velocidades nativas. Soluciona problemas de espacio y compatibilidades a la hora de puesta en marcha en servidores de producci\u00f3n. Los contenedores suelen ser elementos ef\u00edmeros .","title":"Caracter\u00edsticas principales Contenedores"},{"location":"013_Docker.html#caracteristicas-principales-de-docker","text":"Docker es una API amigable del tipo Open Source . Genera un proceso aislado del resto de los procesos de la m\u00e1quina gracias a: Ejecutar sobre su propio sistema de ficheros, con su propio espacio de usuarios y procesos, y sus propias interfaces de red... Es Modular ya que esta dividido en varios componentes. Es portable e inmutable utilizando la plataforma DockerHub . Su es lema \u201cBuild, Ship and Run, any app,\u201d . Lema Docker. Note Aunque un contenedor puede incluir cualquier n\u00famero de aplicaciones, lo habitual es que un contenedor contenga una sola aplicaci\u00f3n (y los programas necesarios para ponerse en marcha).","title":"Caracter\u00edsticas principales de Docker"},{"location":"013_Docker.html#arquitectura-docker","text":"Docker Engine (\"Motor\" del Gestor Docker) : el cual basado en la arquitectura de Cliente-Servidor (que pueden estar en la misma m\u00e1quina, o en distintas), y realizada por mediante una API de REST que utiliza HTTP . API REST : interfaz de programaci\u00f3n con un estilo de arquitectura software para sistemas hipermedia distribuidos como la World Wide Web . \"Daemon Docker\" (Servicio) : lleva a cabo Gesti\u00f3n y enlace de los componentes del gestor. Im\u00e1genes : Las im\u00e1genes son una especie de plantillas que contienen como m\u00ednimo todo el software que necesita la aplicaci\u00f3n para ponerse en marcha. est\u00e1n formadas por una colecci\u00f3n ordenada de: Sistemas Archivos ; Repositorios ; Comandos ; Par\u00e1metros ; Aplicaciones . Contenedores : son el conjunto de procesos que encapsulan e identifican a una Imagen. Pueden ser: Creado, inicializado, parado, vuelto a ejecutar y destruido. Registros son im\u00e1genes son guardadas en registros para: Almacenar o Distribuir. Se realiza en Docker Hub y pueden ser P\u00fablicos y Privados. Componentes de Docker. Note El componente b\u00e1sico de Docker es el Docker Engine , pero Docker ofrece tambi\u00e9n una serie de herramientas para administrar, distribuir e instalar contenedores: Docker Compose , Docker Swarm . Las im\u00e1genes se pueden crear a partir de otras im\u00e1genes m\u00e1s b\u00e1sicas incluyendo software adicional en forma de capas. Todos los contenedores creados a partir de una imagen contienen el mismo software, aunque en el momento de su creaci\u00f3n se pueden personalizar algunos detalles","title":"Arquitectura Docker"},{"location":"013_Docker.html#microservicios","text":"Uno de los objetivos principales de la configuraci\u00f3n e implantaci\u00f3n con Docker es es solucionar los problemas de: Errores de dependencias entre diferentes Sistemas Operativos de los trabajadores y m\u00e1quinas de puesta en marcha. Evitar la Elevada carga y capacidad de las M\u00e1quinas Virtuales. Caida de todos los servicios instalados de forma monol\u00edtica en los servidores. Tipos de despliegue: Monol\u00edtico \u2192 Todos los servicios en la misma m\u00e1quina. SOA (Service Oriented Architecture) \u2192 Diferentes M\u00e1quinas una con cada Servicio conectadas. MicroServicios \u2192Divisi\u00f3n m\u00e1s peque\u00f1a de los servicios. Momol\u00edtico Vs Microservicios.","title":"Microservicios"},{"location":"013_Docker.html#instalacion","text":"Para la Instalaci\u00f3n de Docker es recomendable seguir la documentaci\u00f3n oficial. Adem\u00e1s se recomienda Instalar m\u00e1quina Ubuntu Server \u00faltima versi\u00f3n e instalar Docker en ella. Docker for Mac: Instalaci\u00f3n Mac Docker for Windows: Instalaci\u00f3n Windows Docker for ubuntu: Instalaci\u00f3n Ubuntu Warning Docker empez\u00f3 estando disponible solamente para distribuciones GNU/Linux, pero desde junio de 2016 tambi\u00e9n est\u00e1 disponible como aplicaci\u00f3n nativa en Windows Server 2016 y Windows 10. Docker utiliza la virtualizaci\u00f3n ofrecida por el sistema operativo. En el caso de Windows 10, eso significa que para usar Docker de forma nativa hay que activar Hyper-V que, por desgracia, es incompatible con VirtualBox. Para poder utilizar Docker en Windows 7 o en Windows 10 sin Hyper-V , Docker ofrece desde agosto de 2015 Docker Toolbox , que realmente es una m\u00e1quina virtual (que se ejecuta en VirtualBox) que contiene Docker.","title":"Instalaci\u00f3n"},{"location":"013_Docker.html#principales-comandos","text":"A continuaci\u00f3n se muestran los comandos m\u00e1s utilizados: Comando Acci\u00f3n Comando Acci\u00f3n docker info obtener informaci\u00f3n relativa a docker docker start (docker container start) inicia la ejecuci\u00f3n docker run (docker container run) crea y ejecuta el contenedor docker rm (docker container eliminar) elimina el contenedor docker build crea una imagen docker cp (docker container copiar) docker ps muestra la lista de contenedores creados docker logs (docker container logs) muestra los errores docker inspect (docker container inspect) informaci\u00f3n detallada de los contenedores docker stats (docker container stats) muestra el estado docker stop (docker container stop) detiene la ejecuci\u00f3n del contenedor docker system prune limpiar todo el sistena de contenedores im\u00e1genes y volumenes Chuleta de Comandos Chuleta Docker.","title":"Principales Comandos"},{"location":"013_Docker.html#primer-contenedor","text":"A continuaci\u00f3n se muestra un ejemplo guiado de la creaci\u00f3n del contenedor \"Hello World\" Comprobaci\u00f3n que inicialmente no hay ning\u00fan contenedor creado (la opci\u00f3n -a hace que se muestren tambi\u00e9n los contenedores detenidos, sin ella se muestran s\u00f3lo los contenedor que est\u00e9n en marcha): sudo docker ps -a o tambi\u00e9n sudo docker container ls -a Compruebe que inicialmente tampoco disponemos de ninguna imagen: sudo docker image ls Note Docker crea los contenedores a partir de im\u00e1genes locales (ya descargadas), pero si al crear el contenedor no se dispone de la imagen local, Docker descarga la imagen de su repositorio. La orden m\u00e1s simple para crear un contenedor sigue esta estructura: sudo docker run IMAGEN Example sudo docker run hello-world Note Como no tenemos todav\u00eda la imagen en nuestro ordenador, Docker descarga la imagen, crea el contenedor y lo pone en marcha. En este caso, la aplicaci\u00f3n que contiene el contenedor hello-world simplemente escribe un mensaje de salida al arrancar e inmediatamente se detiene el contenedor. Si listamos de nuevo imagenes y contenedores, las veremos creadas. Cada contenedor tiene un identificador (ID) y un nombre distinto. Docker \"bautiza\" los contenedores con un \" nombre peculiar \", compuesto de un adjetivo y un apellido. Podemos crear tantos contenedores como queramos a partir de una imagen. Una vez la imagen est\u00e1 disponible localmente, Docker no necesita descargarla y el proceso de creaci\u00f3n del contenedor es inmediato (aunque en el caso de hello-world la descarga es r\u00e1pida, con im\u00e1genes m\u00e1s grandes la descarga inicial puede tardar un rato). Tip Normalmente se aconseja usar siempre la opci\u00f3n -d , que arranca el contenedor en segundo plano ( detached ) y permite seguir teniendo acceso a la shell (aunque con hello-world no es estrictamente necesario porque el contenedor hello-world se detiene autom\u00e1ticamente tras mostrar el mensaje). Al crear el contenedor hello-world con la opci\u00f3n -d no se muestra el mensaje, simplemente muestra el identificador completo del contenedor. Los contenedores se pueden destruir mediante el comando rm, haciendo referencia a ellos mediante su nombre o su id. No es necesario indicar el id completo , basta con escribir los primeros caracteres (de manera que no haya ambig\u00fcedades). Adem\u00e1s podemos dar nombre a los contenedores al crearlos: sudo docker run -d --name=hola-1 hello-world","title":"Primer Contenedor"},{"location":"013_Docker.html#volumenes","text":"Docker simplifica enormemente la creaci\u00f3n de contenedores, y eso lleva a tratar los contenedores como un elemento ef\u00edmero , que se crea cuando se necesita y que no importa que se destruya puesto que puede ser reconstruido una y otra vez a partir de su imagen. Warning Pero si la aplicaci\u00f3n o aplicaciones incluidas en el contenedor generan datos y esos datos se guardan en el propio contenedor, en el momento en que se destruyera el contenedor perder\u00edamos esos datos . El objetivo principal de los volumenes es no perder datos si borro el contenedor y mejorar rendimiento del Docker . Para conseguir la persistencia de los datos, se pueden emplear dos t\u00e9cnicas: Los directorios enlazados (bind) , en la que la informaci\u00f3n se guarda fuera de Docker, en la m\u00e1quina host (por ejemplo si lo ejecutamos en la m\u00e1quina virtual de Ubuntu o la m\u00e1quina f\u00edsica de Lliurex en clase). Los vol\u00famenes , en la que la informaci\u00f3n se guarda mediante Docker, pero en unos elementos llamados vol\u00famenes , independientes de las im\u00e1genes y los contenedores. Adem\u00e1s los volumens se pueden catalogar en dos tipos. Volu\u0301menes de Datos : es como si montar\u00e1 un disco en el contenedor y por defecto se realizan en un path temporal. Volu\u0301menes de Host : Mismo concepto pero indic\u00e1ndole el path. Tip Aconsejable utilizar la t\u00e9cnica de volumenes , ya que, La ventaja frente a los directorios enlazados es que pueden ser gestionados por Docker. Otro detalle importante es que el acceso al contenido de los vol\u00famenes s\u00f3lo se puede hacer a trav\u00e9s de alg\u00fan contenedor que utilice el volumen.","title":"Vol\u00famenes"},{"location":"013_Docker.html#ventajas-volumenes","text":"Los vol\u00famenes tienen varias ventajas sobre los directorios enlazados: Los vol\u00famenes son m\u00e1s f\u00e1ciles de respaldar o migrar que enlazar montajes. Puede administrar vol\u00famenes mediante los comandos de la CLI de Docker o la API de Docker. Los vol\u00famenes funcionan tanto en contenedores de Linux como de Windows. Los vol\u00famenes se pueden compartir de forma m\u00e1s segura entre varios contenedores. Los controladores de volumen le permiten almacenar vol\u00famenes en hosts remotos o proveedores en la nube, para cifrar el contenido de los vol\u00famenes o para agregar otras funciones. Los nuevos vol\u00famenes pueden tener su contenido precargado por un contenedor. Los vol\u00famenes en Docker Desktop tienen un rendimiento mucho mayor que los directorios enlazados de hosts de Mac y Windows. Note Adem\u00e1s, los vol\u00famenes suelen ser una mejor opci\u00f3n que los datos persistentes en la capa de escritura de un contenedor, porque un volumen no aumenta el tama\u00f1o de los contenedores que lo usan y el contenido del volumen existe fuera del ciclo de vida de un contenedor determinado. Gr\u00e1fico t\u00e9cnicas de persistencia de datos. Note Los vol\u00famenes son independientes de los contenedores, por lo que tambi\u00e9n podemos conservar los datos aunque se destruya el contenedor, reutilizarlos con otro contenedor, etc.","title":"Ventajas Vol\u00famenes"},{"location":"013_Docker.html#opciones","text":"Opciones: ` Docker volume (create|Is|inspect|rm)` para crear el volumen a la vez que creamos y ejecutamos un contenedor se utilzan las opciones v o --mount En general, --mount m\u00e1s expl\u00edcito y detallado. La mayor diferencia es que la sintaxis de -v combina todas las opciones juntas en un campo, mientras que la sintaxis --mount las separa. A continuaci\u00f3n se muestra una comparaci\u00f3n de la sintaxis de cada \"flag\". -v o --volume : consta de tres campos, separados por dos puntos ( :). Los campos deben estar en el orden correcto y el significado de cada campo no es inmediatamente obvio. En el caso de vol\u00famenes con nombre, el primer campo es el nombre del volumen y es \u00fanico en una m\u00e1quina host determinada. Para vol\u00famenes an\u00f3nimos, se omite el primer campo. El segundo campo es la ruta donde se monta el archivo o directorio en el contenedor. El tercer campo es opcional y es una lista de opciones separadas por comas, como ro (readonly). --mount : Consta de varios pares clave-valor, separados por comas (cada uno formado por una = dupla). La sintaxis de --mount es m\u00e1s detallada que -v o --volume ; adem\u00e1s el orden de las claves no es significativo, por lo tanto el valor de las \"flags\" son m\u00e1s f\u00e1ciles de entender. Valores de las duplas: type : puede ser bind , volume o tmpfs . source : Para vol\u00famenes con nombre, este es el nombre del volumen. Para vol\u00famenes an\u00f3nimos, este campo se omite. Puede especificarse como source o src. destination : toma como valor de la ruta en el archivo o directorio est\u00e1 montado en el contenedor. Puede ser especificado como destination, dst o target . readonly : si est\u00e1 presente, hace que el montaje de enlace se monte en el contenedor como de solo lectura. Puede especificarse como readonly o ro . volume-opt se puede especificar m\u00e1s de una vez, toma un par clave-valor que consta del nombre de la opci\u00f3n y su valor. Ejemplo: volume-opt=type=nfs Note Todas las opciones de vol\u00famenes est\u00e1n disponibles para los indicadores --mount y -v , por que a la hora de elegir uno u otro depende del t\u00e9cnico para su facilidad de configuraci\u00f3n donde por su sintaxis a priori ser\u00eda mejor --mount .","title":"Opciones"},{"location":"013_Docker.html#ejemplo","text":"A continuaci\u00f3n se muestra un ejemplo de creaci\u00f3n del servidor web NGINX. Example docker run -d \\ --name nginx1 -p 8080:80 \\ --mount type=volume,source=myvol1,target=/usr/share/nginx/html \\ nginx:latest Note Si en lugar de la opci\u00f3n -p 8080:80 se utiliza la opci\u00f3n -P hace que Docker asigne de forma aleatoria un puerto de la m\u00e1quina virtual al puerto asignado a Nginx en el contenedor. Si se creara una p\u00e1gina de incio del apache diferente a la de defecto podr\u00edamos copiarla en el volumen y esta cambiar\u00eda: nano index.html Nueva p\u00e1gina de inicio: <!DOCTYPE html> <html lang=\"es\"> <head> <meta charset=\"utf-8\"> <title>Apache en Docker</title> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> </head> <body> <h1>\u00a1Hola de nuevo, Mundo!</h1> </body> </html> Para cambiar la p\u00e1gina de inicio del apache se debe copiar dentro del volumen creado. docker cp index.html nginx1:/usr/share/nginx/html Si accedemos al servidor apache aparecer\u00e1 la nueva p\u00e1gina. Warning Si aparece el error forbiden 403, es debido a permisos del index.html, debemos entrar en container y cambiar los permisos. docker exec -it nginx1 /bin/bash cd /usr/share/nginx/html chown -R root:root index.html Adem\u00e1s podemos crear un nuevo contenedor con este volumen: docker run -d \\ --name nginx2 -p 8080:80 \\ --mount type=volume,source=myvol1,target=/usr/share/nginx/html \\ nginx:latest Se comprueba que el nuevo contenedor muestra la nueva p\u00e1gina index.html Warning Si se intenta borrar el volumen del ejemplo anterior mientras los contenedores est\u00e1n en marcha, Docker muestra un mensaje de error que indica los contenedores afectados .","title":"Ejemplo"},{"location":"013_Docker.html#redes","text":"Cuando se crean diferentes servicios o aplicaciones en contenedores distintos (siguiendo la premisa de microservicios), estos no estas conectados entre s\u00ed, en el caso que necesitar\u00e1n conexi\u00f3n se utilizar\u00edan \"redes Docker\". Este mecanismo funciona de manera distinta seg\u00fan la red docker donde est\u00e9n conectados los contenedores. Representaci\u00f3n Redes Docker.","title":"Redes"},{"location":"013_Docker.html#opciones-y-tipos","text":"Opciones: docker network (create | Is | inspect | rm) A continuaci\u00f3n se introducen los distintos tipos de redes que nos ofrece docker: Bridge \u2192 por defecto. Todos los contenedores est\u00e1n en la misma red, separada del Host. Host \u2192 Cuando quiero que los contenedores est\u00e9n en mi misma red. None \u2192 contenedores aislados. Escenario de ejemplo de una Red Docker. Warning El uso de contenedores conectados a la red por defecto no est\u00e1 recomendado en entornos de producci\u00f3n. se podr\u00edan enlazar contenedores con el bridge por defecto con el flag --link . Tip La opci\u00f3n recomendable es definir una red bridge y crear los contenedores conectados a dicha red. El mayor problema es que ambos contenedores compartir\u00edan las variables de entorno y esto puede causar problemas de desarrollo. Por ejemplo: docker network create mired Se crean los contenedores conectados a dicha red: docker run -d --name servidor_mysql --network mired \\ -e MYSQL_DATABASE=bd_wp -e MYSQL_USER=user_wp -e MYSQL_PASSWORD=asdasd \\ -e MYSQL_ROOT_PASSWORD=asdasd mariadb docker run -d --name servidor --network mired javierhernandez/aplicacionweb:v1 Note En este caso no se comparten las variables de entorno.","title":"Opciones y tipos"},{"location":"013_Docker.html#tools","text":"Existen dos opciones destacables en Docker para agilizar el despliegue de Imagenes y contenedores: Dockerfile y Docker-compose Dockerfile : es un archivo de texto plano que contiene una serie de instrucciones necesarias para crear una imagen que, posteriormente, se convertir\u00e1 en una sola aplicaci\u00f3n utilizada para un determinado prop\u00f3sito. Summary Im\u00e1genes\u2192 docker build \u2192 docker_file Docker-compose : es una herramienta que permite simplificar el uso de Docker. A partir de archivos YAML es mas sencillo crear contendores, conectarlos, habilitar puertos, volumenes, etc. Summary Contenedores\u2192 docker run \u2192 docker_compose.yml","title":"Tools"},{"location":"013_Docker.html#dockerfile","text":"Las instrucciones principales que pueden utilizarse en un Dockerfile son: Ver tambi\u00e9n: Best practices for writing Dockerfiles Example A continuaci\u00f3n se muestra un ejemplo para la realizaci\u00f3n de la pr\u00e1ctica de ampliaci\u00f3n extraido de Apache oficial de docker . Primer paso : generar imagen con un Dockerfile . Se crea el archivo de texto dockerfile. mkdir docker touch dockerfile nano dockerfile Ejemplo edici\u00f3n Dockerfile. # syntax=docker/dockerfile:1 FROM nginx:alpine RUN apk update COPY index.html/ /usr/share/nginx/html/ Nota Se puede probar a introducir el volumen en el docker file: VOLUME /myvol1 Se crea la imagen y el contenedor. docker build -t franciscojav1981/my-nginx . docker run -dit --name my-nginx -p 8081:80 franciscojav1981/my-nginx Warning Mucho cuidado con el \u00faltimo punto de la instucci\u00f3n de build, tiene un espacio antes. Es el \u00faltimo argumento (y el \u00fanico imprescindible) es el nombre del archivo Dockerfile que tiene que utilizar para generar la imagen. Como en este caso se encuentra en el mismo directorio y tiene el nombre predeterminado Dockerfile, se puede escribir simplemente punto ( . ). Para indicar el nombre de la imagen se debe a\u00f1adir la opci\u00f3n -t . El nombre de la imagen debe seguir el patr\u00f3n nombre-de-usuario/nombre-de-imagen . Si la imagen s\u00f3lo se va a utilizar localmente, el nombre de usuario y de la imagen pueden ser cualquier palabra. Segundo paso : subir imagen al Docker Hub. Se debe generar una cuenta de Docker Hub con la cuenta corporativa de Office 365: Sign Up Con el comando docker login , se realiza el acceso a la plataforma desde el terminal, introduciendo usuario y contrase\u00f1a. docker login Con el comando docker push , se realiza el \"Upload\" de la imagen. docker push franciscojav1981/my-nginx Por \u00faltimo Se debe comprobar accediendo a la platadorma de Docker Hub.","title":"Dockerfile"},{"location":"013_Docker.html#docker-compose","text":"Docker-compose es otro proyecto open source que permite definir aplicaciones muilti-contenedor de una manera sencilla y declarativa. Es una alternativa m\u00e1s c\u00f3moda al uso de los comandos docker run y docker build, que resultan un tanto tediosos cuando trabajamos con aplicaciones de varios componentes. Se define un fichero docker-compose.yml que se puede observar en el ejemplo realizado en la pr\u00e1ctica en el \u00faltimo apartado. Example A continuaci\u00f3n se muestra un ejemplo para la realizaci\u00f3n de la pr\u00e1ctica de ampliaci\u00f3n: Instalaci\u00f3n Wordpress Primer Paso : instalaci\u00f3n de Docker-compose. Install Docker Compose Segundo paso : Crear directorio del proyecto y dentro el archivo yaml . mkdir my_wordpress touch docker-compose.yml nano docker-compose.yml 3. Tercer paso : se edita el yaml . version : \"3.9\" services : db : image : mysql:5.7 volumes : - db_data:/var/lib/mysql restart : always environment : MYSQL_ROOT_PASSWORD : somewordpress MYSQL_DATABASE : wordpress MYSQL_USER : wordpress MYSQL_PASSWORD : wordpress wordpress : depends_on : - db image : wordpress:latest volumes : - wordpress_data:/var/www/html ports : - \"8000:80\" restart : always environment : WORDPRESS_DB_HOST : db:3306 WORDPRESS_DB_USER : wordpress WORDPRESS_DB_PASSWORD : wordpress WORDPRESS_DB_NAME : wordpress volumes : db_data : {} wordpress_data : {} Cuarto paso : en la carpeta creada del proyecto se ejecuta el comando de docker-compose up -d docker-compose up -d Por \u00faltimo Se comprueba que se ha creado el contenedor. Cuidado.","title":"Docker-compose"},{"location":"021_Introduccion_SD.html","text":"Administraci\u00f3n de servicios de directorio \u00b6 Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 3 sesiones (2h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Administra el servicio de directorio interpretando especificaciones e integr\u00e1ndolo en una red. Se han identificado la funci\u00f3n, los elementos y las estructuras l\u00f3gicas del servicio de directorio. Se ha determinado y creado el esquema del servicio de directorio. Se ha realizado la instalaci\u00f3n del servicio de directorio en el servidor. Se ha realizado la configuraci\u00f3n y personalizaci\u00f3n del servicio de directorio. Se ha integrado el servicio de directorio con otros servicios. Se han aplicado filtros de b\u00fasqueda en el servicio de directorio. Se ha utilizado el servicio de directorio como mecanismo de acreditaci\u00f3n centralizada de los usuarios en una red. Se ha realizado la configuraci\u00f3n del cliente para su integraci\u00f3n en el servicio de directorio. Se han utilizado herramientas gr\u00e1ficas y comandos para la administraci\u00f3n del servicio de directorio. Se ha documentado la estructura e implantaci\u00f3n del servicio de directorio. Introducci\u00f3n \u00b6 La organizaci\u00f3n de una red de trabajo empresarial supone un reto organizativo que el administrador del sistema debe afrontar con garantias de \u00e9xito. Para ello dispone de herramientas organizativas como los servicios de directorio, tanto SAMBA como Active Directory , ambas basadas en el protocolo LDAP , las cuales ofrecen una amplia gama de herramientas que facilitan la organizaci\u00f3n de recursos de una red. Note Si no se concibe un ordenador sin sistema operativo que lo administre, tampoco debe existir una red de cierta entidad sin sistema operativo de red que la gestione. En definitiva, un sistema operativo de red (SOR en lo sucesivo) , est\u00e1 dise\u00f1ado para administrar redes y todos los elementos que la componen. Sus tareas m\u00e1s importantes son: La gesti\u00f3n centralizada de los recursos. Ofrecer servicios a los clientes. Proporcionar acceso seguro a esos recursos y monitorizar todo lo que pasa en la red. Arquitectura de Redes \u00b6 Los sistemas operativos en red pueden catalogarse en distribuidos y centralizados. Los primeros se componen de un software que controla todos los equipos inform\u00e1ticos de foma distribuido en modo \"cluster\" . Un ejemplo es el SO llamado Amoeba de A.S.Tanenbaum . Se utilizan en despliegues espec\u00edficos que no competen en este m\u00f3dulo. por lo tanto a continuaci\u00f3n se desarrollaran los centralizados. Estructura Red plana \u00b6 Antes del desarrollo de las herramientas de los servicios de red, se comenz\u00f3 a desarrollar la Estructura trabajo en grupo , la cual trataba la red en modo plano. Una red plana, entre iguales o punto a punto , es aquella en la ninguno de los equipos realiza tareas de administraci\u00f3n de la red, sino tan s\u00f3lo de s\u00ed mismo. No existe un equipo que haga las veces de administrador, por lo que en realidad, todos los clientes se convierten en administradores de los recursos que ofrecen a la red. Example Si un cliente decide compartir un recuso, \u00e9ste estar\u00e1 disponible para todos los miembros de la red sin distinci\u00f3n. Si es necesario limitar el acceso a un subconjunto de usuarios, habr\u00e1 que establecer una contrase\u00f1a y hac\u00e9rsela llegar a trav\u00e9s de un medio seguro. Introducci\u00f3n de un equipo a un grupo de trabajo Warning Si cada uno de los usuarios empieza a compartir recursos sin control, su localizaci\u00f3n puede ser una tarea complicada, ya que los usuarios de la red deben conocer en todo momento su distribuci\u00f3n y configuraci\u00f3n. La localizaci\u00f3n puede suponer un grave problema. Microsoft introdujo en sus sistemas operativos la posibilidad de crear grupos de trabajo que divid\u00edan la red en subconjuntos. De este modo, si se sabe a qu\u00e9 grupo pertenece el equipo que comparte un recurso ser\u00e1 m\u00e1s sencillo su localizaci\u00f3n. Estas divisiones se realizaban por funciones, por ubicaci\u00f3n f\u00edsica o por cualquier otro criterio de la empresa. Warning Resultaba m\u00e1s sencillo localizar recursos, pero no solucionaban el problema de acceso . Este sistema de organizaci\u00f3n de red presenta numerosos problemas de seguridad. Estructura cliente-servidor \u00b6 Se trata de un modelo de aplicaci\u00f3n centralizada en el que las tareas se dividen entre los proveedores de recursos o servicios. A estas m\u00e1quinas se las conoce como servidores y a los equipos que demandan estos servicios se les conoce como clientes . Esquema de red cliente servidor En este tipo de redes: Los clientes est\u00e1n conectados a un servidor en el que se centralizan los recursos y servicios con que se cuenta la red. El servidor es el encargado de ponerlos a disposici\u00f3n de los clientes cada vez que estos son solicitados. Por lo tanto, todas las gestiones que se realizan se concentran en el servidor, lo que facilita la localizaci\u00f3n de los recurso de una forma sencilla. Warning Sin embargo, agregar un segundo servidor puede complicar las cosas de manera significativa. El problema surge porque cada servidor individual mantiene su propia lista de usuarios y recursos. El servidor A ofrece alojamiento a aplicaciones, el servidor B al correo electr\u00f3nico y las aplicaciones de contabilidad y la base de datos se encuentran en el servidor C . Red cliente-servidor con varios servidores. Los usuarios que requieren acceso a la base de datos y utilizar las aplicaciones, necesitan una cuenta en dos se los tres servidores. Cada una de esas cuentas de usuarios debe ser creada y mantenida de manera separada. Es f\u00e1cil para los servidores perder sincron\u00eda cuando deben ser actualizados manualmente. Note Estas y otras cuestiones ser\u00e1n resueltas con el siguiente modo de organizaci\u00f3n de red. Servicios de directorio \u00b6 los servicios de directorios , son un conjunto de aplicaciones que guardan y administran toda la informaci\u00f3n sobre los elementos de una red. Cada recurso de la red se considera como un objeto , donde su informaci\u00f3n se almacena como atributos . Para la gesti\u00f3n de esta informaci\u00f3n, el servicio de directorio establece una serie de permisos de acceso y condiciones de seguridad que la salvaguardan esta informaci\u00f3n. Ofrecen una infraestructura para localizar, manejar, administrar, y organizar los componentes y recursos comunes de una red. Note Los recursos pueden ser: vol\u00famenes, carpetas, archivos, impresoras, usuarios, grupos, dispositivos, n\u00fameros de tel\u00e9fono y un largo etc\u00e9tera. Los servicios de directorios contienen diferentes objetos relacionados entre s\u00ed, y que ser\u00e1 conveniente familiarizarse con ellos: Directorio , es un repositorio \u00fanico para la informaci\u00f3n relativa a los objetos de una organizaci\u00f3n. Dominio , es una colecci\u00f3n de objetos dentro de un directorio. Objeto , cualquiera de los elementos que forman parte del directorio. Pueden ser recursos, usuarios, equipos, relaciones de confianza, servidores, unidades organizativas entre otros. En general todos estos objetos se clasifican en tres categor\u00edas: usuarios , identificados a trav\u00e9s del binomio nombre/contrase\u00f1a y que pueden organizarse en grupos. recursos , elementos que los usuarios pueden usar para el correcto desarrollo de su actividad. servicios , que son funciones a los que el usuario tienen acceso como el correo electr\u00f3nico , copias de seguridad en la nube , conexi\u00f3n Internet entre otros . Unidad organizativa , es un contendedor de objetos que permite organizarlos en subconjuntos de forma jer\u00e1rquica. Facilita la organizaci\u00f3n de los dominios. Grupo , conjunto de objetos usuario. Al igual que las unidades organizativas, facilitan la organizaci\u00f3n y administraci\u00f3n de los objetos, los grupos lo hacen con objetos tipo usuario. Controlador de dominio , equipo que contiene la base de datos de objetos para un determinado dominio, incluida la informaci\u00f3n de seguridad y la responsabilidad de la autenticaci\u00f3n de objetos de su \u00e1mbito de gobierno. Cat\u00e1logo global , base de datos con la informaci\u00f3n de todos los objetos que contiene el directorio. Esta informaci\u00f3n habitualmente se divide entre los controladores de dominio siendo \u00e9stos responsables del mantenimiento de su parte de esta informaci\u00f3n. Maestro de operaciones , existen un conjunto de operaciones que deben estar centralizadas para mantener la consistencia del sistema. El equipo encargado de esas operaciones obtiene este rol espec\u00edfico. Seg\u00fan el caso puede ser un equipo independiente que controle estas operaciones o asignar estas tareas a un equipo existente. \u00c1rbol , un conjunto de dominios dependientes de una ra\u00edz com\u00fan y que tienen una estructura jer\u00e1rquica. Se caracterizan por tener un espacio de nombres com\u00fan (un servidor DNS propio). El objetivo de esta fragmentaci\u00f3n de la estructura es replicar s\u00f3lo la informaci\u00f3n necesaria y disminuir el tr\u00e1fico de red. Bosque , se trata del mayor contenedor l\u00f3gico dentro del directorio, conteniendo a todos los \u00e1rboles dentro de su \u00e1mbito. Cada uno de estos contenedores posee su propio espacio de nombres y una forma de relacionarse con el resto de bosques. Esquema , se refiere a la estructura de los objetos que forman la base de datos. Usa la t\u00e9cnica clase/objeto para definir la estructura de un objeto. Si se crean dos objetos usuarios, ambos tendr\u00e1n los mismos atributos (estructura), pero diferentes valores de atributos. Sitio , conjunto de objetos equipo que se encuentran relacionados de una forma l\u00f3gica, geogr\u00e1fica o t\u00e9cnica particular y que necesitan un subconjunto de normas diferentes al resto. Relaciones de confianza , son un m\u00e9todo de comunicaci\u00f3n segura entre dominios, \u00e1rboles y bosques, que permiten a los usuarios autentificarse en otra parte del directorio a la que no pertenece. Note Para nombrar a todos estos objetos que componen la red, los servicios de directorio definen un espacio de nombres un\u00edvoco, e identifican a cada uno de estos objetos con un nombre \u00fanico en todo el directorio. La tecnolog\u00eda utilizada para crear este espacio de nombres es la DNS (Domain Name Server) , y su funcionamiento es similar al de Internet. Cada uno de los objetos del directorio posee un DN (Distinguished Name) que lo identifica de forma un\u00edvoca del resto de elementos del directorio. Ventajas \u00b6 los servicios de directorio, ofrecen una capa de abstracci\u00f3n para facilitar el acceso a los objetos. Se debe indicar una \u00fanica ubicaci\u00f3n en donde se dirigir\u00e1n las peticiones de informaci\u00f3n. No importa si la informaci\u00f3n solicitada se encuentra o no en ese emplazamiento. Autonom\u00eda , Es posible que toda la informaci\u00f3n no est\u00e9 contenida en un \u00fanico equipo por cuestiones de rendimiento, escalabilidad o idiosincrasia del sistemas inform\u00e1tico. En estos casos crear un subconjunto de la informaci\u00f3n contenida en los servicios de directorio parece una buena opci\u00f3n y dotarlos de las herramientas necesarias para su gesti\u00f3n aut\u00f3noma. Si se permite el s\u00edmil, es el Google del sistema inform\u00e1tico que se gestiona. Servicios de directorio destacables \u00b6 Active Directory , ideado por Microsoft e implementado desde su versi\u00f3n Microsoft Windows 2000 que usaba tecnolog\u00eda propietaria, para m\u00e1s tarde adaptar el protocolo LDAP a su servicio. OpenLDAP , recibe el nombre del protocolo hom\u00f3nimo que gestiona el intercambio de informaci\u00f3n. Es uno de los m\u00e1s usados en sistemas basados en GNU/Linux . SambaLDAP , un servicio compuesto por un conjunto de protocolos ( OpenLDAP , Kerberos y Samba ) que permite la f\u00e1cil coexistencia de entre sistemas operativos diferentes. Otros: Novell Directory Services , Red Hat Directory Server o Apache Directory Server . Note En resumen , un servicio de directorio ofrece toda la informaci\u00f3n de los recursos de la red a trav\u00e9s de una \u00fanica ubicaci\u00f3n. Para ello convierte cada recurso en un objeto y almacena su informaci\u00f3n en una base de datos jer\u00e1rquica y, opcionalmente, distribuida. La gesti\u00f3n de estos datos se realiza a trav\u00e9s de un protocolo determinado por la versi\u00f3n del servicio de directorio escogido.","title":"2.1- Introducci\u00f3n de servicios de directorio"},{"location":"021_Introduccion_SD.html#administracion-de-servicios-de-directorio","text":"Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 3 sesiones (2h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Administra el servicio de directorio interpretando especificaciones e integr\u00e1ndolo en una red. Se han identificado la funci\u00f3n, los elementos y las estructuras l\u00f3gicas del servicio de directorio. Se ha determinado y creado el esquema del servicio de directorio. Se ha realizado la instalaci\u00f3n del servicio de directorio en el servidor. Se ha realizado la configuraci\u00f3n y personalizaci\u00f3n del servicio de directorio. Se ha integrado el servicio de directorio con otros servicios. Se han aplicado filtros de b\u00fasqueda en el servicio de directorio. Se ha utilizado el servicio de directorio como mecanismo de acreditaci\u00f3n centralizada de los usuarios en una red. Se ha realizado la configuraci\u00f3n del cliente para su integraci\u00f3n en el servicio de directorio. Se han utilizado herramientas gr\u00e1ficas y comandos para la administraci\u00f3n del servicio de directorio. Se ha documentado la estructura e implantaci\u00f3n del servicio de directorio.","title":"Administraci\u00f3n de servicios de directorio"},{"location":"021_Introduccion_SD.html#introduccion","text":"La organizaci\u00f3n de una red de trabajo empresarial supone un reto organizativo que el administrador del sistema debe afrontar con garantias de \u00e9xito. Para ello dispone de herramientas organizativas como los servicios de directorio, tanto SAMBA como Active Directory , ambas basadas en el protocolo LDAP , las cuales ofrecen una amplia gama de herramientas que facilitan la organizaci\u00f3n de recursos de una red. Note Si no se concibe un ordenador sin sistema operativo que lo administre, tampoco debe existir una red de cierta entidad sin sistema operativo de red que la gestione. En definitiva, un sistema operativo de red (SOR en lo sucesivo) , est\u00e1 dise\u00f1ado para administrar redes y todos los elementos que la componen. Sus tareas m\u00e1s importantes son: La gesti\u00f3n centralizada de los recursos. Ofrecer servicios a los clientes. Proporcionar acceso seguro a esos recursos y monitorizar todo lo que pasa en la red.","title":"Introducci\u00f3n"},{"location":"021_Introduccion_SD.html#arquitectura-de-redes","text":"Los sistemas operativos en red pueden catalogarse en distribuidos y centralizados. Los primeros se componen de un software que controla todos los equipos inform\u00e1ticos de foma distribuido en modo \"cluster\" . Un ejemplo es el SO llamado Amoeba de A.S.Tanenbaum . Se utilizan en despliegues espec\u00edficos que no competen en este m\u00f3dulo. por lo tanto a continuaci\u00f3n se desarrollaran los centralizados.","title":"Arquitectura de Redes"},{"location":"021_Introduccion_SD.html#estructura-red-plana","text":"Antes del desarrollo de las herramientas de los servicios de red, se comenz\u00f3 a desarrollar la Estructura trabajo en grupo , la cual trataba la red en modo plano. Una red plana, entre iguales o punto a punto , es aquella en la ninguno de los equipos realiza tareas de administraci\u00f3n de la red, sino tan s\u00f3lo de s\u00ed mismo. No existe un equipo que haga las veces de administrador, por lo que en realidad, todos los clientes se convierten en administradores de los recursos que ofrecen a la red. Example Si un cliente decide compartir un recuso, \u00e9ste estar\u00e1 disponible para todos los miembros de la red sin distinci\u00f3n. Si es necesario limitar el acceso a un subconjunto de usuarios, habr\u00e1 que establecer una contrase\u00f1a y hac\u00e9rsela llegar a trav\u00e9s de un medio seguro. Introducci\u00f3n de un equipo a un grupo de trabajo Warning Si cada uno de los usuarios empieza a compartir recursos sin control, su localizaci\u00f3n puede ser una tarea complicada, ya que los usuarios de la red deben conocer en todo momento su distribuci\u00f3n y configuraci\u00f3n. La localizaci\u00f3n puede suponer un grave problema. Microsoft introdujo en sus sistemas operativos la posibilidad de crear grupos de trabajo que divid\u00edan la red en subconjuntos. De este modo, si se sabe a qu\u00e9 grupo pertenece el equipo que comparte un recurso ser\u00e1 m\u00e1s sencillo su localizaci\u00f3n. Estas divisiones se realizaban por funciones, por ubicaci\u00f3n f\u00edsica o por cualquier otro criterio de la empresa. Warning Resultaba m\u00e1s sencillo localizar recursos, pero no solucionaban el problema de acceso . Este sistema de organizaci\u00f3n de red presenta numerosos problemas de seguridad.","title":"Estructura Red plana"},{"location":"021_Introduccion_SD.html#estructura-cliente-servidor","text":"Se trata de un modelo de aplicaci\u00f3n centralizada en el que las tareas se dividen entre los proveedores de recursos o servicios. A estas m\u00e1quinas se las conoce como servidores y a los equipos que demandan estos servicios se les conoce como clientes . Esquema de red cliente servidor En este tipo de redes: Los clientes est\u00e1n conectados a un servidor en el que se centralizan los recursos y servicios con que se cuenta la red. El servidor es el encargado de ponerlos a disposici\u00f3n de los clientes cada vez que estos son solicitados. Por lo tanto, todas las gestiones que se realizan se concentran en el servidor, lo que facilita la localizaci\u00f3n de los recurso de una forma sencilla. Warning Sin embargo, agregar un segundo servidor puede complicar las cosas de manera significativa. El problema surge porque cada servidor individual mantiene su propia lista de usuarios y recursos. El servidor A ofrece alojamiento a aplicaciones, el servidor B al correo electr\u00f3nico y las aplicaciones de contabilidad y la base de datos se encuentran en el servidor C . Red cliente-servidor con varios servidores. Los usuarios que requieren acceso a la base de datos y utilizar las aplicaciones, necesitan una cuenta en dos se los tres servidores. Cada una de esas cuentas de usuarios debe ser creada y mantenida de manera separada. Es f\u00e1cil para los servidores perder sincron\u00eda cuando deben ser actualizados manualmente. Note Estas y otras cuestiones ser\u00e1n resueltas con el siguiente modo de organizaci\u00f3n de red.","title":"Estructura cliente-servidor"},{"location":"021_Introduccion_SD.html#servicios-de-directorio","text":"los servicios de directorios , son un conjunto de aplicaciones que guardan y administran toda la informaci\u00f3n sobre los elementos de una red. Cada recurso de la red se considera como un objeto , donde su informaci\u00f3n se almacena como atributos . Para la gesti\u00f3n de esta informaci\u00f3n, el servicio de directorio establece una serie de permisos de acceso y condiciones de seguridad que la salvaguardan esta informaci\u00f3n. Ofrecen una infraestructura para localizar, manejar, administrar, y organizar los componentes y recursos comunes de una red. Note Los recursos pueden ser: vol\u00famenes, carpetas, archivos, impresoras, usuarios, grupos, dispositivos, n\u00fameros de tel\u00e9fono y un largo etc\u00e9tera. Los servicios de directorios contienen diferentes objetos relacionados entre s\u00ed, y que ser\u00e1 conveniente familiarizarse con ellos: Directorio , es un repositorio \u00fanico para la informaci\u00f3n relativa a los objetos de una organizaci\u00f3n. Dominio , es una colecci\u00f3n de objetos dentro de un directorio. Objeto , cualquiera de los elementos que forman parte del directorio. Pueden ser recursos, usuarios, equipos, relaciones de confianza, servidores, unidades organizativas entre otros. En general todos estos objetos se clasifican en tres categor\u00edas: usuarios , identificados a trav\u00e9s del binomio nombre/contrase\u00f1a y que pueden organizarse en grupos. recursos , elementos que los usuarios pueden usar para el correcto desarrollo de su actividad. servicios , que son funciones a los que el usuario tienen acceso como el correo electr\u00f3nico , copias de seguridad en la nube , conexi\u00f3n Internet entre otros . Unidad organizativa , es un contendedor de objetos que permite organizarlos en subconjuntos de forma jer\u00e1rquica. Facilita la organizaci\u00f3n de los dominios. Grupo , conjunto de objetos usuario. Al igual que las unidades organizativas, facilitan la organizaci\u00f3n y administraci\u00f3n de los objetos, los grupos lo hacen con objetos tipo usuario. Controlador de dominio , equipo que contiene la base de datos de objetos para un determinado dominio, incluida la informaci\u00f3n de seguridad y la responsabilidad de la autenticaci\u00f3n de objetos de su \u00e1mbito de gobierno. Cat\u00e1logo global , base de datos con la informaci\u00f3n de todos los objetos que contiene el directorio. Esta informaci\u00f3n habitualmente se divide entre los controladores de dominio siendo \u00e9stos responsables del mantenimiento de su parte de esta informaci\u00f3n. Maestro de operaciones , existen un conjunto de operaciones que deben estar centralizadas para mantener la consistencia del sistema. El equipo encargado de esas operaciones obtiene este rol espec\u00edfico. Seg\u00fan el caso puede ser un equipo independiente que controle estas operaciones o asignar estas tareas a un equipo existente. \u00c1rbol , un conjunto de dominios dependientes de una ra\u00edz com\u00fan y que tienen una estructura jer\u00e1rquica. Se caracterizan por tener un espacio de nombres com\u00fan (un servidor DNS propio). El objetivo de esta fragmentaci\u00f3n de la estructura es replicar s\u00f3lo la informaci\u00f3n necesaria y disminuir el tr\u00e1fico de red. Bosque , se trata del mayor contenedor l\u00f3gico dentro del directorio, conteniendo a todos los \u00e1rboles dentro de su \u00e1mbito. Cada uno de estos contenedores posee su propio espacio de nombres y una forma de relacionarse con el resto de bosques. Esquema , se refiere a la estructura de los objetos que forman la base de datos. Usa la t\u00e9cnica clase/objeto para definir la estructura de un objeto. Si se crean dos objetos usuarios, ambos tendr\u00e1n los mismos atributos (estructura), pero diferentes valores de atributos. Sitio , conjunto de objetos equipo que se encuentran relacionados de una forma l\u00f3gica, geogr\u00e1fica o t\u00e9cnica particular y que necesitan un subconjunto de normas diferentes al resto. Relaciones de confianza , son un m\u00e9todo de comunicaci\u00f3n segura entre dominios, \u00e1rboles y bosques, que permiten a los usuarios autentificarse en otra parte del directorio a la que no pertenece. Note Para nombrar a todos estos objetos que componen la red, los servicios de directorio definen un espacio de nombres un\u00edvoco, e identifican a cada uno de estos objetos con un nombre \u00fanico en todo el directorio. La tecnolog\u00eda utilizada para crear este espacio de nombres es la DNS (Domain Name Server) , y su funcionamiento es similar al de Internet. Cada uno de los objetos del directorio posee un DN (Distinguished Name) que lo identifica de forma un\u00edvoca del resto de elementos del directorio.","title":"Servicios de directorio"},{"location":"021_Introduccion_SD.html#ventajas","text":"los servicios de directorio, ofrecen una capa de abstracci\u00f3n para facilitar el acceso a los objetos. Se debe indicar una \u00fanica ubicaci\u00f3n en donde se dirigir\u00e1n las peticiones de informaci\u00f3n. No importa si la informaci\u00f3n solicitada se encuentra o no en ese emplazamiento. Autonom\u00eda , Es posible que toda la informaci\u00f3n no est\u00e9 contenida en un \u00fanico equipo por cuestiones de rendimiento, escalabilidad o idiosincrasia del sistemas inform\u00e1tico. En estos casos crear un subconjunto de la informaci\u00f3n contenida en los servicios de directorio parece una buena opci\u00f3n y dotarlos de las herramientas necesarias para su gesti\u00f3n aut\u00f3noma. Si se permite el s\u00edmil, es el Google del sistema inform\u00e1tico que se gestiona.","title":"Ventajas"},{"location":"021_Introduccion_SD.html#servicios-de-directorio-destacables","text":"Active Directory , ideado por Microsoft e implementado desde su versi\u00f3n Microsoft Windows 2000 que usaba tecnolog\u00eda propietaria, para m\u00e1s tarde adaptar el protocolo LDAP a su servicio. OpenLDAP , recibe el nombre del protocolo hom\u00f3nimo que gestiona el intercambio de informaci\u00f3n. Es uno de los m\u00e1s usados en sistemas basados en GNU/Linux . SambaLDAP , un servicio compuesto por un conjunto de protocolos ( OpenLDAP , Kerberos y Samba ) que permite la f\u00e1cil coexistencia de entre sistemas operativos diferentes. Otros: Novell Directory Services , Red Hat Directory Server o Apache Directory Server . Note En resumen , un servicio de directorio ofrece toda la informaci\u00f3n de los recursos de la red a trav\u00e9s de una \u00fanica ubicaci\u00f3n. Para ello convierte cada recurso en un objeto y almacena su informaci\u00f3n en una base de datos jer\u00e1rquica y, opcionalmente, distribuida. La gesti\u00f3n de estos datos se realiza a trav\u00e9s de un protocolo determinado por la versi\u00f3n del servicio de directorio escogido.","title":"Servicios de directorio destacables"},{"location":"022_LDAP.html","text":"LDAP \u00b6 El LDAP (Lightweight Directory Access Protocol) es un protocolo a nivel de aplicaci\u00f3n que da acceso a un servicio de directorio ordenado y distribuido para la b\u00fasqueda de la informaci\u00f3n de un entrono de red. En la d\u00e9cada de los 80, la especificaci\u00f3n de directorio X.500 vio la luz. El protocolo que daba acceso a la informaci\u00f3n contenida en \u00e9l, fue DAP (Directory Access Protocol) y estaba basado en la pila de protocolos OSI (Open Systems Interconexion) . Gracias al auge de Internet, la pila de protocolos TCP/IP cobraron especial protagonismo y su uso fue generalizado en cualquier infraestructura de red, incluidas las LAN. Ante esta situaci\u00f3n, en 1993 se implement\u00f3 el protocolo LDAP que utilizaba la pila de protocolos TCP/IP para el acceso a la informaci\u00f3n contenido en un servicio de directorio. El funcionamiento de LDAP es relativamente simple : un cliente se inicia una sesi\u00f3n en un servidor LDAP solicitando alguna informaci\u00f3n. Esquema de funcionamiento del protocolo LDAP Conclusi\u00f3n LDAP, es un protocolo que ofrece el acceso a un servicio de directorio implementado sobre un entorno de red, con el objeto de acceder a una determinada informaci\u00f3n. Puede ejecutarse sobre TCP/IP o sobre cualquier otro servicio de transferencia orientado a la conexi\u00f3n. Podemos considerarlo como un sistema de almacenamiento de red al que se pueden realizar consultas. Antes de trabajar con LDAP, hay varios conceptos importantes que deben entenderse. El primer paso importante para dar el acceso comentado se basa en la autentificaci\u00f3n de usuarios . AUTENTICAR USUARIOS \u00b6 Existen diferentes formas de autenticar usuarios en una red linux, pero una de las m\u00e1s usadas es la combinaci\u00f3n de tres herramientas diferentes: NSS , PAM y LDAP . La idea consiste en disponer de un servidor que facilite la acci\u00f3n de autenticar usuarios , de modo, que \u00e9stos recurran al servidor cada vez que un cliente necesite identificarse. De esta forma, la cuenta de usuario no es espec\u00edfica de un equipo cliente , si no que ser\u00e1 v\u00e1lida en cualquier equipo de la red que haya sido debidamente configurado. Herramientas autenticaci\u00f3n usuarios en Unix PAM \u00b6 Pluggable Authentication Module (PAM) : o m\u00f3dulo de autenticaci\u00f3n conectable en espa\u00f1ol, es un mecanismo para integrar m\u00faltiples esquemas de autenticaci\u00f3n de bajo nivel en una interfaz de programaci\u00f3n de aplicaciones (API) de alto nivel. Es decir, Establece una interfaz entre los programas de usuario y distintos m\u00e9todos de autenticaci\u00f3n . De esta forma, el m\u00e9todo de autenticaci\u00f3n, se hace transparente para los programas . La idea se basa en la creaci\u00f3n de m\u00f3dulos de autenticaci\u00f3n . Esto hace que, sin realizar modificaciones en el sistema , podamos utilizar m\u00e9todos que vayan desde el uso t\u00edpico de un nombre de usuario y una contrase\u00f1a, hasta aceptar contrase\u00f1as de un solo uso , restringir el acceso a determinados horarios o establecer pol\u00edticas de autenticaci\u00f3n espec\u00edficas para cada usuario o grupos de usuarios. Esquema de la estructura PAM Note En la actualidad, PAM es el m\u00e9todo que utilizan la mayor\u00eda de las aplicaciones y herramientas de UNIX para autenticar usuarios. NSS \u00b6 Name Service Switch es un servicio que permite la resoluci\u00f3n de nombres de usuario y contrase\u00f1as (o grupos) mediante el acceso a diferentes or\u00edgenes de informaci\u00f3n. En condiciones normales, esta informaci\u00f3n se encuentra en los archivos locales del sistema operativo, en concreto en /etc/passwd , /etc/shadow y /etc/group pero puede proceder de otras fuentes, como DNS (Domain Name System) , NIS (Network Information Service) , LDAP (Lightweight Directory Access Protocol) o WINS (Windows Internet Name Service) . Note Este servicio esta gestionado desde el fichero: /etc/nsswitch.conf Modelo de Informaci\u00f3n de LDAP \u00b6 La estructura b\u00e1sica de LDAP es un \u00e1rbol de nodos llamado Directory Information Tree (DIT) donde cada objeto o nodo es una entrada. La parte superior del \u00e1rbol se llama com\u00fanmente ra\u00edz (tambi\u00e9n conocida como base o sufijo ). Cada entrada se define por un DN (Distinguished Name) y contiene un conjunto de atributos. Este DN es una cadena que indica la ruta en el \u00e1rbol de dicha entrada y ser\u00e1 \u00fanico en todo el \u00e1rbol. Un ejemplo del aspecto que ofrece un DN ser\u00eda el siguiente: Example cn=usuario1,ou=usuarios,dc=midominio,dc=es Puede verse que cada componente (la coma es el car\u00e1cter separador) se muestra como un par \u00abatributo=valor\u00bb donde el atributo es una abreviatura usada por LDAP. Cada entrada en el \u00e1rbol tiene una entrada principal (objeto) y cero o m\u00e1s entradas secundarias (objetos). Cada entrada secundaria (objeto) es un hermano de las otras entradas secundarias de su padre. Cada entrada se compone de (es una instancia de) una o m\u00e1s clases de objeto ( objectClasses ). Las objectClasses contienen cero o m\u00e1s atributos. Los atributos tienen nombres (y a veces abreviaturas o alias ) y normalmente contienen datos. A continuaci\u00f3n se muestra un diagrama para entender mejor estos conceptos: Modelo de informaci\u00f3n (datos) LDAP DIT Resumen: Cada entrada (1) se compone de una o m\u00e1s clases de objetos (2) Cada objectClass (2) tiene un nombre y es un contenedor de atributos (su definici\u00f3n identifica los atributos que puede o debe contener) Cada atributo (3) tiene un nombre, contiene datos y es miembro de una o m\u00e1s clases de objetos (2) Cuando se completa el DIT, cada entrada se identificar\u00e1 de forma \u00fanica (en relaci\u00f3n con su entrada principal) en la jerarqu\u00eda por los datos que contiene (en sus atributos que est\u00e1n contenidos en su (s) objectClasses (s)). Entrada \u00b6 Una entrada LDAP es una recopilaci\u00f3n de informaci\u00f3n sobre una entidad. Cada entrada consta de tres componentes principales: Nombre distinguido DN y RDN (Relative Distinguished Name) Colecci\u00f3n de clases de objetos (objectClasses) Atributos Cada uno de estos se describe con m\u00e1s detalle a continuaci\u00f3n. DN y RDN \u00b6 El nombre distinguido de una entrada, a menudo denominado DN , identifica de forma \u00fanica esa entrada y su posici\u00f3n en la jerarqu\u00eda del \u00e1rbol de informaci\u00f3n de directorio (DIT). El DN de una entrada LDAP es muy parecido a la ruta a un archivo en un sistema de archivos . Un DN LDAP se compone de cero o m\u00e1s elementos denominados nombres distinguidos relativos o RDN . Cada RDN se compone de uno o m\u00e1s (generalmente solo uno) pares de atributo-valor. Example \"uid = john.doe\" representa un RDN compuesto por un atributo llamado \"uid\" con un valor de \"john.doe\". Si un RDN tiene varios pares de atributo-valor, est\u00e1n separados por signos m\u00e1s, como \"givenName = John + sn = Doe\" . DSE \u00b6 El nombre distinguido especial compuesto por cero RDN (y por lo tanto tiene una representaci\u00f3n de cadena que es solo una cadena vac\u00eda ) a veces se denomina \"DN nulo\" y hace referencia a un tipo especial de entrada llamado DSE ra\u00edz que proporciona informaci\u00f3n sobre el contenido y las capacidades de el servidor de directorio. M\u00faltiples RDN \u00b6 Para DN con m\u00faltiples RDN , el orden de los RDN especifica la posici\u00f3n de la entrada asociada en el DIT. Los RDN est\u00e1n separados por comas, y cada RDN en un DN representa un nivel en la jerarqu\u00eda en orden descendente (es decir, acerc\u00e1ndose a la ra\u00edz del \u00e1rbol, que se denomina contexto de nomenclatura). Example el DN \"uid = john.doe, ou = People, dc = example, dc = com\" tiene cuatro RDN. Clases de objetos (objectClasses) \u00b6 Las clases de objeto son elementos de esquema que especifican colecciones de tipos de atributos que pueden estar relacionados con un tipo particular de objeto, proceso u otra entidad. Las clases de objetos son, esencialmente, contenedores de atributos y se describen utilizando definiciones ASN.1 . Cada objectClass tiene un nombre \u00fanico . Existe un n\u00famero confuso de clases de objetos PREDEFINIDAS , cada una de las cuales contiene un mont\u00f3n de atributos adecuados para casi todas las implementaciones LDAP comunes. Las clases de objetos tienen tres caracter\u00edsticas principales: La clase de objeto define si un miembro de atributo MUST ( obligatorio ) estar presente o MAY ( opcional ) estar presente. Cada clase de objeto tiene un tipo que pueden ser estructurales , auxiliar o RESUMEN . En esta etapa es suficiente saber que debe haber una, y solo una, clase de objeto ESTRUCTURAL en una entrada y que puede haber cero o m\u00e1s clases de objeto AUXILIAR . Una clase de objeto puede ser parte de una jerarqu\u00eda, en cuyo caso hereda todas las caracter\u00edsticas de su (s) clase (s) de objeto principal (incluidos todos los atributos que contiene). Note objectClasses son contenedores y controlan qu\u00e9 atributos se pueden agregar a cada entrada, pero por lo dem\u00e1s tienden a permanecer en segundo plano en lo que respecta al acceso e interrogaci\u00f3n (b\u00fasqueda) del DIT. Los atributos y las entradas son los elementos realmente visibles . Atributos \u00b6 Cada atributo de una entrada tendr\u00e1 un tipo y un valor con el formato atributo/valor que permite caracterizar un aspecto del objeto que define la entrada. Estos atributos tienen nombres que hacen referencia a su contenido y pueden ser de dos tipos: Atributos normales : Son los atributos que identifican al objeto Atributos operativos : Son los atributos que utiliza el servidor para administrar el directorio Entre los atributos que suelen utilizarse habitualmente, encontramos los siguientes, aunque puede haber muchos mas: dn (distinguished name): nombre distintivo de una entrada, contiene un conjunto de atributos y es de car\u00e1cter \u00fanico. dc (domain component): se refiere al componente del dominio, ya sea un componente, una etiqueta o un nombre de dominio DNS. ou (organizational unit): unidad organizativa. cn (common name): nombre com\u00fan. sn (surname): apellido. uid (userid): nombre de usuario. mail: direcci\u00f3n de e-mail. telephoneNumber: n\u00famero de tel\u00e9fono. Example DN cn=John Smith, o=airius.com, c=DE RDN cn=John Smith + DN of ancestor o=airius.com, c=DE Modelo de nomenclatura LDAP Caracter\u00edsticas de Atributos \u00b6 Cada atributo tiene un nombre \u00fanico ( y una forma abreviada o alias ) y normalmente contiene datos. Los atributos siempre est\u00e1n asociados con (son miembros de) una o m\u00e1s ObjectClasses . Los atributos tienen una serie de caracter\u00edsticas interesantes: Todos los atributos son miembros de una o m\u00e1s clases de objeto . Cada atributo define el tipo de datos (la palabra clave es SINTAXIS) que puede contener. Los tipos de datos pueden ser: Strings , Numbers (Integer) , Time , Telephone Numbers , Boolean , Binary , Distinguished Name , Bit Strings , LDAP Supported Syntaxes . Los atributos pueden formar parte de una jerarqu\u00eda , en cuyo caso el atributo hijo hereda todas las caracter\u00edsticas del atributo padre . En el caso de los atributos, se usa una jerarqu\u00eda para simplificar y acortar las definiciones de atributos (en ASN.1) donde muchos atributos comparten propiedades comunes como la longitud m\u00e1xima o si son o no sensibles a may\u00fasculas y min\u00fasculas, etc. ning\u00fan otro significado. Los atributos pueden ser opcionales (la palabra clave es MAY ) u obligatorios (la palabra clave es MUST ) como se describe en las definiciones ASN.1 para la clase de objeto de la que son miembros. Un atributo puede ser opcional en una clase de objeto y obligatorio en otra. Es la clase de objeto la que determina esta propiedad. Los atributos aparentemente son aleatorios que se recogen de todas partes de la documentaci\u00f3n; es confuso al principio, pero proviene de la caracter\u00edstica opcional de la mayor\u00eda de los atributos. Permite un enfoque de ' pick-n-mix ' para poblar una entrada. Se puede buscar el atributo que se desee, y buscar la clase de objeto de la que es miembro (puede haber m\u00e1s de uno) y confirmar que todos los dem\u00e1s atributos que no se desean utilizar en la clase de objeto sean opcionales. Se puede revisar en Atributos comunmente utilizados . Los atributos pueden tener un valor \u00daNICO o M\u00daLTIPLE (como se describe en sus definiciones ASN.1 ). VALOR \u00daNICO significa que solo un valor de datos puede estar presente para el atributo . MULTIVALOR significa que el atributo puede aparecer varias veces en una clase de entrada / objeto con diferentes valores de datos. Si el atributo describe, por ejemplo, una direcci\u00f3n de correo electr\u00f3nico, puede haber una, dos o 500 definiciones del atributo, cada una con una direcci\u00f3n de correo diferente (es m\u00faltipl ); este es uno de los varios m\u00e9todos para tratar los alias de correo electr\u00f3nico en los dise\u00f1os de directorios. En este caso el valor predeterminado de un atributo es MULTIVALOR (permitir m\u00faltiples valores). Los atributos tienen nombres y, a veces, un alias (como se describe en sus definiciones ASN.1), por ejemplo, el atributo con un nombre de cn es un miembro del objectClass llamado person (y muchos otros) y tiene un alias de commonName . Se puede utilizar commonName o cn para hacer referencia a este atributo . En cada nivel de la jerarqu\u00eda, los datos contenidos en un atributo se pueden utilizar para identificar de forma \u00fanica la entrada . Puede ser cualquier atributo de la entrada. Incluso puede ser una combinaci\u00f3n de dos o m\u00e1s atributos. Los valores de atributo seleccionados para contener los datos \u00fanicos a veces se denominan atributos de nomenclatura o el nombre distinguido relativo (RDN), ya comentados. LDIF \u00b6 La adici\u00f3n de entradas se puede realizar de diversas formas, una de las cuales es mediante el uso de archivos de intercambio de datos LDAP (LDIF) . Los LDIF son archivos de texto que describen la jerarqu\u00eda del \u00e1rbol, el \u00e1rbol de informaci\u00f3n del directorio (DIT) , y los datos que se agregar\u00e1n a cada atributo. El siguiente es un ejemplo simple de un archivo LDIF que configura un DN ra\u00edz (dc = ejemplo, dc = com) y agrega tres entradas secundarias debajo de una entrada de personas . version : 1 ## version not strictly necessary (and some implementations reject it) but generally good practice ## DEFINE DIT ROOT/BASE/SUFFIX #### ## uses RFC 2377 (domain name) format ## dcObject is an AUXILIARY objectclass and MUST ## have a STRUCTURAL objectclass (organization in this case) # this is an ENTRY sequence and is preceded by a BLANK line dn : dc=example,dc=com dc : example description : The best company in the whole world objectClass : dcObject objectClass : organization o : Example, Inc. ## FIRST Level hierarchy - people # this is an ENTRY sequence and is preceded by a BLANK line dn : ou=people, dc=example,dc=com ou : people description : All people in organisation objectClass : organizationalUnit ## SECOND Level hierarchy - people entries # this is an ENTRY sequence and is preceded by a BLANK line dn : cn=Robert Smith,ou=people,dc=example,dc=com objectclass : inetOrgPerson cn : Robert Smith cn : Robert sn : Smith uid : rsmith mail : robert@example.com mail : r.smith@example.com ou : sales ## SECOND Level hierarchy - people entries # this is an ENTRY sequence and is preceded by a BLANK line dn : cn=Bill Smith,ou=people,dc=example,dc=com objectclass : inetOrgPerson cn : Bill Smith cn : William sn : Smith uid : bsmith mail : bill@example.com mail : b.smith@example.com ou : support ## SECOND Level hierarchy - people entries # this is an ENTRY sequence and is preceded by a BLANK line dn : cn=John Smith,ou=people,dc=example,dc=com objectclass : inetOrgPerson cn : John Smith sn : smith uid : jsmith mail : jim@example.com mail : j.smith@example.com ou : accounting Esquema LDAP \u00b6 El esquema es una parte importante de LDAP. Similar a la definici\u00f3n del esquema de la base de datos, el esquema LDAP define la estructura y las reglas que debe seguir un directorio LDAP, como qu\u00e9 atributos tendr\u00e1 una clase de objeto, qu\u00e9 estructura tienen estos atributos, etc. El servidor LDAP proporciona una manera de identificar categor\u00edas, atributos y otra informaci\u00f3n en el directorio LDAP, para que el servidor LDAP pueda reconocerlos. Para realizarlo se utlizan esquemas , que no es m\u00e1s que una unidad de empaquetado conveniente para contener clases de objetos y atributos muy similares . La principal diferencia con las bases de datos relacionales del protocolo LDAP es que estas ya estan predefinidas en los esquemas. por lo que nos ahorramos en insertar y definir las tablas de informaci\u00f3n. En OpenLDAP los esquemas instalados se encuentran en cn = schema, cn = config y se pueden instalar esquemas adicionales usando este procedimiento. El siguiente diagrama ilustra el uso de esquemas como unidades de empaquetado: Ejemplo de la definici\u00f3n de Esquemas en LDAP A nivel de comandos se pueden ver los esquemas predefinidos con: cd /etc/ldap/slapd.d/cn\\=config/ En el directorio cn\\=schema se pueden ver los esquemas y ademas se pueden a\u00f1adir m\u00e1s, pero no suele ser frecuente. Para buscar los esquemas se puede utilizar: grep olcObjectClasses cn\\=\\{3\\}inetorgperson.ldif|awk '{print $5}' grep olcObjectClasses cn\\=\\{2\\}inetorgperson.ldif|awk '{print $5}' grep olcObjectClasses cn\\=\\{2\\}nis.ldif|awk '{print $5}' grep olcObjectClasses cn\\=\\{1\\}cosine.ldif|awk '{print $5}' grep olcObjectClasses cn\\=\\{0\\}core.ldif|awk '{print $5}' Herramientas de gesti\u00f3n de usuarios. \u00b6 Una vez configurado el servidor LDAP, para la utilizaci\u00f3n normal debemos aprender c\u00f3mo se an\u00f1aden nuevos usuarios o se modifican los atributos de los existentes. Para los objetos iniciales del directorio, primero se debe escribir un fichero en formato LDIF que incluya todos los atributos de la entrada y a\u00f1aadirla al directorio con slapadd. En la Actividades Desarrollo UD2_01 , se realizar\u00e1 un ejemplo guiado al respecto. Este m\u00e9todo es totalmente inadecuado para la utilizaci\u00f3n cuando el directorio est\u00e1 activo. Existen varias formas de actualizar las entradas del directorio o a\u00f1adir nuevas, y en primer lugar veremos la utilizaci\u00f3n de las herramientas incluidas en el paquete ldap-utils . ldap-utils \u00b6 Para realizar modificaciones de los objetos del directorio directamente desde la l\u00ednea de comandos, se pueden utilizar las herramientas del paquete ldap-utils , a continuaci\u00f3n se describen algunas de ellas. Mostrar entradas \u00b6 ldapsearch - buscar y mostrar entradas La herramienta ldapsearch resulta muy conveniente al momento de hacer consultas sobre los datos dentro de un directorio LDAP desde l\u00ednea de comandos. A continuaci\u00f3n se presentan una serie de consultas de ejemplo que pueden resultar muy \u00fatiles para obtener informaci\u00f3n valiosa de un \u00e1rbol LDAP. Obtener todos los objetos de un directorio \u00b6 Para obtener todos los objetos en un directorio (dn) a partir de cierta base con el ejemplo de la pr\u00e1ctica ( dc=pandora,dc=ldap ) y sin l\u00edmite de para la respuesta, utilizar una consulta como la siguiente: ldapsearch -z 0 -H ldap://localhost:389 -W -D \"cn=admin,dc=pandora,dc=ldap\" -b \"dc=pandora,dc=ldap\" \"(objectclass=*)\" Note -z 0 : evita cortar la respuesta una vez alcanzado cierto l\u00edmite (cantidad de entradas). -H ldap://localhost:389 : indica que consulte al servidor LDAP en el puerto 389 del host local. -W : indica que solicite la contrase\u00f1a para el m\u00e9todo de autenticaci\u00f3n simple de manera interactiva. -D \"cn=admin,dc=pandora,dc=ldap\" : especifica el usuario con el cual se autentica en el servidor LDAP. -b \"dc=pandora,dc=ldap\" : especifica la base desde donde comenzar la b\u00fasqueda (en este caso se trata de la ra\u00edz del directorio). \"(objectclass=*)\" : especifica el filtro para la b\u00fasqueda (en este ejemplo todos los objetos, este a su vez es el filtro por defecto). Warning El punto importante es no olvidar especificar la base ( -b ). De lo contrario probablemente no haya resultados en la b\u00fasqueda: A este ejemplo se le puede a\u00f1adir grep para filtrar s\u00f3lo los dn: ldapsearch -z 0 -H ldap://localhost:389 -W -D \"cn=admin,dc=pandora,dc=ldap\" -b \"dc=pandora,dc=ldap\" \"(objectclass=*)\" | grep \"dn:\" El resultado ser\u00eda parecido a: Obtener todas las unidades organizacionales \u00b6 Las ou ( Organizational Unit ) definen la jerarqu\u00eda dentro de un dominio. Generalmente se utilizan para definir los departamentos o \u00e1reas dentro de una organizaci\u00f3n (empresa, red, sociedad, etc.). Para obtener una lista de todas las ou presentes en un directorio, se puede utilizar el filtro \"(ou=*)\" : ldapsearch -z 0 -H ldap://localhost:389 -W -D \"cn=admin,dc=pandora,dc=ldap\" -b \"dc=pandora,dc=ldap\" \"(ou=*)\" | grep \"dn:\" Resultado Listar todos los usuarios \u00b6 Esta consulta depende de la jerarqu\u00eda y la clase utilizada para almacenar usuarios dentro de un \u00e1rbol LDAP. Sin embargo, generalmente se utiliza la clase inetOrgPerson para almacenar usuarios dentro de un directorio LDAP, la cual posee el atributo uid . De esta forma, para listar todos los usuarios presentes en un directorio, simplemente recurrir al filtro \"(uid=*)\" : ldapsearch -z 0 -H ldap://localhost:389 -W -D \"cn=admin,dc=pandora,dc=ldap\" -b \"dc=pandora,dc=ldap\" \"(uid=*)\" | grep \"dn:\" Resultado Determinar todas las clases en uso \u00b6 Las clases de un directorio LDAP determinan el formato con el que se representan los datos de los objetos almacenados en el \u00e1rbol. Cada objeto (entrada en un directorio LDAP) pertenece a al menos una clase. Sin embargo es com\u00fan que cada objeto pertenezca a varias clases. B\u00e1sicamente las clases definen qu\u00e9 atributos y de qu\u00e9 formato puede poseer un objeto. Para listar todas las clases actualmente en uso por todos los objetos, es necesario volcar todo el contenido del \u00e1rbol y filtrar con grep : ldapsearch -z 0 -H ldap://localhost:389 -W -D \"cn=admin,dc=pandora,dc=ldap\" -b \"dc=pandora,dc=ldap\" \"(objectclass=*)\" | grep objectClass | sort | uniq Resultado Manipular entradas \u00b6 ldapmodify - modificar una entrada ldapadd - agregar una nueva entrada ldapdelete - eliminar y entrar ldapmodrdn - cambiar el nombre de una entrada ldappasswd : cambie la contrase\u00f1a de una entrada Ejemplos: \u00b6 A\u00f1adir y eliminar nuevos grupos con ldapadd & ldapdelete Se crea un archivo .ldif para a\u00f1adir un nuevo grupo y se a\u00f1ade con ldapadd : nano aso.ldif dn : ou=aso,dc=pandora,dc=ldap objectClass : organizationalUnit objectClass : top ou : aso ldapadd -x -W -D \"cn=admin,dc=pandora,dc=ldap\" -f aso.ldif Para borrarlo se utilizar\u00eda: ldapdelete -W -D \"cn=admin,dc=pandora,dc=ldap\" \"ou=aso,dc=pandora,dc=ldap\" A\u00f1adir y eliminar usuarios con ldapadd & ldapdelete Se crea un archivo .ldif para a\u00f1adir un nuevo grupo y se a\u00f1ade con ldapadd : nano javier.ldif dn : uid=javier,ou=usuarios,dc=pandora,dc=ldap objectClass : inetOrgPerson objectClass : posixAccount objectClass : shadowAccount cn : Javier sn : Hernandez userPassword : { SSHA } latDDmodpsLUWDqwd/adk/j2tTDgz3NX loginshell : /bin/bash uidNumber : 10001 gidNumber : 10001 homeDirectory : /home/javier ldapadd -x -W -D \"cn=admin,dc=pandora,dc=ldap\" -f javier.ldif Para borrarlo se utilizar\u00eda: ldapdelete -W -D \"cn=admin,dc=pandora,dc=ldap\" \"uid=javier,ou=aso,dc=pandora,dc=ldap\" modificar uidnumber de usuario existente ldapmodify Se crea un archivo .ldif especificando las modificaciones: nano cambios1.ldif dn : uid=javier,ou=aso,dc=pandora,dc=ldap changetype:modify replace:uidNumber uidNumber:10002 Para modificarlo se utilizar\u00eda: ldapmodify -x -W -D \"cn=admin,dc=pandora,dc=ldap\" -f cambios1.ldif Note Cuatro tipos de cambios son posibles add--adds a new entry modify--changes an existing entry, that is, it adds, deletes, or replaces attributes of the entry delete--deletes an existing entry modrdn--modifies the RDN of an existing entry A\u00f1adir y cambiar contrase\u00f1a a un usuario existente con ldappasswd A\u00f1adir contrase\u00f1a ldappasswd -s 1234 -W -D \"cn=admin,dc=pandora,dc=ldap\" -x \"uid=javier,ou=aso,dc=pandora,dc=ldap\" Operaciones \u00b6 ldapwhoami : muestra con qu\u00e9 entrada estoy vinculado al servidor ldapcompare : compara un campo en la entrada con alg\u00fan valor Configuraci\u00f3n de OpenLDAP \u00b6 slapd.conf \u00b6 Es el archivo principal de OpenLDAP y es aqu\u00ed donde se configuran todos sus par\u00e1metros. Note slapd.conf se encuentra dentro del directorio /etc/ldap/slapd.d Dise\u00f1o de configuraci\u00f3n \u00b6 La configuraci\u00f3n de slapd se almacena como un directorio LDAP especial con un esquema y DIT predefinidos . Hay clases de objetos espec\u00edficas que se utilizan para llevar opciones de configuraci\u00f3n global, definiciones de esquema, definiciones de base de datos y back-end, y otros elementos variados. \u00c1rbol de configuraci\u00f3n de muestra. En el servidor se podr\u00eda observar: \u00c1rbol (DIT)de configuraci\u00f3n En Ubuntu Server. El \u00e1rbol de configuraci\u00f3n de slapd-config tiene una estructura muy espec\u00edfica. La ra\u00edz del \u00e1rbol se denomina cn = config y contiene ajustes de configuraci\u00f3n global. Directivas de configuraci\u00f3n \u00b6 De las directivas m\u00e1s comunes mostradas en el arblo se destaca centro de cn = config la directiva olcLogLevel Esta directiva especifica el nivel en el que las declaraciones de depuraci\u00f3n y las estad\u00edsticas de operaci\u00f3n deben registrarse en el syslog (actualmente registrado en la funci\u00f3n syslogd (8) LOG_LOCAL4 ) . Debe haber configurado OpenLDAP --enable-debug (el predeterminado) para que esto funcione (excepto para los dos niveles de estad\u00edsticas, que siempre est\u00e1n habilitados). Configuraci\u00f3n logging \u00b6 El registro de actividad para slapd es muy \u00fatil cuando se implementa una soluci\u00f3n basada en OpenLDAP, pero debe habilitarse manualmente despu\u00e9s de la instalaci\u00f3n del software. De lo contrario, solo aparecer\u00e1n mensajes rudimentarios en los registros. El registro, como cualquier otra configuraci\u00f3n similar, se habilita a trav\u00e9s de la base de datos slapd-config . OpenLDAP viene con m\u00faltiples niveles de registro y cada uno contiene el m\u00e1s bajo (aditivo). Un buen nivel para probar son las estad\u00edsticas . La p\u00e1gina de manual de slapd-config tiene m\u00e1s que decir sobre los diferentes subsistemas. Cree el archivo logging.ldif con el siguiente contenido: dn : cn=config changetype : modify replace : olcLogLevel olcLogLevel : stats Implementar el cambio: sudo ldapmodify -Q -Y EXTERNAL -H ldapi:/// -f logging.ldif Esto producir\u00e1 una cantidad significativa de registro y querr\u00e1 volver a un nivel menos detallado una vez que su sistema est\u00e9 en producci\u00f3n. Mientras est\u00e1 en este modo detallado, el motor syslog de su host (rsyslog) puede tener dificultades para mantenerse al d\u00eda y puede dejar caer mensajes: Warning rsyslogd-2177: imuxsock lost 228 messages from pid 2547 due to rate-limiting Puede considerarse un cambio en la configuraci\u00f3n de rsyslog . En /etc/rsyslog.conf , ponga: # Disable rate limiting # (default is 200 messages in 5 seconds; below we make the 5 become 0) $SystemLogRateLimitInterval 0 Y luego reinicie el demonio rsyslog: sudo systemctl restart syslog.service Los Registros de OpenLDAP a trav\u00e9s de syslogd LOCAL4 (Nivel warning de Syslog). Para transmitir el registro LDAP a un archivo separado de syslog, agregue una l\u00ednea como esta a syslog.conf ( /etc/rsyslog.conf ): # a. agregar a syslog.conf local4. * /var/log/ldap.log # b. crear un archivo de registro vac\u00edo toque /var/log/ldap.log # c. reiniciar syslogd killall -HUP syslogd O systemctl restart syslog.service M\u00e1s informaci\u00f3n sobre looging OpenLdap Actividades Iniciales \u00b6 Configuraci\u00f3n b\u00e1sica e instalaci\u00f3n de OpenLDAP base.ldif dn : ou=usuarios,dc=pandora,dc=ldap objectClass : organizationalUnit objectClass : top ou : usuarios dn : ou=grupos,dc=pandora,dc=ldap objectClass : organizationalUnit objectClass : top ou : grupos content.ldif dn : cn=devops,ou=grupos,dc=pandora,dc=ldap objectClass : posixGroup cn : devops gidNumber : 10000 memberUid : devops dn : uid=mordecai,ou=usuarios,dc=pandora,dc=ldap objectClass : inetOrgPerson objectClass : posixAccount objectClass : shadowAccount cn : Mordecai sn : Geek userPassword : { SSHA } latDDmodpsLUWDqwd/adk/j2tTDgz3NX loginshell : /bin/bash uidNumber : 10000 gidNumber : 10000 homeDirectory : /home/mordecai Actividades Desarrollo UD2_01 \u00b6 Creaci\u00f3n de usuarios y grupos OpenLDAP Actividades Desarrollo UD2_02 \u00b6 Configuraci\u00f3n de equipo cliente Actividades Desarrollo UD2_03 \u00b6 En este ejercicio se deben utilizar los comandos de OpenLdap instalados en el paquete LDAPutils . A\u00f1ade un nuevo grupo y dentro de el un nuevo usuario a la estructura de directorio creada en la pr\u00e1ctica superior. Crea una contrase\u00f1a para el usuario. Modifica el uid creado de inicio. Crea un segundo usuario, dentro de usuarios Elimina el segundo usuario creado. En cada subapartado comprueba que se han introducido correctamente las modificaciones en el DIT . Actividades Desarrollo UD2_04 \u00b6 Instalaci\u00f3n y configuraci\u00f3n phpLDAPadmin","title":"2.2- LDAP"},{"location":"022_LDAP.html#ldap","text":"El LDAP (Lightweight Directory Access Protocol) es un protocolo a nivel de aplicaci\u00f3n que da acceso a un servicio de directorio ordenado y distribuido para la b\u00fasqueda de la informaci\u00f3n de un entrono de red. En la d\u00e9cada de los 80, la especificaci\u00f3n de directorio X.500 vio la luz. El protocolo que daba acceso a la informaci\u00f3n contenida en \u00e9l, fue DAP (Directory Access Protocol) y estaba basado en la pila de protocolos OSI (Open Systems Interconexion) . Gracias al auge de Internet, la pila de protocolos TCP/IP cobraron especial protagonismo y su uso fue generalizado en cualquier infraestructura de red, incluidas las LAN. Ante esta situaci\u00f3n, en 1993 se implement\u00f3 el protocolo LDAP que utilizaba la pila de protocolos TCP/IP para el acceso a la informaci\u00f3n contenido en un servicio de directorio. El funcionamiento de LDAP es relativamente simple : un cliente se inicia una sesi\u00f3n en un servidor LDAP solicitando alguna informaci\u00f3n. Esquema de funcionamiento del protocolo LDAP Conclusi\u00f3n LDAP, es un protocolo que ofrece el acceso a un servicio de directorio implementado sobre un entorno de red, con el objeto de acceder a una determinada informaci\u00f3n. Puede ejecutarse sobre TCP/IP o sobre cualquier otro servicio de transferencia orientado a la conexi\u00f3n. Podemos considerarlo como un sistema de almacenamiento de red al que se pueden realizar consultas. Antes de trabajar con LDAP, hay varios conceptos importantes que deben entenderse. El primer paso importante para dar el acceso comentado se basa en la autentificaci\u00f3n de usuarios .","title":"LDAP"},{"location":"022_LDAP.html#autenticar-usuarios","text":"Existen diferentes formas de autenticar usuarios en una red linux, pero una de las m\u00e1s usadas es la combinaci\u00f3n de tres herramientas diferentes: NSS , PAM y LDAP . La idea consiste en disponer de un servidor que facilite la acci\u00f3n de autenticar usuarios , de modo, que \u00e9stos recurran al servidor cada vez que un cliente necesite identificarse. De esta forma, la cuenta de usuario no es espec\u00edfica de un equipo cliente , si no que ser\u00e1 v\u00e1lida en cualquier equipo de la red que haya sido debidamente configurado. Herramientas autenticaci\u00f3n usuarios en Unix","title":"AUTENTICAR USUARIOS"},{"location":"022_LDAP.html#pam","text":"Pluggable Authentication Module (PAM) : o m\u00f3dulo de autenticaci\u00f3n conectable en espa\u00f1ol, es un mecanismo para integrar m\u00faltiples esquemas de autenticaci\u00f3n de bajo nivel en una interfaz de programaci\u00f3n de aplicaciones (API) de alto nivel. Es decir, Establece una interfaz entre los programas de usuario y distintos m\u00e9todos de autenticaci\u00f3n . De esta forma, el m\u00e9todo de autenticaci\u00f3n, se hace transparente para los programas . La idea se basa en la creaci\u00f3n de m\u00f3dulos de autenticaci\u00f3n . Esto hace que, sin realizar modificaciones en el sistema , podamos utilizar m\u00e9todos que vayan desde el uso t\u00edpico de un nombre de usuario y una contrase\u00f1a, hasta aceptar contrase\u00f1as de un solo uso , restringir el acceso a determinados horarios o establecer pol\u00edticas de autenticaci\u00f3n espec\u00edficas para cada usuario o grupos de usuarios. Esquema de la estructura PAM Note En la actualidad, PAM es el m\u00e9todo que utilizan la mayor\u00eda de las aplicaciones y herramientas de UNIX para autenticar usuarios.","title":"PAM"},{"location":"022_LDAP.html#nss","text":"Name Service Switch es un servicio que permite la resoluci\u00f3n de nombres de usuario y contrase\u00f1as (o grupos) mediante el acceso a diferentes or\u00edgenes de informaci\u00f3n. En condiciones normales, esta informaci\u00f3n se encuentra en los archivos locales del sistema operativo, en concreto en /etc/passwd , /etc/shadow y /etc/group pero puede proceder de otras fuentes, como DNS (Domain Name System) , NIS (Network Information Service) , LDAP (Lightweight Directory Access Protocol) o WINS (Windows Internet Name Service) . Note Este servicio esta gestionado desde el fichero: /etc/nsswitch.conf","title":"NSS"},{"location":"022_LDAP.html#modelo-de-informacion-de-ldap","text":"La estructura b\u00e1sica de LDAP es un \u00e1rbol de nodos llamado Directory Information Tree (DIT) donde cada objeto o nodo es una entrada. La parte superior del \u00e1rbol se llama com\u00fanmente ra\u00edz (tambi\u00e9n conocida como base o sufijo ). Cada entrada se define por un DN (Distinguished Name) y contiene un conjunto de atributos. Este DN es una cadena que indica la ruta en el \u00e1rbol de dicha entrada y ser\u00e1 \u00fanico en todo el \u00e1rbol. Un ejemplo del aspecto que ofrece un DN ser\u00eda el siguiente: Example cn=usuario1,ou=usuarios,dc=midominio,dc=es Puede verse que cada componente (la coma es el car\u00e1cter separador) se muestra como un par \u00abatributo=valor\u00bb donde el atributo es una abreviatura usada por LDAP. Cada entrada en el \u00e1rbol tiene una entrada principal (objeto) y cero o m\u00e1s entradas secundarias (objetos). Cada entrada secundaria (objeto) es un hermano de las otras entradas secundarias de su padre. Cada entrada se compone de (es una instancia de) una o m\u00e1s clases de objeto ( objectClasses ). Las objectClasses contienen cero o m\u00e1s atributos. Los atributos tienen nombres (y a veces abreviaturas o alias ) y normalmente contienen datos. A continuaci\u00f3n se muestra un diagrama para entender mejor estos conceptos: Modelo de informaci\u00f3n (datos) LDAP DIT Resumen: Cada entrada (1) se compone de una o m\u00e1s clases de objetos (2) Cada objectClass (2) tiene un nombre y es un contenedor de atributos (su definici\u00f3n identifica los atributos que puede o debe contener) Cada atributo (3) tiene un nombre, contiene datos y es miembro de una o m\u00e1s clases de objetos (2) Cuando se completa el DIT, cada entrada se identificar\u00e1 de forma \u00fanica (en relaci\u00f3n con su entrada principal) en la jerarqu\u00eda por los datos que contiene (en sus atributos que est\u00e1n contenidos en su (s) objectClasses (s)).","title":"Modelo de Informaci\u00f3n de LDAP"},{"location":"022_LDAP.html#entrada","text":"Una entrada LDAP es una recopilaci\u00f3n de informaci\u00f3n sobre una entidad. Cada entrada consta de tres componentes principales: Nombre distinguido DN y RDN (Relative Distinguished Name) Colecci\u00f3n de clases de objetos (objectClasses) Atributos Cada uno de estos se describe con m\u00e1s detalle a continuaci\u00f3n.","title":"Entrada"},{"location":"022_LDAP.html#clases-de-objetos-objectclasses","text":"Las clases de objeto son elementos de esquema que especifican colecciones de tipos de atributos que pueden estar relacionados con un tipo particular de objeto, proceso u otra entidad. Las clases de objetos son, esencialmente, contenedores de atributos y se describen utilizando definiciones ASN.1 . Cada objectClass tiene un nombre \u00fanico . Existe un n\u00famero confuso de clases de objetos PREDEFINIDAS , cada una de las cuales contiene un mont\u00f3n de atributos adecuados para casi todas las implementaciones LDAP comunes. Las clases de objetos tienen tres caracter\u00edsticas principales: La clase de objeto define si un miembro de atributo MUST ( obligatorio ) estar presente o MAY ( opcional ) estar presente. Cada clase de objeto tiene un tipo que pueden ser estructurales , auxiliar o RESUMEN . En esta etapa es suficiente saber que debe haber una, y solo una, clase de objeto ESTRUCTURAL en una entrada y que puede haber cero o m\u00e1s clases de objeto AUXILIAR . Una clase de objeto puede ser parte de una jerarqu\u00eda, en cuyo caso hereda todas las caracter\u00edsticas de su (s) clase (s) de objeto principal (incluidos todos los atributos que contiene). Note objectClasses son contenedores y controlan qu\u00e9 atributos se pueden agregar a cada entrada, pero por lo dem\u00e1s tienden a permanecer en segundo plano en lo que respecta al acceso e interrogaci\u00f3n (b\u00fasqueda) del DIT. Los atributos y las entradas son los elementos realmente visibles .","title":"Clases de objetos (objectClasses)"},{"location":"022_LDAP.html#atributos","text":"Cada atributo de una entrada tendr\u00e1 un tipo y un valor con el formato atributo/valor que permite caracterizar un aspecto del objeto que define la entrada. Estos atributos tienen nombres que hacen referencia a su contenido y pueden ser de dos tipos: Atributos normales : Son los atributos que identifican al objeto Atributos operativos : Son los atributos que utiliza el servidor para administrar el directorio Entre los atributos que suelen utilizarse habitualmente, encontramos los siguientes, aunque puede haber muchos mas: dn (distinguished name): nombre distintivo de una entrada, contiene un conjunto de atributos y es de car\u00e1cter \u00fanico. dc (domain component): se refiere al componente del dominio, ya sea un componente, una etiqueta o un nombre de dominio DNS. ou (organizational unit): unidad organizativa. cn (common name): nombre com\u00fan. sn (surname): apellido. uid (userid): nombre de usuario. mail: direcci\u00f3n de e-mail. telephoneNumber: n\u00famero de tel\u00e9fono. Example DN cn=John Smith, o=airius.com, c=DE RDN cn=John Smith + DN of ancestor o=airius.com, c=DE Modelo de nomenclatura LDAP","title":"Atributos"},{"location":"022_LDAP.html#ldif","text":"La adici\u00f3n de entradas se puede realizar de diversas formas, una de las cuales es mediante el uso de archivos de intercambio de datos LDAP (LDIF) . Los LDIF son archivos de texto que describen la jerarqu\u00eda del \u00e1rbol, el \u00e1rbol de informaci\u00f3n del directorio (DIT) , y los datos que se agregar\u00e1n a cada atributo. El siguiente es un ejemplo simple de un archivo LDIF que configura un DN ra\u00edz (dc = ejemplo, dc = com) y agrega tres entradas secundarias debajo de una entrada de personas . version : 1 ## version not strictly necessary (and some implementations reject it) but generally good practice ## DEFINE DIT ROOT/BASE/SUFFIX #### ## uses RFC 2377 (domain name) format ## dcObject is an AUXILIARY objectclass and MUST ## have a STRUCTURAL objectclass (organization in this case) # this is an ENTRY sequence and is preceded by a BLANK line dn : dc=example,dc=com dc : example description : The best company in the whole world objectClass : dcObject objectClass : organization o : Example, Inc. ## FIRST Level hierarchy - people # this is an ENTRY sequence and is preceded by a BLANK line dn : ou=people, dc=example,dc=com ou : people description : All people in organisation objectClass : organizationalUnit ## SECOND Level hierarchy - people entries # this is an ENTRY sequence and is preceded by a BLANK line dn : cn=Robert Smith,ou=people,dc=example,dc=com objectclass : inetOrgPerson cn : Robert Smith cn : Robert sn : Smith uid : rsmith mail : robert@example.com mail : r.smith@example.com ou : sales ## SECOND Level hierarchy - people entries # this is an ENTRY sequence and is preceded by a BLANK line dn : cn=Bill Smith,ou=people,dc=example,dc=com objectclass : inetOrgPerson cn : Bill Smith cn : William sn : Smith uid : bsmith mail : bill@example.com mail : b.smith@example.com ou : support ## SECOND Level hierarchy - people entries # this is an ENTRY sequence and is preceded by a BLANK line dn : cn=John Smith,ou=people,dc=example,dc=com objectclass : inetOrgPerson cn : John Smith sn : smith uid : jsmith mail : jim@example.com mail : j.smith@example.com ou : accounting","title":"LDIF"},{"location":"022_LDAP.html#esquema-ldap","text":"El esquema es una parte importante de LDAP. Similar a la definici\u00f3n del esquema de la base de datos, el esquema LDAP define la estructura y las reglas que debe seguir un directorio LDAP, como qu\u00e9 atributos tendr\u00e1 una clase de objeto, qu\u00e9 estructura tienen estos atributos, etc. El servidor LDAP proporciona una manera de identificar categor\u00edas, atributos y otra informaci\u00f3n en el directorio LDAP, para que el servidor LDAP pueda reconocerlos. Para realizarlo se utlizan esquemas , que no es m\u00e1s que una unidad de empaquetado conveniente para contener clases de objetos y atributos muy similares . La principal diferencia con las bases de datos relacionales del protocolo LDAP es que estas ya estan predefinidas en los esquemas. por lo que nos ahorramos en insertar y definir las tablas de informaci\u00f3n. En OpenLDAP los esquemas instalados se encuentran en cn = schema, cn = config y se pueden instalar esquemas adicionales usando este procedimiento. El siguiente diagrama ilustra el uso de esquemas como unidades de empaquetado: Ejemplo de la definici\u00f3n de Esquemas en LDAP A nivel de comandos se pueden ver los esquemas predefinidos con: cd /etc/ldap/slapd.d/cn\\=config/ En el directorio cn\\=schema se pueden ver los esquemas y ademas se pueden a\u00f1adir m\u00e1s, pero no suele ser frecuente. Para buscar los esquemas se puede utilizar: grep olcObjectClasses cn\\=\\{3\\}inetorgperson.ldif|awk '{print $5}' grep olcObjectClasses cn\\=\\{2\\}inetorgperson.ldif|awk '{print $5}' grep olcObjectClasses cn\\=\\{2\\}nis.ldif|awk '{print $5}' grep olcObjectClasses cn\\=\\{1\\}cosine.ldif|awk '{print $5}' grep olcObjectClasses cn\\=\\{0\\}core.ldif|awk '{print $5}'","title":"Esquema LDAP"},{"location":"022_LDAP.html#herramientas-de-gestion-de-usuarios","text":"Una vez configurado el servidor LDAP, para la utilizaci\u00f3n normal debemos aprender c\u00f3mo se an\u00f1aden nuevos usuarios o se modifican los atributos de los existentes. Para los objetos iniciales del directorio, primero se debe escribir un fichero en formato LDIF que incluya todos los atributos de la entrada y a\u00f1aadirla al directorio con slapadd. En la Actividades Desarrollo UD2_01 , se realizar\u00e1 un ejemplo guiado al respecto. Este m\u00e9todo es totalmente inadecuado para la utilizaci\u00f3n cuando el directorio est\u00e1 activo. Existen varias formas de actualizar las entradas del directorio o a\u00f1adir nuevas, y en primer lugar veremos la utilizaci\u00f3n de las herramientas incluidas en el paquete ldap-utils .","title":"Herramientas de gesti\u00f3n de usuarios."},{"location":"022_LDAP.html#ldap-utils","text":"Para realizar modificaciones de los objetos del directorio directamente desde la l\u00ednea de comandos, se pueden utilizar las herramientas del paquete ldap-utils , a continuaci\u00f3n se describen algunas de ellas.","title":"ldap-utils"},{"location":"022_LDAP.html#configuracion-de-openldap","text":"","title":"Configuraci\u00f3n de OpenLDAP"},{"location":"022_LDAP.html#slapdconf","text":"Es el archivo principal de OpenLDAP y es aqu\u00ed donde se configuran todos sus par\u00e1metros. Note slapd.conf se encuentra dentro del directorio /etc/ldap/slapd.d","title":"slapd.conf"},{"location":"022_LDAP.html#actividades-iniciales","text":"Configuraci\u00f3n b\u00e1sica e instalaci\u00f3n de OpenLDAP base.ldif dn : ou=usuarios,dc=pandora,dc=ldap objectClass : organizationalUnit objectClass : top ou : usuarios dn : ou=grupos,dc=pandora,dc=ldap objectClass : organizationalUnit objectClass : top ou : grupos content.ldif dn : cn=devops,ou=grupos,dc=pandora,dc=ldap objectClass : posixGroup cn : devops gidNumber : 10000 memberUid : devops dn : uid=mordecai,ou=usuarios,dc=pandora,dc=ldap objectClass : inetOrgPerson objectClass : posixAccount objectClass : shadowAccount cn : Mordecai sn : Geek userPassword : { SSHA } latDDmodpsLUWDqwd/adk/j2tTDgz3NX loginshell : /bin/bash uidNumber : 10000 gidNumber : 10000 homeDirectory : /home/mordecai","title":"Actividades Iniciales"},{"location":"022_LDAP.html#actividades-desarrollo-ud2_01","text":"Creaci\u00f3n de usuarios y grupos OpenLDAP","title":"Actividades Desarrollo UD2_01"},{"location":"022_LDAP.html#actividades-desarrollo-ud2_02","text":"Configuraci\u00f3n de equipo cliente","title":"Actividades Desarrollo UD2_02"},{"location":"022_LDAP.html#actividades-desarrollo-ud2_03","text":"En este ejercicio se deben utilizar los comandos de OpenLdap instalados en el paquete LDAPutils . A\u00f1ade un nuevo grupo y dentro de el un nuevo usuario a la estructura de directorio creada en la pr\u00e1ctica superior. Crea una contrase\u00f1a para el usuario. Modifica el uid creado de inicio. Crea un segundo usuario, dentro de usuarios Elimina el segundo usuario creado. En cada subapartado comprueba que se han introducido correctamente las modificaciones en el DIT .","title":"Actividades Desarrollo UD2_03"},{"location":"022_LDAP.html#actividades-desarrollo-ud2_04","text":"Instalaci\u00f3n y configuraci\u00f3n phpLDAPadmin","title":"Actividades Desarrollo UD2_04"},{"location":"023_ActiveDirectory.html","text":"Directorio Activo en Windows Server \u00b6 Un servicio de directorio gestiona una base de datos organizada de modo jer\u00e1rquico con el objetivo de administrar de una manera sencilla los recursos de una red, almacenando informaci\u00f3n de cada elemento de la red de manera estructurada, lo que permite facilitar el proceso de b\u00fasqueda de los recursos y de autenticaci\u00f3n dentro de la red. Estructura f\u00edsica de Active Directory \u00b6 El Directorio Activo o Active Directory , durante este m\u00f3dulo se utilizar\u00e1n indistintamente ambos nombres; forma parte del subsistema de seguridad de Windows Server ejecut\u00e1ndose en modo usuario. Estructura f\u00edsica de AD Note Las aplicaciones que se ejecutan en este modo no tienen acceso directo al sistema operativo ni al hardware, sino que como medida de seguridad, las peticiones realizadas a estos deben pasar previamente por un subsistema de seguridad y posteriormente por la capa de servicios ejecutivos. Arquitectura cliente \u2013 servidor \u00b6 Active Directory tambi\u00e9n esta basado en el modelo cliente-servidor es aquel en el que existen varios clientes, los cuales realizan peticiones a un servidor. Esquema de red cliente servidor Un servidor puede ser: Dedicado : La m\u00e1quina servidor s\u00f3lo se dedica a tareas de servicios en la red No dedicado : Adem\u00e1s de los servicios, la m\u00e1quina se puede usar como un puesto de trabajo m\u00e1s. Objetos del Directorio Activo \u00b6 El Directorio Activo es una implementaci\u00f3n concreta del protocolo LDAP . Este protocolo trata los elementos de la red como objetos. Los tipos de objetos b\u00e1sicos que existen en el Directorio Activo son: Usuarios. Grupos. Equipos. Dominios. Impresoras. Unidades Organizativas. Tip Sin embargo los administradores de sistemas pueden crear nuevos tipos de objetos o a\u00f1adir propiedades a alguna clase de los objetos modificando el esquema del Directorio Activo, para adaptar la estructura de la red a las necesidades particulares de la organizaci\u00f3n. Dominio \u00b6 Representa un conjunto de equipos (clientes y servidores) que comparten una pol\u00edtica de seguridad y una base de datos com\u00fan. En concreto para el Directorio Activo de Windows : Componente fundamental de la estructura l\u00f3gica de Active Directory. Por definici\u00f3n , se trata de un conjunto de objetos de tipo equipo, usuario y otras clases de objetos que comparten una base de datos de directorio com\u00fan. Los servidores pueden ser: Controladores de dominio : Contienen las cuentas de usuario y de otros datos del Directorio Activo . Debe haber al menos 1 por cada dominio . Servidores miembros del dominio : Se utilizan para almacenamiento de archivos y otros recursos compartidos en la red. No contienen informaci\u00f3n vital como cuentas de usuarios o pol\u00edticas de grupos. Servidores de Dominio Roles \u00b6 Un rol de servidor es un conjunto de programas que permiten a un equipo realizar una funci\u00f3n espec\u00edfica para varios usuarios u otros equipos de una red. B\u00e1sicamente est\u00e1 relacionado con el cometido de dicho servidor, un servidor puede tener m\u00faltiples roles. Ejemplos: Servidor DHCP . Servidor DNS . Servidor Active Directory . Servidor de virtualizaci\u00f3n ( Hyper-V ). Servidor Web. Acceso remoto. Servidor de impresi\u00f3n. Servidor de correo electr\u00f3nico. A su vez, un rol puede tener diferentes funcionalidades o subroles, los cuales pueden estar activados o no. Dichos \u201csubroles\u201d son servicios de rol . Example un Servidor DNS solo tiene una finalidad y, por lo tanto, no tienen servicios de rol disponibles. En cambio un Servicio de Archivos (para compartir ficheros) puede tener el servicio de rol para el protocolo NFS o no, es decir, puede tener habilitada la funci\u00f3n de servidor de ficheros NFS. Note Network File System, o NFS , es un protocolo de nivel de aplicaci\u00f3n, seg\u00fan el Modelo OSI. Es utilizado para sistemas de archivos distribuido en un entorno de red de computadoras de \u00e1rea local. Posibilita que distintos sistemas conectados a una misma red accedan a ficheros remotos como si se tratara de locales. Para Agregar Roles: Diferencia entre \"Grupo de Trabajo\" y \"Dominio\" \u00b6 Configuraci\u00f3n \"Grupo de Trabajo\" y \"Dominio\". Grupo de trabajo : es un conjunto de ordenadores comunicados entre s\u00ed, que forman parte de un mismo grupo. No obstante toda la gesti\u00f3n de pol\u00edticas/grupos/usuarios/servicios/\u2026 son individuales por cada m\u00e1quina. Note Es decir, en un directorio activo yo creo un usuario y desde cualquier m\u00e1quina asociada al dominio me puedo registrar, en el caso de un grupo de trabajo deber\u00e1 estar creado el usuario manualmente en cada equipo del grupo de trabajo, y as\u00ed con las pol\u00edticas de grupo, etc. Dominio como ya hemos visto (OpenLDAP) desde un servidor podemos gestionarlo todo, pol\u00edticas de grupo, usuarios, servicios, seguridad, recursos accesibles, etc. Ventajas/Desventajas de un \"Grupo de Trabajo\" frente a un \"Dominio\" \u00b6 Es m\u00e1s barato (no necesita un servidor y licencias). La gesti\u00f3n es mucho m\u00e1s tediosa porque tienes que hacerla equipo por equipo, mientras que en un dominio solo debes configurar el servidor, por tanto es menos escalable (imagina tener 200 ordenadores en un grupo de trabajo). El grupo de trabajo es mucho m\u00e1s inseguro , puesto que es m\u00e1s f\u00e1cil controlar pol\u00edticas de seguridad a trav\u00e9s de un servidor con pol\u00edticas generalizadas para todos los equipos, ya que no todos los usuarios tienen un conocimiento suficiente de inform\u00e1tica. Con el grupo de trabajo ser\u00e1 mucho m\u00e1s tedioso implementar servicios , por ejemplo un servidor de correo. Unidad Organizativa \u00b6 Las unidades organizativas nos ayudan a organizar los objetos de nuestro dominio (impresoras, usuarios, grupos, \u2026). * Es parecido a la estructura de directorios (carpetas) de un sistema operativo, por ejemplo , dentro de nuestro dominio podemos tener una unidad organizativa por cada departamento de la empresa. En el siguiente ejemplo vemos un dominio con una unidad organizativa para usuarios de \" Contabilidad \", \" Recursos Humanos \", \" Inform\u00e1ticos \"y \" Marketing \". Unidades Organizativas en Active Directory \u00c1rboles: \u00b6 Se da en redes muy grandes donde nos interesa segmentar en subdominios, de tal forma que el tr\u00e1fico o las peticiones de los usuarios al servidor de un subdominio no llegan al servidor ra\u00edz y por nos ayuda con el balanceo de carga de trabajo y ahorro en el ancho de banda de la red. No obstante la gesti\u00f3n sigue siendo centralizada desde el servidor ra\u00edz. Similar a DNS. Objetos en Active Directory. Bosques \u00b6 Un bosque es la uni\u00f3n de diferentes \u00e1rboles o dominios que conf\u00edan entre ellos, pero son dominios totalmente diferentes (salva.com y pepe.com). Al haber una confianza entre ellos tendr\u00e1n la posibilidad los usuarios de un dominio acceder a los recursos o a ciertos recursos del otro dominio que comparten el mismo bosque. Ejemplo de Objetos en Active Directory. Servicios de AD en Windows Server \u00b6 Cuando vayamos a a\u00f1adir nuestro rol de Active Directory al servidor, veremos que tenemos diferentes roles de Active Directory: Active Directory Lightweight Directory Services : Se trata de un Active Directory \"light\", no require de un dominio para su uso, simplemente alberga opciones/caracter\u00edsticas para ciertas aplicaciones que nos interese. Active Directory Rights Management Services : Nos ayuda a gestionar la protecci\u00f3n del acceso a nuestros ficheros del directorio activo. Por ejemplo si un documento se intenta abrir desde un usuario no autorizado. Servicios de certificados de Active Directory : Simplemente gestiona la creaci\u00f3n de certificados digitales. Es para entidades de certificaci\u00f3n oficial (seguridad inform\u00e1tica). Servicios de dominio de Active Directory: Este va a ser la opci\u00f3n que veremos en el m\u00f3dulo. Es el active directory que hemos visto con OpenLDAP en el apartado de Linux. Servicio de federaci\u00f3n de Active Directory: Gestiona el acceso seguro desde dentro y desde fuera de tu red (Internet) a aplicaciones gestionadas en local por el servidor de Windows Active Directory. Obviamente con las credenciales de usuarios del active directory. LDAP y KERBEROS \u00b6 La base de datos de los usuarios, almacenada a trav\u00e9s de LDAP se almacena en los controladores de dominio. Adem\u00e1s el fichero \" ntds.dit \" ser\u00e1 el que almacene realmente dicha base de datos. La autenticaci\u00f3n de los usuarios se realizar\u00e1 a trav\u00e9s de Kerberos . Kerberos es un protocolo de autenticaci\u00f3n de redes de ordenador creado por el MIT que permite a dos ordenadores en una red insegura demostrar su identidad mutuamente de manera segura. Actividades Iniciales Active Directory UD02_5 \u00b6 Windows Server Configuraci\u00f3n B\u00e1sica Windows Server Configuraci\u00f3n B\u00e1sica Windows Server II Actividades Desarrollo Active Directory UD02_6 \u00b6 Instalaci\u00f3n Active Directory I Instalaci\u00f3n Active Directory II Administraci\u00f3n de Usuarios y Grupos Actividades Desarrollo Active Directory UD02_7 \u00b6 Caso Pr\u00e1ctico: Creaci\u00f3n de una estructura en AD ( Ampliaci\u00f3n ) Permisos, directivas de grupo y perfiles I Permisos, directivas de grupo y perfiles II ( Ampliaci\u00f3n )","title":"2.3- Active Directory"},{"location":"023_ActiveDirectory.html#directorio-activo-en-windows-server","text":"Un servicio de directorio gestiona una base de datos organizada de modo jer\u00e1rquico con el objetivo de administrar de una manera sencilla los recursos de una red, almacenando informaci\u00f3n de cada elemento de la red de manera estructurada, lo que permite facilitar el proceso de b\u00fasqueda de los recursos y de autenticaci\u00f3n dentro de la red.","title":"Directorio Activo en Windows Server"},{"location":"023_ActiveDirectory.html#estructura-fisica-de-active-directory","text":"El Directorio Activo o Active Directory , durante este m\u00f3dulo se utilizar\u00e1n indistintamente ambos nombres; forma parte del subsistema de seguridad de Windows Server ejecut\u00e1ndose en modo usuario. Estructura f\u00edsica de AD Note Las aplicaciones que se ejecutan en este modo no tienen acceso directo al sistema operativo ni al hardware, sino que como medida de seguridad, las peticiones realizadas a estos deben pasar previamente por un subsistema de seguridad y posteriormente por la capa de servicios ejecutivos.","title":"Estructura f\u00edsica de Active Directory"},{"location":"023_ActiveDirectory.html#arquitectura-cliente-servidor","text":"Active Directory tambi\u00e9n esta basado en el modelo cliente-servidor es aquel en el que existen varios clientes, los cuales realizan peticiones a un servidor. Esquema de red cliente servidor Un servidor puede ser: Dedicado : La m\u00e1quina servidor s\u00f3lo se dedica a tareas de servicios en la red No dedicado : Adem\u00e1s de los servicios, la m\u00e1quina se puede usar como un puesto de trabajo m\u00e1s.","title":"Arquitectura cliente \u2013 servidor"},{"location":"023_ActiveDirectory.html#objetos-del-directorio-activo","text":"El Directorio Activo es una implementaci\u00f3n concreta del protocolo LDAP . Este protocolo trata los elementos de la red como objetos. Los tipos de objetos b\u00e1sicos que existen en el Directorio Activo son: Usuarios. Grupos. Equipos. Dominios. Impresoras. Unidades Organizativas. Tip Sin embargo los administradores de sistemas pueden crear nuevos tipos de objetos o a\u00f1adir propiedades a alguna clase de los objetos modificando el esquema del Directorio Activo, para adaptar la estructura de la red a las necesidades particulares de la organizaci\u00f3n.","title":"Objetos del Directorio Activo"},{"location":"023_ActiveDirectory.html#dominio","text":"Representa un conjunto de equipos (clientes y servidores) que comparten una pol\u00edtica de seguridad y una base de datos com\u00fan. En concreto para el Directorio Activo de Windows : Componente fundamental de la estructura l\u00f3gica de Active Directory. Por definici\u00f3n , se trata de un conjunto de objetos de tipo equipo, usuario y otras clases de objetos que comparten una base de datos de directorio com\u00fan. Los servidores pueden ser: Controladores de dominio : Contienen las cuentas de usuario y de otros datos del Directorio Activo . Debe haber al menos 1 por cada dominio . Servidores miembros del dominio : Se utilizan para almacenamiento de archivos y otros recursos compartidos en la red. No contienen informaci\u00f3n vital como cuentas de usuarios o pol\u00edticas de grupos. Servidores de Dominio","title":"Dominio"},{"location":"023_ActiveDirectory.html#roles","text":"Un rol de servidor es un conjunto de programas que permiten a un equipo realizar una funci\u00f3n espec\u00edfica para varios usuarios u otros equipos de una red. B\u00e1sicamente est\u00e1 relacionado con el cometido de dicho servidor, un servidor puede tener m\u00faltiples roles. Ejemplos: Servidor DHCP . Servidor DNS . Servidor Active Directory . Servidor de virtualizaci\u00f3n ( Hyper-V ). Servidor Web. Acceso remoto. Servidor de impresi\u00f3n. Servidor de correo electr\u00f3nico. A su vez, un rol puede tener diferentes funcionalidades o subroles, los cuales pueden estar activados o no. Dichos \u201csubroles\u201d son servicios de rol . Example un Servidor DNS solo tiene una finalidad y, por lo tanto, no tienen servicios de rol disponibles. En cambio un Servicio de Archivos (para compartir ficheros) puede tener el servicio de rol para el protocolo NFS o no, es decir, puede tener habilitada la funci\u00f3n de servidor de ficheros NFS. Note Network File System, o NFS , es un protocolo de nivel de aplicaci\u00f3n, seg\u00fan el Modelo OSI. Es utilizado para sistemas de archivos distribuido en un entorno de red de computadoras de \u00e1rea local. Posibilita que distintos sistemas conectados a una misma red accedan a ficheros remotos como si se tratara de locales. Para Agregar Roles:","title":"Roles"},{"location":"023_ActiveDirectory.html#diferencia-entre-grupo-de-trabajo-y-dominio","text":"Configuraci\u00f3n \"Grupo de Trabajo\" y \"Dominio\". Grupo de trabajo : es un conjunto de ordenadores comunicados entre s\u00ed, que forman parte de un mismo grupo. No obstante toda la gesti\u00f3n de pol\u00edticas/grupos/usuarios/servicios/\u2026 son individuales por cada m\u00e1quina. Note Es decir, en un directorio activo yo creo un usuario y desde cualquier m\u00e1quina asociada al dominio me puedo registrar, en el caso de un grupo de trabajo deber\u00e1 estar creado el usuario manualmente en cada equipo del grupo de trabajo, y as\u00ed con las pol\u00edticas de grupo, etc. Dominio como ya hemos visto (OpenLDAP) desde un servidor podemos gestionarlo todo, pol\u00edticas de grupo, usuarios, servicios, seguridad, recursos accesibles, etc.","title":"Diferencia entre \"Grupo de Trabajo\" y \"Dominio\""},{"location":"023_ActiveDirectory.html#unidad-organizativa","text":"Las unidades organizativas nos ayudan a organizar los objetos de nuestro dominio (impresoras, usuarios, grupos, \u2026). * Es parecido a la estructura de directorios (carpetas) de un sistema operativo, por ejemplo , dentro de nuestro dominio podemos tener una unidad organizativa por cada departamento de la empresa. En el siguiente ejemplo vemos un dominio con una unidad organizativa para usuarios de \" Contabilidad \", \" Recursos Humanos \", \" Inform\u00e1ticos \"y \" Marketing \". Unidades Organizativas en Active Directory","title":"Unidad Organizativa"},{"location":"023_ActiveDirectory.html#arboles","text":"Se da en redes muy grandes donde nos interesa segmentar en subdominios, de tal forma que el tr\u00e1fico o las peticiones de los usuarios al servidor de un subdominio no llegan al servidor ra\u00edz y por nos ayuda con el balanceo de carga de trabajo y ahorro en el ancho de banda de la red. No obstante la gesti\u00f3n sigue siendo centralizada desde el servidor ra\u00edz. Similar a DNS. Objetos en Active Directory.","title":"\u00c1rboles:"},{"location":"023_ActiveDirectory.html#bosques","text":"Un bosque es la uni\u00f3n de diferentes \u00e1rboles o dominios que conf\u00edan entre ellos, pero son dominios totalmente diferentes (salva.com y pepe.com). Al haber una confianza entre ellos tendr\u00e1n la posibilidad los usuarios de un dominio acceder a los recursos o a ciertos recursos del otro dominio que comparten el mismo bosque. Ejemplo de Objetos en Active Directory.","title":"Bosques"},{"location":"023_ActiveDirectory.html#servicios-de-ad-en-windows-server","text":"Cuando vayamos a a\u00f1adir nuestro rol de Active Directory al servidor, veremos que tenemos diferentes roles de Active Directory: Active Directory Lightweight Directory Services : Se trata de un Active Directory \"light\", no require de un dominio para su uso, simplemente alberga opciones/caracter\u00edsticas para ciertas aplicaciones que nos interese. Active Directory Rights Management Services : Nos ayuda a gestionar la protecci\u00f3n del acceso a nuestros ficheros del directorio activo. Por ejemplo si un documento se intenta abrir desde un usuario no autorizado. Servicios de certificados de Active Directory : Simplemente gestiona la creaci\u00f3n de certificados digitales. Es para entidades de certificaci\u00f3n oficial (seguridad inform\u00e1tica). Servicios de dominio de Active Directory: Este va a ser la opci\u00f3n que veremos en el m\u00f3dulo. Es el active directory que hemos visto con OpenLDAP en el apartado de Linux. Servicio de federaci\u00f3n de Active Directory: Gestiona el acceso seguro desde dentro y desde fuera de tu red (Internet) a aplicaciones gestionadas en local por el servidor de Windows Active Directory. Obviamente con las credenciales de usuarios del active directory.","title":"Servicios de AD en Windows Server"},{"location":"023_ActiveDirectory.html#ldap-y-kerberos","text":"La base de datos de los usuarios, almacenada a trav\u00e9s de LDAP se almacena en los controladores de dominio. Adem\u00e1s el fichero \" ntds.dit \" ser\u00e1 el que almacene realmente dicha base de datos. La autenticaci\u00f3n de los usuarios se realizar\u00e1 a trav\u00e9s de Kerberos . Kerberos es un protocolo de autenticaci\u00f3n de redes de ordenador creado por el MIT que permite a dos ordenadores en una red insegura demostrar su identidad mutuamente de manera segura.","title":"LDAP y KERBEROS"},{"location":"023_ActiveDirectory.html#actividades-iniciales-active-directory-ud02_5","text":"Windows Server Configuraci\u00f3n B\u00e1sica Windows Server Configuraci\u00f3n B\u00e1sica Windows Server II","title":"Actividades Iniciales Active Directory UD02_5"},{"location":"023_ActiveDirectory.html#actividades-desarrollo-active-directory-ud02_6","text":"Instalaci\u00f3n Active Directory I Instalaci\u00f3n Active Directory II Administraci\u00f3n de Usuarios y Grupos","title":"Actividades Desarrollo Active Directory UD02_6"},{"location":"023_ActiveDirectory.html#actividades-desarrollo-active-directory-ud02_7","text":"Caso Pr\u00e1ctico: Creaci\u00f3n de una estructura en AD ( Ampliaci\u00f3n ) Permisos, directivas de grupo y perfiles I Permisos, directivas de grupo y perfiles II ( Ampliaci\u00f3n )","title":"Actividades Desarrollo Active Directory UD02_7"},{"location":"023_LDAPutils.html","text":"La herramienta ldapsearch , provista por el paquete, resulta muy conveniente al momento de hacer consultas sobre los datos dentro de un directorio LDAP desde l\u00ednea de comandos. Este art\u00edculo presenta una serie de consultas de ejemplo que pueden resultar muy \u00fatiles para obtener informaci\u00f3n valiosa de un \u00e1rbol LDAP. Obtener todos los objetos de un directorio \u00b6 Para obtener todos los objetos en un directorio (dn) a partir de cierta base ( dc=linuxito,dc=com ) y sin l\u00edmite de para la respuesta, utilizar una consulta como la siguiente: ldapsearch -z 0 -H ldap://localhost:389 -W -D \"cn=root,dc=linuxito,dc=com\" -b \"dc=linuxito,dc=com\" \"(objectclass=*) -z 0 : evita cortar la respuesta una vez alcanzado cierto l\u00edmite (cantidad de entradas). -H ldap://localhost:389 : indica que consulte al servidor LDAP en el puerto 389 del host local. -W : indica que solicite la contrase\u00f1a para el m\u00e9todo de autenticaci\u00f3n simple de manera interactiva. -D \"cn=root,dc=linuxito,dc=com\" : especifica el usuario con el cual se autentica en el servidor LDAP. -b \"dc=linuxito,dc=com\" : especifica la base desde donde comenzar la b\u00fasqueda (en este caso se trata de la ra\u00edz del directorio). \"(objectclass=*)\" : especifica el filtro para la b\u00fasqueda (en este ejemplo todos los objetos, este a su vez es el filtro por defecto). El punto importante es no olvidar especificar la base ( -b ). De lo contrario probablemente no haya resultados en la b\u00fasqueda: # search result search: 2 result: 32 No such object Ejemplo (utilizando grep para filtrar s\u00f3lo los dn): root@debian:~# ldapsearch -z 0 -H ldap://localhost:389 -W -D \"cn=root,dc=linuxito,dc=com\" -b \"dc=linuxito,dc=com\" \"(objectclass=*)\" | grep \"dn:\" Enter LDAP Password: dn: dc=linuxito,dc=com dn: cn=Manager,dc=linuxito,dc=com dn: ou=users,dc=linuxito,dc=com dn: uid=emiliano,ou=users,dc=linuxito,dc=com dn: uid=test,ou=users,dc=linuxito,dc=com dn: ou=fusiondirectory,dc=linuxito,dc=com dn: cn=config,ou=fusiondirectory,dc=linuxito,dc=com dn: ou=aclroles,dc=linuxito,dc=com dn: cn=admin,ou=aclroles,dc=linuxito,dc=com dn: ou=people,dc=linuxito,dc=com dn: uid=fd-admin,ou=people,dc=linuxito,dc=com dn: cn=manager,ou=aclroles,dc=linuxito,dc=com dn: cn=editowninfos,ou=aclroles,dc=linuxito,dc=com dn: cn=editownpwd,ou=aclroles,dc=linuxito,dc=com dn: ou=recovery,ou=fusiondirectory,dc=linuxito,dc=com dn: ou=reminder,ou=fusiondirectory,dc=linuxito,dc=com dn: ou=locks,ou=fusiondirectory,dc=linuxito,dc=com dn: ou=snapshots,dc=linuxito,dc=com Recordar que hay exactamente un dn ( distinguished name ) por cada entrada en el \u00e1rbol. Por supuesto al salida es muy extensa y presenta todos los atributos para cada entrada en el \u00e1rbol. Se recomienda utilizar grep para filtrar y lograr una salida m\u00e1s legible (recuperar s\u00f3lo aquella informaci\u00f3n que nos interesa). Obtener todas las unidades organizacionales \u00b6 Las ou ( Organizational Unit ) definen la jerarqu\u00eda dentro de un dominio. Generalmente se utilizan para definir los departamentos o \u00e1reas dentro de una organizaci\u00f3n (empresa, red, sociedad, etc.). Para obtener una lista de todas las ou presentes en un directorio, se puede utilizar el filtro \"(ou=*)\" : ldapsearch -z 0 -H ldap://localhost:389 -W -D \"cn=root,dc=linuxito,dc=com\" -b \"dc=linuxito,dc=com\" \"(ou=*)\" Ejemplo: root@debian:~# ldapsearch -z 0 -H ldap://localhost:389 -W -D \"cn=root,dc=linuxito,dc=com\" -b \"dc=linuxito,dc=com\" \"(ou=*)\" | grep \"dn:\" Enter LDAP Password: dn: dc=linuxito,dc=com dn: ou=users,dc=linuxito,dc=com dn: ou=fusiondirectory,dc=linuxito,dc=com dn: ou=aclroles,dc=linuxito,dc=com dn: ou=people,dc=linuxito,dc=com dn: ou=recovery,ou=fusiondirectory,dc=linuxito,dc=com dn: ou=reminder,ou=fusiondirectory,dc=linuxito,dc=com dn: ou=locks,ou=fusiondirectory,dc=linuxito,dc=com dn: ou=snapshots,dc=linuxito,dc=com Listar todos los usuarios \u00b6 Esta consulta depende de la jerarqu\u00eda y la clase utilizada para almacenar usuarios dentro de un \u00e1rbol LDAP. Sin embargo, generalmente se utiliza la clase inetOrgPerson para almacenar usuarios dentro de un directorio LDAP, la cual posee el atributo uid . De esta forma, para listar todos los usuarios presentes en un directorio, simplemente recurrir al filtro \"(uid=*)\" : ldapsearch -z 0 -H ldap://localhost:389 -W -D \"cn=root,dc=linuxito,dc=com\" -b \"dc=linuxito,dc=com\" \"(uid=*)\" Por ejemplo: root@debian:~# ldapsearch -z 0 -H ldap://localhost:389 -W -D \"cn=root,dc=linuxito,dc=com\" -b \"dc=linuxito,dc=com\" \"(uid=*)\" | grep -B 1 \"dn:\" Enter LDAP Password: # emiliano, users, linuxito.com dn: uid=emiliano,ou=users,dc=linuxito,dc=com -- # test, users, linuxito.com dn: uid=test,ou=users,dc=linuxito,dc=com -- # fd-admin, people, linuxito.com dn: uid=fd-admin,ou=people,dc=linuxito,dc=com Determinar todas las clases en uso \u00b6 Las clases de un directorio LDAP determinan el formato con el que se representan los datos de los objetos almacenados en el \u00e1rbol. Cada objeto (entrada en un directorio LDAP) pertenece a al menos una clase. Sin embargo es com\u00fan que cada objeto pertenezca a varias clases. B\u00e1sicamente las clases definen qu\u00e9 atributos y de qu\u00e9 formato puede poseer un objeto. Para listar todas las clases actualmente en uso por todos los objetos, es necesario volcar todo el contenido del \u00e1rbol y filtrar con grep : ldapsearch -z 0 -H ldap://localhost:389 -W -D \"cn=root,dc=linuxito,dc=com\" -b \"dc=linuxito,dc=com\" \"(objectclass=*)\" | grep objectClass | sort | uniq Por ejemplo: root@debian:~# ldapsearch -z 0 -H ldap://localhost:389 -W -D \"cn=root,dc=linuxito,dc=com\" -b \"dc=linuxito,dc=com\" \"(objectclass=*)\" | grep objectClass | sort | uniq Enter LDAP Password: objectClass: account objectClass: dcObject objectClass: fdAliasPluginConf objectClass: fdApplicationsPluginConf objectClass: fdAuditPluginConf objectClass: fdAutofsPluginConf objectClass: fdCommunityPluginConf objectClass: fdDashboardPluginConf objectClass: fdDhcpPluginConf objectClass: fdDnsPluginConf objectClass: fdDsaPluginConf objectClass: fdEjbcaPluginConf objectClass: fdFaiPluginConf objectClass: fdInventoryPluginConf objectClass: fdMailPluginConf objectClass: fdNagiosPluginConf objectClass: fdNetgroupPluginConf objectClass: fdNewsletterPluginConf objectClass: fdOpsiPluginConf objectClass: fdPasswordRecoveryConf objectClass: fdPersonalPluginConf objectClass: fdPpolicyPluginConf objectClass: fdRepositoryPluginConf objectClass: fdSambaPluginConf objectClass: fdSogoPluginConf objectClass: fdSudoPluginConf objectClass: fdSupannPluginConf objectClass: fdSympaPluginConf objectClass: fdSystemsPluginConf objectClass: fdUserReminderPluginConf objectClass: fdWebservicePluginConf objectClass: fusionDirectoryConf objectClass: fusionDirectoryPluginsConf objectClass: gosaAcl objectClass: gosaDepartment objectClass: gosaRole objectClass: inetOrgPerson objectClass: organization objectClass: organizationalPerson objectClass: organizationalRole objectClass: organizationalUnit objectClass: person objectClass: posixAccount objectClass: shadowAccount objectClass: top Esta consulta permitir\u00e1 identificar qu\u00e9 schemas dentro de una servidor LDAP est\u00e1n siendo utilizados y cu\u00e1les no. Referencias \u00b6 Object Naming - Microsoft TechNet Organizational Units - Microsoft TechNet LDAP DNs and RDNs LDAP Object Classes RFC 2798 - Definition of the inetOrgPerson LDAP Object Class","title":"023 LDAPutils"},{"location":"031_Planificador.html","text":"Administraci\u00f3n de procesos del sistema \u00b6 Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 6 sesiones (2h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Administra procesos del sistema describi\u00e9ndolos y aplicando criterios de seguridad y eficiencia. Se han utilizado interrupciones y excepciones para describir los eventos internos del procesador. Se ha diferenciado entre proceso, hilo y trabajo. Se han realizado tareas de creaci\u00f3n, manipulaci\u00f3n y terminaci\u00f3n de procesos. Se ha utilizado el sistema de archivos como medio l\u00f3gico para el registro e identificaci\u00f3n de los procesos del sistema. Se han utilizado herramientas gr\u00e1ficas y comandos para el control y seguimiento de los procesos del sistema. Se ha comprobado la secuencia de arranque del sistema, los procesos implicados y la relaci\u00f3n entre ellos. Se han tomado medidas de seguridad ante la aparici\u00f3n de procesos no identificados. Se han documentado los procesos habituales del sistema, su funci\u00f3n y relaci\u00f3n entre ellos. Procesos. Tipos. Estados. Estructura. \u00b6 Un proceso es una instancia de un programa en ejecuci\u00f3n . Es decir, cada vez que se lanza un programa, se crea un proceso, de forma que si lanzo el mismo programa dos veces, tendr\u00e9 dos procesos distintos aunque partan de las mismas instrucciones. Cuando el usuario o una aplicaci\u00f3n pide la ejecuci\u00f3n de un determinado programa, el sistema operativo debe proveer de los recursos necesarios para esta tarea. Para ello debe buscar espacio en memoria RAM tanto para las instrucciones que van a ejecutarse como para los datos que necesita el programa y saber qu\u00e9 ficheros, dispositivos de E/S, etc... van a ser utilizados. Warning La CPU se encarga de un solo proceso en cada instante de tiempo, para optimizar el redimiento de la misma se utilizan t\u00e9cnicas como la multiprogramaci\u00f3n y multihilado , conceptos que se ver\u00e1n en esta Unidad. La multiprogramaci\u00f3n es una t\u00e9cnica de multiplexaci\u00f3n que permite la ejecuci\u00f3n simult\u00e1nea de m\u00faltiples procesos en un \u00fanico procesador. En realidad, esta t\u00e9cnica produce una ilusi\u00f3n de paralelismo, de manera que parece que todos los procesos se est\u00e1n ejecutando a la vez. Sin embargo, hay un \u00fanico proceso ejecut\u00e1ndose en el procesador a la vez. Ejemplo de Multiprogramaci\u00f3n Estructura \u00b6 Los procesos se estructuran de forma jer\u00e1rquica . EL sistema operativo lanza el primero y a partir de este se crean todos los dem\u00e1s. El sistema operativo crear\u00e1 una estructura de control en la que tenga toda la informaci\u00f3n de dicho proceso. A esta estructura se le llama BCP (Bloque de control de proceso), y contiene diferente informaci\u00f3n dependiendo del sistema operativo del que hablemos, pero por lo general tiene: PID (Process IDentifier): Identifica de forma un\u00edvoca al proceso en el sistema, generalmente se emplea un entero sin signo . Estado del proceso : listo o espera, ejecuci\u00f3n o bloqueado**. Registros del procesador : cada vez que se ejecuta el planificador y se realiza una conmutaci\u00f3n de procesos, la informaci\u00f3n sobre en qu\u00e9 lugar se encontraba la ejecuci\u00f3n del proceso debe guardarse, as\u00ed como el lugar en el que se par\u00f3 la ejecuci\u00f3n del anterior proceso (en su respectivo BCP). Gesti\u00f3n de memoria : tales como el espacio de direcciones y la cantidad de memoria asignada a un proceso. Aspectos relacionados con la administraci\u00f3n de ficheros : por ejemplo con que ficheros est\u00e1 el proceso actualmente operando. Los procesadores en los que el proceso puede ejecutarse: en caso de soportar el sistema multiprocesador. En el caso de un sistema operativo tipo UNIX: el proceso padre de dicho proceso y la relaci\u00f3n de procesos. Estad\u00edsticas Tiempo de lanzamiento del proceso, tiempo en estado activo, etc. Componentes de BCP Tipos de Procesos \u00b6 Los procesos pueden clasificarse de distintas formas, por ejemplo, atendiendo a la interacci\u00f3n con el usuario podemos encontrarnos: Procesos en primer plano (foreground) : precisan de la intervenci\u00f3n del usuario. Procesos en segundo plano (background) : Se ejecutan sin que el usuario tenga que hacer nada. Tambi\u00e9n podemos atender al modo en el que se ejecutan estos, aunque puede ser que un mismo proceso pase de un modo a otro durante su ejecuci\u00f3n. Procesos en modo kernel : Son procesos que tienen acceso privilegiado a todo el equipo. Son mucho m\u00e1s seguros. La mayor\u00eda de los procesos del sistema operativo son de este tipo. Procesos en modo usuario : Menos seguros. Todos los que ejecutan los usuarios y/o aplicaciones de usuario suelen ser de ese tipo. Dependiendo de qui\u00e9n lo ejecut\u00f3: Procesos del sistema : Los que han sido lanzados por el propio sistema operativo. Procesos de usuario : Los que ha lanzado un usuario. Tambi\u00e9n podemos encontrar procesos monohilo o multihilo . Estados \u00b6 Hay tres estados b\u00e1sicos en los que puede estar un proceso: En ejecuci\u00f3n : el proceso tiene asignada la CPU, por la tanto est\u00e1 en ejecuci\u00f3n en ese instante. Listo o En espera : Est\u00e1 en la listo para que se le conceda el procesador. Es una especie de buffer que guarda el orden de llegada de los procesos. Bloqueado : Est\u00e1 esperando a que se libere un recurso para poder seguir con su ejecuci\u00f3n. Estados en los que puede estar un proceso Note Podemos encontrar m\u00e1s estados intermedios hasta 13, a destacar los definidos anteriormente, ya que los que contemplan todos los sistemas operativos multitarea. Aunque es recomendable tambi\u00e9n conocer los siguientes: Parado : Le ha llegado una se\u00f1al para que se pare y espera a que le llegue otra para reiniciarse. Por ejemplo, el proceso tiene configurado un tiempo de inactividad, como una especie de reloj despertador de forma que cuando pase ese tiempo, le llegar\u00e1 una se\u00f1al y se reiniciar\u00e1. ( sleep ) Zombie : El proceso, que es hijo de otro, ha terminado pero por alg\u00fan motivo no puede comunicarse con su proceso padre y terminar completamente. Estos procesos quedan ocupando una entrada en la tabla de procesos y los recursos correspondientes. Transiciones de estados \u00b6 Los procesos pueden pasar desde su ejecuci\u00f3n por tres estados, que son los que indicamos en el punto anterior: En espera, bloqueado y en ejecuci\u00f3n. Cuando un usuario o el sistema operativo ejecuta un programa, ocurre lo siguiente: Se crea una nueva entrada en la tabla de procesos del sistema, Se asigna un PID al proceso. Se le asignan los recursos y la zona de memoria necesaria. Se cargan las p\u00e1ginas del programa en memoria RAM. Se pone el proceso en la lista de espera para que el planificador le conceda el procesador. En ese momento el planificador debe cambiar de estado a los procesos en funci\u00f3n de sus caracter\u00edsticas, del quantum o de si posee o no los recursos necesarios para su ejecuci\u00f3n. Se pueden dar las siguientes transiciones: El proceso se encuentra listo para su ejecuci\u00f3n y le toca el turno para pasar al procesador. En este momento el proceso cuenta con todos los recursos que necesita. Cuando un proceso se encuentra en ejecuci\u00f3n pero pierde alguno de sus recursos y no puede continuar. En este momento el planificador lo coloca en estado bloqueado. Cuando un proceso en estado bloqueado (le falta alg\u00fan recurso) ha obtenido todo lo que necesita para seguir con su ejecuci\u00f3n. El planificador lo coloca en estado Preparado. Cuando un proceso se encuentra en ejecuci\u00f3n y no pierde ninguno de sus recursos, pero ha terminado el tiempo asignado por el planificador para usar el procesador. Pasa al estado Preparado. La transici\u00f3n que nunca de dar\u00e1 , si el planificador es adecuado, es que va desde el estado En espera o Bloqueado al de En Ejecuci\u00f3n . Si ocurriera esto, es decir, si un proceso decidiera tomar el control de los recursos sin consultarle al planificador, los resultados podr\u00edan ser catastr\u00f3ficos. Estados en los que puede estar un proceso Hilos de ejecuci\u00f3n. (threads o procesos ligeros) \u00b6 Un hilo o hebra, proceso ligero o subproceso es una secuencia de tareas encadenadas muy peque\u00f1a que puede ser ejecutada por un sistema operativo. Warning A priori los procesos pueden ejecutarse como un solo hilo , es decir, las instrucciones v\u00e1n siguiendo un orden y nunca se pueden ejecutar a la vez dos instrucciones del mismo proceso. El concepto de multihilo consiste en que partes del mismo proceso pueden ejecutarse en paralelo, es decir , el mismo programa tiene partes que pueden ejecutarse a la vez. De este modo, se puede ahorrar tiempo. Por ejemplo, un navegador de internet puede tener varios hilos, uno muestra las im\u00e1genes mientras otro recupera datos de la red. Estados en los que puede estar un proceso Important Es f\u00e1cil confundir hilos y procesos. La diferencia principal es que un proceso tiene asignado un un BCP y los hilos son parte del mismo proceso. Esto significa entre otras cosas que la memoria que se asigna al proceso la compartir\u00e1n todos los hilos. Tambi\u00e9n comparten el resto de recursos como ficheros abiertos, etc. Esto quiere decir que si uno de los hilos modifica un recurso o una variable de memoria, el cambio afectar\u00e1 al resto de hilos del proceso. Debido a esto es importante la sincronizaci\u00f3n entre hilos . Cada hilo tendr\u00e1 un identificador, un contador de programa y una pila propias. Se pueden distinguir los siguientes tipos de hilos: Hilos a nivel de usuario : Son los que crean los programadores y de los cuales el kernel o n\u00facleo del sistema no es consciente de que existan, por lo que el propio programador debe encargarse de la sincronizaci\u00f3n de estos. Hilos a nivel de kernel : Estos son gestionados por el sistema operativo, por lo que si tenemos un procesador con varios n\u00facleos y /o varios procesadores, se acelerar\u00e1 la ejecuci\u00f3n del proceso . El sistema operativo se encarga del cambio entre hilos. Adem\u00e1s contamos con sistemas operativos que son capaces de gestionar hilos (a nivel de kernel , claro) y sistemas operativos que no lo son. Estados en los que puede estar un proceso Ventajas de los hilos frente a los procesos. \u00b6 Los hilos son mucho m\u00e1s ligeros que los procesos. En la creaci\u00f3n de procesos se necesita un tiempo para la adjudicaci\u00f3n de memoria y de recursos que no es necesaria en el caso de cambio entre hilos. Tambi\u00e9n el cambio de contexto es mucho m\u00e1s \"Pesado\" en el caso de los procesos. La utilizaci\u00f3n de hilos hace que los procesos sean m\u00e1s \u00e1giles , debido a que si una de las partes del proceso se bloquea esperando un recurso, otra en otro hilo puede avanzar con otras tareas. En caso de procesadores multin\u00facleo o sistemas multiprocesador, la eficiencia de los procesos que utilizan hilos es evidente, al poder realizar varias tareas realmente en paralelo (un hilo en cada procesador). Note Un proceso multihilo no desaparece hasta que no han terminado todos sus hilos. El planificador \u00b6 El planificador es el proceso del sistema operativo que se encarga de decidir a qu\u00e9 proceso o hilo se le va a ceder el procesador y por cu\u00e1nto tiempo. Para esto, se utilizan una serie de algoritmos matem\u00e1ticos que intentan conseguir los siguientes objetivos en el reparto de la cpu: Equidad: Todos los procesos deben ser atendidos. Eficacia: El procesador debe estar ocupado el 100% del tiempo. Tiempo de respuesta: El tiempo empleado en dar respuesta a las solicitudes del usuario debe ser el menor posible. Tiempo de regreso: Reducir al m\u00ednimo el tiempo de espera de los resultado esperados por los usuarios por lotes. Rendimiento: Maximizar el n\u00famero de tareas que se procesan por cada hora. Tipos de algoritmo de programaci\u00f3n de CPU \u00b6 Existen principalmente seis tipos de algoritmos de programaci\u00f3n de procesos: First Come First Serve (FCFS) o First In First Out ( FIFO ) Shortest-Job-First ( SJF ) Shortest Remaining Time First ( SRTF ) Prioridades: Expulsivo o no Expulsivo. Round Robin. FIFO \u00b6 El primero en llegar es el primero en ser servido es la forma completa de FCFS. Es el algoritmo de programaci\u00f3n de CPU m\u00e1s f\u00e1cil y simple . En este tipo de algoritmo, el proceso que solicita la CPU obtiene primero la asignaci\u00f3n de CPU. Caracter\u00edsticas : No expulsivo. Los trabajos siempre se ejecutan por orden de llegada. Es f\u00e1cil de implementar y usar. Sin embargo, este m\u00e9todo tiene un rendimiento deficiente y el tiempo de espera general es bastante alto. Ejemplo FIFO SJF \u00b6 Este m\u00e9todo utiliza una pol\u00edtica de programaci\u00f3n que selecciona para la ejecuci\u00f3n el proceso de espera con el menor tiempo de ejecuci\u00f3n. Caracter\u00edsticas : No expulsivo. Es ventajoso debido a su simplicidad y porque minimiza la cantidad promedio de tiempo que cada proceso tiene que esperar hasta que se completa su ejecuci\u00f3n. El tiempo total de ejecuci\u00f3n de un trabajo debe conocerse antes de su ejecuci\u00f3n. Ejemplo SJF SRTF \u00b6 Este m\u00e9todo es la evoluci\u00f3n del anterior pero con la caracter\u00edstica de ser Expulsivo. Caracter\u00edsticas : Expulsivo. Este m\u00e9todo se aplica principalmente en entornos por lotes donde se requiere dar preferencia a los trabajos cortos. Este no es un m\u00e9todo ideal para implementarlo en un sistema compartido donde se desconoce el tiempo de CPU requerido. Ejemplo SRTF Prioridades \u00b6 Es un m\u00e9todo de programaci\u00f3n de procesos en funci\u00f3n de la prioridad. Los procesos con mayor prioridad deben llevarse a cabo en primer lugar, mientras que los trabajos con igual prioridad se llevan a cabo por turnos o FCFS. La prioridad se puede decidir en funci\u00f3n de los requisitos de memoria, los requisitos de tiempo, etc. Ejemplo Prioridades no expulsivo Ejemplo Prioridades expulsivo Round Robin \u00b6 El nombre de este algoritmo proviene del principio de turnos, en el que cada persona obtiene una parte igual de algo a su vez. Se utiliza principalmente para programar algoritmos en multitarea. Este m\u00e9todo de algoritmo ayuda a la ejecuci\u00f3n libre de inanici\u00f3n de procesos. Caracter\u00edsticas : Round robin es un modelo h\u00edbrido que funciona con reloj Es un sistema en tiempo real que responde al evento dentro de un l\u00edmite de tiempo espec\u00edfico. Aumenta los tiempos medios. Ejemplo Round Robin Interrupciones y excepciones \u00b6 Una Interrupci\u00f3n es una se\u00f1al que env\u00eda un dispositivo de E/S al procesador para pedir que se le atienda. Cada interrupci\u00f3n tiene asociada una rutina que debe pasar a ejecutarse cuando esta se produzca. Tambi\u00e9n existen las interrupciones de Software, que env\u00edan los programas de usuario al sistema operativo para requerir su atenci\u00f3n. Resumen Interrupci\u00f3n Una excepci\u00f3n se produce cuando hay una instrucci\u00f3n err\u00f3nea en un programa, por ejemplo, una divisi\u00f3n por 0. En ese momento el sistema operativo debe realizar las acciones oportunas. En ciertos intervalos de tiempo puede convenir no aceptar se\u00f1ales de interrupci\u00f3n. Por ello las interrupciones pueden inhibirse por programa. Sincronizaci\u00f3n y Comunicaci\u00f3n entre procesos \u00b6 Hay procesos independientes y otros que deben comunicarse y sincronizarse con otros. En este caso se utilizan se\u00f1ales para enviar informaci\u00f3n entre procesos , y de este modo poder gestionar recursos y zonas de memoria compartida. A continuaci\u00f3n se muestran varios ejemplos en los que se evidencia la necesidad de sincronizaci\u00f3n entre procesos. Example Un proceso (P1) puede necesitar un dato que otro proceso (P2) produce y hasta que esto no ocurra, no podr\u00e1 continuar con su ejecuci\u00f3n. En este caso el proceso P1 se quedar\u00e1 bloqueado hasta que reciba una se\u00f1al que le enviar\u00e1 P2, indic\u00e1ndole que ya tiene disponible el dato. Condiciones de competencia \u00b6 Existen una serie de casos en los que pueden aparecer ciertos problemas denominados Condiciones de competencia ; los cuales ocurren cuando dos o m\u00e1s procesos intentan acceder a un mismo recurso. Example P1 y P2 intentan acceder a una variable global en memoria que llamaremos A pongamos que con un valor inicial de 5 . P1 se encarga de sumar 2 a la variable y P2 de restarle 1.Lo normal es que si entra P1 , modifica A y luego lo hace P2, el resultado de A sea 6. Pero puede darse el siguiente caso : P1 recoge el valor de la variable, por ejemplo, (5) la pase a un registro interno de la cpu para operar con este valor y antes de dejar el resultado en memoria pierda el procesador. En ese momento P2 entra en el procesador y pone sus registros, etc. Recoge el valor de A (5, puesto que a P1 no le ha dado tiempo a dejar el resultado en memoria), lo cambia con un resultado de 4 y lo deja en memoria. Cuando el proceso P1 vuelva a tener el procesador, dejar\u00e1 su resultado (5+2=7) en la variable A de memoria, machacando el resultado de P2 y se habr\u00e1 perdido la operaci\u00f3n que realiz\u00f3 dicho proceso. Interbloqueo o abrazo \u00b6 Example En el caso de competencia por recursos, el sistema operativo tambi\u00e9n se debe asegurar de que no se produce Interbloqueo o abrazo Esto ocurre, por ejemplo, cuando un proceso P1 necesita dos recursos R1 y R2; A su vez otro proceso P2 precisa tambi\u00e9n los mismos recursos. Interbloqueo P1 recibe la cpu y ocupa el recurso R1, y pierde el procesador. Entra P2 en el sistema y coge el recurso R2, como no puede coger el recurso R1 se bloquea. Pasa el procesador al proceso P1, pero este no puede coger el recurso R2, con lo que tambi\u00e9n se bloquea. El resultado es que tenemos dos procesos que se bloquean mutuamente y no pueden avanzar en su ejecuci\u00f3n. Para solucionar las condiciones de competencia se implement\u00f3 un modelo para prohibir que dos procesos accedan al mismo recurso. El modelo en cuesti\u00f3n se denomina exclusi\u00f3n mutua . Exclusi\u00f3n mutua \u00b6 Para poder explicar la Exclusi\u00f3n mutua debemos definir el concepto de secci\u00f3n cr\u00edtica. Definition La secci\u00f3n cr\u00edtica de un programa es la zona del programa en la que se puede modificar el recurso que comparten varios procesos, dependiendo de permisos preestablecidos. Resumen Exclusi\u00f3n Mutua Las soluciones de exclusi\u00f3n mutua con espera ocupada funcionan de la siguiente manera: cuando un proceso intenta entrar a su regi\u00f3n cr\u00edtica, verifica si est\u00e1 permitida la entrada. Si no, el proceso se queda esperando hasta obtener el permiso. Para ello se pueden utilizar diferentes m\u00e9todos como son: Desactivaci\u00f3n de interrupciones : El m\u00e9todo m\u00e1s simple para evitar las condiciones de competencia es hacer que cada proceso desactive todas sus interrupciones antes de entrar a su secci\u00f3n cr\u00edtica y las active una vez que sali\u00f3 de la misma. De esta forma, no sale de la cpu hasta que no ha terminado la ejecuci\u00f3n del la secci\u00f3n cr\u00edtica. Este modelo tiene un gran problema y es que si se produce un fallo mientras que el proceso est\u00e1 en la regi\u00f3n cr\u00edtica no puede salir de la misma y el sistema operativo no recuperar\u00eda el control. Sem\u00e1foros y variable cerradura : En \u00e9ste caso se genera una variable , que se conoce como que puede tener dos valores: o bien 0 : no hay ning\u00fan proceso en su secci\u00f3n cr\u00edtica. o bien 1 : indica que la secci\u00f3n cr\u00edtica est\u00e1 ocupada. Entonces cada proceso antes de ingresar a la secci\u00f3n cr\u00edtica verifica el estado de la variable de cerradura y en caso de que la misma este en 0, le cambia el valor y accede a la misma y en caso de que la misma sea 1 el proceso se queda esperando hasta que el mismo sea 0. El problema aqu\u00ed se presenta si dos procesos verifican al mismo tiempo que la variable cerradura est\u00e1 en e ingresan a la regi\u00f3n cr\u00edtica al mismo tiempo. Alternancia estricta : El algoritmo de alternancia estricta no bloquea el acceso a la regi\u00f3n cr\u00edtica cuando otro proceso se est\u00e1 ejecutando, sino que coge el recurso para s\u00ed durante toda la ejecuci\u00f3n del programa. Esta soluci\u00f3n requiere que los dos procesos se alternen de manera estricta. Su desventaja es que acopla los procesos fuertemente, esto significa que los procesos lentos atrasan a los procesos r\u00e1pidos.. Instrucci\u00f3n TSL : Esta soluci\u00f3n requiere ayuda del hardware y es debido a que en general las computadoras dise\u00f1adas para tener m\u00e1s de un procesador tienen una instrucci\u00f3n TEST AND SET LOCK (TSL) ; esta instrucci\u00f3n hardware es utilizada por ciertos procesadores para facilitar la creaci\u00f3n de sem\u00e1foros y otras herramientas necesarias para la programaci\u00f3n concurrente en computadores. TSL es una instrucci\u00f3n m\u00e1quina que realiza dos acciones: (1) Leer el contenido de una palabra de la memoria en un registro y (2) almacenar un valor distinto de cero en dicha palabra de memoria. Al tratarse de una instrucci\u00f3n m\u00e1quina, el procesador nos garantiza que la instrucci\u00f3n TSL es realizada sin ning\u00fan tipo de interrupci\u00f3n por parte de otro proceso, es decir las operaciones de lectura y escritura de la palabra tienen la garant\u00eda de ser indivisibles. Adem\u00e1s, si nos encontramos en un sistema multiprocesador, ninguno de los dem\u00e1s procesadores tendr\u00e1 acceso a la palabra hasta que termine de ejecutarse la instrucci\u00f3n. El procesador que ejecuta la instrucci\u00f3n TSL cierra el bus de la memoria para prohibir a los dem\u00e1s el acceso a la memoria hasta el t\u00e9rmino de la instrucci\u00f3n. El modelo de espera acotada tiene el inconveniente que se desperdicia tiempo de procesador, al perder tiempo durante la espera que el proceso pasa al estado de \"dormido\". Monitores : Un monitor es una colecci\u00f3n de procedimientos, variables y estructuras de datos que est\u00e1n todos agrupados juntos en un tipo especial de m\u00f3dulo o paquete; para poder acceder a un recurso , el proceso debe utilizar obligatoriamente los procedimientos del monitor, y este se encarga de realizar la exclusi\u00f3n mutua del recurso. Caracter\u00edsticas: Los monitores tienen una importante propiedad que los hace \u00fatiles para lograr la exclusi\u00f3n mutua: s\u00f3lo puede haber un proceso activo en un monitor en cualquier instante. Los monitores son una construcci\u00f3n del lenguaje de programaci\u00f3n, por lo que el compilador sabe que son especiales y puede manejar las llamadas a los procedimientos del monitor en forma distinta a las llamadas a otros procedimientos. Por lo general, cuando un proceso llama a un procedimiento de monitor, las primeras instrucciones del procedimiento comprobar\u00e1n si hay alg\u00fan otro proceso activo en un momento dado dentro del monitor. De ser as\u00ed, el proceso invocador se suspender\u00e1 hasta que el otro proceso haya dejado el monitor. Si no hay otro proceso utilizando el monitor, el proceso invocador puede entrar. Un problema con los monitores (y tambi\u00e9n con los sem\u00e1foros) es que est\u00e1n dise\u00f1ados para resolver el problema de exclusi\u00f3n mutua en una o m\u00e1s CPUs que tengan acceso a una memoria com\u00fan. Mensajes \u00b6 Cuando los procesos tienen que compartir informaci\u00f3n, incluso en equipos remotos, pueden utilizar colas de mensajes para enviarla. Los procesos introducen mensajes con la informaci\u00f3n necesaria en la cola y se van almacenando en ella. Cuando un proceso extrae un mensaje de la cola, recoge el primero que se introdujo y este se borra. Tambi\u00e9n es posible hacer \"tipos\" de mensajes distintos, de forma que cada tipo de mensaje contiene una informaci\u00f3n distinta y va identificado por un entero. Los procesos pueden leer s\u00f3lo los mensajes de un determinado tipo. Se\u00f1ales \u00b6 Las se\u00f1ales se utilizan para sincronizar procesos. Cada se\u00f1al tiene un comportamiento por defecto, como puede ser pausar un proceso o pararlo. La mayor\u00eda de ellas pueden ser tratadas de forma que el programa la recoja y realice una serie de instrucciones cuando esta llegue. Examples Hay formas de pasar se\u00f1ales al sistema operativo, por ejemplo, cuando pulsamos control+C, o utilizando funciones del sistema para enviar una determinada se\u00f1al a un proceso para modificar la forma de actuar de este en ese momento dado. Actividades Iniciales \u00b6 En las siguientes actividades se debe realizar: Calcular el tiempo de espera y tiempo de respuesta de cada proceso. Gr\u00e1ficamente y de forma num\u00e9rica con ayuda de la plantilla en ods adjunta en el moodle. Calcular el tiempo medio de espera y respuesta de cada algoritmo. Realizar una conclusi\u00f3n comparando los resultados de tiempos de los algoritmos. Utilizando los algoritmos de planificaci\u00f3n FIFO, SJF y SRTF: Utilizando los algoritmos de planificaci\u00f3n FIFO, Round Robin y Prioridades no expulsivo: En Round Robin utiliza el Quantum igual a 2. Utilizando los algoritmos de planificaci\u00f3n FIFO, Round Robin y SJF: En Round Robin utiliza el Quantum igual a 2. Utilizando los algoritmos de planificaci\u00f3n SRTF, Prioridades no expulsivo y Prioridades expulsivo:","title":"3.1- Planificaci\u00f3n y sincronizaci\u00f3n de procesos"},{"location":"031_Planificador.html#administracion-de-procesos-del-sistema","text":"Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 6 sesiones (2h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Administra procesos del sistema describi\u00e9ndolos y aplicando criterios de seguridad y eficiencia. Se han utilizado interrupciones y excepciones para describir los eventos internos del procesador. Se ha diferenciado entre proceso, hilo y trabajo. Se han realizado tareas de creaci\u00f3n, manipulaci\u00f3n y terminaci\u00f3n de procesos. Se ha utilizado el sistema de archivos como medio l\u00f3gico para el registro e identificaci\u00f3n de los procesos del sistema. Se han utilizado herramientas gr\u00e1ficas y comandos para el control y seguimiento de los procesos del sistema. Se ha comprobado la secuencia de arranque del sistema, los procesos implicados y la relaci\u00f3n entre ellos. Se han tomado medidas de seguridad ante la aparici\u00f3n de procesos no identificados. Se han documentado los procesos habituales del sistema, su funci\u00f3n y relaci\u00f3n entre ellos.","title":"Administraci\u00f3n de procesos del sistema"},{"location":"031_Planificador.html#procesos-tipos-estados-estructura","text":"Un proceso es una instancia de un programa en ejecuci\u00f3n . Es decir, cada vez que se lanza un programa, se crea un proceso, de forma que si lanzo el mismo programa dos veces, tendr\u00e9 dos procesos distintos aunque partan de las mismas instrucciones. Cuando el usuario o una aplicaci\u00f3n pide la ejecuci\u00f3n de un determinado programa, el sistema operativo debe proveer de los recursos necesarios para esta tarea. Para ello debe buscar espacio en memoria RAM tanto para las instrucciones que van a ejecutarse como para los datos que necesita el programa y saber qu\u00e9 ficheros, dispositivos de E/S, etc... van a ser utilizados. Warning La CPU se encarga de un solo proceso en cada instante de tiempo, para optimizar el redimiento de la misma se utilizan t\u00e9cnicas como la multiprogramaci\u00f3n y multihilado , conceptos que se ver\u00e1n en esta Unidad. La multiprogramaci\u00f3n es una t\u00e9cnica de multiplexaci\u00f3n que permite la ejecuci\u00f3n simult\u00e1nea de m\u00faltiples procesos en un \u00fanico procesador. En realidad, esta t\u00e9cnica produce una ilusi\u00f3n de paralelismo, de manera que parece que todos los procesos se est\u00e1n ejecutando a la vez. Sin embargo, hay un \u00fanico proceso ejecut\u00e1ndose en el procesador a la vez. Ejemplo de Multiprogramaci\u00f3n","title":"Procesos. Tipos. Estados. Estructura."},{"location":"031_Planificador.html#estructura","text":"Los procesos se estructuran de forma jer\u00e1rquica . EL sistema operativo lanza el primero y a partir de este se crean todos los dem\u00e1s. El sistema operativo crear\u00e1 una estructura de control en la que tenga toda la informaci\u00f3n de dicho proceso. A esta estructura se le llama BCP (Bloque de control de proceso), y contiene diferente informaci\u00f3n dependiendo del sistema operativo del que hablemos, pero por lo general tiene: PID (Process IDentifier): Identifica de forma un\u00edvoca al proceso en el sistema, generalmente se emplea un entero sin signo . Estado del proceso : listo o espera, ejecuci\u00f3n o bloqueado**. Registros del procesador : cada vez que se ejecuta el planificador y se realiza una conmutaci\u00f3n de procesos, la informaci\u00f3n sobre en qu\u00e9 lugar se encontraba la ejecuci\u00f3n del proceso debe guardarse, as\u00ed como el lugar en el que se par\u00f3 la ejecuci\u00f3n del anterior proceso (en su respectivo BCP). Gesti\u00f3n de memoria : tales como el espacio de direcciones y la cantidad de memoria asignada a un proceso. Aspectos relacionados con la administraci\u00f3n de ficheros : por ejemplo con que ficheros est\u00e1 el proceso actualmente operando. Los procesadores en los que el proceso puede ejecutarse: en caso de soportar el sistema multiprocesador. En el caso de un sistema operativo tipo UNIX: el proceso padre de dicho proceso y la relaci\u00f3n de procesos. Estad\u00edsticas Tiempo de lanzamiento del proceso, tiempo en estado activo, etc. Componentes de BCP","title":"Estructura"},{"location":"031_Planificador.html#tipos-de-procesos","text":"Los procesos pueden clasificarse de distintas formas, por ejemplo, atendiendo a la interacci\u00f3n con el usuario podemos encontrarnos: Procesos en primer plano (foreground) : precisan de la intervenci\u00f3n del usuario. Procesos en segundo plano (background) : Se ejecutan sin que el usuario tenga que hacer nada. Tambi\u00e9n podemos atender al modo en el que se ejecutan estos, aunque puede ser que un mismo proceso pase de un modo a otro durante su ejecuci\u00f3n. Procesos en modo kernel : Son procesos que tienen acceso privilegiado a todo el equipo. Son mucho m\u00e1s seguros. La mayor\u00eda de los procesos del sistema operativo son de este tipo. Procesos en modo usuario : Menos seguros. Todos los que ejecutan los usuarios y/o aplicaciones de usuario suelen ser de ese tipo. Dependiendo de qui\u00e9n lo ejecut\u00f3: Procesos del sistema : Los que han sido lanzados por el propio sistema operativo. Procesos de usuario : Los que ha lanzado un usuario. Tambi\u00e9n podemos encontrar procesos monohilo o multihilo .","title":"Tipos de Procesos"},{"location":"031_Planificador.html#estados","text":"Hay tres estados b\u00e1sicos en los que puede estar un proceso: En ejecuci\u00f3n : el proceso tiene asignada la CPU, por la tanto est\u00e1 en ejecuci\u00f3n en ese instante. Listo o En espera : Est\u00e1 en la listo para que se le conceda el procesador. Es una especie de buffer que guarda el orden de llegada de los procesos. Bloqueado : Est\u00e1 esperando a que se libere un recurso para poder seguir con su ejecuci\u00f3n. Estados en los que puede estar un proceso Note Podemos encontrar m\u00e1s estados intermedios hasta 13, a destacar los definidos anteriormente, ya que los que contemplan todos los sistemas operativos multitarea. Aunque es recomendable tambi\u00e9n conocer los siguientes: Parado : Le ha llegado una se\u00f1al para que se pare y espera a que le llegue otra para reiniciarse. Por ejemplo, el proceso tiene configurado un tiempo de inactividad, como una especie de reloj despertador de forma que cuando pase ese tiempo, le llegar\u00e1 una se\u00f1al y se reiniciar\u00e1. ( sleep ) Zombie : El proceso, que es hijo de otro, ha terminado pero por alg\u00fan motivo no puede comunicarse con su proceso padre y terminar completamente. Estos procesos quedan ocupando una entrada en la tabla de procesos y los recursos correspondientes.","title":"Estados"},{"location":"031_Planificador.html#transiciones-de-estados","text":"Los procesos pueden pasar desde su ejecuci\u00f3n por tres estados, que son los que indicamos en el punto anterior: En espera, bloqueado y en ejecuci\u00f3n. Cuando un usuario o el sistema operativo ejecuta un programa, ocurre lo siguiente: Se crea una nueva entrada en la tabla de procesos del sistema, Se asigna un PID al proceso. Se le asignan los recursos y la zona de memoria necesaria. Se cargan las p\u00e1ginas del programa en memoria RAM. Se pone el proceso en la lista de espera para que el planificador le conceda el procesador. En ese momento el planificador debe cambiar de estado a los procesos en funci\u00f3n de sus caracter\u00edsticas, del quantum o de si posee o no los recursos necesarios para su ejecuci\u00f3n. Se pueden dar las siguientes transiciones: El proceso se encuentra listo para su ejecuci\u00f3n y le toca el turno para pasar al procesador. En este momento el proceso cuenta con todos los recursos que necesita. Cuando un proceso se encuentra en ejecuci\u00f3n pero pierde alguno de sus recursos y no puede continuar. En este momento el planificador lo coloca en estado bloqueado. Cuando un proceso en estado bloqueado (le falta alg\u00fan recurso) ha obtenido todo lo que necesita para seguir con su ejecuci\u00f3n. El planificador lo coloca en estado Preparado. Cuando un proceso se encuentra en ejecuci\u00f3n y no pierde ninguno de sus recursos, pero ha terminado el tiempo asignado por el planificador para usar el procesador. Pasa al estado Preparado. La transici\u00f3n que nunca de dar\u00e1 , si el planificador es adecuado, es que va desde el estado En espera o Bloqueado al de En Ejecuci\u00f3n . Si ocurriera esto, es decir, si un proceso decidiera tomar el control de los recursos sin consultarle al planificador, los resultados podr\u00edan ser catastr\u00f3ficos. Estados en los que puede estar un proceso","title":"Transiciones de estados"},{"location":"031_Planificador.html#hilos-de-ejecucion-threads-o-procesos-ligeros","text":"Un hilo o hebra, proceso ligero o subproceso es una secuencia de tareas encadenadas muy peque\u00f1a que puede ser ejecutada por un sistema operativo. Warning A priori los procesos pueden ejecutarse como un solo hilo , es decir, las instrucciones v\u00e1n siguiendo un orden y nunca se pueden ejecutar a la vez dos instrucciones del mismo proceso. El concepto de multihilo consiste en que partes del mismo proceso pueden ejecutarse en paralelo, es decir , el mismo programa tiene partes que pueden ejecutarse a la vez. De este modo, se puede ahorrar tiempo. Por ejemplo, un navegador de internet puede tener varios hilos, uno muestra las im\u00e1genes mientras otro recupera datos de la red. Estados en los que puede estar un proceso Important Es f\u00e1cil confundir hilos y procesos. La diferencia principal es que un proceso tiene asignado un un BCP y los hilos son parte del mismo proceso. Esto significa entre otras cosas que la memoria que se asigna al proceso la compartir\u00e1n todos los hilos. Tambi\u00e9n comparten el resto de recursos como ficheros abiertos, etc. Esto quiere decir que si uno de los hilos modifica un recurso o una variable de memoria, el cambio afectar\u00e1 al resto de hilos del proceso. Debido a esto es importante la sincronizaci\u00f3n entre hilos . Cada hilo tendr\u00e1 un identificador, un contador de programa y una pila propias. Se pueden distinguir los siguientes tipos de hilos: Hilos a nivel de usuario : Son los que crean los programadores y de los cuales el kernel o n\u00facleo del sistema no es consciente de que existan, por lo que el propio programador debe encargarse de la sincronizaci\u00f3n de estos. Hilos a nivel de kernel : Estos son gestionados por el sistema operativo, por lo que si tenemos un procesador con varios n\u00facleos y /o varios procesadores, se acelerar\u00e1 la ejecuci\u00f3n del proceso . El sistema operativo se encarga del cambio entre hilos. Adem\u00e1s contamos con sistemas operativos que son capaces de gestionar hilos (a nivel de kernel , claro) y sistemas operativos que no lo son. Estados en los que puede estar un proceso","title":"Hilos de ejecuci\u00f3n. (threads o procesos ligeros)"},{"location":"031_Planificador.html#ventajas-de-los-hilos-frente-a-los-procesos","text":"Los hilos son mucho m\u00e1s ligeros que los procesos. En la creaci\u00f3n de procesos se necesita un tiempo para la adjudicaci\u00f3n de memoria y de recursos que no es necesaria en el caso de cambio entre hilos. Tambi\u00e9n el cambio de contexto es mucho m\u00e1s \"Pesado\" en el caso de los procesos. La utilizaci\u00f3n de hilos hace que los procesos sean m\u00e1s \u00e1giles , debido a que si una de las partes del proceso se bloquea esperando un recurso, otra en otro hilo puede avanzar con otras tareas. En caso de procesadores multin\u00facleo o sistemas multiprocesador, la eficiencia de los procesos que utilizan hilos es evidente, al poder realizar varias tareas realmente en paralelo (un hilo en cada procesador). Note Un proceso multihilo no desaparece hasta que no han terminado todos sus hilos.","title":"Ventajas de los hilos frente a los procesos."},{"location":"031_Planificador.html#el-planificador","text":"El planificador es el proceso del sistema operativo que se encarga de decidir a qu\u00e9 proceso o hilo se le va a ceder el procesador y por cu\u00e1nto tiempo. Para esto, se utilizan una serie de algoritmos matem\u00e1ticos que intentan conseguir los siguientes objetivos en el reparto de la cpu: Equidad: Todos los procesos deben ser atendidos. Eficacia: El procesador debe estar ocupado el 100% del tiempo. Tiempo de respuesta: El tiempo empleado en dar respuesta a las solicitudes del usuario debe ser el menor posible. Tiempo de regreso: Reducir al m\u00ednimo el tiempo de espera de los resultado esperados por los usuarios por lotes. Rendimiento: Maximizar el n\u00famero de tareas que se procesan por cada hora.","title":"El planificador"},{"location":"031_Planificador.html#tipos-de-algoritmo-de-programacion-de-cpu","text":"Existen principalmente seis tipos de algoritmos de programaci\u00f3n de procesos: First Come First Serve (FCFS) o First In First Out ( FIFO ) Shortest-Job-First ( SJF ) Shortest Remaining Time First ( SRTF ) Prioridades: Expulsivo o no Expulsivo. Round Robin.","title":"Tipos de algoritmo de programaci\u00f3n de CPU"},{"location":"031_Planificador.html#interrupciones-y-excepciones","text":"Una Interrupci\u00f3n es una se\u00f1al que env\u00eda un dispositivo de E/S al procesador para pedir que se le atienda. Cada interrupci\u00f3n tiene asociada una rutina que debe pasar a ejecutarse cuando esta se produzca. Tambi\u00e9n existen las interrupciones de Software, que env\u00edan los programas de usuario al sistema operativo para requerir su atenci\u00f3n. Resumen Interrupci\u00f3n Una excepci\u00f3n se produce cuando hay una instrucci\u00f3n err\u00f3nea en un programa, por ejemplo, una divisi\u00f3n por 0. En ese momento el sistema operativo debe realizar las acciones oportunas. En ciertos intervalos de tiempo puede convenir no aceptar se\u00f1ales de interrupci\u00f3n. Por ello las interrupciones pueden inhibirse por programa.","title":"Interrupciones y excepciones"},{"location":"031_Planificador.html#sincronizacion-y-comunicacion-entre-procesos","text":"Hay procesos independientes y otros que deben comunicarse y sincronizarse con otros. En este caso se utilizan se\u00f1ales para enviar informaci\u00f3n entre procesos , y de este modo poder gestionar recursos y zonas de memoria compartida. A continuaci\u00f3n se muestran varios ejemplos en los que se evidencia la necesidad de sincronizaci\u00f3n entre procesos. Example Un proceso (P1) puede necesitar un dato que otro proceso (P2) produce y hasta que esto no ocurra, no podr\u00e1 continuar con su ejecuci\u00f3n. En este caso el proceso P1 se quedar\u00e1 bloqueado hasta que reciba una se\u00f1al que le enviar\u00e1 P2, indic\u00e1ndole que ya tiene disponible el dato.","title":"Sincronizaci\u00f3n y Comunicaci\u00f3n entre procesos"},{"location":"031_Planificador.html#condiciones-de-competencia","text":"Existen una serie de casos en los que pueden aparecer ciertos problemas denominados Condiciones de competencia ; los cuales ocurren cuando dos o m\u00e1s procesos intentan acceder a un mismo recurso. Example P1 y P2 intentan acceder a una variable global en memoria que llamaremos A pongamos que con un valor inicial de 5 . P1 se encarga de sumar 2 a la variable y P2 de restarle 1.Lo normal es que si entra P1 , modifica A y luego lo hace P2, el resultado de A sea 6. Pero puede darse el siguiente caso : P1 recoge el valor de la variable, por ejemplo, (5) la pase a un registro interno de la cpu para operar con este valor y antes de dejar el resultado en memoria pierda el procesador. En ese momento P2 entra en el procesador y pone sus registros, etc. Recoge el valor de A (5, puesto que a P1 no le ha dado tiempo a dejar el resultado en memoria), lo cambia con un resultado de 4 y lo deja en memoria. Cuando el proceso P1 vuelva a tener el procesador, dejar\u00e1 su resultado (5+2=7) en la variable A de memoria, machacando el resultado de P2 y se habr\u00e1 perdido la operaci\u00f3n que realiz\u00f3 dicho proceso.","title":"Condiciones de competencia"},{"location":"031_Planificador.html#mensajes","text":"Cuando los procesos tienen que compartir informaci\u00f3n, incluso en equipos remotos, pueden utilizar colas de mensajes para enviarla. Los procesos introducen mensajes con la informaci\u00f3n necesaria en la cola y se van almacenando en ella. Cuando un proceso extrae un mensaje de la cola, recoge el primero que se introdujo y este se borra. Tambi\u00e9n es posible hacer \"tipos\" de mensajes distintos, de forma que cada tipo de mensaje contiene una informaci\u00f3n distinta y va identificado por un entero. Los procesos pueden leer s\u00f3lo los mensajes de un determinado tipo.","title":"Mensajes"},{"location":"031_Planificador.html#senales","text":"Las se\u00f1ales se utilizan para sincronizar procesos. Cada se\u00f1al tiene un comportamiento por defecto, como puede ser pausar un proceso o pararlo. La mayor\u00eda de ellas pueden ser tratadas de forma que el programa la recoja y realice una serie de instrucciones cuando esta llegue. Examples Hay formas de pasar se\u00f1ales al sistema operativo, por ejemplo, cuando pulsamos control+C, o utilizando funciones del sistema para enviar una determinada se\u00f1al a un proceso para modificar la forma de actuar de este en ese momento dado.","title":"Se\u00f1ales"},{"location":"031_Planificador.html#actividades-iniciales","text":"En las siguientes actividades se debe realizar: Calcular el tiempo de espera y tiempo de respuesta de cada proceso. Gr\u00e1ficamente y de forma num\u00e9rica con ayuda de la plantilla en ods adjunta en el moodle. Calcular el tiempo medio de espera y respuesta de cada algoritmo. Realizar una conclusi\u00f3n comparando los resultados de tiempos de los algoritmos. Utilizando los algoritmos de planificaci\u00f3n FIFO, SJF y SRTF: Utilizando los algoritmos de planificaci\u00f3n FIFO, Round Robin y Prioridades no expulsivo: En Round Robin utiliza el Quantum igual a 2. Utilizando los algoritmos de planificaci\u00f3n FIFO, Round Robin y SJF: En Round Robin utiliza el Quantum igual a 2. Utilizando los algoritmos de planificaci\u00f3n SRTF, Prioridades no expulsivo y Prioridades expulsivo:","title":"Actividades Iniciales"},{"location":"032_GestionProcesos.html","text":"Gesti\u00f3n de procesos en los Sistemas Opertivos. \u00b6 Gesti\u00f3n de procesos de Linux. \u00b6 Un proceso en Linux es, en resumen, un programa en ejecuci\u00f3n. Un proceso puede crear a su vez otros procesos. Al proceso que genera otro proceso se le llama proceso padre. Al proceso generado por otro proceso se le llama proceso hijo. Los procesos pueden ser padres e hijos y adem\u00e1s, varios procesos pueden ser hijos del mismo padre a la vez. Veamos un ejemplo. Note El terminal o consola es un proceso , ya que se trata de un programa que ejecutamos. Si en el terminal escribimos, por ejemplo, el comando \u201cls -l\u201d, se estar\u00eda generando un nuevo proceso que ser\u00eda proceso hijo del terminal. En este caso el shell ser\u00eda el proceso padre y el comando \u201cls -l\u201d ser\u00eda el proceso hijo. Resumen de comandos de manejo de procesos Ejemplo de Multiprogramaci\u00f3n Trabajando con procesos. \u00b6 El comando ps. \u00b6 El comando ps proporciona informaci\u00f3n sobre los procesos que se est\u00e1n ejecutando en el sistema. Si escribimos en el terminal ps , obtendremos como salida un listado de los procesos lanzados con el usuario actual que a\u00fan se est\u00e1n ejecutando. Veamos qu\u00e9 significan cada una de las columnas que se muestran cuando ejecutamos el comando ps. La primera columna es el PID o identificador de proceso. Cada proceso tiene un asociado identificador que es \u00fanico, es decir que no puede haber dos procesos con el mismo identificador. La segunda columna nos informa del terminal en el que se est\u00e1 ejecutando el proceso. Si aparece una interrogaci\u00f3n (?), el proceso no tiene asociada ninguna terminal. La tercera columna indica el tiempo total que ha estado ejecut\u00e1ndose el proceso. La cuarta columna es el nombre del proceso. En la imagen anterior observamos que hay dos procesos corriendo: el bash, que es el shell o int\u00e9rprete de comandos, y el comando ps. El comando ps admite algunos par\u00e1metros/modificadores : -e devuelve un listado de todos los procesos que se est\u00e1n ejecutando. -f devuelve un listado extendido. En este \u00faltimo caso veremos en pantalla el PPID del proceso (identificador del proceso padre) y la hora en la que se ejecut\u00f3 el proceso (STIME). -ef obtendr\u00edamos un listado extendido de todos los procesos que se est\u00e1n ejecutando en el sistema. -u informa de los procesos lanzado por un determinado usuario. De tal forma que si escribimos \u201c ps -u alex \u201d, aparecer\u00e1 un listado de los procesos que est\u00e1 ejecutando el usuario alex. El comando pstree \u00b6 El comando pstree visualiza, en forma de \u00e1rbol, todos los procesos del sistema. As\u00ed podemos ver las relaciones que existen entre los procesos. El comando top \u00b6 El comando top devuelve un listado de los procesos de forma parecida a como lo hace ps, con la diferencia que la informaci\u00f3n mostrada se va actualizando peri\u00f3dicamente lo que nos permite ver la evoluci\u00f3n del estado de los procesos. Adem\u00e1s, en la parte superior muestra informaci\u00f3n adicional, como el espacio en memoria ocupado por los procesos, el espacio ocupado por la memoria de intercambio o swap, el n\u00famero total de tareas o procesos que se est\u00e1n ejecutando, el n\u00famero de usuarios o el porcentaje de uso del procesador. Note Mientras el comando top est\u00e1 en marcha podremos cambiar f\u00e1cilmente la prioridad de los procesos. A modo de resumen cada proceso en Linux tiene un nivel de prioridad que va de -20 (prioridad m\u00e1s alta) hasta 20 (prioridad m\u00e1s baja). Cuanto mayor sea el nivel de prioridad, m\u00e1s lentamente se ejecutar\u00e1 el proceso. \u00bfY c\u00f3mo podemos cambiar con top la prioridad de un proceso? Muy sencillo. Con el comando top en marcha pulsamos la tecla \"r\" . A continuaci\u00f3n introducimos el PID del proceso al que vamos a cambiar la prioridad, y acto seguido el nivel de prioridad que vamos a asignar. Debemos tener en cuenta una consideraci\u00f3n, solamente el superusuario \"root\" puede asignar valores negativos a la prioridad de un proceso. Procesos en primer plano y segundo plano \u00b6 Los procesos pueden ejecutarse en primer plano o segundo plano. El proceso que est\u00e1 en primer plano es aquel con el que se interact\u00faa. Si ejecutamos, por ejemplo, el comando ls -l , se mostrar\u00e1 por pantalla el resultado, y hasta que no acabe de mostrarse el listado no podremos ejecutar ning\u00fan otro comando. En este caso el terminal permanece bloqueado, sin poder introducir ning\u00fan otro comando, hasta que el proceso en primer plano termine. Pondremos un proceso en segundo plano a\u00f1adiendo el s\u00edmbolo ampersand (&) al final del comando. Cuando se ejecuta un proceso en segundo plano, se permite al usuario iniciar y trabajar con otros procesos. Ejemplo: $ sleep 10 & El comando sleep simplemente espera el n\u00famero de segundos que le pasemos como par\u00e1metro. En la imagen anterior se observa que al ejecutar un proceso en segundo plano se devuelve un n\u00famero entre corchetes seguido de otro n\u00famero. El n\u00famero entre corchetes indica el n\u00famero de procesos que se tienen ejecut\u00e1ndose en segundo plano. El segundo n\u00famero es el PID o identificador del proceso. Para ver que trabajos se est\u00e1n ejecutando en segundo plano, se usa el comando jobs . El signo + seguido del n\u00famero de trabajo entre corchetes indica el trabajo m\u00e1s reciente que se est\u00e1 ejecutando. El signo menos indica el siguiente trabajo m\u00e1s reciente. Pasar procesos en segundo plano a primer plano \u00b6 Para pasar procesos en segundo plano a primer plano, se utiliza el comando fg, seguido de %n, donde n es el n\u00famero de proceso que queremos pasar a primer plano. Por ejemplo, fg %1 pondr\u00eda en primer plano la tarea n\u00famero 1. En la siguiente imagen se ejecuta sleep 80 en segundo plano, y despu\u00e9s pasa a primer plano con el comando fg. Pasar procesos en primer plano a segundo plano \u00b6 El comando bg permite pasar procesos desde primer plano a segundo plano. Para pasar un proceso que se encuentra en primer plano a segundo plano, debemos suspenderlo primero utilizando la combinaci\u00f3n de teclas Ctrl+Z. Cuando se pulsa esa combinaci\u00f3n de teclas, el proceso en ejecuci\u00f3n se para y no vuelve a ejecutarse hasta que se pasa a primer o segundo plano. Con bg pasaremos el proceso a segundo plano. Cambiando la prioridad de los procesos \u00b6 Como anteriormente se ha comentado antes, cada proceso en Linux tiene un nivel de prioridad que oscila entre -20 (prioridad m\u00e1s alta) y 20 (prioridad m\u00e1s baja). Cuanto mayor sea el nivel de prioridad, m\u00e1s lentamente se ejecutar\u00e1 el proceso. Solamente el superusuario \u2018root\u2019 puede asignar valores negativos a la prioridad de un proceso. Para asignar determinada prioridad a un proceso en concreto se utiliza el comando nice . nice prioridad proceso \u00b6 Podemos cambiar la prioridad de un proceso con el comando renice . Este comando admite los siguientes par\u00e1metros/modificadores: -g . Establece el nivel de prioridad de los procesos ejecutados por los miembros del grupo especificado. -u . Establece el nivel de prioridad de los procesos ejecutados por los miembros del usuario especificado. -p . Indica el nivel de prioridad para el proceso especificado. Finalizar procesos Para finalizar un proceso se utiliza el comando kill , que tiene la siguiente sintaxis: kill [par\u00e1metro] PID Si, por ejemplo, queremos eliminar un proceso con PID 17122, tendr\u00edamos que escribir: kill 17122.Puede que en ocasiones el proceso no finalice al emplear el comando kill sin par\u00e1metros. Para matar un proceso asegur\u00e1ndonos de que no ignorar\u00e1 la petici\u00f3n de finalizar su ejecuci\u00f3n se emplea el par\u00e1metro -9. kill -9 17122 Hay un total de 32 se\u00f1ales que se pueden enviar a los procesos. Las m\u00e1s utilizadas son las siguientes: - kill -1 (Sighup). Reinicia el proceso. - kill -9 (SigKill). Mata el proceso. - kill -15 (SigTerm). Termina el proceso. Por otra parte, el comando killall nombre_programa finaliza todos los procesos que est\u00e9n ejecutando el programa. Gesti\u00f3n de procesos con Powershell. \u00b6 Obtener procesos (Get-Process) \u00b6 Para obtener los procesos que se est\u00e1n ejecutando en el equipo local, ejecute Get-Process sin par\u00e1metros. Puede obtener determinados procesos especificando sus nombres de proceso o identificadores de proceso. El siguiente comando obtiene el proceso inactivo: Get-Process -id 0 La salida de este comando seria: Handles NPM(K) PM(K) WS(K) VM(M) CPU(s) Id ProcessName ------- ------ ----- ----- ----- ------ -- ----------- 0 0 0 16 0 0 Idle Note Aunque es normal que los cmdlets no devuelvan datos en algunas situaciones, cuando se especifica un proceso por su id. de proceso Get-Process , genera un error si no encuentra ninguna coincidencia, porque la intenci\u00f3n habitual consiste en recuperar un proceso en ejecuci\u00f3n conocido. Si no hay ning\u00fan proceso con ese identificador, es probable que el identificador sea incorrecto o que el proceso de inter\u00e9s haya terminado: Get-Process -Id 99 La salida de este comando seria: Get-Process : No process with process ID 99 was found. At line:1 char:12 + Get-Process <<<< -Id 99 Tip Puede usar el par\u00e1metro Name del cmdlet Get-Process para especificar un subconjunto de procesos basado en el nombre del proceso. El par\u00e1metro Name puede tomar varios nombres de una lista de nombres separados por comas y admite el uso de caracteres comod\u00edn, para que pueda escribir patrones de nombre. Por ejemplo, el siguiente comando obtiene el proceso cuyos nombres comienzan por \"ex\". Get-Process -Name ex* La salida de este comando seria: Handles NPM(K) PM(K) WS(K) VM(M) CPU(s) Id ProcessName ------- ------ ----- ----- ----- ------ -- ----------- 234 7 5572 12484 134 2.98 1684 EXCEL 555 15 34500 12384 134 105.25 728 explorer Note Dado que la clase System.Diagnostics.Process de .NET es la base de los procesos de Windows PowerShell, sigue algunas de las convenciones usadas por System.Diagnostics.Process. Una de estas convenciones es que el nombre de proceso de un archivo ejecutable nunca incluya \".exe\" al final del nombre del ejecutable. Get-Process tambi\u00e9n acepta varios valores para el par\u00e1metro Name. Get-Process -Name exp*,power* La salida de este comando seria: Handles NPM(K) PM(K) WS(K) VM(M) CPU(s) Id ProcessName ------- ------ ----- ----- ----- ------ -- ----------- 540 15 35172 48148 141 88.44 408 explorer 605 9 30668 29800 155 7.11 3052 powershell Puede usar el par\u00e1metro ComputerName de Get-Process para obtener procesos en equipos remotos. Por ejemplo, el comando siguiente obtiene los procesos de PowerShell en el equipo local (representado por \"localhost\") y en dos equipos remotos. Get-Process -Name PowerShell -ComputerName localhost, Server01, Server02 La salida de este comando seria: Handles NPM(K) PM(K) WS(K) VM(M) CPU(s) Id ProcessName ------- ------ ----- ----- ----- ------ -- ----------- 258 8 29772 38636 130 3700 powershell 398 24 75988 76800 572 5816 powershell 605 9 30668 29800 155 7.11 3052 powershell Los nombres de equipo no son evidentes en esta presentaci\u00f3n, pero se almacenan en la propiedad MachineName de los objetos de proceso que devuelve Get-Process . El siguiente comando usa el cmdlet Format-Table para mostrar el identificador de proceso y las propiedades ProcessName y MachineName(ComputerName) de los objetos de proceso. Get-Process -Name PowerShell -ComputerName localhost, Server01, Server01 | Format-Table -Property ID, ProcessName, MachineName La salida de este comando seria: Id ProcessName MachineName -- ----------- ----------- 3700 powershell Server01 3052 powershell Server02 5816 powershell localhost Este comando m\u00e1s complejo agrega la propiedad MachineName a la presentaci\u00f3n est\u00e1ndar de Get-Process . PowerShellCopiar Get-Process powershell -ComputerName localhost, Server01, Server02 | Format-Table -Property Handles, @{Label=\"NPM(K)\";Expression={[int]($_.NPM/1024)}}, @{Label=\"PM(K)\";Expression={[int]($_.PM/1024)}}, @{Label=\"WS(K)\";Expression={[int]($_.WS/1024)}}, @{Label=\"VM(M)\";Expression={[int]($_.VM/1MB)}}, @{Label=\"CPU(s)\";Expression={if ($_.CPU -ne $()){$_.CPU.ToString(\"N\")}}}, Id, ProcessName, MachineName -auto La salida de este comando seria: Handles NPM(K) PM(K) WS(K) VM(M) CPU(s) Id ProcessName MachineName ------- ------ ----- ----- ----- ------ -- ----------- ----------- 258 8 29772 38636 130 3700 powershell Server01 398 24 75988 76800 572 5816 powershell localhost 605 9 30668 29800 155 7.11 3052 powershell Server02 Detener procesos (Stop-Process) \u00b6 El cmdlet Stop-Process toma un nombre o un identificador para especificar un proceso que quiere detener. Su capacidad para detener procesos depender\u00e1 de sus permisos. Algunos procesos no se pueden detener. Por ejemplo, si intenta detener el proceso inactivo, obtendr\u00e1 un error: Stop-Process -Name Idle La salida de este comando seria: Stop-Process : Process 'Idle (0)' cannot be stopped due to the following error : Access is denied At line:1 char:13 + Stop-Process <<<< -Name Idle Tambi\u00e9n puede forzar la solicitud con el par\u00e1metro Confirm . Este par\u00e1metro es especialmente \u00fatil si se usa un car\u00e1cter comod\u00edn al especificar el nombre del proceso, ya que accidentalmente podr\u00eda coincidir con algunos procesos que no quiere detener: Stop-Process -Name t*,e* -Confirm La salida de este comando seria: Confirm Are you sure you want to perform this action? Performing operation \"Stop-Process\" on Target \"explorer (408)\". [Y] Yes [A] Yes to All [N] No [L] No to All [S] Suspend [?] Help (default is \"Y\"):n Confirm Are you sure you want to perform this action? Performing operation \"Stop-Process\" on Target \"taskmgr (4072)\". [Y] Yes [A] Yes to All [N] No [L] No to All [S] Suspend [?] Help (default is \"Y\"):n La manipulaci\u00f3n de procesos complejos es posible si se usan algunos cmdlets de filtrado de objetos. Dado que un objeto Process tiene una propiedad Responding que es true cuando ya no responde, puede detener todas las aplicaciones que no respondan con el comando siguiente: Get-Process | Where-Object -FilterScript {$_.Responding -eq $false} | Stop-Process Puede usar el mismo enfoque en otras situaciones. Por ejemplo, supongamos que una aplicaci\u00f3n de \u00e1rea de notificaciones secundaria se ejecuta autom\u00e1ticamente cuando los usuarios inician otra aplicaci\u00f3n. Es posible que esto no funcione correctamente en las sesiones de Terminal Services (Terminales de Servicios de Escritorio Remoto), pero lo quiera seguir manteniendo en las sesiones que se ejecutan en la consola del equipo f\u00edsico. Las sesiones conectadas en el escritorio del equipo f\u00edsico siempre tienen un identificador de la sesi\u00f3n 0, por lo que puede detener todas las instancias del proceso que est\u00e1n en otras sesiones mediante Where-Object y el proceso, SessionId : Get-Process -Name BadApp | Where-Object -FilterScript {$_.SessionId -neq 0} | Stop-Process El cmdlet Stop-Process no tiene un par\u00e1metro ComputerName. Por lo tanto, para ejecutar un comando para detener un proceso en un equipo remoto, debe usar el cmdlet Invoke-Command . Por ejemplo, para detener el proceso de PowerShell en el equipo remoto Server01, escriba: Invoke-Command -ComputerName Server01 {Stop-Process Powershell} Detener todas las dem\u00e1s sesiones de Windows PowerShell \u00b6 En ocasiones puede ser \u00fatil poder detener todas las sesiones de Windows PowerShell que se est\u00e1n ejecutando, excepto la sesi\u00f3n actual. Si una sesi\u00f3n usa demasiados recursos o es inaccesible (quiz\u00e1s se est\u00e9 ejecutando de forma remota o en otra sesi\u00f3n de escritorio), es posible que no pueda detenerla directamente. Si intenta detener todas las sesiones que se est\u00e1n ejecutando, la sesi\u00f3n actual podr\u00eda finalizar en su lugar. Cada sesi\u00f3n de Windows PowerShell tiene un PID de variable de entorno que contiene el identificador del proceso de Windows PowerShell. Puede comprobar el $PID con el identificador de cada sesi\u00f3n y finalizar solo las sesiones de Windows PowerShell que tengan un identificador diferente. El siguiente comando de canalizaci\u00f3n realiza esta acci\u00f3n y devuelve la lista de las sesiones finalizadas (debido al uso del par\u00e1metro PassThru ): Get-Process -Name powershell | Where-Object -FilterScript {$_.Id -ne $PID} | Stop-Process -PassThru La salida de este comando seria: Handles NPM(K) PM(K) WS(K) VM(M) CPU(s) Id ProcessName ------- ------ ----- ----- ----- ------ -- ----------- 334 9 23348 29136 143 1.03 388 powershell 304 9 23152 29040 143 1.03 632 powershell 302 9 20916 26804 143 1.03 1116 powershell 335 9 25656 31412 143 1.09 3452 powershell 303 9 23156 29044 143 1.05 3608 powershell 287 9 21044 26928 143 1.02 3672 powershell Iniciar, depurar y esperar procesos \u00b6 Windows PowerShell tambi\u00e9n incluye cmdlets para iniciar (o reiniciar) y depurar un proceso, as\u00ed como para esperar a que un proceso se complete antes de ejecutar un comando. Se pueden realizar con los siguientes cmdlets. Start-Process Wait-Process Debug-Process Invoke-Command Actividades de desarrollo UD3_01 ShellScripting \u00b6 Realiza un script de Shell que encuentre todos los procesos activos e imprima por pantalla al usuario la pol\u00edtica de programaci\u00f3n. Modifica el script anterior para que de la opci\u00f3n al usuario de aumentar o disminuir la prioridad de un proceso, a elegir por el usuario ambas variables. Modifica el script anterior para que de la opci\u00f3n al usuario de matar un proceso, a elegir por el usuario. Actividades UD03_02 PowerShell \u00b6 Realiza un script en PoserShell que realice los siguientes puntos: Cuenta el n\u00famero de procesos en ejecuci\u00f3n en el sistema, y los muestre por pantalla. Ver que programas se ejcutan en el inicio de sesi\u00f3n y los muestre por pantalla. Guardar los un listado de los procesos en un csv e Imprima por pantlla el archivo. Realiza un script en PoserShell que realice los siguientes puntos: Lista los procesos que tengan un alto consumo de CPU. Detenga el proceso con mayor consumo. Mostrar los procesos cuya zona de memoria para trabajar sea mayor que 100 MB y a continuaci\u00f3n los detenga.","title":"3.2- Gesti\u00f3n de los procesos del sistema"},{"location":"032_GestionProcesos.html#gestion-de-procesos-en-los-sistemas-opertivos","text":"","title":"Gesti\u00f3n de procesos en los Sistemas Opertivos."},{"location":"032_GestionProcesos.html#gestion-de-procesos-de-linux","text":"Un proceso en Linux es, en resumen, un programa en ejecuci\u00f3n. Un proceso puede crear a su vez otros procesos. Al proceso que genera otro proceso se le llama proceso padre. Al proceso generado por otro proceso se le llama proceso hijo. Los procesos pueden ser padres e hijos y adem\u00e1s, varios procesos pueden ser hijos del mismo padre a la vez. Veamos un ejemplo. Note El terminal o consola es un proceso , ya que se trata de un programa que ejecutamos. Si en el terminal escribimos, por ejemplo, el comando \u201cls -l\u201d, se estar\u00eda generando un nuevo proceso que ser\u00eda proceso hijo del terminal. En este caso el shell ser\u00eda el proceso padre y el comando \u201cls -l\u201d ser\u00eda el proceso hijo. Resumen de comandos de manejo de procesos Ejemplo de Multiprogramaci\u00f3n","title":"Gesti\u00f3n de procesos de Linux."},{"location":"032_GestionProcesos.html#trabajando-con-procesos","text":"","title":"Trabajando con procesos."},{"location":"032_GestionProcesos.html#gestion-de-procesos-con-powershell","text":"","title":"Gesti\u00f3n de procesos con Powershell."},{"location":"032_GestionProcesos.html#actividades-de-desarrollo-ud3_01-shellscripting","text":"Realiza un script de Shell que encuentre todos los procesos activos e imprima por pantalla al usuario la pol\u00edtica de programaci\u00f3n. Modifica el script anterior para que de la opci\u00f3n al usuario de aumentar o disminuir la prioridad de un proceso, a elegir por el usuario ambas variables. Modifica el script anterior para que de la opci\u00f3n al usuario de matar un proceso, a elegir por el usuario.","title":"Actividades de desarrollo UD3_01 ShellScripting"},{"location":"032_GestionProcesos.html#actividades-ud03_02-powershell","text":"Realiza un script en PoserShell que realice los siguientes puntos: Cuenta el n\u00famero de procesos en ejecuci\u00f3n en el sistema, y los muestre por pantalla. Ver que programas se ejcutan en el inicio de sesi\u00f3n y los muestre por pantalla. Guardar los un listado de los procesos en un csv e Imprima por pantlla el archivo. Realiza un script en PoserShell que realice los siguientes puntos: Lista los procesos que tengan un alto consumo de CPU. Detenga el proceso con mayor consumo. Mostrar los procesos cuya zona de memoria para trabajar sea mayor que 100 MB y a continuaci\u00f3n los detenga.","title":"Actividades UD03_02 PowerShell"},{"location":"033C_Sobras.html","text":"En Debian el nivel de inicio predeterminado es el nivel 2 (id=2). Debian utiliza los siguientes niveles de ejecuci\u00f3n: 0 (apagar el sistema) 1 (modo monousuario) 2 al 5 (modos multiusuario) 6 (reiniciar el sistema) Note El archivo de configuraci\u00f3n de m\u00e1s alto nivel para Init es /etc/inittab .Durante el arranque del sistema, se verifica si existe un nivel de ejecuci\u00f3n predeterminado en el archivo /etc/inittab , si no, se debe introducir por medio de la consola del sistema. Despu\u00e9s se procede a ejecutar todos los scripts relativos al nivel de ejecuci\u00f3n especificado. Despu\u00e9s de que se han dado lugar todos los procesos especificados, Init se aletarga, y espera a que uno de estos tres eventos sucedan: - que procesos comenzados finalicen o mueran; - un fallo de la se\u00f1al de potencia (energ\u00eda); - o una petici\u00f3n a trav\u00e9s de /sbin/telinit para cambiar el nivel de ejecuci\u00f3n. ARRANQUE WINDOWS Los datos de configuraci\u00f3n de arranque ( BCD ) sustituyen a la anterior (boot.ini). En el almac\u00e9n BCD el gestor de arranque se presenta como objeto de programa ( GUID ) en lugar de elementos de texto. Con la herramienta Bcdedit.exe podemos utilizar los comandos b\u00e1sicos para controlar todos los aspectos del proceso de arranque, aunque cada objeto se presenta con un GUID , algunos objetos tienen nombres de alias para uso com\u00fan, como bootmgr (referido al gestor de arranque) y DEFAULT (gestor de arranque por defecto). Podemos modificar la configuraci\u00f3n de inicio con WMI (Windows Management Instrumentati\u00f3n). Podemos utilizar MSconfig.exe para proporcionar una interfaz gr\u00e1fica para visualizar y modificar un subconjunto de los ajustes de configuraci\u00f3n de inicio. Actividades: Modifica el fichero /etc/inittab para que... De forma predeterminada se establezca el nivel de ejecuci\u00f3n 5. Al pulsar la combinaci\u00f3n de teclas ctrl+alt+supr el sistema realice las siguientes operaciones: se apague si el nivel de ejecuci\u00f3n es el 2. se reinicie si el nivel de ejecuci\u00f3n es el 3. escriba \u201cJe-je-je, no sirve de nada esa combinaci\u00f3n de teclas\u201d si el nivel de ejecuci\u00f3n es el 4. no haga nada si el nivel de ejecuci\u00f3n es el 5. Pista: Fases Arranque Linux Realiza un breve informe con los pasos m\u00e1s importantes de el Ejemplo de modificaci\u00f3n de bcdedit -> Enlace:Ejemplos de parametros usados en el editor BCDEdit.exe","title":"033C Sobras"},{"location":"033_ArranqueServicios.html","text":"Secuencia de arranque del sistema. Demonios y servicios. \u00b6 En inform\u00e1tica, el arranque o secuencia de arranque (en ingl\u00e9s: bootstrapping, boot o booting ) es el proceso que inicia el gestor de arranque; programa ejecutado por el BIOS cuando se enciende una computadora. Se encarga de la inicializaci\u00f3n del sistema operativo y de los dispositivos . A nivel conceptual los pasos de arranque de un sistema inform\u00e1tico se muestran en la siguiente figura: Pasos Arranque Arranque en Linux \u00b6 En Linux, el flujo de control durante el arranque se desarrolla en 4 etapas: Al principio, toma el control la BIOS. En una segunda etapa, tomar\u00e1 el control el cargador de arranque. En una tercera etapa, el control pasa al propio kernel Linux. Y en la cuarta y \u00faltima etapa tendremos en memoria los programas de usuario conviviendo junto con el propio sistema operativo, quienes tomar\u00e1n el control del sistema. Pasos Arranque Linux 1\u00aa etapa: La BIOS \u00b6 Al encender el equipo, toma el control la BIOS que realiza una serie de operaciones b\u00e1sicas de hardware, programa POST . Una vez que el hardware es reconocido y queda listo para usar, la BIOS carga en memoria el c\u00f3digo executable del cargador de arranque y le pasa el control. 2\u00aa Etapa: Fase del cargador de arranque GRUB o LILO \u00b6 Un cargador de arranque ( bootloader en ingl\u00e9s) es un programa dise\u00f1ado exclusivamente para cargar un sistema operativo en memoria. La etapa del cargador de arranque es diferente de una plataforma a otra. Note Como en la mayor\u00eda de arquitecturas este programa se encuentra en el MBR o GPT , el cual es de 512 bytes, este espacio no es suficiente para cargar en su totalidad un sistema operativo. Por eso, el cargador de arranque consta de varias etapas. Las primeras operaciones las realiza la BIOS . Esquema MBR Esquema GPT De forma general esta etapa tiene dos fases: Se localiza el sector de arranque (GPT o MBR) y Se carga el cargador de este sector (normalmente una parte de LILO o GRUB ).el cargador de arranque carga un mensaje que pregunta que sistema operativo (o tipo de sesi\u00f3n) el usuario desea inicializar. Nota El gestor incluye datos como la partici\u00f3n de arranque y la localizaci\u00f3n del kernel para cada uno, as\u00ed como las opciones personalizadas en su caso. GRUB \u00b6 GRUB contiene una serie de funciones que lo convierten en el m\u00e9todo favorito respecto al resto de gestores de arranque disponibles para la arquitectura x86; entre las que destacan GRUB proporciona un verdadero entorno basado en comandos , pre-sistema operativo. El GRUB puede leer particiones ext2/3/4 . Esta funcionalidad le permite al GRUB acceder a su archivo de configuraci\u00f3n, /boot/grub/grub.conf Posibilidad de utilizar una etapa 1.5 si fuera necesario; A veces esto sucede cuando la partici\u00f3n /boot/ se encuentra por encima de los 1024 cilindros de disco duro o cuando utiliza el modo LBA. Muestra el men\u00fa de inicio que permite al usuario elegir un sistema operativo , tambi\u00e9n examinar y modificar los par\u00e1metros de inicio. Contiene tres interfaces: un men\u00fa de selecci\u00f3n, un editor de configuraci\u00f3n, y una consola de l\u00ednea de comandos. Un ejemplo de configuraci\u00f3n en ubuntu se podr\u00eda hacer desde: /boot/grub/grub.cfg \u2190 Configuraci\u00f3n general /etc/default/grub \u2190 Configuraci\u00f3n men\u00fa sudo update-grub \u2190 Actualizar cambios Ejemplo de GRUB Ejemplo de GRUB LILO \u00b6 LILO es m\u00e1s antiguo a GRUB, es casi id\u00e9ntico a GRUB en su proceso excepto que no contiene una interfaz de l\u00ednea de comandos . Por lo tanto todos los cambios en su configuraci\u00f3n deben ser escritos en el MBR y luego reiniciar el sistema. Warning Un error en la configuraci\u00f3n puede dejar el disco inservible para el proceso de arranque hasta tal grado, que sea necesario usar otro dispositivo (disquete, etc) que contenga un programa capaz de arreglar el error. Diferencias entre LILO y GRUB \u00b6 LILO no entiende los sistemas de archivos, por lo que utiliza desplazamientos de disco sin procesar y el BIOS para cargar los datos. Se carga el c\u00f3digo del men\u00fa y, a continuaci\u00f3n, en funci\u00f3n de la respuesta, carga, o el sector MBR del disco de 512 bytes como en Microsoft Windows, o la imagen del n\u00facleo Linux. GRUB por el contrario comprende los sistemas de archivos comunes ext2 , ext3 y ext4. Debido a que GRUB almacena sus datos en un archivo de configuraci\u00f3n en vez de en el MBR y a que contiene un interfaz de l\u00ednea de comandos, a menudo es m\u00e1s f\u00e1cil rectificar o modificar GRUB si est\u00e1 mal configurado o corrupto. 3\u00aa etapa: Fase del kernel \u00b6 El kernel de Linux se encarga de todos los procesos del sistema operativo , como la gesti\u00f3n de memoria, planificador de tareas, I/O, comunicaci\u00f3n entre procesos, y el control general del sistema. Este se carga en dos fases: Fase de carga : En la primera etapa el kernel se carga y se descomprime en memoria, como un archivo imagen comprimido. El objetivo es cargar algunas funciones fundamentales como la gesti\u00f3n de memoria. Fase de ejecuci\u00f3n : el kernel busca un proceso de inicio para ejecutar , que (separadamente) fija un espacio de usuario y los procesos necesarios para un entorno del mismo. A continuaci\u00f3n al nucleo se le permite pasar a inactivo, sujeto a las llamadas de otros procesos. Nota El kernel generalmente se almacena en un archivo comprimido. Este archivo comprimido se carga y se descomprime en memoria. Por otra parte, tambi\u00e9n se cargan los drivers necesarios mediante el initrd. El initrd crea un sistema de archivos temporal usado en la fase de ejecuci\u00f3n del kernel. 4\u00aa etapa: El proceso de inicio \u00b6 El trabajo de Init es conseguir que todo funcione como debe ser \" una vez que el kernel est\u00e1 totalmente en funcionamiento. En esencia, establece y opera todo el espacio de usuario. Importante Esto incluye la comprobaci\u00f3n y montaje de sistemas de archivos, la puesta en marcha de los servicios de usuario necesarios y, en \u00faltima instancia, cambiar al entorno de usuario cuando el inicio del sistema se ha completado. En un sistema Linux est\u00e1ndar, Init se ejecuta con un par\u00e1metro, conocido como nivel de ejecuci\u00f3n, que tiene un valor entre 1 y 6, y que determina qu\u00e9 subsistemas pueden ser operacionales. Cada nivel de ejecuci\u00f3n tiene sus propios scripts que codifican los diferentes procesos involucrados en la creaci\u00f3n o salida del nivel de ejecuci\u00f3n determinado, y son estas secuencias de comandos los necesarios en el proceso de arranque. Arranque de Windows y Windows Server \u00b6 Windows \u00b6 La secuencia de arranque de Windows utiliza el sistema de almacenamiento y configuraci\u00f3n de arranque denominado BCD store ( Boot Configuration Data ). Este registro se encuentra situado en el directorio \\boot\\BCD de la partici\u00f3n donde se instala el sistema de forma oculta y en binario. Consiste en un repositorio de datos y par\u00e1metros necesarios para gestionar el arranque del sistema. El fichero Bootmgr.exe es el encargado del administrador y cargador de arranque (boot loader). La secuencia de arranque sigue los siguientes pasos: La BIOS carga el MBR (master boot record, registro de arranque principal es el primer sector de un dispositivo de almacenamiento de datos), en memoria el cual analiza la tabla de particiones y carga en memoria el sector de arranque de la partici\u00f3n marcada como activa en la que se encuentra el S.O Windows . El sector de arranque localiza el bootmgr y se ejecuta, busca el directorio \\boot que contiene los programas que inician el sistema. Dentro del directorio se ejecuta el BCD apareciendo un men\u00fa en que se selecciona el sistema que se desea arrancar comenzando la carga del n\u00facleo de sistema. Windows Server \u00b6 En Windows Server se encuentan unas caracter\u00edsticas avanzadas entre las que destacan: Usa un n uevo almac\u00e9n de datos para los datos de configuraci\u00f3n de arranque, Boot.ini sustituye al anterior cargador de Windows ( Ntldr.exe ). Incluye tambi\u00e9n un administrador de arranque de Windows y un cargador de arranque de Windows nuevos. A partir del Windows Server 2008, encontramos 3 aplicaciones de arranque: Bootmgr.exe o Bootmgr.efi (Arranque). Esta aplicaci\u00f3n es independiente del sistema operativo y hace uso del firmware para cargar el cargador de arranque de Windows, ya sea desde una partici\u00f3n de disco concreta o a trav\u00e9s de una conexi\u00f3n de red (si se trata de un arranque con acceso a red). Winload.exe o Winload.efi (Arranque). Esta aplicaci\u00f3n forma parte del sistema operativo y carga una versi\u00f3n espec\u00edfica de Windows. Usa el firmware para cargar el kernel del sistema operativo, as\u00ed como para iniciar los controladores de dispositivo cr\u00edticos desde un disco duro local. Winresume.exe o Winresume.efi (Reanudaci\u00f3n). El Cargador de reanudaci\u00f3n de Windows encuentra una imagen de hibernaci\u00f3n y, a continuaci\u00f3n, usa el firmware para leer el archivo de hibernaci\u00f3n en la memoria RAM y reanudar el sistema operativo en estado de hibernaci\u00f3n. Caracter\u00edsticas Bootmgr Podemos realizar el siguiente resumen del proceso de arranque: Se inicia la BIOS Se carga el MBR del disco Carga el sector de arranque Carga el Windows Boot Manager Lee desde el BCD, (Boot Configuration Data) Busca archivos de hibernaci\u00f3n Inicia el programa Winload.exe, (carga el kernel del Sistema operativo) Inicia el programa ntoskrnl.exe, (imagen del kernel de Windows) Inicia el programa smss.exe, (administrador de secciones) Inicia el programa winlogon (valida la identificaci\u00f3n del usuario en el sistema) Finaliza iniciando los servicios y la interface de login. Modificaci\u00f3n Arranque. \u00b6 Se puede editar el arranque en Windows Server ejecutando el comando msconfig y en la pesta\u00f1a Arranque modificar las opciones del mismo. El administrador y cargador del sistema de arranque se edita con el comando bcdedit . Ejemplo Ejemplo de modificaci\u00f3n de bcdedit -> Enlace:Ejemplos de parametros usados en el editor BCDEdit.exe Ejemplo Powershell T\u00e1mbien mediante Powershell -> Enlace:Modify Windows BCD using Powershell Daemon \u00b6 Daemon , servicio o programa residente es es un tipo especial de programa que se ejecuta en segundo plano, en vez de ser controlado directamente por el usuario; estos programas se encuentran cargados en memoria de forma permanente durante la ejecuci\u00f3n del sistema operativo y son los encargados de ofrecer un servicio al resto de programas o incluso otros demonios. Suelen iniciarse con el sistema operativo y se apagan con \u00e9l. Los daemon suelen tener las siguientes caracter\u00edsticas: No disponen de una \"interfaz\" directa con el usuario, ya sea gr\u00e1fica o textual. No hacen uso de las entradas y salidas est\u00e1ndar para comunicar errores o registrar su funcionamient o, sino que usan archivos del sistema en zonas especiales ( /var/log/ en los UNIX m\u00e1s modernos) o utilizan otros daemon especializados en dicho registro como el syslogd . Ejemplo Por ejemplo, una m\u00e1quina que alberga un servidor web utilizar\u00e1 un daemon httpd (HTTP Daemon) para ofrecer el servicio y que los visitantes a dicha web puedan acceder. Historia Seg\u00fan una investigaci\u00f3n realizada por Richard Steinberg , la palabra daemon fue utilizada en 1963 por primera vez, en el \u00e1rea de la inform\u00e1tica, para denominar a un proceso que realizaba backups en unas cintas . Este proceso se utiliz\u00f3 en el proyecto MAC del MIT y en una computadora IBM 7094 . Nota Los programas daemon reciben este nombre en los sistemas UNIX. En otros sistemas existen procesos similares como los TSRs de MS-DOS o los servicios de Windows . Ejemplo Daemons Systemd \u00b6 Systemd es un conjunto de demonios o daemons de administraci\u00f3n de sistema, bibliotecas y herramientas dise\u00f1ados como una plataforma de administraci\u00f3n y configuraci\u00f3n central para interactuar con el n\u00facleo del Sistema operativo GNU/Linux. Caracter\u00edsticas: Descrito por sus autores como un \" bloque de construcci\u00f3n b\u00e1sico \" para un sistema operativo. Se puede utilizar como un sistema de inicio de Linux (a\u00f1adiendo el proceso init a su conjunto de procesos). El nombre systemd se adhiere a la convenci\u00f3n Unix de distinguir los demonios f\u00e1cilmente por tener la letra d como la \u00faltima letra del nombre de archivo. Uno de los principales objetivos de systemd es unificar configuraciones b\u00e1sicas de Linux y los comportamientos de servicios en todas las distribuciones. Inicio de systemd en Fedora 17 Historia Systemd se desarroll\u00f3 para reemplazar el sistema de inicio ( init ) heredado de los sistemas operativos estilo UNIX System V y Berkeley Software Distribution (BSD) . La idea de dise\u00f1o est\u00e1 pensada en proveer un framework que exprese las dependencias del servicio con la API de Linux, permite hacer m\u00e1s trabajo paralelamente al inicio del sistema y reducir la sobrecarga del shell. Hacia 2015 , la mayor\u00eda de las principales distribuciones de Linux han adoptado systemd como su sistema de inicio predeterminado. Nota En el proceso de arranque en Linux , es el primer proceso que se ejecuta en el espacio de usuario , por lo tanto, tambi\u00e9n es el proceso padre de todos los procesos hijos en el espacio de usuario. Arquitectura de Systemd el comando systemctl , que es la herramienta de administraci\u00f3n central para controlar el sistema init. Explicaremos c\u00f3mo administrar servicios, comprobar estados, cambiar estados del sistema y trabajar con los archivos de configuraci\u00f3n. En el siguiente enlace se puede observar un resumen de los comandos principales para Administraci\u00f3n de Servicios Actividades UD03_03 \u00b6 En esta pr\u00e1ctica se van a instalar dos sistemas operativos en una misma m\u00e1quina virtual (y disco duro). Debemos crear un sistema de arranque que nos permita elegir el sistema operativo con el que deseamos arrancar nuestro equipo. Para ello, sigue los pasos que se describen a continuaci\u00f3n. Crea una m\u00e1quina virtual denominada \u201c Dual \u201d. Particiona el disco para contener un sistema operativo cliente de Microsoft, uno basado en GNU/Linux y dos particiones de datos, con los nombres DOCUMENTOS y EXPEDIENTES que podr\u00e1n ser accedidas sea cual sea el sistema operativo que se arranque. Crea un esquema con las particiones, su tama\u00f1o y el sistema de archivos que se usar\u00e1 en cada caso. El particionado se realizar\u00e1 con el sistema MBR. Instala los sistemas operativos en el siguiente orden: Microsoft Windows 10 y Ubuntu Desktop. Al finalizar la instalaci\u00f3n, debe quedar un men\u00fa de inicio con varios sistemas operativos. men\u00fa GRUB . Una vez instalados los sistemas operativos en el mismo disco duro, modifica el GRUB de para que el sistema operativo a iniciar por defecto sea el de Microsoft y que espere 15 segundos antes de iniciarlo. Realiza esta tarea en CLI. Modifica el GRUB de para que se inicie el sistema operativo de Ubuntu por defecto pero que el tiempo empleado sea de 5 segundos antes de iniciarlo. Redacta un documento en el que indiques los pasos que sigues para realizar esta configuraci\u00f3n.","title":"3.3- Secuencia de arranque del sistema. Demonios y servicios"},{"location":"033_ArranqueServicios.html#secuencia-de-arranque-del-sistema-demonios-y-servicios","text":"En inform\u00e1tica, el arranque o secuencia de arranque (en ingl\u00e9s: bootstrapping, boot o booting ) es el proceso que inicia el gestor de arranque; programa ejecutado por el BIOS cuando se enciende una computadora. Se encarga de la inicializaci\u00f3n del sistema operativo y de los dispositivos . A nivel conceptual los pasos de arranque de un sistema inform\u00e1tico se muestran en la siguiente figura: Pasos Arranque","title":"Secuencia de arranque del sistema. Demonios y servicios."},{"location":"033_ArranqueServicios.html#arranque-en-linux","text":"En Linux, el flujo de control durante el arranque se desarrolla en 4 etapas: Al principio, toma el control la BIOS. En una segunda etapa, tomar\u00e1 el control el cargador de arranque. En una tercera etapa, el control pasa al propio kernel Linux. Y en la cuarta y \u00faltima etapa tendremos en memoria los programas de usuario conviviendo junto con el propio sistema operativo, quienes tomar\u00e1n el control del sistema. Pasos Arranque Linux","title":"Arranque en Linux"},{"location":"033_ArranqueServicios.html#1a-etapa-la-bios","text":"Al encender el equipo, toma el control la BIOS que realiza una serie de operaciones b\u00e1sicas de hardware, programa POST . Una vez que el hardware es reconocido y queda listo para usar, la BIOS carga en memoria el c\u00f3digo executable del cargador de arranque y le pasa el control.","title":"1\u00aa etapa: La BIOS"},{"location":"033_ArranqueServicios.html#2a-etapa-fase-del-cargador-de-arranque-grub-o-lilo","text":"Un cargador de arranque ( bootloader en ingl\u00e9s) es un programa dise\u00f1ado exclusivamente para cargar un sistema operativo en memoria. La etapa del cargador de arranque es diferente de una plataforma a otra. Note Como en la mayor\u00eda de arquitecturas este programa se encuentra en el MBR o GPT , el cual es de 512 bytes, este espacio no es suficiente para cargar en su totalidad un sistema operativo. Por eso, el cargador de arranque consta de varias etapas. Las primeras operaciones las realiza la BIOS . Esquema MBR Esquema GPT De forma general esta etapa tiene dos fases: Se localiza el sector de arranque (GPT o MBR) y Se carga el cargador de este sector (normalmente una parte de LILO o GRUB ).el cargador de arranque carga un mensaje que pregunta que sistema operativo (o tipo de sesi\u00f3n) el usuario desea inicializar. Nota El gestor incluye datos como la partici\u00f3n de arranque y la localizaci\u00f3n del kernel para cada uno, as\u00ed como las opciones personalizadas en su caso.","title":"2\u00aa Etapa: Fase del cargador de arranque GRUB o LILO"},{"location":"033_ArranqueServicios.html#3a-etapa-fase-del-kernel","text":"El kernel de Linux se encarga de todos los procesos del sistema operativo , como la gesti\u00f3n de memoria, planificador de tareas, I/O, comunicaci\u00f3n entre procesos, y el control general del sistema. Este se carga en dos fases: Fase de carga : En la primera etapa el kernel se carga y se descomprime en memoria, como un archivo imagen comprimido. El objetivo es cargar algunas funciones fundamentales como la gesti\u00f3n de memoria. Fase de ejecuci\u00f3n : el kernel busca un proceso de inicio para ejecutar , que (separadamente) fija un espacio de usuario y los procesos necesarios para un entorno del mismo. A continuaci\u00f3n al nucleo se le permite pasar a inactivo, sujeto a las llamadas de otros procesos. Nota El kernel generalmente se almacena en un archivo comprimido. Este archivo comprimido se carga y se descomprime en memoria. Por otra parte, tambi\u00e9n se cargan los drivers necesarios mediante el initrd. El initrd crea un sistema de archivos temporal usado en la fase de ejecuci\u00f3n del kernel.","title":"3\u00aa etapa: Fase del kernel"},{"location":"033_ArranqueServicios.html#arranque-de-windows-y-windows-server","text":"","title":"Arranque de Windows y Windows Server"},{"location":"033_ArranqueServicios.html#windows","text":"La secuencia de arranque de Windows utiliza el sistema de almacenamiento y configuraci\u00f3n de arranque denominado BCD store ( Boot Configuration Data ). Este registro se encuentra situado en el directorio \\boot\\BCD de la partici\u00f3n donde se instala el sistema de forma oculta y en binario. Consiste en un repositorio de datos y par\u00e1metros necesarios para gestionar el arranque del sistema. El fichero Bootmgr.exe es el encargado del administrador y cargador de arranque (boot loader). La secuencia de arranque sigue los siguientes pasos: La BIOS carga el MBR (master boot record, registro de arranque principal es el primer sector de un dispositivo de almacenamiento de datos), en memoria el cual analiza la tabla de particiones y carga en memoria el sector de arranque de la partici\u00f3n marcada como activa en la que se encuentra el S.O Windows . El sector de arranque localiza el bootmgr y se ejecuta, busca el directorio \\boot que contiene los programas que inician el sistema. Dentro del directorio se ejecuta el BCD apareciendo un men\u00fa en que se selecciona el sistema que se desea arrancar comenzando la carga del n\u00facleo de sistema.","title":"Windows"},{"location":"033_ArranqueServicios.html#windows-server","text":"En Windows Server se encuentan unas caracter\u00edsticas avanzadas entre las que destacan: Usa un n uevo almac\u00e9n de datos para los datos de configuraci\u00f3n de arranque, Boot.ini sustituye al anterior cargador de Windows ( Ntldr.exe ). Incluye tambi\u00e9n un administrador de arranque de Windows y un cargador de arranque de Windows nuevos. A partir del Windows Server 2008, encontramos 3 aplicaciones de arranque: Bootmgr.exe o Bootmgr.efi (Arranque). Esta aplicaci\u00f3n es independiente del sistema operativo y hace uso del firmware para cargar el cargador de arranque de Windows, ya sea desde una partici\u00f3n de disco concreta o a trav\u00e9s de una conexi\u00f3n de red (si se trata de un arranque con acceso a red). Winload.exe o Winload.efi (Arranque). Esta aplicaci\u00f3n forma parte del sistema operativo y carga una versi\u00f3n espec\u00edfica de Windows. Usa el firmware para cargar el kernel del sistema operativo, as\u00ed como para iniciar los controladores de dispositivo cr\u00edticos desde un disco duro local. Winresume.exe o Winresume.efi (Reanudaci\u00f3n). El Cargador de reanudaci\u00f3n de Windows encuentra una imagen de hibernaci\u00f3n y, a continuaci\u00f3n, usa el firmware para leer el archivo de hibernaci\u00f3n en la memoria RAM y reanudar el sistema operativo en estado de hibernaci\u00f3n. Caracter\u00edsticas Bootmgr Podemos realizar el siguiente resumen del proceso de arranque: Se inicia la BIOS Se carga el MBR del disco Carga el sector de arranque Carga el Windows Boot Manager Lee desde el BCD, (Boot Configuration Data) Busca archivos de hibernaci\u00f3n Inicia el programa Winload.exe, (carga el kernel del Sistema operativo) Inicia el programa ntoskrnl.exe, (imagen del kernel de Windows) Inicia el programa smss.exe, (administrador de secciones) Inicia el programa winlogon (valida la identificaci\u00f3n del usuario en el sistema) Finaliza iniciando los servicios y la interface de login.","title":"Windows Server"},{"location":"033_ArranqueServicios.html#modificacion-arranque","text":"Se puede editar el arranque en Windows Server ejecutando el comando msconfig y en la pesta\u00f1a Arranque modificar las opciones del mismo. El administrador y cargador del sistema de arranque se edita con el comando bcdedit . Ejemplo Ejemplo de modificaci\u00f3n de bcdedit -> Enlace:Ejemplos de parametros usados en el editor BCDEdit.exe Ejemplo Powershell T\u00e1mbien mediante Powershell -> Enlace:Modify Windows BCD using Powershell","title":"Modificaci\u00f3n Arranque."},{"location":"033_ArranqueServicios.html#daemon","text":"Daemon , servicio o programa residente es es un tipo especial de programa que se ejecuta en segundo plano, en vez de ser controlado directamente por el usuario; estos programas se encuentran cargados en memoria de forma permanente durante la ejecuci\u00f3n del sistema operativo y son los encargados de ofrecer un servicio al resto de programas o incluso otros demonios. Suelen iniciarse con el sistema operativo y se apagan con \u00e9l. Los daemon suelen tener las siguientes caracter\u00edsticas: No disponen de una \"interfaz\" directa con el usuario, ya sea gr\u00e1fica o textual. No hacen uso de las entradas y salidas est\u00e1ndar para comunicar errores o registrar su funcionamient o, sino que usan archivos del sistema en zonas especiales ( /var/log/ en los UNIX m\u00e1s modernos) o utilizan otros daemon especializados en dicho registro como el syslogd . Ejemplo Por ejemplo, una m\u00e1quina que alberga un servidor web utilizar\u00e1 un daemon httpd (HTTP Daemon) para ofrecer el servicio y que los visitantes a dicha web puedan acceder. Historia Seg\u00fan una investigaci\u00f3n realizada por Richard Steinberg , la palabra daemon fue utilizada en 1963 por primera vez, en el \u00e1rea de la inform\u00e1tica, para denominar a un proceso que realizaba backups en unas cintas . Este proceso se utiliz\u00f3 en el proyecto MAC del MIT y en una computadora IBM 7094 . Nota Los programas daemon reciben este nombre en los sistemas UNIX. En otros sistemas existen procesos similares como los TSRs de MS-DOS o los servicios de Windows . Ejemplo Daemons","title":"Daemon"},{"location":"033_ArranqueServicios.html#systemd","text":"Systemd es un conjunto de demonios o daemons de administraci\u00f3n de sistema, bibliotecas y herramientas dise\u00f1ados como una plataforma de administraci\u00f3n y configuraci\u00f3n central para interactuar con el n\u00facleo del Sistema operativo GNU/Linux. Caracter\u00edsticas: Descrito por sus autores como un \" bloque de construcci\u00f3n b\u00e1sico \" para un sistema operativo. Se puede utilizar como un sistema de inicio de Linux (a\u00f1adiendo el proceso init a su conjunto de procesos). El nombre systemd se adhiere a la convenci\u00f3n Unix de distinguir los demonios f\u00e1cilmente por tener la letra d como la \u00faltima letra del nombre de archivo. Uno de los principales objetivos de systemd es unificar configuraciones b\u00e1sicas de Linux y los comportamientos de servicios en todas las distribuciones. Inicio de systemd en Fedora 17 Historia Systemd se desarroll\u00f3 para reemplazar el sistema de inicio ( init ) heredado de los sistemas operativos estilo UNIX System V y Berkeley Software Distribution (BSD) . La idea de dise\u00f1o est\u00e1 pensada en proveer un framework que exprese las dependencias del servicio con la API de Linux, permite hacer m\u00e1s trabajo paralelamente al inicio del sistema y reducir la sobrecarga del shell. Hacia 2015 , la mayor\u00eda de las principales distribuciones de Linux han adoptado systemd como su sistema de inicio predeterminado. Nota En el proceso de arranque en Linux , es el primer proceso que se ejecuta en el espacio de usuario , por lo tanto, tambi\u00e9n es el proceso padre de todos los procesos hijos en el espacio de usuario. Arquitectura de Systemd el comando systemctl , que es la herramienta de administraci\u00f3n central para controlar el sistema init. Explicaremos c\u00f3mo administrar servicios, comprobar estados, cambiar estados del sistema y trabajar con los archivos de configuraci\u00f3n. En el siguiente enlace se puede observar un resumen de los comandos principales para Administraci\u00f3n de Servicios","title":"Systemd"},{"location":"033_ArranqueServicios.html#actividades-ud03_03","text":"En esta pr\u00e1ctica se van a instalar dos sistemas operativos en una misma m\u00e1quina virtual (y disco duro). Debemos crear un sistema de arranque que nos permita elegir el sistema operativo con el que deseamos arrancar nuestro equipo. Para ello, sigue los pasos que se describen a continuaci\u00f3n. Crea una m\u00e1quina virtual denominada \u201c Dual \u201d. Particiona el disco para contener un sistema operativo cliente de Microsoft, uno basado en GNU/Linux y dos particiones de datos, con los nombres DOCUMENTOS y EXPEDIENTES que podr\u00e1n ser accedidas sea cual sea el sistema operativo que se arranque. Crea un esquema con las particiones, su tama\u00f1o y el sistema de archivos que se usar\u00e1 en cada caso. El particionado se realizar\u00e1 con el sistema MBR. Instala los sistemas operativos en el siguiente orden: Microsoft Windows 10 y Ubuntu Desktop. Al finalizar la instalaci\u00f3n, debe quedar un men\u00fa de inicio con varios sistemas operativos. men\u00fa GRUB . Una vez instalados los sistemas operativos en el mismo disco duro, modifica el GRUB de para que el sistema operativo a iniciar por defecto sea el de Microsoft y que espere 15 segundos antes de iniciarlo. Realiza esta tarea en CLI. Modifica el GRUB de para que se inicie el sistema operativo de Ubuntu por defecto pero que el tiempo empleado sea de 5 segundos antes de iniciarlo. Redacta un documento en el que indiques los pasos que sigues para realizar esta configuraci\u00f3n.","title":"Actividades UD03_03"},{"location":"041_EstructuraDirectorios.html","text":"Estructura de directorios \u00b6 Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 6 sesiones (2h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Gestiona la automatizaci\u00f3n de tareas del sistema, aplicando criterios de eficiencia y utilizando comandos y herramientas gr\u00e1ficas. Se han descrito las ventajas de la automatizaci\u00f3n de las tareas repetitivas en el sistema. Se han utilizado los comandos del sistema para la planificaci\u00f3n de tareas. Se han establecido restricciones de seguridad. Se han realizado planificaciones de tareas repetitivas o puntuales relacionadas con la administraci\u00f3n del sistema. Se ha automatizado la administraci\u00f3n de cuentas. Se han instalado y configurado herramientas gr\u00e1ficas para la planificaci\u00f3n de tareas. Se han utilizado herramientas gr\u00e1ficas para la planificaci\u00f3n de tareas. Se han documentado los procesos programados como tareas autom\u00e1ticas. Introducci\u00f3n \u00b6 Todos los sistemas operativos se caracterizan por tener una estructura jer\u00e1rquica de almacenamiento de la informaci\u00f3n . Esta informaci\u00f3n se ubica en las unidades de almacenamiento de forma arborescente . Esta estructura comienza en la propia unidad de almacenamiento en la que se van a almacenar los datos. El sistema operativo es capaz de gestionar varias unidades de almacenamiento. Para realizar la comunicaci\u00f3n entre las unidades f\u00edsicas y el usuario se utiliza una relaci\u00f3n que permite al usuario reconocer las unidades f\u00edsicas gracias a las unidades l\u00f3gicas. Las unidades l\u00f3gicas son la representaci\u00f3n que el sistema operativo hace de cada unidad f\u00edsica. Terminolog\u00eda \u00b6 Fichero o Archivo -> Mecanismo de abstracci\u00f3n que sirve como unidad l\u00f3gica de informaci\u00f3n Sistema de archivos -> Permite organizaci\u00f3n l\u00f3gica y f\u00edsica de los archivos Particionado de dispositivos -> Permite ubicar el sistema de archivos en un dispositivo Objetivos \u00b6 Gesti\u00f3n de ficheros -> Crear, copiar, eliminar\u2026 en definitiva manejar datos Optimizar el rendimiento -> Orden l\u00f3gico de los archivos para aumentar la velocidad de acceso Seguridad en los datos -> Soluciones ante p\u00e9rdidas, Ficheros seguros a errores f\u00edsicos Acceso controlado a la informaci\u00f3n -> Ficheros seguros a errores l\u00f3gicos y humanos Estructura Linux \u00b6 Breve Historia \u00b6 La estructura de los directorios en GNU/Linux, as\u00ed como su contenido y funciones, viene definida en el denominado Filesystem Hierarchy Standard o FHS por sus siglas en ingl\u00e9s, que en otras palabras viene a ser el est\u00e1ndar de jerarqu\u00eda para los sistemas de archivos en sistemas GNU/Linux y otros derivados de UNIX . El FHS naci\u00f3 en 1994 y es actualmente mantenida por la Linux Foundation. Aun siendo un est\u00e1ndar, hay casos de distribuciones GNU/Linux que se saltan estas \u201cnormas\u201d, aunque en la mayor\u00eda de los casos son aceptadas. Organizaci\u00f3n del Sistema de Ficheros \u00b6 Listado de las directorios m\u00e1s importantes y sus funciones Desglose de directorios Linux \u00b6 / o \"root\" Toda la estructura de directorios en los sistemas basados en UNIX parte de un directorio ra\u00edz tambi\u00e9n llamado directorio root y que se simboliza por una barra inclinada o / . Desde este directorio es donde nacen todo el resto de directorios, independientemente de d\u00f3nde est\u00e9n almacenados f\u00edsicamente; si en discos o unidades separadas. Cualquier direcci\u00f3n de archivo o carpeta en GNU/Linux empieza por el directorio ra\u00edz o / , seguido de todos los directorios y subdirectorios que que lo contienen, separados cada uno de ellos por / . /bin El directorio /bin es donde se almacenan todos los archivos binarios necesarios para garantizar las funciones b\u00e1sicas a nivel de usuario . S\u00f3lo almacena los ejecutables de usuario, ya que los binarios necesarios para tareas administrativas gestionadas por el usuario root o superusuario del sistema se encuentran en el directorio /sbin . Incluye tambi\u00e9n los binarios que permiten la ejecuci\u00f3n de varias utilidades est\u00e1ndar del terminal de GNU/Linux, concretamente cat , cd , cp , echo , grep , gzip , kill , ls , mv , rm , ping , su , ps , tar y vi . /boot Es un directorio que contiene los archivos que son necesarios en el proceso de arranque del sistema , y que deber\u00e1n ser utilizados antes que que el kernel empiece a dar las \u00f3rdenes de ejecuci\u00f3n de los diferentes m\u00f3dulos del sistema. Es tambi\u00e9n donde se encuentra el gestor de arranque GRUB . /dev Este directorio incluye todos los dispositivos de almacenamiento, en forma de archivos, conectados al sistema, es decir, cualquier disco duro conectado, partici\u00f3n, memoria USB, o CDROM conectado al sistema y que el sistema pueda entender como un volumen l\u00f3gico de almacenamiento. Para ver esto en la pr\u00e1ctica, si abres una ventana de terminal y ejecutas el comando sudo fdisk -l , ver\u00e1s la estructura de particiones de tu sistema. /home Es el directorio de los usuarios est\u00e1ndar, y por lo tanto, el destinado a almacenar todos los archivos del usuario, como documentos, fotos, v\u00eddeos, m\u00fasica, plantillas, etc\u00e9tera. Tambi\u00e9n incluye archivos temporales de aplicaciones que sirven para guardar las configuraciones de programas. Dentro /home est\u00e1n los directorios personales de todos los usuarios , nombrados seg\u00fan el nombre de usuario utilizado. /lib Incluye las bibliotecas esenciales que son necesarios para que se puedan ejecutar correctamente todos los binarios que se encuentran en los directorios /bin y /sbin , as\u00ed como los m\u00f3dulos del propio kernel. En los sistemas operativos de 64 bits, adem\u00e1s de /lib existe otro directorio denominado /lib64 , referida a las bibliotecas para aplicaciones de 64 bits. /media Representa el punto de montaje de todos los vol\u00famenes l\u00f3gicos que se montan temporalmente , ya sean unidades externas USB u otras particiones de disco. En la mayor\u00eda de distribuciones GNU/Linux, desde hace ya alg\u00fan tiempo, cada vez que se monta una unidad externa se hace dentro del directorio /media y a su vez dentro de un directorio especifico dependiendo del usuario del sistema que monta el volumen. /mnt Es un directorio vac\u00edo que cumple funciones similares a /media, pero que actualmente no se suele utilizar , ya que la mayor\u00eda de distribuciones hacen uso de este \u00faltimo para los puntos de montaje temporales. A\u00fan as\u00ed existen otras distribuciones m\u00e1s cl\u00e1sicas en las que se produce una distinci\u00f3n entre ambas carpetas: /mnt para montajes permanentes, es decir, discos duros conectados internamente, y /media para dispotivos con un montaje provisional (unidades extra\u00edbles). /opt En cierto modo vendr\u00eda a ser como una extensi\u00f3n del directorio /usr , pero en este caso van todos aquellos archivos que son parte de programas instalados al margen de la distribuci\u00f3n y que, por lo tanto, no siguen los est\u00e1ndares de almacenar los diferentes archivos dentro de los diferentes subdirectorios de /usr (que ser\u00eda lo recomendable). Haciendo una analog\u00eda con Windows, vendr\u00eda a ser algo como el directorio de \u201cArchivos de programa\u201d . /proc Este directorio contiene informaci\u00f3n de los procesos y aplicaciones que se est\u00e1n ejecutando en un momento determinado en el sistema , pero realmente no guarda nada como tal, ya que lo que almacena son archivos virtuales, por lo que el contenido de este directorio es nulo. B\u00e1sicamente son listas de eventos del sistema operativo que se generan en el momento de acceder a ellos, y que no existen dentro del directorio como tales. /root Es el directorio /home del usuario root o superusuario del sistema . A diferencia de los otros usuarios, que se encuentran todos dentro de /home en sus respectivas subcarpetas, el directorio del usuario root est\u00e1 en su propia carpeta colgando directamente de la ra\u00edz del sistema. /sbin Si hemos dicho que en /bin se almacenaban los binarios relativos a las funciones normales de usuario, /sbin hace lo mismo pero para los binarios relativos tareas propias del sistema operativo , y que solamente pueden ser gestionadas por el usuario root, tales como el arranque, tareas de restauraci\u00f3n, reparaci\u00f3n, etc\u00e9tera. /srv Sirve para almacenar archivos y directorios relativos a servidores que puedas tener instalados dentro de tu sistema, ya sea un servidor web www, un servidor FTP, correo electr\u00f3nico, etc\u00e9tera. /sys Al igual que /proc , contiene archivos virtuales que proveen informaci\u00f3n del kernel relativa a eventos del sistema operativo. Es en cierto modo una evoluci\u00f3n de /proc , y a diferencia de este \u00faltimo, los archivos se distribuyen de forma jer\u00e1rquica. /tmp Como ya da a entender su nombre, sirve para almacenar archivos temporales de todo tipo, ya sea de elementos del sistema, o tambi\u00e9n de diferentes aplicaciones a nivel de usuario. Es un directorio dispuesto para almacenar contenido de corta duraci\u00f3n, de hecho en la gran mayor\u00eda de los casos se suele vaciar de forma autom\u00e1tica en cada reinicio del sistema. Aun as\u00ed, no debes borrar su contenido de forma manual, puesto que puede contener archivos necesarios para ciertos programas o procesos que est\u00e9n ejecut\u00e1ndose. Las aplicaciones programadas para almacenar archivos en este directorio deben asumir que s\u00f3lo ser\u00e1n recuperables en la sesi\u00f3n actual. En este sentido, hay otro subdirectorio, /var/tmp , dispuesto igualmente para el almacenamiento de archivos temporales, pero cuyo contenido no se borra de forma autom\u00e1tica tras el reinicio del sistema. /usr El directorio /usr viene de \u201cUser System Resources\u201d y actualmente sirve para almacenar todos los archivos de las aplicaciones de usuario , incluyendo todo el software instalado a trav\u00e9s de los gestores de paquetes de cada distribuci\u00f3n. /var En cierto modo se podr\u00eda decir que act\u00faa a modo de registro del sistema . Contiene varios archivos con informaci\u00f3n del sistema, como: archivos de logs, correos electr\u00f3nicos de los usuarios del sistema, bases de datos, informaci\u00f3n almacenada en la cach\u00e9, informaci\u00f3n relativa a los paquetes de aplicaciones almacenados en /opt, entre otros. Archivos y directorios en GNU/Linux \u00b6 En los sistemas operativos basados en UNIX, todo es un archivo. Estos archivos poseen dos partes diferenciadas: nombre y extensi\u00f3n. De las dos partes, tan s\u00f3lo el nombre es obligatorio, por lo tanto, las extensiones son opcionales . Por otra parte, GNU/Linux es sensible a may\u00fasculas y min\u00fasculas , lo que quiere decir que CEO.txt no es lo mismo que ceo.txt. Esto tambi\u00e9n es aplicable a carpetas. Consejo Para prevenir errores es aconsejable usar min\u00fasculas para nombrar ficheros y directorios. Tambi\u00e9n hay que tener en cuenta el uso problem\u00e1tico de algunos caracteres especiales que tambi\u00e9n deberemos evitar su uso, como por ejemplo las letras especiales (e\u00f1e y c trencada), ni las tildes, ni los caracteres especiales c\u00f3mo ! , @ , # , $ , % , ^ , & , * , : y `. Tipos \u00b6 Se disponen de varios tipos de ficheros en GNU/Linux: Archivos normales Los archivos regulares o normales pueden contener datos de usuario, configuraciones del sistema, pueden ser scripts, binarios, ejecutables o no, en cualquier caso, el sistema operativo simplemente maneja estos archivos. Directorios Los directorios o carpetas muestran la localizaci\u00f3n de otros archivos. Son en realidad, peque\u00f1os \u00edndices que indican al sistema donde ha de ir a buscar para encontrar un fichero en concreto. Enlaces duros o f\u00edsicos Antes de explicar qu\u00e9 es un enlace f\u00edsico es conveniente que conozcas lo que es un nodoi . Todo fichero en GNU/Linux posee un bloque inicial que contiene la informaci\u00f3n del fichero y enlaces a otros bloques que contienen al propio fichero . Cuando hacemos cualquier acci\u00f3n sobre un fichero, siempre se empieza consultando este nodo inicial. Haciendo un paralelismo, funciona como el \u00edndice de un libro . Ejemplo Nodo-I Nota Si necesita referirse a un archivo usando dos nombres distintos, puedes crear un enlace duro . El enlace duro tendr\u00e1 el mismo i-nodo que el archivo original y guarda el mismo aspecto y comportamiento. Warning Hay que tener en cuenta que no pueden existir enlaces duros entre dos archivos de particiones separadas, ya que cada una de ellas tiene su propia tabla de nodos-i . Enlaces simb\u00f3licos Para salvar la imposibilidad anterior, entre otras cosas, disponemos de otro tipo de archivos conocido como enlaces simb\u00f3licos . A diferencia de los enlaces duros, que apuntan a un archivo por su i-nodo, un enlace simb\u00f3lico apunta a otro archivo por su nombre. Esto nos permite enlazar (apuntar) a otros archivos localizados en otras particiones, e incluso en otras unidades de red. Note En otro sistemas operativos se funcionan de forma similar a los accesos directos. Estructura Windows \u00b6 A groso modo en las distintas versiones de Windows se puede encontrar, aunque pueden existir excepciones en las mismas: Carpeta de Windows ---> C:\\Windows Carpeta del sistema ---> C:\\Windows\\System32 Archivos de programa ---> C:\\Program Files Archivos de programa, datos comunes ---> C:\\Program Files\\Common Files Datos de programas compartidos ---> C:\\ProgramData Fuentes ---> C:\\Windows\\Fonts Herramientas administrativas compartidas ---> C:\\ProgramData\\Microsoft\\Windows\\StartMenu\\Programs\\Administrative Tools Programas en el men\u00fa de Inicio ---> C:\\ProgramData\\Microsoft\\Windows\\Start Menu Programas que arrancan con el inicio de Windows ---> C:\\ProgramData\\Microsoft\\Windows\\StartMenu\\Programs\\Startup Carpetas compartidas (Publicas) ---> C:\\Users\\Public Cache de b\u00fasquedas hechas en Windows ---> C:\\ProgramData\\Microsoft\\Search\\Data\\Applications\\Windows Carpetas de usuario \u00b6 Las carpetas de los usuarios se encuentran en \" Users \" o \" Usuarios \" en el disco Ra\u00edz donde est\u00e1 instalado el sistema operativo contiene algunas como: Escritorio Mi m\u00fasica Mis documentos Mis im\u00e1genes Contactos Favoritos Archivos temporales Archivos temporales de internet Cookies Datos de programa Accesos a carpetas importantes \u00b6 Hay algunas variables del sistema que se refieren a directorios, que es importante conocer, entre ellas: %windir% directorio de Windows. %os% muestra el sistema operativo %homepath% equivale a la carpeta del usuario en Usuarios o User %programfiles% muestra archivos de programa %path% muestra el path del sistema %Comspec% Reinicia la consola o la abre %systemroot% Igual que %windir% %allusersprofile% Equivale a Allusers en Usuarios o Users %Temp% o %Tmp% Equivale a la carpetade archivos temporales de Internet. Muestra de algunas de las variables del Sistema de Windows B\u00fasqueda de informaci\u00f3n del sistema. \u00d3rdenes. Herramientas gr\u00e1ficas. \u00b6 Herramientas y comandos Informaci\u00f3n Linux \u00b6 Comandos \u00b6 Principales comandos Comando Acci\u00f3n Comando Acci\u00f3n mkdir crea directorios zip comprime ficheros en formato ZIP rmdir elimina directorios unzip descomprimir ficheros ZIP touch crea un archivo nuevo bz2 comprime ficheros en formato BZ2 rm elimina ficheros cat muestra el contenido de un fichero cp copia archivos y directorios diff muestra diferencias entre ficheros ln crea enlaces f\u00edsicos y simb\u00f3licos find se utiliza para encontrar archivos en un determinado directorio tar empaqueta ficheros grep para encontrar texto dentro del archivo que le indiquemos El directorio /proc Este directorio es lo conocido como Pseudofilesystem . Guarda informaci\u00f3n sobre el sistema y los procesos. Caracter\u00edsticas: Se inicializa durante el arranque. Est\u00e1 implementado en memoria y no se guarda en disco. La estructura del directorio /proc depende de la versi\u00f3n del kernel. Los comandos vistos (ps, top, etc.) obtienen la informaci\u00f3n sobre los procesos de este directorio. Nota En el kernel 2.6 de Linux aparece un nuevo pseudofilesystem (/sys) que reemplaza al /proc en lo que se refiere a visualizaci\u00f3n y ajuste de dispositivos El Comando uname Este comando permite averiguar informaci\u00f3n del Sistema como el nombre de la m\u00e1quina, versi\u00f3n del sistema operativo,etc, sin necesidad de acceder al directorio /proc uname [-snrvma] [--sysname] [--nodename] [--release] [--machine][--all] [--help] [--version] Modificadores Comando uname Ejemplos de ejecuci\u00f3n del comando uname El Comando dmesg dmesg (diagnostic message, mensajes de diagn\u00f3stico) es una instrucci\u00f3n presente en los sistemas operativos Unix que lista el buffer de mensajes del n\u00facleo. Este b\u00fafer contiene una gran variedad de mensajes importantes generados durante el arranque del sistema, como la detecci\u00f3n del hardware, asignaci\u00f3n de controladores (drivers) y durante la depuraci\u00f3n de aplicaciones. Caracter\u00edsticas: En realidad es una visualizaci\u00f3n del fichero /var/log/dmesg . Dmesg puede ser muy \u00fatil para solucionar problemas o simplemente tratando de obtener informaci\u00f3n sobre el hardware en un sistema. La salida del fichero es demasiado grande, por eso suele utilizarse con tuber\u00edas para filtrar la informaci\u00f3n que necesitamos, algunos ejemplos ser\u00edan: dmesg | less dmesg> boot_messages dmesg | grep -i usb dmesg | grep -i TTY dmesg | grep -i dma La salida de dmesg se mantiene en el archivo de registro /var/log/dmesg , y puede por lo tanto tambi\u00e9n ser vista f\u00e1cilmente por leer ese archivo con un editor de texto , como por ejemplo vi o gedit , o con un comando como cat , por ejemplo: cat /var/log/dmesg | tail -f Herramientas \u00b6 SysStat \u00b6 SysStat es una colecci\u00f3n de herramientas con la que podremos monitorizar nuestro sistem a, que adem\u00e1s es de c\u00f3digo abierto y gratuita. Con estas herramientas podremos depurar problemas de rendimiento en sistemas Gnu/Linux, tambi\u00e9n nos permitir\u00e1 ver los datos de rendimiento del sistema en tiempo real, o analizar los datos de los archivos que estas herramientas pueden generar. Utilidades SysStat iostat : Estad\u00edsticas de Cpu, entradas y salidas de dispositivos, particiones y sistema sde ficheros de red. mpsta t informa sobre estad\u00edsticas relacionadas con el o los procesadores. pidstat Informaci\u00f3n estad\u00edstica sobre procesos linux: Entradas/salidas, Cpu, memoria,etc. sar recoge , informa y salva informaci\u00f3n sobre actividad del Sistema como CPU, memoria, discos , interrupciones, interfaces de red, terminals, tablas del kernel, etc. sadc Es el recolector de datos de la actividad del Sistema. sa1 : Recoge informaci\u00f3n y la guarda en el fichero diario de datos de actividad del sistema. Es el front-end que utiliza sadc para que se ejecute desde cron. sa2 escribe un informe --resumen de la actividad diaria. Es un front-end de sar que est\u00e1 dise\u00f1ado para ser ejecutado desde cron. sadf muestra los datos que recolecta sar en multiples formatos(CSV, XML, etc.) Esto es util para cargar los datos de rendimiento en una base de datos o importarla desde una hoja de c\u00e1lculo para crear gr\u00e1ficos. Instalar y configurar SysStat en Ubuntu 20.04 | Ubuntu 18.04 Paso 1: Ejecute el siguiente comando si desea utilizar el administrador de paquetes: sudo apt install sysstat -y Paso 2: Dado que el monitoreo SysStat est\u00e1 deshabilitado de manera predeterminada, debe editar el archivo de configuraci\u00f3n en un editor de texto para habilitar el monitoreo SysStat. Entonces, habilitemos el monitoreo de SysStat y editemos el siguiente archivo y gu\u00e1rdelo. sudo vim /etc/default/sysstat Luego, debe establecer ENABLED en verdadero como se muestra en el apartado anterior: ENABLED=\"true\" Habilitar sysstat Ahora se puede guardar y cerrar el archivo. Para que los cambios sujan efectos se deben activar el servicio mediante los siguientes comandos. sudo systemctl enable sysstat sudo systemctl start sysstat Nota A partir de este momento, se pondr\u00e1 en marcha la recopilaci\u00f3n de datos seg\u00fan se indica en /etc/cron.d/sysstat . Y se pueden encontrar todos los archivos de registro en el directorio /var/log/sysstat . Los nombres de archivo ser\u00e1n sa1, sa2, etc. (1 y 2 son los datos del mes actual). Ejemplos de busqueda y visualizaci\u00f3n de informaci\u00f3n \u00b6 sar . Para visualizar el uso actual de la CPU . Utilice -u con el comando asterisco para ver la CPU est\u00e1tica en tiempo real. sar -u Se pueden ver los usos de la CPU en tiempo real si especifica el intervalo en tiempo real y el n\u00famero de veces que se mostrar\u00e1n los datos. Veamos un ejemplo: para ver los usos de la CPU en tiempo real 5 veces con la diferencia de 1 segundo. sar -u 1 5 Dado que la mayor\u00eda de las CPU son de varios n\u00facleos, se pueden ver los datos de utilizaci\u00f3n de la CPU con m\u00e1s profundidad. Utilice el modificador -P ALL para ver los detalles de utilizaci\u00f3n de cada n\u00facleo individualmente. sar -P ALL 1 3 Para ver c\u00f3mo ver los datos hist\u00f3ricos con SysStat, se pueden visualizar con el comando sar , el cual mantiene 7 d\u00edas de datos de forma predeterminada, pero es posible cambiar el n\u00famero de d\u00edas en el archivo /etc/sysstat/sysstat HISTORY=28 Para ver el informe de utilizaci\u00f3n de memoria de los datos del 20 del mes actual, se utilizar\u00eda el siguiente comando: sar -r -f /var/log/sysstat/sa20 El tiempo de rango se puede especificar con el comando anterior. Solo puede ver la estad\u00edstica entre un tiempo determinado. Para ver estad\u00edstica entre las 10:00 p.m. y las 11:00 p.m., se utilizar\u00eda el siguiente comando: sar -r -f /var/log/sysstat/sa20 -s 22:00:00 -e 23:00:00 Nota: El archivo de los datos requeridos se proporciona con la opci\u00f3n -f para ver los datos hist\u00f3ricos de sar. Entonces, se puede usar el comando a continuaci\u00f3n para ver los datos de utilizaci\u00f3n de la CPU de cualquier fecha con el comando sar : sar -u -f /var/log/sysstat/sa28 iostat -> Ver el uso del dispositivo _ Utilice el comando iostat para encontrar la estad\u00edstica del disco. iostat muestra la transferencia de datos actual por segundo, el n\u00famero total de bloques le\u00eddos y escritos en el disco y un bloque promedio por segundo. iostat -d 1 5 Se pueden observar m\u00e1s detalles con los siguientes modificadores: tps -> Transferencia por segundo Blk_read / s -> Cantidad total de datos le\u00eddos en bloques por segundo. Blk_wrtn / s -> Cantidad total de datos escritos en bloques por segundo. Blk_read -> Lectura total del bloque. Blk_wrtn _ -> Bloque total escrito. Utilice el siguiente comando para ver estad\u00edsticas de E/S m\u00e1s extendidas del disco. iostat -x 1 5 pidstat . El uso del comando pidstat con el modificador -d le brinda detalles de los procesos que se est\u00e1n ejecutando actualmente en los sistemas. pidstat -d Si se prueba pidstat con -r sirve para mostrar la utilizaci\u00f3n de recursos por procesos cada 1 segundo durante las 5 veces. pidstat -r 1 5 Para Datos de utilizaci\u00f3n de la memoria se puede utilizar el comando sar con -r para ver los detalles de la utilizaci\u00f3n de la memoria actual para las 5 veces cada 1 segundo. sar -r 1 5 isag . Herramienta gr\u00e1fica que previamente debemos instalar.Podemos utilizar cualquiera de los ficheros de los dias en los que hay recogidos datos. Ejemplo gr\u00e1fica de isag Syslog \u00b6 Syslog es un sistema de logs que se encarga principalmente de la administraci\u00f3n de logs, los cuales son generados por eventos del sistema, sus programas o por el Kernel. Caracter\u00edsticas: El envi\u00f3 de mensajes Syslog fue usado inicialmente en sistemas basados en UNIX para registrar eventos de aplicaciones, sistema operativo o red. Es com\u00fan ahora encontrar equipos de redes que pueden generar y enviar mensajes Syslog a equipos configurados con un demonio que los reciba y existen incluso implementaciones para sistemas Windows. En la mayor\u00eda de distribuciones linux, se puede encontrar el demonio syslogd que se encarga de leer y enviar mensajes a la consola del sistema, ficheros de log y a otras m\u00e1quinas y/o otros usuarios. Para esto se gu\u00edan por un fichero de configuraci\u00f3n que indican que mensajes y a d\u00f3nde enviarlos. Este es syslog.conf . Syslog.conf \u00b6 Este archivo de configuraci\u00f3n de logs contiene l\u00edneas con dos campos, separados por tabuladores o espacios: Selector: Especifica que mensajes tratar teniendo en cuenta el tipo de mensaje y la prioridad. Acci\u00f3n: Qu\u00e9 se va a hacer con ese mensaje. Nota Una regla puede ser dividida en varias l\u00edneas si todas las l\u00edneas excepto la \u00faltima terminan con un car\u00e1cter de backslash \\ . Selectores: Los selectores se escriben como un nombre de funci\u00f3n, un punto y un nivel , sin ning\u00fan espacio entre ellos. Estos no son sensibles a las may\u00fasculas/min\u00fasculas. La funci\u00f3n puede ser una de estas: auth, authpriv, cron, daemon, kern, lpr, mail, mark, news, syslog, user, uucp y local0 hasta local7 . El nivel indica la gravedad del mensaje a tratar y puede ser: emerg, alert, crit, err,warning, notice and debug Nota Cuando syslogd recibe un mensaje que encaja con la funci\u00f3n y es del nivel de gravedad indicado, realiza la funci\u00f3n que se indica en el campo de acci\u00f3n. Acciones : Un nombre de fichero con direcci\u00f3n absoluta. En cuyo caso los mensajes ir\u00e1n a este fichero. Una tuber\u00eda con nombre .Su nombre comenzar\u00e1 por el car\u00e1cter \u201c | \u201d.Este es un tipo de fichero especial, que puede ser tratado por determinados programas, por ejemplo, para depuraci\u00f3n. Un nombre de equipo . Para esto ponemos el nombre del equipo comenzando por \u201c@\u201d.En este caso, el mensaje se enviar\u00e1 al syslog del equipo que se nombr\u00f3. Una lista de usuarios separados por comas. Se env\u00eda el mensaje a estos usuarios. Un asterisco . En este caso , se env\u00eda el mensaje a todos los usuarios que tengan una sesi\u00f3n abierta en el sistema. Nota Se pueden poner varias acciones separadas por \u201c ; \u201d. Tambi\u00e9n pueden ponerse varias funciones para un mismo nivel, separ\u00e1ndolos con \u201c , \u201d. Se puede utilizar un \u201c * \u201d para indicar todas las funciones o todos los niveles. Si queremos que s\u00f3lo sean los de ese nivel en concreto, debemos utilizar un \u201c = \u201d. Tambi\u00e9n podemos negar niveles utilizando el s\u00edmbolo \u201c ! \u201d delante del n\u00famero de nivel. Si queremos que ciertos mensajes no se env\u00eden, puede utilizarse el nivel \u201c none \u201d. Si se indica la funci\u00f3n especial \u201c mark \u201d, se recibe un mensaje de prioridad \u201c info \u201d cada 20 minutos. Las l\u00edneas que comienzan por \u201c # \u201d se ignoran, son comentarios. Tambi\u00e9n las l\u00edneas en blanco. Ejemplo Syslog.conf Ubuntu: A configuration file might appear as follows : # Log all kernel messages, authentication messages of # level notice or higher and anything of level err or # higher to the console. # Don't log private authentication messages! * .err;kern.*;auth.notice;authpriv.none /dev/console # Log anything (except mail) of level info or higher. # Don't log private authentication messages! *.info;mail.none;authpriv.none /var/log/messages # The authpriv file has restricted access. authpriv.* /var/log/secure # Log all the mail messages in one place. mail.* /var/log/maillog # Everybody gets emergency messages, plus log them on another # machine. *.emerg * *.emerg @arpa.berkeley.edu # Root and Eric get alert and higher messages. *.alert root,eric # Save mail and news errors of level err and higher in a # special file. uucp,news.crit /var/log/spoolerr Documentaci\u00f3n syslog.conf syslog manpages ubuntu Otros ficheros de log \u00b6 Algunos de los ficheros est\u00e1ndares en Linux son: /var/log/syslog y /var/log/messages -> Guardan casi toda la informaci\u00f3n de log s\u00f3lo niveles info y superiores. /var/log/auth.log -> Informaci\u00f3n de autenticaci\u00f3n Existen aplicaciones que no utilizan syslog y guardan sus logs en ficheros espec\u00edficos como /var/log/XFree86.0.log para el sistema de Xwindows , de este tipo tambi\u00e9n se destacan los siguientes: /var/log/wtmp -> Guarda informaci\u00f3n sobre hora, fecha y terminal de login de los usuarios que se han conectado o est\u00e1n conectados al sistema. Caracter\u00edsticas: Es un fichero binario Se lee mediante el comando /var/log/btmp -> Similar a guarda informaci\u00f3n sobre los logins fallados. Caracter\u00edsticas: Se lee mediante el comando lastb . /var/run/utmp -> Guarda informaci\u00f3n sobre hora, fecha y terminal de login de los usuarios conectados actualmente al sistema Es un fichero binario Lo leen los comandos users y finger . /var/log/lastlog -> Guarda la hora y fecha del login m\u00e1s reciente para cada usuario del sistema Es un fichero binario Se lee con el comando /var/log/faillog -> Guarda informaci\u00f3n sobre los fallos de acceso Se lee con el comando Este comando tambi\u00e9n permite especificar l\u00edmites de fallos antes de inhabilitar la cuenta /var/log/dmesg -> Informaci\u00f3n escrita por el kernel en el arranque del sistema El kernel escribe sus mensajes en un buffer circular. El contenido de este buffer puede verse con el comando dmesg como se ha visto anteriormente. Rotaci\u00f3n de ficheros de log \u00b6 Los ficheros de log deben sanearse, porque crecen desmedidamente. Interesa guardarlos en ficheros comprimidos cada cierto tiempo y crear uno nuevo. Cuando un paquete individual (como httpd, bacula, vsftpd, yum, etc.) se instala, \u00e9ste a\u00f1ade en el directorio /etc/logrotate.d/ su fichero de configuraci\u00f3n logrotate encargado de la gesti\u00f3n de los logs. Para aquellos logs que no tengan este directorio , se puede usar la utilidad logrotate incluyendola en el cron. Nota cron es un administrador regular de procesos en segundo plano (demonio) que ejecuta procesos o guiones a intervalos regulares (por ejemplo, cada minuto, d\u00eda, semana o mes). Los procesos que deben ejecutarse y la hora a la que deben hacerlo se especifican en el archivo crontab. El nombre cron proviene del griego chronos (\u03c7\u03c1\u03cc\u03bd\u03bf\u03c2) que significa \"tiempo\". La utilidad logrotate tiene un fichero de configuraci\u00f3n, por ejemplo: # see \u201cman logrotate\u201d for details # rotate log files weekly weekly # keep 4 weeks worth of backlogs rotate 4 # send errors to root errors root # create new (empty) log files after rotating old ones create # uncomment this if you want your log files compressed #compress # RPM packages drop log rotation information into this directory include /etc/logrotate.d # no packages own wtmp or btmp -- we\u2019ll rotate them here /var/log/wtmp { monthly create 0664 root utmp rotate 1 } /var/log/btmp { missingok monthly create 0664 root utmp rotate 1 } # system-specific logs may be configured here Nota Este fichero rige los rotados de logs, en este caso se haran cada semana ( weekly ), guardaran los logs antiguos 4 semanas y crear\u00e1 unos nuevos cada vez que lo rote. Adem\u00e1s existe la posibilidad de especificar el comportamiento espec\u00edfico de algunos ficheros determinados en este caso btmp y wtmp. Herramientas y comandos Informaci\u00f3n Windows \u00b6 Comandos \u00b6 msinfo32 \u00b6 El comando msinfo32 se utiliza para ver informaci\u00f3n acerca de un equipo que est\u00e9 administrando. Con este comando puede: Utilizar Informaci\u00f3n del sistema desde un archivo por lotes. Abrir Informaci\u00f3n del sistema y que muestre s\u00f3lo las categor\u00edas especificadas. Guardar un archivo de informaci\u00f3n del sistema sin abrir la herramienta Informaci\u00f3n del sistema. Iniciar Informaci\u00f3n del sistema de un equipo remoto. (Debe tener los permisos adecuados.) Crear un acceso directo que abra Informaci\u00f3n del sistema en una configuraci\u00f3n utilizada habitualmente. Esta utilidad se puede utilizar de forma gr\u00e1fica o bien en modo texto. Tambi\u00e9n se puede emplear como comando y generar un informe que puede ser de tipo texto (report) o bien un fichero que luego se puede abrir desde la aplicaci\u00f3n msinfo32 (nfo). Tambi\u00e9n pueden generarse informes que s\u00f3lo incluyan las caracter\u00edsticas que queramos. Prueba de `msinfo32` Documentaci\u00f3n Oficial Se puede encontrar m\u00e1s informaci\u00f3n de esta comando en la documentaci\u00f3n oficial en este enlace: documentaci\u00f3n oficial msinfo32 Sintaxis msinfo32 [/pch] [/nfo ] [/report ] [/computer ] [/showcategories] [/category ] [/categories {+(+)|+all(-)}] Documentaci\u00f3n Sintaxis Enlace Sintaxis msinfo32 Comandos PowerShell \u00b6 CimCmdlets \u00b6 Los cmdlets del m\u00f3dulo CimCmdlets son los m\u00e1s importantes para tareas de administraci\u00f3n generales del sistema. Todas las opciones de configuraci\u00f3n cr\u00edticas del subsistema se exponen a trav\u00e9s de WMI. Donde el cmdlet m\u00e1s utilizado es: Get-CimInstance Ejemplos Enumerar la configuraci\u00f3n del escritorio Get-CimInstance -ClassName Win32_Desktop 2. Enumerar informaci\u00f3n del BIOS Get-CimInstance -ClassName Win32_BIOS Enumerar informaci\u00f3n del procesador Get-CimInstance -ClassName Win32_Processor | Select-Object -ExcludeProperty \"CIM*\" Enumerar el modelo y el fabricante del equipo Get-CimInstance -ClassName Win32_ComputerSystem Documentaci\u00f3n Ejemplos Enlace Ejemplos Get-CimInstance Recopilaci\u00f3n de informaci\u00f3n. \u00b6 Comando Acci\u00f3n Get-ComputerInfo obtener informaci\u00f3n diversa sobre los objetos de la cuenta de la m\u00e1quina Get-EventLog Obtiene los eventos del visor de eventos de Windows Get-AppXPackage Resuelve inconvenientes con las aplicaciones integradas Get-Process Informaci\u00f3n sobre los procesos en el sistema Get-LocalUser Obtiene informaci\u00f3n de las cuentas de usuarios locales Get-MpComputerStatus permite mostrar el estado actual de Windows Defender Herramientas \u00b6 Sysinternals \u00b6 El sitio web de Sysinternals lo crearon en 1996 Mark Russinovich y Bryce Cogswell para alojar sus utilidades de sistema avanzadas, junto con informaci\u00f3n t\u00e9cnica. En julio de 2006, Microsoft adquiri\u00f3 Sysinternals . Tanto profesionales como desarrolladores de TI encontrar\u00e1n utilidades en Sysinternals para facilitar la administraci\u00f3n y el diagn\u00f3stico de sistemas y aplicaciones de Windows, as\u00ed como la soluci\u00f3n de problemas que pudieran surgir al respecto. Nota Es necesario instalar previamente. Se puede descargar esta suite de forma gratuita desde el enlace: ENLACE Incorpora herramientas como: Utilidades de disco y archivos: Utilidades para ver y supervisar el acceso a los discos y archivos, as\u00ed como el uso que se hace de ellos. ENLACE Red: Herramientas de red, desde monitores de conexi\u00f3n a analizadores de seguridad de recursos. Procesos y subprocesos: Utilidades para consultar de forma subyacente los procesos en ejecuci\u00f3n y los recursos que consumen. ENLACE Utilidades de seguridad: Utilidades de administraci\u00f3n y configuraci\u00f3n del sistema de seguridad, con programas de rootkit y de captura de spyware. ENLACE Informaci\u00f3n del sistema: Utilidades para consultar el uso y la configuraci\u00f3n de los recursos del sistema. ENLACE Varios: Una colecci\u00f3n de utilidades variadas que incluye un protector de pantalla, ayuda de presentaci\u00f3n y una herramienta de depuraci\u00f3n. Nota Estas utilidades simplemente se extraen del paquete y se ejecutan, no es necesario instalarlas. Autorun SysInternals Monitor de recursos de Windows 10 \u00b6 El monitor de recursos de Windows 10 es una de las muchas herramientas integradas del sistema operativo de Microsoft que son bastante desconocidas por los usuarios pero que, bajo determinadas circunstancias, pueden sernos de mucha utilidad. El primer paso es, obviamente, acceder a esta herramienta. Para ello, simplemente pulsa sobre el bot\u00f3n de Inicio y escribe \u00abMonitor de recursos\u00bb (no confundir con monitor de rendimiento). Acceso Monitor de Recursos Al abrir la herramienta aparece, inicialmente, una ventana que nos muestra informaci\u00f3n general sobre la CPU, el disco, la red y la memoria RAM. A la derecha tenemos unas gr\u00e1ficas que nos muestran estad\u00edsticas de utilizaci\u00f3n de estos cuatro par\u00e1metros en el \u00faltimo minuto. Pesta\u00f1as Monitor de Recursos Actividades Iniciales UD4_00 \u00b6 Comando find en GNU/Linux. Escribe cada uno de los comandos en GNU/Linux necesarios para realizar las instrucciones que se describen a continuaci\u00f3n: Encuentra en el directorio actual, todos los archivos que empiecen con la letra H. Busca en el directorio actual, todos los archivos que contengan la letra F en su nombre. Encuentra en el directorio actual, todos los archivos que empiecen por la letra h que contengan una a y que terminen con la letra s. Halla todos los archivos del sistema que contengan la extensi\u00f3n conf en su nombre y que hayan sido modificados en las \u00faltimas 24 horas. Obt\u00e9n todos los archivos del directorio home del usuario actual y que sean de su propiedad, que contengan una x en su nombre o terminen con la letra o. Localiza todos los archivos del sistema que contengan la extensi\u00f3n conf en su nombre y que pertenezcan al usuario root. Encuentra todos los archivos del sistema a los que tenga permisos de escritura y que no hayan sido modificados en las \u00faltimas 24 horas. Busca todos los archivos en la carpeta home del usuario actual que sean m\u00e1s recientes que el archivo config.txt. Lista todos los directorios de la carpeta actual que contengan en su nombre la palabra user. Encuentra todos los ficheros del sistema con extensi\u00f3n tmp que no sean del usuario root. Obt\u00e9n todos los archivos del sistema que tengan extensi\u00f3n avi o mpg, que ocupen m\u00e1s de 650 megas, que tenga permisos de lectura y que contengan la palabra guerra en su nombre. Halla todos los archivos temporales. La informaci\u00f3n de cada fichero ser\u00e1 mostrada en formato largo (-utiliza la opci\u00f3n -exec). Encuentra y elimina todos los archivos con la extensi\u00f3n tmp del sistema (utiliza la opci\u00f3n \u2013exec). Encuentra en el directorio actual y en todos los subdirectorios, todos los ficheros que contengan la palabra main en su nombre. Muestra el resultado en formato largo (utiliza la opci\u00f3n \u2013exec). Localiza y copia al directorio Textos situado en el escritorio del usuario actual (asumimos que el directorio existe) todos los ficheros que tengan extensi\u00f3n txt, docx o odt (utiliza la opci\u00f3n \u2013exec). Encuentra y copia al directorio Textos situado en el escritorio del usuario actual (asumimos que el directorio existe) archivos que no sean del usuario filipino y que no hayan sido modificados en los \u00faltimos cinco d\u00edas (utiliza la opci\u00f3n \u2013exec). NOTA Crea archivos que contengan los patrones que se piden en los apartados si es necesario, o situate en el directorio adecuado para encontrar archivos siguiendo dichos patrones. Utiliza las siguientes herramientas de Sysinternals: Probar qui\u00e9n tiene acceso a tu carpeta de trabajo. (utilizar Access enum ). Utiliza VMMap e indica qu\u00e9 est\u00e1 mostrando. Utiliza un programa de Sysinternals que te diga quien se ha \u201clogeado\u201d en en tu equipo. Haz que un compa\u00f1ero acceda a una carpeta compartida de tu equipo y vuelve a mostrarlo \u00bfaparece que su usuario est\u00e1 accediendo? Actividades de desarrollo UD4_01 \u00b6 A medida que pasa el tiempo, los archivos de log (registro de errores y eventos) aumentan su tama\u00f1o considerablemente, con lo cual es recomendable implementar su rotaci\u00f3n. Instala logrotate y configura la rotaci\u00f3n de logs de un servidor DHCP. (POWERSHELL)Realiza un inventario de tu equipo mediante llamadas CIM ( Get-CimInstance ) y convierte la informaci\u00f3n a formato JSON. NOTA JavaScript Object Notation (JSON) es un formato basado en texto est\u00e1ndar para representar datos estructurados en la sintaxis de objetos de JavaScript.","title":"4.1- Estructura de directorios"},{"location":"041_EstructuraDirectorios.html#estructura-de-directorios","text":"Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 6 sesiones (2h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Gestiona la automatizaci\u00f3n de tareas del sistema, aplicando criterios de eficiencia y utilizando comandos y herramientas gr\u00e1ficas. Se han descrito las ventajas de la automatizaci\u00f3n de las tareas repetitivas en el sistema. Se han utilizado los comandos del sistema para la planificaci\u00f3n de tareas. Se han establecido restricciones de seguridad. Se han realizado planificaciones de tareas repetitivas o puntuales relacionadas con la administraci\u00f3n del sistema. Se ha automatizado la administraci\u00f3n de cuentas. Se han instalado y configurado herramientas gr\u00e1ficas para la planificaci\u00f3n de tareas. Se han utilizado herramientas gr\u00e1ficas para la planificaci\u00f3n de tareas. Se han documentado los procesos programados como tareas autom\u00e1ticas.","title":"Estructura de directorios"},{"location":"041_EstructuraDirectorios.html#introduccion","text":"Todos los sistemas operativos se caracterizan por tener una estructura jer\u00e1rquica de almacenamiento de la informaci\u00f3n . Esta informaci\u00f3n se ubica en las unidades de almacenamiento de forma arborescente . Esta estructura comienza en la propia unidad de almacenamiento en la que se van a almacenar los datos. El sistema operativo es capaz de gestionar varias unidades de almacenamiento. Para realizar la comunicaci\u00f3n entre las unidades f\u00edsicas y el usuario se utiliza una relaci\u00f3n que permite al usuario reconocer las unidades f\u00edsicas gracias a las unidades l\u00f3gicas. Las unidades l\u00f3gicas son la representaci\u00f3n que el sistema operativo hace de cada unidad f\u00edsica.","title":"Introducci\u00f3n"},{"location":"041_EstructuraDirectorios.html#terminologia","text":"Fichero o Archivo -> Mecanismo de abstracci\u00f3n que sirve como unidad l\u00f3gica de informaci\u00f3n Sistema de archivos -> Permite organizaci\u00f3n l\u00f3gica y f\u00edsica de los archivos Particionado de dispositivos -> Permite ubicar el sistema de archivos en un dispositivo","title":"Terminolog\u00eda"},{"location":"041_EstructuraDirectorios.html#objetivos","text":"Gesti\u00f3n de ficheros -> Crear, copiar, eliminar\u2026 en definitiva manejar datos Optimizar el rendimiento -> Orden l\u00f3gico de los archivos para aumentar la velocidad de acceso Seguridad en los datos -> Soluciones ante p\u00e9rdidas, Ficheros seguros a errores f\u00edsicos Acceso controlado a la informaci\u00f3n -> Ficheros seguros a errores l\u00f3gicos y humanos","title":"Objetivos"},{"location":"041_EstructuraDirectorios.html#estructura-linux","text":"","title":"Estructura Linux"},{"location":"041_EstructuraDirectorios.html#breve-historia","text":"La estructura de los directorios en GNU/Linux, as\u00ed como su contenido y funciones, viene definida en el denominado Filesystem Hierarchy Standard o FHS por sus siglas en ingl\u00e9s, que en otras palabras viene a ser el est\u00e1ndar de jerarqu\u00eda para los sistemas de archivos en sistemas GNU/Linux y otros derivados de UNIX . El FHS naci\u00f3 en 1994 y es actualmente mantenida por la Linux Foundation. Aun siendo un est\u00e1ndar, hay casos de distribuciones GNU/Linux que se saltan estas \u201cnormas\u201d, aunque en la mayor\u00eda de los casos son aceptadas.","title":"Breve Historia"},{"location":"041_EstructuraDirectorios.html#organizacion-del-sistema-de-ficheros","text":"Listado de las directorios m\u00e1s importantes y sus funciones","title":"Organizaci\u00f3n del Sistema de Ficheros"},{"location":"041_EstructuraDirectorios.html#archivos-y-directorios-en-gnulinux","text":"En los sistemas operativos basados en UNIX, todo es un archivo. Estos archivos poseen dos partes diferenciadas: nombre y extensi\u00f3n. De las dos partes, tan s\u00f3lo el nombre es obligatorio, por lo tanto, las extensiones son opcionales . Por otra parte, GNU/Linux es sensible a may\u00fasculas y min\u00fasculas , lo que quiere decir que CEO.txt no es lo mismo que ceo.txt. Esto tambi\u00e9n es aplicable a carpetas. Consejo Para prevenir errores es aconsejable usar min\u00fasculas para nombrar ficheros y directorios. Tambi\u00e9n hay que tener en cuenta el uso problem\u00e1tico de algunos caracteres especiales que tambi\u00e9n deberemos evitar su uso, como por ejemplo las letras especiales (e\u00f1e y c trencada), ni las tildes, ni los caracteres especiales c\u00f3mo ! , @ , # , $ , % , ^ , & , * , : y `.","title":"Archivos y directorios en GNU/Linux"},{"location":"041_EstructuraDirectorios.html#estructura-windows","text":"A groso modo en las distintas versiones de Windows se puede encontrar, aunque pueden existir excepciones en las mismas: Carpeta de Windows ---> C:\\Windows Carpeta del sistema ---> C:\\Windows\\System32 Archivos de programa ---> C:\\Program Files Archivos de programa, datos comunes ---> C:\\Program Files\\Common Files Datos de programas compartidos ---> C:\\ProgramData Fuentes ---> C:\\Windows\\Fonts Herramientas administrativas compartidas ---> C:\\ProgramData\\Microsoft\\Windows\\StartMenu\\Programs\\Administrative Tools Programas en el men\u00fa de Inicio ---> C:\\ProgramData\\Microsoft\\Windows\\Start Menu Programas que arrancan con el inicio de Windows ---> C:\\ProgramData\\Microsoft\\Windows\\StartMenu\\Programs\\Startup Carpetas compartidas (Publicas) ---> C:\\Users\\Public Cache de b\u00fasquedas hechas en Windows ---> C:\\ProgramData\\Microsoft\\Search\\Data\\Applications\\Windows","title":"Estructura Windows"},{"location":"041_EstructuraDirectorios.html#carpetas-de-usuario","text":"Las carpetas de los usuarios se encuentran en \" Users \" o \" Usuarios \" en el disco Ra\u00edz donde est\u00e1 instalado el sistema operativo contiene algunas como: Escritorio Mi m\u00fasica Mis documentos Mis im\u00e1genes Contactos Favoritos Archivos temporales Archivos temporales de internet Cookies Datos de programa","title":"Carpetas de usuario"},{"location":"041_EstructuraDirectorios.html#busqueda-de-informacion-del-sistema-ordenes-herramientas-graficas","text":"","title":"B\u00fasqueda de informaci\u00f3n del sistema. \u00d3rdenes. Herramientas gr\u00e1ficas."},{"location":"041_EstructuraDirectorios.html#herramientas-y-comandos-informacion-linux","text":"","title":"Herramientas y comandos Informaci\u00f3n Linux"},{"location":"041_EstructuraDirectorios.html#herramientas-y-comandos-informacion-windows","text":"","title":"Herramientas y comandos Informaci\u00f3n Windows"},{"location":"041_EstructuraDirectorios.html#actividades-iniciales-ud4_00","text":"Comando find en GNU/Linux. Escribe cada uno de los comandos en GNU/Linux necesarios para realizar las instrucciones que se describen a continuaci\u00f3n: Encuentra en el directorio actual, todos los archivos que empiecen con la letra H. Busca en el directorio actual, todos los archivos que contengan la letra F en su nombre. Encuentra en el directorio actual, todos los archivos que empiecen por la letra h que contengan una a y que terminen con la letra s. Halla todos los archivos del sistema que contengan la extensi\u00f3n conf en su nombre y que hayan sido modificados en las \u00faltimas 24 horas. Obt\u00e9n todos los archivos del directorio home del usuario actual y que sean de su propiedad, que contengan una x en su nombre o terminen con la letra o. Localiza todos los archivos del sistema que contengan la extensi\u00f3n conf en su nombre y que pertenezcan al usuario root. Encuentra todos los archivos del sistema a los que tenga permisos de escritura y que no hayan sido modificados en las \u00faltimas 24 horas. Busca todos los archivos en la carpeta home del usuario actual que sean m\u00e1s recientes que el archivo config.txt. Lista todos los directorios de la carpeta actual que contengan en su nombre la palabra user. Encuentra todos los ficheros del sistema con extensi\u00f3n tmp que no sean del usuario root. Obt\u00e9n todos los archivos del sistema que tengan extensi\u00f3n avi o mpg, que ocupen m\u00e1s de 650 megas, que tenga permisos de lectura y que contengan la palabra guerra en su nombre. Halla todos los archivos temporales. La informaci\u00f3n de cada fichero ser\u00e1 mostrada en formato largo (-utiliza la opci\u00f3n -exec). Encuentra y elimina todos los archivos con la extensi\u00f3n tmp del sistema (utiliza la opci\u00f3n \u2013exec). Encuentra en el directorio actual y en todos los subdirectorios, todos los ficheros que contengan la palabra main en su nombre. Muestra el resultado en formato largo (utiliza la opci\u00f3n \u2013exec). Localiza y copia al directorio Textos situado en el escritorio del usuario actual (asumimos que el directorio existe) todos los ficheros que tengan extensi\u00f3n txt, docx o odt (utiliza la opci\u00f3n \u2013exec). Encuentra y copia al directorio Textos situado en el escritorio del usuario actual (asumimos que el directorio existe) archivos que no sean del usuario filipino y que no hayan sido modificados en los \u00faltimos cinco d\u00edas (utiliza la opci\u00f3n \u2013exec). NOTA Crea archivos que contengan los patrones que se piden en los apartados si es necesario, o situate en el directorio adecuado para encontrar archivos siguiendo dichos patrones. Utiliza las siguientes herramientas de Sysinternals: Probar qui\u00e9n tiene acceso a tu carpeta de trabajo. (utilizar Access enum ). Utiliza VMMap e indica qu\u00e9 est\u00e1 mostrando. Utiliza un programa de Sysinternals que te diga quien se ha \u201clogeado\u201d en en tu equipo. Haz que un compa\u00f1ero acceda a una carpeta compartida de tu equipo y vuelve a mostrarlo \u00bfaparece que su usuario est\u00e1 accediendo?","title":"Actividades Iniciales UD4_00"},{"location":"041_EstructuraDirectorios.html#actividades-de-desarrollo-ud4_01","text":"A medida que pasa el tiempo, los archivos de log (registro de errores y eventos) aumentan su tama\u00f1o considerablemente, con lo cual es recomendable implementar su rotaci\u00f3n. Instala logrotate y configura la rotaci\u00f3n de logs de un servidor DHCP. (POWERSHELL)Realiza un inventario de tu equipo mediante llamadas CIM ( Get-CimInstance ) y convierte la informaci\u00f3n a formato JSON. NOTA JavaScript Object Notation (JSON) es un formato basado en texto est\u00e1ndar para representar datos estructurados en la sintaxis de objetos de JavaScript.","title":"Actividades de desarrollo UD4_01"},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html","text":"Sistema de archivos virtual. \u00b6 VFS \u00b6 Un sistema de archivos virtual (VFS) o conmutador de sistema de archivos virtual es una capa de abstracci\u00f3n encima del sistemas de archivos. El prop\u00f3sito de un VFS es permitir que las aplicaciones cliente tengan acceso a diversos tipos de sistemas de archivos espec\u00edficos ( FAT , ext3 , NTFS , etc.) de una manera uniforme. Puede ser utilizada para transparentar las diferencias en los sistemas de archivos de Windows , Mac OS , Unix , etc. de modo que las aplicaciones pudieran tener acceso a archivos en los sistemas de archivos locales de esos tipos sin tener que saber a qu\u00e9 tipo de sistema de archivos est\u00e1n teniendo acceso. Un VFS especifica una interfaz (o un contrato) entre el n\u00facleo y un sistema de archivos en concreto. Por lo tanto, es f\u00e1cil agregar nuevos sistemas de archivos al n\u00facleo. Esquema VFS Tipos de archivos soportados \u00b6 Los sistemas de archivos soportados por VFS pueden agruparse en tres clases principales: Sistema de archivos basados en disco : consiste en el manejo del espacio de disco u otro dispositivo que emula a un disco como un dispositivo de memoria flash. Alguno de estos sistemas de archivos son: Sistemas de archivos nativos de Linux como: ext2, ext3 y ReiserFS Sistemas de archivos derivados de Unix como: System V FS, Xenix, BSD FS, Solaris FS, Minix FS Sistema de archivos de Microsoft como: MS-DOS, VFAT, NTFS Sistemas de archivos de CD-ROM como: ISO9660, sistema de archivos UDF (Universal Disk Format para DVD) Sistemas dearchivos propietarios de IBM, Apple, etc. Sistemas de archivos de red: permiten el acceso a archivos almacenados en servidores de red y tambi\u00e9n sistemas de archivos distribuidos como: NFS, Coda, AFS (Andrew filesystem), CIFS (Common Internet File System, usados en Microsoft Windows), y NCP (Novell NetWare Core Protocol). Sistemas de archivos especiales: no manejan espacio de almacenamiento en disco en forma local ni en forma remota. Tal es el caso de sistemas emulados en memoria como el bien conocido /proc de Unix|Linux. Funcionamiento \u00b6 Para conseguir su objetivo VFS maneja las llamadas al sistema operativo que realiza un proceso, usando la sem\u00e1ntica Unix est\u00e1ndar. Cuando un proceso de usuario hace una llamada al sistema de ficheros, esta es atendida por el VFS, y posteriormente este dirige la llamada al sistema de ficheros particular de que se trate. La filosof\u00eda de funcionamiento es: Se produce una llamada al sistema que implica un acceso a un sistema de ficheros. El VFS determina a qu\u00e9 sistema de ficheros pertenece. Se comprueba si existe ya una entrada en el cach\u00e9 y si dicha entrada es v\u00e1lida En el caso de que se requiera, se accede a la funci\u00f3n del filesystem espec\u00edfico que realiza dicha funci\u00f3n a trav\u00e9s de las estructuras del VFS. La funci\u00f3n puede, o bien completar la llamada, o bien requerir una operaci\u00f3n de E/S sobre un dispositivo, que en su caso puede provocar el paso a modo \u201csleep\u201d del proceso que invoc\u00f3 la operaci\u00f3n sobre el filesystem, hasta que la operaci\u00f3n se complete. DFS \u00b6 Espacios de nombres DFS es un servicio de rol en Windows Server que permite agrupar carpetas compartidas ubicadas en servidores diferentes en uno o varios espacios de nombres estructurados l\u00f3gicamente. Esto permite proporcionar a los usuarios una vista virtual de carpetas compartidas, donde una \u00fanica ruta de acceso conduce a archivos ubicados en varios servidores, como se muestra en la ilustraci\u00f3n siguiente: Esquema DFS Componentes del DFS \u00b6 Esta es una descripci\u00f3n de los elementos que forma un espacio de nombres DFS: Servidor de espacios de nombres : un servidor de espacios de nombres hospeda un espacio de nombres. El servidor de espacio de nombres puede ser un servidor miembro o un controlador de dominio. Ra\u00edz del espacio de nombres: la ra\u00edz del espacio de nombres es el punto inicial del espacio de nombres. En la figura anterior, el nombre de la ra\u00edz es Public y la ruta de acceso del espacio de nombres es \\\\Contoso\\Public . Este tipo de espacio de nombres se conoce como espacio de nombres basado en dominio, ya que comienza con un nombre de dominio (por ejemplo, Contoso) y sus metadatos se almacenan en Active Directory Domain Services (AD DS) . Aunque en la figura anterior se muestra un solo servidor de espacio de nombres, un espacio de nombres basado en dominio puede hospedarse en varios servidores de espacio de nombres para aumentar su disponibilidad. Carpeta: las carpetas sin destinos de carpeta agregan estructura y jerarqu\u00eda al espacio de nombres, y las carpetas con destinos de carpeta proporcionan a los usuarios contenido real. Cuando los usuarios examinan una carpeta con destinos de carpeta en el espacio de nombres, el equipo cliente recibe una referencia que lo redirige de forma transparente a uno de los destinos de carpeta. Destinos de carpeta: un destino de carpeta es la ruta de acceso UNC de una carpeta compartida u otro espacio de nombres asociado a una carpeta de un espacio de nombres. El destino de carpeta en donde se almacenan los datos y el contenido. En la figura anterior, la carpeta llamada Tools tiene dos destinos de carpeta, uno en London y otro en New York, y la carpeta llamada Training Guides tiene un \u00fanico destino de carpeta en New York. Los usuarios que examinan \\\\Contoso\\Public\\Software\\Tools son redirigidos de forma transparente a la carpeta compartida \\\\LDN-SVR-01\\Tools o \\\\NYC-SVR-01\\Tools , dependiendo del sitio donde se encuentren. Cmdlets de gesti\u00f3n \u00b6 Comando Acci\u00f3n GGet-DfsnAccess Obtiene permisos para una carpeta de espacio de nombres DFS. Get-DfsnFolder Obtiene la configuraci\u00f3n de una carpeta de espacio de nombres DFS. Get-DfsnFolderTarget Obtiene la configuraci\u00f3n de los destinos de una carpeta de espacio de nombres DFS. Grant-DfsnAccess Otorga permisos a usuarios y grupos para acceder a una carpeta de espacio de nombres DFS. Move-DfsnFolder Mueve o cambia el nombre de una carpeta de espacio de nombres DFS. New-DfsnFolder Crea una carpeta en un espacio de nombres DFS. New-DfsnFolderTarget Agrega un destino a una carpeta de espacio de nombres DFS. Documentaci\u00f3n Ejemplos Despliegue DFS Despliege DFS \u00b6 Documentaci\u00f3n Ejemplos Enlace Ejemplos Cmdlets DFS Software instalado. \u00d3rdenes. Herramientas gr\u00e1ficas. \u00b6 Linux \u00b6 En las distribuciones Ubuntu podemos ver las aplicaciones instaladas utilizando dpkg. dpkg --get-selections Esquema DFS Windows \u00b6 Para ver el software instalado se puede utilizar el entorno gr\u00e1fico o bien el entorno de texto. Desde Windows , panel de control , programas\u2026 Esquema DFS Tambi\u00e9n directamente buscando \u00abAplicaciones y caracter\u00edsticas\u00bb. Esquema DFS Herramientas gr\u00e1ficas Rendimiento. Estad\u00edsticas \u00b6 Linux. Monitor del Sistema \u00b6 Funciones: Mostrar el consumo de memoria y CPU de los procesos por n\u00facleo. Muestra el espacio en disco disponible y utilizado. Controlar y monitorear procesos. Podremos eliminar un proceso no deseado. Tambi\u00e9n nos proporcionar\u00e1 una visualizaci\u00f3n del uso de la red. Ejemplo Monitor del sistema Ubuntu 20.04 Windows. Monitor de Rendimiento \u00b6 Para acceder a esta aplicaci\u00f3n, tan solo deb\u00e9is pulsar sobre inicio y escribir \u00abmonitor de rendimiento\u00bb. Una vez que se abra la aplicaci\u00f3n, debemos desplegar \u00abherramientas de supervisi\u00f3n\u00bb y hacer clic sobre \u00abMonitor de rendimiento\u00bb en el lado izquierdo. Esta es la parte que nos interesa. Ejemplo Monitor del sistema Ubuntu 20.04","title":"4.2- VFS, Sw Instalado y Gesti\u00f3n Rendimiento"},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#sistema-de-archivos-virtual","text":"","title":"Sistema de archivos virtual."},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#vfs","text":"Un sistema de archivos virtual (VFS) o conmutador de sistema de archivos virtual es una capa de abstracci\u00f3n encima del sistemas de archivos. El prop\u00f3sito de un VFS es permitir que las aplicaciones cliente tengan acceso a diversos tipos de sistemas de archivos espec\u00edficos ( FAT , ext3 , NTFS , etc.) de una manera uniforme. Puede ser utilizada para transparentar las diferencias en los sistemas de archivos de Windows , Mac OS , Unix , etc. de modo que las aplicaciones pudieran tener acceso a archivos en los sistemas de archivos locales de esos tipos sin tener que saber a qu\u00e9 tipo de sistema de archivos est\u00e1n teniendo acceso. Un VFS especifica una interfaz (o un contrato) entre el n\u00facleo y un sistema de archivos en concreto. Por lo tanto, es f\u00e1cil agregar nuevos sistemas de archivos al n\u00facleo. Esquema VFS","title":"VFS"},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#tipos-de-archivos-soportados","text":"Los sistemas de archivos soportados por VFS pueden agruparse en tres clases principales: Sistema de archivos basados en disco : consiste en el manejo del espacio de disco u otro dispositivo que emula a un disco como un dispositivo de memoria flash. Alguno de estos sistemas de archivos son: Sistemas de archivos nativos de Linux como: ext2, ext3 y ReiserFS Sistemas de archivos derivados de Unix como: System V FS, Xenix, BSD FS, Solaris FS, Minix FS Sistema de archivos de Microsoft como: MS-DOS, VFAT, NTFS Sistemas de archivos de CD-ROM como: ISO9660, sistema de archivos UDF (Universal Disk Format para DVD) Sistemas dearchivos propietarios de IBM, Apple, etc. Sistemas de archivos de red: permiten el acceso a archivos almacenados en servidores de red y tambi\u00e9n sistemas de archivos distribuidos como: NFS, Coda, AFS (Andrew filesystem), CIFS (Common Internet File System, usados en Microsoft Windows), y NCP (Novell NetWare Core Protocol). Sistemas de archivos especiales: no manejan espacio de almacenamiento en disco en forma local ni en forma remota. Tal es el caso de sistemas emulados en memoria como el bien conocido /proc de Unix|Linux.","title":"Tipos de archivos soportados"},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#funcionamiento","text":"Para conseguir su objetivo VFS maneja las llamadas al sistema operativo que realiza un proceso, usando la sem\u00e1ntica Unix est\u00e1ndar. Cuando un proceso de usuario hace una llamada al sistema de ficheros, esta es atendida por el VFS, y posteriormente este dirige la llamada al sistema de ficheros particular de que se trate. La filosof\u00eda de funcionamiento es: Se produce una llamada al sistema que implica un acceso a un sistema de ficheros. El VFS determina a qu\u00e9 sistema de ficheros pertenece. Se comprueba si existe ya una entrada en el cach\u00e9 y si dicha entrada es v\u00e1lida En el caso de que se requiera, se accede a la funci\u00f3n del filesystem espec\u00edfico que realiza dicha funci\u00f3n a trav\u00e9s de las estructuras del VFS. La funci\u00f3n puede, o bien completar la llamada, o bien requerir una operaci\u00f3n de E/S sobre un dispositivo, que en su caso puede provocar el paso a modo \u201csleep\u201d del proceso que invoc\u00f3 la operaci\u00f3n sobre el filesystem, hasta que la operaci\u00f3n se complete.","title":"Funcionamiento"},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#dfs","text":"Espacios de nombres DFS es un servicio de rol en Windows Server que permite agrupar carpetas compartidas ubicadas en servidores diferentes en uno o varios espacios de nombres estructurados l\u00f3gicamente. Esto permite proporcionar a los usuarios una vista virtual de carpetas compartidas, donde una \u00fanica ruta de acceso conduce a archivos ubicados en varios servidores, como se muestra en la ilustraci\u00f3n siguiente: Esquema DFS","title":"DFS"},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#componentes-del-dfs","text":"Esta es una descripci\u00f3n de los elementos que forma un espacio de nombres DFS: Servidor de espacios de nombres : un servidor de espacios de nombres hospeda un espacio de nombres. El servidor de espacio de nombres puede ser un servidor miembro o un controlador de dominio. Ra\u00edz del espacio de nombres: la ra\u00edz del espacio de nombres es el punto inicial del espacio de nombres. En la figura anterior, el nombre de la ra\u00edz es Public y la ruta de acceso del espacio de nombres es \\\\Contoso\\Public . Este tipo de espacio de nombres se conoce como espacio de nombres basado en dominio, ya que comienza con un nombre de dominio (por ejemplo, Contoso) y sus metadatos se almacenan en Active Directory Domain Services (AD DS) . Aunque en la figura anterior se muestra un solo servidor de espacio de nombres, un espacio de nombres basado en dominio puede hospedarse en varios servidores de espacio de nombres para aumentar su disponibilidad. Carpeta: las carpetas sin destinos de carpeta agregan estructura y jerarqu\u00eda al espacio de nombres, y las carpetas con destinos de carpeta proporcionan a los usuarios contenido real. Cuando los usuarios examinan una carpeta con destinos de carpeta en el espacio de nombres, el equipo cliente recibe una referencia que lo redirige de forma transparente a uno de los destinos de carpeta. Destinos de carpeta: un destino de carpeta es la ruta de acceso UNC de una carpeta compartida u otro espacio de nombres asociado a una carpeta de un espacio de nombres. El destino de carpeta en donde se almacenan los datos y el contenido. En la figura anterior, la carpeta llamada Tools tiene dos destinos de carpeta, uno en London y otro en New York, y la carpeta llamada Training Guides tiene un \u00fanico destino de carpeta en New York. Los usuarios que examinan \\\\Contoso\\Public\\Software\\Tools son redirigidos de forma transparente a la carpeta compartida \\\\LDN-SVR-01\\Tools o \\\\NYC-SVR-01\\Tools , dependiendo del sitio donde se encuentren.","title":"Componentes del DFS"},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#cmdlets-de-gestion","text":"Comando Acci\u00f3n GGet-DfsnAccess Obtiene permisos para una carpeta de espacio de nombres DFS. Get-DfsnFolder Obtiene la configuraci\u00f3n de una carpeta de espacio de nombres DFS. Get-DfsnFolderTarget Obtiene la configuraci\u00f3n de los destinos de una carpeta de espacio de nombres DFS. Grant-DfsnAccess Otorga permisos a usuarios y grupos para acceder a una carpeta de espacio de nombres DFS. Move-DfsnFolder Mueve o cambia el nombre de una carpeta de espacio de nombres DFS. New-DfsnFolder Crea una carpeta en un espacio de nombres DFS. New-DfsnFolderTarget Agrega un destino a una carpeta de espacio de nombres DFS. Documentaci\u00f3n Ejemplos Despliegue DFS","title":"Cmdlets de gesti\u00f3n"},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#despliege-dfs","text":"Documentaci\u00f3n Ejemplos Enlace Ejemplos Cmdlets DFS","title":"Despliege DFS"},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#software-instalado-ordenes-herramientas-graficas","text":"","title":"Software instalado. \u00d3rdenes. Herramientas gr\u00e1ficas."},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#linux","text":"En las distribuciones Ubuntu podemos ver las aplicaciones instaladas utilizando dpkg. dpkg --get-selections Esquema DFS","title":"Linux"},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#windows","text":"Para ver el software instalado se puede utilizar el entorno gr\u00e1fico o bien el entorno de texto. Desde Windows , panel de control , programas\u2026 Esquema DFS Tambi\u00e9n directamente buscando \u00abAplicaciones y caracter\u00edsticas\u00bb. Esquema DFS","title":"Windows"},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#herramientas-graficas-rendimiento-estadisticas","text":"","title":"Herramientas gr\u00e1ficas Rendimiento. Estad\u00edsticas"},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#linux-monitor-del-sistema","text":"Funciones: Mostrar el consumo de memoria y CPU de los procesos por n\u00facleo. Muestra el espacio en disco disponible y utilizado. Controlar y monitorear procesos. Podremos eliminar un proceso no deseado. Tambi\u00e9n nos proporcionar\u00e1 una visualizaci\u00f3n del uso de la red. Ejemplo Monitor del sistema Ubuntu 20.04","title":"Linux. Monitor del Sistema"},{"location":"042_ArchivosVirtualSWinstaladoRendimiento.html#windows-monitor-de-rendimiento","text":"Para acceder a esta aplicaci\u00f3n, tan solo deb\u00e9is pulsar sobre inicio y escribir \u00abmonitor de rendimiento\u00bb. Una vez que se abra la aplicaci\u00f3n, debemos desplegar \u00abherramientas de supervisi\u00f3n\u00bb y hacer clic sobre \u00abMonitor de rendimiento\u00bb en el lado izquierdo. Esta es la parte que nos interesa. Ejemplo Monitor del sistema Ubuntu 20.04","title":"Windows. Monitor de Rendimiento"},{"location":"043_Planificacio%CC%81nTareas.html","text":"Planificaci\u00f3n de tareas \u00b6 En un sistema operativo existen ciertas tareas que se realizan de forma peri\u00f3dica y que ser\u00e1 conveniente que se resuelvan de forma autom\u00e1tica para liberar al administrador de sistemas de esas tareas. Para realizar dichas tareas se dispone de herramientas capaces de programarlas y dejar al sistema operativo la ejecuci\u00f3n de ellas. A continuaci\u00f3n se destacan las principales en sistemas de propetario y libre. Windows \u00b6 En Microsoft Windows Server 2019 se dispone de la herramienta Programador de tareas , cuyo nombre es autodescriptivo. Programador de tareas \u00b6 Se accede a ella a trav\u00e9s del Administrador del servidor. Administrador de servidor \u2192 Herramientas \u2192 Programador de tareas Acceso Administrador del Servidor Acceso Programador de Tareas Nota Se puede evitar el paso por el Administrador del Servidor usando la orden taskschd.msc ; Utilizando la combinaci\u00f3n de teclas Windows + R y, en la ventana que aparece, escribir la orden. Acceso `taskschd.msc` Desde el men\u00fa acciones es posible crear una tarea a trav\u00e9s de un asistente con la opci\u00f3n Crear tarea b\u00e1sica\u2026 Crear tarea en el Programador de Tareas I De este modo, conseguimos que se abra el Asistente para crear tareas b\u00e1sicas , que nos ir\u00e1 mostrando una serie de pasos en los que iremos indicando cada uno de los aspectos de la tarea programada. Por ejemplo A continuaci\u00f3n se muestran los pasos para defragmentar de forma autom\u00e1tica todos los vol\u00famenes del sistema una vez a la semana. Adem\u00e1s, para evitar que el proceso penalice el rendimiento del servidor, se ejecuta a partir de la media noche de los domingos (dando por supuesto que el sistema estar\u00e1 suficientemente descargado de tr\u00e1fico en esos momentos). En el primer paso, escribiremos un nombre y una breve descripci\u00f3n para la tarea. Crear tarea en el Programador de Tareas II En el siguiente paso, se debe indicar el desencadenador. El desencadenador es el criterio que debe cumplirse para iniciar la ejecuci\u00f3n de la tarea que estamos programando. Se pueden diferenciar dos tipos de desencadenadores: En funci\u00f3n del tiempo : El inicio de una tarea (o de varias) se programa a una hora en particular, todos los d\u00edas o en d\u00edas concretos de la semana o del mes. En funci\u00f3n de un evento : Pueden iniciar la tarea a partir de la ejecuci\u00f3n de un evento, como por ejemplo: siempre que se inicie el sistema, cuando un usuario inicie su sesi\u00f3n, cuando el sistema entre en estado de inactividad o al registrar cualquier otro evento espec\u00edfico. En este caso es en funci\u00f3n del tiempo : Crear tarea en el Programador de Tareas III Lo siguiente ser\u00e1 establecer el intervalo, Eligiendo la fecha a partir de la que se iniciar\u00e1 la ejecuci\u00f3n autom\u00e1tica de la tarea. La tarea se ejecutar\u00e1 la pr\u00f3xima vez que el d\u00eda de la semana coincida con el que se haya indicado debajo. En el ejemplo, aunque la tarea se programe para el d\u00eda 4, no se ejecutar\u00e1 hasta el d\u00eda 9, que es domingo. Adem\u00e1s, se debe elegir el intervalo \u2192 Si es 1 , la ejecuci\u00f3n ser\u00e1 semanal; si es 2 , se producir\u00e1 en semanas alternas, etc. Por \u00faltimo, fijaremos la hora a la que debe iniciarse la ejecuci\u00f3n de la tarea. El valor para la hora puede ser local (la hora oficial del pa\u00eds en el que se encuentre el servidor) o universal \u2192 UTC (Universal Time Coordinated) . Crear tarea en el Programador de Tareas IV Nota Si se elije un desencadenador diferente, las opciones que debemos establecer tambi\u00e9n cambiar\u00e1n. Sin embargo, son tan f\u00e1ciles de interpretar como las que hemos visto en este ejemplo. A continuaci\u00f3n, se debe indicar el programa que queremos ejecutar. Para conseguirlo, lo m\u00e1s sencillo es utilizar el bot\u00f3n Examinar y buscarlo en el disco duro del servidor. Tambi\u00e9n podr\u00edamos escribirlo directamente en el cuadro de texto, pero tendr\u00edamos que recordar su ubicaci\u00f3n y nombre exactos. Crear tarea en el Programador de Tareas V Nos aparecer\u00e1 la ventana t\u00edpica para abrir archivos. En ella, se puede localizar el programa que queremos ejecutar de forma programada. En este caso, lo encontramos en C:\\Windows\\System32 y el ejecutable se llama Defrag.exe . Nota Siguiendo este mecanismo se hubiera podido elegir cualquier archivo ejecutable, o cualquier proceso por lotes, que tuvi\u00e9semos almacenado en cualquier disco duro del servidor. Crear tarea en el Programador de Tareas VI De vuelta en la ventana Asistente para crear tareas b\u00e1sicas , se puede observar que ya se ha completado el cuadro de texto con la acci\u00f3n. En este caso, tambi\u00e9n se ha incluido el argumento -c para indicar que se quiere defragmentar todos los vol\u00famenes locales del servidor. Nota En el caso que la acci\u00f3n ingresada necesite interactuar con los datos de alguna carpeta (por ejemplo, copiar archivos de una ubicaci\u00f3n a otra, en el cuadro Iniciar en (opcional) : se indicar\u00eda la carpeta predeterminada sobre la que actuar\u00e1 dicha acci\u00f3n. Crear tarea en el Programador de Tareas VII En este paso se llega al final del Asistente para crear tareas b\u00e1sicas , por lo que el sistema nos ofrece un resumen de los valores que hemos introducido en los puntos anteriores. Si observamos alg\u00fan error, podremos subsanarlo haciendo clic sobre el bot\u00f3n Atr\u00e1s, hasta llegar al aspecto que necesitemos cambiar. Crear tarea en el Programador de Tareas VIII Nota Si dejamos sin marcar la casilla Abrir el di\u00e1logo Propiedades para esta tarea al hacer clic en Finalizar, se cerrar\u00e1 el asistente y volveremos a la ventana principal del Programador de tareas . Si, por el contrario, se marca la casilla, al finalizar el asistente, se abre de forma autom\u00e1tica la ventana Propiedades de la tarea programada . Tambi\u00e9n se puede volver a esta ventana en cualquier momento, y Reabrir la ventana Propiedades de una tarea programada . En la ventana Propiedades se dispone de diferentes opciones, que permiten configurar cada aspecto de la tarea programada. Crear tarea en el Programador de Tareas IX GNU/Linux \u00b6 En sistemas operativos GNU/Linux la programaci\u00f3n de tareas se realiza a trav\u00e9s del demonio cron que permite ejecutar tareas de forma autom\u00e1tica. cron \u00b6 Cada minuto cron comprueba el listado de tareas y si debe o no ejecutar un programa de su listado. A diferencia de Microsoft Windows Server 2019, cron solo lanza tareas seg\u00fan una programaci\u00f3n. \u00c9stas deben ser descritas con comandos o contenidas en shellscripts. Existen al menos dos formas distintas de usar cron . La primera es a trav\u00e9s de los directorios, /etc/cron.hourly /etc/cron.daily /etc/cron.weekly /etc/cron.monthly A tener en cuenta En este caso para hacerlo funcionar se coloca un archivo tipo shellscript se ejecutar\u00e1 cada hora, cada d\u00eda, cada semana o cada mes, dependiendo del directorio en donde se sit\u00fae. La segunda manera de programar tareas con cron es a trav\u00e9s de manipular directamente el archivo /etc/crontab . Por defecto, este archivo tendr\u00e1 este contenido: SHELL=/bin/bash PATH=/sbin:/bin:/usr/sbin:/usr/bin # run-parts 01 * * * * root run-parts /etc/cron.hourly 02 4 * * * root run-parts /etc/cron.daily 22 4 * * 0 root run-parts /etc/cron.weekly 42 4 1 * * root run-parts /etc/cron.monthly En donde: SHELL es el shell bajo el cual se ejecuta. Si no se especifica, se tomar\u00e1 por defecto el indicado en la l\u00ednea /etc/passwd correspondiente al usuario que est\u00e9 ejecutando cron . PATH contiene la ruta a los directorios en los cuales buscar\u00e1 el comando a ejecutar. \u00c9ste es distinto al PATH global del sistema o del usuario. Despu\u00e9s de estas dos variables, se establecen las tareas que se van a ejecutar, cuando y quien las va a realizar. Caracter\u00edsticas: No hay l\u00edmites en cuanto al n\u00famero de tareas programadas, Es necesario realizar una por l\u00ednea. Las siete columnas de los que cada tarea est\u00e1 compuesto son: Campo Descripci\u00f3n Minuto Establece el minuto de la hora en que la tarea ser\u00e1 ejecutada, este valor debe oscilar entre 0 y 59. Hora Controla la hora en la que la tarea ser\u00e1 ejecutada, se especifica en un formato de 24 horas, los valores deben estar entre 0 y 23, 0 es medianoche. D\u00eda del Mes D\u00eda del mes en que se va a ejecutar la tarea. Por ejemplo se indicar\u00eda 20, para ejecutar el comando el d\u00eda 20 del mes. Mes Mes en que el comando se ejecutar\u00e1, puede ser indicado num\u00e9ricamente (1-12), o por el nombre del mes en ingl\u00e9s, solo las tres primeras letras. D\u00eda semana D\u00eda en la semana en que se ejecutar\u00e1 el comando, puede ser num\u00e9rico (0-7) o por el nombre del d\u00eda en ingl\u00e9s, solo las tres primeras letras. Los valores 0 y 7 hacen referencia al mismo d\u00eda de la semana, el domingo. Usuario Usuario que ejecuta el comando. Comando Comando, script o programa que se ejecuta. Este campo puede contener m\u00faltiples palabras y espacios. El uso de las cinco primeras columnas puede ser un tanto lioso al principio. Para aclarar conceptos se usar\u00e1n algunos ejemplos : Comando Acci\u00f3n 1 * * * * Se ejecuta al minuto 1 de cada hora de todos los d\u00edas. 15 8 * * * A las 8:15 de cada d\u00eda. 0 17 * * 0 A las 17:00 todos los domingos. * 5 * * Sun Cada minuto de 5:00 a 5:59 todos los domingos. 45 19 1 * * A las 19:45 del primer d\u00eda de cada mes. 1 * 20 7 * Al minuto 1 de cada hora del 20 de julio. 10 1 * 12 1 A las 1:10 todos los lunes de diciembre. 0 12 16 * Wen Al mediod\u00eda de los d\u00edas 16 de cada mes y que sea Mi\u00e9rcoles. 30 9 20 7 4 A las 9:30 del d\u00eda 20 de julio y que sean jueves. 30 9 20 7 * A las 9:30 del d\u00eda 20 de julio sin importar el d\u00eda de la semana. 20 * * * 6 Al minuto 20 de cada hora de los s\u00e1bados. 20 * * 1 6 Al minuto 20 de cada hora de los s\u00e1bados de enero. Tambi\u00e9n es posible especificar listas en los campos. Las listas pueden estar expresadas en una comalista o a trav\u00e9s de guiones. cron , de igual manera soporta incrementos en las listas, que se indican de la siguiente manera: Comando Acci\u00f3n 59 11 * 1-3 1,2,3,4,5 A las 11:59 de lunes a viernes, de enero a marzo. 45 * 10-25 * 6-7 Al minuto 45 de todas las horas de los d\u00edas 10 al 25 de todos los meses, de s\u00e1bados a domingos. 10,30,50 * * * 1,3,5 En el minuto 10, 30 y 50 de todas las horas de los d\u00edas lunes, mi\u00e9rcoles y viernes. /15 10-14 * * * Cada quince minutos de las 10:00 a las 14:00. * 12 1-10/2 2,8 * Cada minuto de la hora 12 en los d\u00edas 1,3,5,7 y 9 de febrero y agosto. (el incremento en el tercer campo es de 2 y comienza a partir de 1). 0 /5 1-10,15,20-23 * 3 Cada 5 horas de los d\u00edas 1 al 10, el d\u00eda 15 y del d\u00eda 20 al 23 de cada mes y que el d\u00eda sea mi\u00e9rcoles. 3/3 2/4 2 2 2 Cada 3 minutos empezando por el minuto 3 (3,6,9...) de las horas 2, 6, 10, 14, 18 y 22 (cada 4 horas empezando en la hora 2) del d\u00eda 2 de febrero y que sea martes. Nota Como se puede apreciar en el \u00faltimo ejemplo la tarea cron que estuviera asignada a esta l\u00ednea, s\u00f3lo se ejecutar\u00eda si cumple con los cinco criterios, es decir, siempre es un AND que s\u00f3lo resulta verdadero si todas las condiciones son ciertas. crontab (cron con m\u00faltiples usuarios) \u00b6 GNU/Linux es un sistema multiusuario y cron es de las aplicaciones que soporta el trabajo con varios usuarios a la vez. Caracter\u00edsticas: Cada usuario puede tener su propio archivo crontab , de hecho el /etc/crontab se asume que es el archivo del usuario root. Cualquier usuario puede disponer de su propio archivo de programaci\u00f3n de tareas a trav\u00e9s del comando crontab. En el directorio /var/spool/cron/crontabs , que puede variar seg\u00fan la distribuci\u00f3n, se genera un archivo de tareas para cada usuario. El uso de crontab es: crontab -e Nota Este comando abrir\u00e1 el editor de texto por defecto con un archivo vac\u00edo y donde el usuario especificar\u00e1 las tareas que desea programar, y que se guardar\u00e1 autom\u00e1ticamente como /var/spool/cron/crontabs/usuario . Hay que tener en cuenta que si existe esta nueva lista de tareas programadas ser\u00e1n dos las que ser\u00e1n comprobadas en cada minuto por el demonio cron: la del usuario reci\u00e9n creada y la del sistema vista con anterioridad. Actividades de desarrollo UD4_02 \u00b6 Tareas Programadas con Powershell Programa con cron las siguientes tareas: Una copia de la carpeta /home a una carpeta de seguridad los d\u00edas pares de cada mes, cada dos horas durante las 8:00 y las 15:00 horas. Un listado de los archivos que existen en el escritorio del usuario actual (usa el comando ls con un redireccionador) cada 5 minutos de todas las horas de los martes, jueves y viernes de los d\u00edas impares.","title":"4.3- Planificacio\u0301n de Tareas"},{"location":"043_Planificacio%CC%81nTareas.html#planificacion-de-tareas","text":"En un sistema operativo existen ciertas tareas que se realizan de forma peri\u00f3dica y que ser\u00e1 conveniente que se resuelvan de forma autom\u00e1tica para liberar al administrador de sistemas de esas tareas. Para realizar dichas tareas se dispone de herramientas capaces de programarlas y dejar al sistema operativo la ejecuci\u00f3n de ellas. A continuaci\u00f3n se destacan las principales en sistemas de propetario y libre.","title":"Planificaci\u00f3n de tareas"},{"location":"043_Planificacio%CC%81nTareas.html#windows","text":"En Microsoft Windows Server 2019 se dispone de la herramienta Programador de tareas , cuyo nombre es autodescriptivo.","title":"Windows"},{"location":"043_Planificacio%CC%81nTareas.html#programador-de-tareas","text":"Se accede a ella a trav\u00e9s del Administrador del servidor. Administrador de servidor \u2192 Herramientas \u2192 Programador de tareas Acceso Administrador del Servidor Acceso Programador de Tareas Nota Se puede evitar el paso por el Administrador del Servidor usando la orden taskschd.msc ; Utilizando la combinaci\u00f3n de teclas Windows + R y, en la ventana que aparece, escribir la orden. Acceso `taskschd.msc` Desde el men\u00fa acciones es posible crear una tarea a trav\u00e9s de un asistente con la opci\u00f3n Crear tarea b\u00e1sica\u2026 Crear tarea en el Programador de Tareas I De este modo, conseguimos que se abra el Asistente para crear tareas b\u00e1sicas , que nos ir\u00e1 mostrando una serie de pasos en los que iremos indicando cada uno de los aspectos de la tarea programada. Por ejemplo A continuaci\u00f3n se muestran los pasos para defragmentar de forma autom\u00e1tica todos los vol\u00famenes del sistema una vez a la semana. Adem\u00e1s, para evitar que el proceso penalice el rendimiento del servidor, se ejecuta a partir de la media noche de los domingos (dando por supuesto que el sistema estar\u00e1 suficientemente descargado de tr\u00e1fico en esos momentos). En el primer paso, escribiremos un nombre y una breve descripci\u00f3n para la tarea. Crear tarea en el Programador de Tareas II En el siguiente paso, se debe indicar el desencadenador. El desencadenador es el criterio que debe cumplirse para iniciar la ejecuci\u00f3n de la tarea que estamos programando. Se pueden diferenciar dos tipos de desencadenadores: En funci\u00f3n del tiempo : El inicio de una tarea (o de varias) se programa a una hora en particular, todos los d\u00edas o en d\u00edas concretos de la semana o del mes. En funci\u00f3n de un evento : Pueden iniciar la tarea a partir de la ejecuci\u00f3n de un evento, como por ejemplo: siempre que se inicie el sistema, cuando un usuario inicie su sesi\u00f3n, cuando el sistema entre en estado de inactividad o al registrar cualquier otro evento espec\u00edfico. En este caso es en funci\u00f3n del tiempo : Crear tarea en el Programador de Tareas III Lo siguiente ser\u00e1 establecer el intervalo, Eligiendo la fecha a partir de la que se iniciar\u00e1 la ejecuci\u00f3n autom\u00e1tica de la tarea. La tarea se ejecutar\u00e1 la pr\u00f3xima vez que el d\u00eda de la semana coincida con el que se haya indicado debajo. En el ejemplo, aunque la tarea se programe para el d\u00eda 4, no se ejecutar\u00e1 hasta el d\u00eda 9, que es domingo. Adem\u00e1s, se debe elegir el intervalo \u2192 Si es 1 , la ejecuci\u00f3n ser\u00e1 semanal; si es 2 , se producir\u00e1 en semanas alternas, etc. Por \u00faltimo, fijaremos la hora a la que debe iniciarse la ejecuci\u00f3n de la tarea. El valor para la hora puede ser local (la hora oficial del pa\u00eds en el que se encuentre el servidor) o universal \u2192 UTC (Universal Time Coordinated) . Crear tarea en el Programador de Tareas IV Nota Si se elije un desencadenador diferente, las opciones que debemos establecer tambi\u00e9n cambiar\u00e1n. Sin embargo, son tan f\u00e1ciles de interpretar como las que hemos visto en este ejemplo. A continuaci\u00f3n, se debe indicar el programa que queremos ejecutar. Para conseguirlo, lo m\u00e1s sencillo es utilizar el bot\u00f3n Examinar y buscarlo en el disco duro del servidor. Tambi\u00e9n podr\u00edamos escribirlo directamente en el cuadro de texto, pero tendr\u00edamos que recordar su ubicaci\u00f3n y nombre exactos. Crear tarea en el Programador de Tareas V Nos aparecer\u00e1 la ventana t\u00edpica para abrir archivos. En ella, se puede localizar el programa que queremos ejecutar de forma programada. En este caso, lo encontramos en C:\\Windows\\System32 y el ejecutable se llama Defrag.exe . Nota Siguiendo este mecanismo se hubiera podido elegir cualquier archivo ejecutable, o cualquier proceso por lotes, que tuvi\u00e9semos almacenado en cualquier disco duro del servidor. Crear tarea en el Programador de Tareas VI De vuelta en la ventana Asistente para crear tareas b\u00e1sicas , se puede observar que ya se ha completado el cuadro de texto con la acci\u00f3n. En este caso, tambi\u00e9n se ha incluido el argumento -c para indicar que se quiere defragmentar todos los vol\u00famenes locales del servidor. Nota En el caso que la acci\u00f3n ingresada necesite interactuar con los datos de alguna carpeta (por ejemplo, copiar archivos de una ubicaci\u00f3n a otra, en el cuadro Iniciar en (opcional) : se indicar\u00eda la carpeta predeterminada sobre la que actuar\u00e1 dicha acci\u00f3n. Crear tarea en el Programador de Tareas VII En este paso se llega al final del Asistente para crear tareas b\u00e1sicas , por lo que el sistema nos ofrece un resumen de los valores que hemos introducido en los puntos anteriores. Si observamos alg\u00fan error, podremos subsanarlo haciendo clic sobre el bot\u00f3n Atr\u00e1s, hasta llegar al aspecto que necesitemos cambiar. Crear tarea en el Programador de Tareas VIII Nota Si dejamos sin marcar la casilla Abrir el di\u00e1logo Propiedades para esta tarea al hacer clic en Finalizar, se cerrar\u00e1 el asistente y volveremos a la ventana principal del Programador de tareas . Si, por el contrario, se marca la casilla, al finalizar el asistente, se abre de forma autom\u00e1tica la ventana Propiedades de la tarea programada . Tambi\u00e9n se puede volver a esta ventana en cualquier momento, y Reabrir la ventana Propiedades de una tarea programada . En la ventana Propiedades se dispone de diferentes opciones, que permiten configurar cada aspecto de la tarea programada. Crear tarea en el Programador de Tareas IX","title":"Programador de tareas"},{"location":"043_Planificacio%CC%81nTareas.html#gnulinux","text":"En sistemas operativos GNU/Linux la programaci\u00f3n de tareas se realiza a trav\u00e9s del demonio cron que permite ejecutar tareas de forma autom\u00e1tica.","title":"GNU/Linux"},{"location":"043_Planificacio%CC%81nTareas.html#cron","text":"Cada minuto cron comprueba el listado de tareas y si debe o no ejecutar un programa de su listado. A diferencia de Microsoft Windows Server 2019, cron solo lanza tareas seg\u00fan una programaci\u00f3n. \u00c9stas deben ser descritas con comandos o contenidas en shellscripts. Existen al menos dos formas distintas de usar cron . La primera es a trav\u00e9s de los directorios, /etc/cron.hourly /etc/cron.daily /etc/cron.weekly /etc/cron.monthly A tener en cuenta En este caso para hacerlo funcionar se coloca un archivo tipo shellscript se ejecutar\u00e1 cada hora, cada d\u00eda, cada semana o cada mes, dependiendo del directorio en donde se sit\u00fae. La segunda manera de programar tareas con cron es a trav\u00e9s de manipular directamente el archivo /etc/crontab . Por defecto, este archivo tendr\u00e1 este contenido: SHELL=/bin/bash PATH=/sbin:/bin:/usr/sbin:/usr/bin # run-parts 01 * * * * root run-parts /etc/cron.hourly 02 4 * * * root run-parts /etc/cron.daily 22 4 * * 0 root run-parts /etc/cron.weekly 42 4 1 * * root run-parts /etc/cron.monthly En donde: SHELL es el shell bajo el cual se ejecuta. Si no se especifica, se tomar\u00e1 por defecto el indicado en la l\u00ednea /etc/passwd correspondiente al usuario que est\u00e9 ejecutando cron . PATH contiene la ruta a los directorios en los cuales buscar\u00e1 el comando a ejecutar. \u00c9ste es distinto al PATH global del sistema o del usuario. Despu\u00e9s de estas dos variables, se establecen las tareas que se van a ejecutar, cuando y quien las va a realizar. Caracter\u00edsticas: No hay l\u00edmites en cuanto al n\u00famero de tareas programadas, Es necesario realizar una por l\u00ednea. Las siete columnas de los que cada tarea est\u00e1 compuesto son: Campo Descripci\u00f3n Minuto Establece el minuto de la hora en que la tarea ser\u00e1 ejecutada, este valor debe oscilar entre 0 y 59. Hora Controla la hora en la que la tarea ser\u00e1 ejecutada, se especifica en un formato de 24 horas, los valores deben estar entre 0 y 23, 0 es medianoche. D\u00eda del Mes D\u00eda del mes en que se va a ejecutar la tarea. Por ejemplo se indicar\u00eda 20, para ejecutar el comando el d\u00eda 20 del mes. Mes Mes en que el comando se ejecutar\u00e1, puede ser indicado num\u00e9ricamente (1-12), o por el nombre del mes en ingl\u00e9s, solo las tres primeras letras. D\u00eda semana D\u00eda en la semana en que se ejecutar\u00e1 el comando, puede ser num\u00e9rico (0-7) o por el nombre del d\u00eda en ingl\u00e9s, solo las tres primeras letras. Los valores 0 y 7 hacen referencia al mismo d\u00eda de la semana, el domingo. Usuario Usuario que ejecuta el comando. Comando Comando, script o programa que se ejecuta. Este campo puede contener m\u00faltiples palabras y espacios. El uso de las cinco primeras columnas puede ser un tanto lioso al principio. Para aclarar conceptos se usar\u00e1n algunos ejemplos : Comando Acci\u00f3n 1 * * * * Se ejecuta al minuto 1 de cada hora de todos los d\u00edas. 15 8 * * * A las 8:15 de cada d\u00eda. 0 17 * * 0 A las 17:00 todos los domingos. * 5 * * Sun Cada minuto de 5:00 a 5:59 todos los domingos. 45 19 1 * * A las 19:45 del primer d\u00eda de cada mes. 1 * 20 7 * Al minuto 1 de cada hora del 20 de julio. 10 1 * 12 1 A las 1:10 todos los lunes de diciembre. 0 12 16 * Wen Al mediod\u00eda de los d\u00edas 16 de cada mes y que sea Mi\u00e9rcoles. 30 9 20 7 4 A las 9:30 del d\u00eda 20 de julio y que sean jueves. 30 9 20 7 * A las 9:30 del d\u00eda 20 de julio sin importar el d\u00eda de la semana. 20 * * * 6 Al minuto 20 de cada hora de los s\u00e1bados. 20 * * 1 6 Al minuto 20 de cada hora de los s\u00e1bados de enero. Tambi\u00e9n es posible especificar listas en los campos. Las listas pueden estar expresadas en una comalista o a trav\u00e9s de guiones. cron , de igual manera soporta incrementos en las listas, que se indican de la siguiente manera: Comando Acci\u00f3n 59 11 * 1-3 1,2,3,4,5 A las 11:59 de lunes a viernes, de enero a marzo. 45 * 10-25 * 6-7 Al minuto 45 de todas las horas de los d\u00edas 10 al 25 de todos los meses, de s\u00e1bados a domingos. 10,30,50 * * * 1,3,5 En el minuto 10, 30 y 50 de todas las horas de los d\u00edas lunes, mi\u00e9rcoles y viernes. /15 10-14 * * * Cada quince minutos de las 10:00 a las 14:00. * 12 1-10/2 2,8 * Cada minuto de la hora 12 en los d\u00edas 1,3,5,7 y 9 de febrero y agosto. (el incremento en el tercer campo es de 2 y comienza a partir de 1). 0 /5 1-10,15,20-23 * 3 Cada 5 horas de los d\u00edas 1 al 10, el d\u00eda 15 y del d\u00eda 20 al 23 de cada mes y que el d\u00eda sea mi\u00e9rcoles. 3/3 2/4 2 2 2 Cada 3 minutos empezando por el minuto 3 (3,6,9...) de las horas 2, 6, 10, 14, 18 y 22 (cada 4 horas empezando en la hora 2) del d\u00eda 2 de febrero y que sea martes. Nota Como se puede apreciar en el \u00faltimo ejemplo la tarea cron que estuviera asignada a esta l\u00ednea, s\u00f3lo se ejecutar\u00eda si cumple con los cinco criterios, es decir, siempre es un AND que s\u00f3lo resulta verdadero si todas las condiciones son ciertas.","title":"cron"},{"location":"043_Planificacio%CC%81nTareas.html#crontab-cron-con-multiples-usuarios","text":"GNU/Linux es un sistema multiusuario y cron es de las aplicaciones que soporta el trabajo con varios usuarios a la vez. Caracter\u00edsticas: Cada usuario puede tener su propio archivo crontab , de hecho el /etc/crontab se asume que es el archivo del usuario root. Cualquier usuario puede disponer de su propio archivo de programaci\u00f3n de tareas a trav\u00e9s del comando crontab. En el directorio /var/spool/cron/crontabs , que puede variar seg\u00fan la distribuci\u00f3n, se genera un archivo de tareas para cada usuario. El uso de crontab es: crontab -e Nota Este comando abrir\u00e1 el editor de texto por defecto con un archivo vac\u00edo y donde el usuario especificar\u00e1 las tareas que desea programar, y que se guardar\u00e1 autom\u00e1ticamente como /var/spool/cron/crontabs/usuario . Hay que tener en cuenta que si existe esta nueva lista de tareas programadas ser\u00e1n dos las que ser\u00e1n comprobadas en cada minuto por el demonio cron: la del usuario reci\u00e9n creada y la del sistema vista con anterioridad.","title":"crontab (cron con m\u00faltiples usuarios)"},{"location":"043_Planificacio%CC%81nTareas.html#actividades-de-desarrollo-ud4_02","text":"Tareas Programadas con Powershell Programa con cron las siguientes tareas: Una copia de la carpeta /home a una carpeta de seguridad los d\u00edas pares de cada mes, cada dos horas durante las 8:00 y las 15:00 horas. Un listado de los archivos que existen en el escritorio del usuario actual (usa el comando ls con un redireccionador) cada 5 minutos de todas las horas de los martes, jueves y viernes de los d\u00edas impares.","title":"Actividades de desarrollo UD4_02"},{"location":"051_AccesoRemotoLinux.html","text":"Instalaci\u00f3n, configuraci\u00f3n y uso de servicios de acceso y administraci\u00f3n remota \u00b6 Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 5 sesiones (12h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Administra de forma remota el sistema operativo en red valorando su importancia y aplicando criterios de seguridad. Se han descrito m\u00e9todos de acceso y administraci\u00f3n remota de sistemas. Se ha diferenciado entre los servicios orientados a sesi\u00f3n y los no orientados a sesi\u00f3n. Se han utilizado herramientas de administraci\u00f3n remota suministradas por el propio sistema operativo. Se han instalado servicios de acceso y administraci\u00f3n remota. Se han utilizado comandos y herramientas gr\u00e1ficas para gestionar los servicios de acceso y administraci\u00f3n remota. Se han creado cuentas de usuario para el acceso remoto. Se han realizado pruebas de acceso y administraci\u00f3n remota entre sistemas heterog\u00e9neos. Se han utilizado mecanismos de encriptaci\u00f3n de la informaci\u00f3n transferida. Se han documentado los procesos y servicios del sistema administrados de forma remota. Introducci\u00f3n \u00b6 En la mayor\u00eda de los casos, los servidores y m\u00e1quinas que necesitamos gestionar no comparten el mismo espacio f\u00edsico. Como por ejmeplo servidores que est\u00e9n ubicados en: Diferentes departamentos de una empresa Centros de proceso de Datos (CPD) generales Computaci\u00f3n en la nube Para poder acceder a ellos existen servicios, m\u00e9todos y herramientas, que se detallan a continuaci\u00f3n. Terminales en modo texto \u00b6 Una de las formas de administrar de forma remota es instalar un servidor que permita el acceso en forma de terminal de texto. Estos programas permiten acceder al equipo v\u00eda red utilizando un nombre de usuario y contrase\u00f1a como si estuvi\u00e9semos accediendo de forma local al mismo. Entre los diferentes servicios de este tipo destacan: Telnet: basado en el protocolo del mismo nombre. Este protocolo utiliza por defecto el puerto 23. El problema de este es que la informaci\u00f3n viaja por la red sin cifrar , con la correspondiente falta de seguridad. Rlogin (Remote Login): es una aplicaci\u00f3n TCP/IP que comienza una sesi\u00f3n de terminal remoto sobre el anfitri\u00f3n especificado como host. El anfitri\u00f3n remoto debe hacer funcionar un servicio de Rlogind (o demonio) para que el Rlogin conecte con el anfitri\u00f3n. Utiliza un mecanismo est\u00e1ndar de autorizaci\u00f3n de los Rhosts. SSH (Secure Shell): Este protocolo permite poder acceder a otro ordenador a trav\u00e9s de una red para ejecutar comandos en esa m\u00e1quina, controlarla de manera remota e intercambiar archivos entre ambas. Ofrece una autenticaci\u00f3n muy potente y comunicaciones seguras en canales no protegidos. A continuaci\u00f3n se entra m\u00e1s en detalle en este \u00faltimo. SSH \u00b6 Caracter\u00edsticas principales: \u00b6 Utiliza el puerto 22 TCP para el establecimiento de las conexiones. Una vez establecida la conexi\u00f3n podremos ejecutar las \u00f3rdenes como si se tratara de una terminal local. Est\u00e1 implementado para la mayor\u00eda de sistemas operativos existentes; Windows, linux, OSX,... Proporciona mecanismo para asegurar la autenticaci\u00f3n, integridad y confidencialidad de la informaci\u00f3n . Autenticaci\u00f3n: Despu\u00e9s de la primera conexi\u00f3n, el cliente puede conocer que se est\u00e1 conectando al mismo servidor en futuras sesiones: conexiones de confianza. Confidencialidad : Todos los datos que se env\u00edan y se reciben durante la conexi\u00f3n son cifrados. Integridad: Proporciona mecanismos para asegurar que la informaci\u00f3n enviada no es manipulada por un tercero Adem\u00e1s destaca por: Permitir copiar datos de forma segura (tanto archivos sueltos como simular sesiones FTP cifradas), Gestionar claves RSA para no escribir contrase\u00f1as al conectar a los dispositivos y Pasar los datos de cualquier otra aplicaci\u00f3n por un canal seguro tunelizado Tambi\u00e9n puede redirigir el tr\u00e1fico del (Sistema de Ventanas X) para poder ejecutar programas gr\u00e1ficos remotamente. Basado en arquitectura cliente-servidor SSH Cliente-Servidor Funcionamiento \u00b6 Se basa en la Cartograf\u00eda (T\u00e9cnica utilizada para convertir un texto claro en otro cuyo contenido es igual al anterior pero solo puede ser decodificado por personas autorizadas.) SSH utiliza varios algoritmos de encriptaci\u00f3n y autenticaci\u00f3n. Para establecer la conexi\u00f3n con la m\u00e1quina remota utiliza algoritmos de encriptaci\u00f3n asim\u00e9trica . Para la transferencia de datos utiliza algoritmos de encriptaci\u00f3n sim\u00e9trica , que son m\u00e1s r\u00e1pidos. Encriptaci\u00f3n sim\u00e9trica Los algoritmos de criptograf\u00eda sim\u00e9trica son los que utilizan la misma clave tanto para el proceso de cifrado como para el descifrado del mensaje. Los m\u00e1s utilizados: DES, 3DES, AES, IDEA y Blowfish Esquema Encriptaci\u00f3n Sim\u00e9trica Nota Problema: Intercambio de claves. Encriptaci\u00f3n Asim\u00e9trica Utiliza dos claves matem\u00e1ticamente relacionadas de manera que lo que ciframos con una ( clave p\u00fablica ) s\u00f3lo puede descifrarse con la segunda ( clave privada ). Algunos algoritmos representativos son: RSA , y DSA Esquema Encriptaci\u00f3n Asim\u00e9trica Establecimiento de conexi\u00f3n \u00b6 El cliente abre una conexi\u00f3n TCP en el puerto 22 del servidor. Cliente y servidor negocian qu\u00e9 versi\u00f3n SSH van a utilizar y determinan el algoritmo de criptograf\u00eda sim\u00e9trica a utilizar. El servidor env\u00eda su clave p\u00fablica al cliente: Si es la primera vez la guardar\u00e1 para futuras conexiones. En caso contrario la compara con la que ya ten\u00eda guardadas para la IP de conexi\u00f3n (Autenticaci\u00f3n del servidor) El cliente genera una clave de sesi\u00f3n aleatoria mediante el algoritmo seleccionado en el primer paso y la env\u00eda al servidor cifrando con la clave p\u00fablica del mismo. El resto de comunicaciones se har\u00e1 utilizando esta clave compartida y ser\u00e1 indescifrable. A partir de aqu\u00ed se llevar\u00e1 a cabo la autenticaci\u00f3n del usuario y la transmisi\u00f3n de informaci\u00f3n/\u00f3rdenes a ejecutar en la m\u00e1quina remota Esquema del establecimiento de conexi\u00f3n Autentificaci\u00f3n del cliente \u00b6 Puede llevarse a cabo de 2 formas : Usuario y contrase\u00f1a : Aunque las credenciales van cifradas, es menos seguro ya que es m\u00e1s propenso a ataques de fuerza bruta. CONSEJO Tendremos que utilizar sistemas de detecci\u00f3n de intrusos como fail2ban . Clave p\u00fablica/privada : Cuando el cliente se conecta al servidor, le informa de la clave p\u00fablica que va a utilizar . Si el servidor la tiene en su almac\u00e9n de claves autorizadas (authorized_keys) , enviar\u00e1 un mensaje aleatorio cifrado con la clave p\u00fablica que, si el cliente es capaz de descifrar, quedar\u00e1 autenticado. El cliente decodificar\u00e1 el mensaje con la clave privada y lo enviar\u00e1 al servidor decodificado. Esquema Autentificaci\u00f3n Clave p\u00fablica/privada Tunelizaci\u00f3n \u00b6 El SSH Tunneling es una t\u00e9cnica que nos permitir\u00e1 navegar por la web de forma segura, estableciendo un t\u00fanel SSH contra un servidor SSH remoto Hace uso del Port-forwarding : toma los datos que el cliente env\u00eda en un extremo del t\u00fanel y los reenv\u00eda por el canal seguro. El Port-Forwarding es un mecanismo de SSH para tunelizar puertos desde una maquina cliente a un servidor o de forma inversa. En el otro extremo donde se recogen los datos y se env\u00edan al servicio de destino. Esquema SSH-Tunnel Ejemplos ssh -L local-puerto: remote-hostname: remote-puerto username @ hostname Clientes SSH \u00b6 Podemos classificarlos en: clientes gr\u00e1ficos y de consola. Gr\u00e1ficos Putty \u2192 El m\u00e1s utilizado Kitty Ejemplo Putty Terminal/Consola CMDer Los sistemas operativos LIKE-UNIX disponen de un cliente ssh en modo consola pre-instalado Ejemplo ssh preinstalado Ejemplos comandos de uso cliente consola Conexi\u00f3n a una m\u00e1quina remota: ssh usuario@ejemplo.servidor.es Ejecutar una orden sin conectarse: ssh ejemplo.servidor.es comando ssh serdis.dis.ulpgc.es ls ./ OpenSHH \u00b6 OpenSSH es un conjunto de aplicaciones que permiten realizar comunicaciones cifradas a trav\u00e9s de una red, usando el protocolo SSH. Fue creado como una alternativa libre y abierta al programa Secure Shell, que es software propietario. Se trata de un proyecto de c\u00f3digo abierto y licencia libre para su utilizaci\u00f3n para cualquier prop\u00f3sito. Es compatible con los protocolos SSH1 ( No seguro) y SSH2 . Est\u00e1 disponible para plataformas Gnu/linux y Windows , as\u00ed como Unix , Mac , Solaris o AIX Logo OpenSSH Funcionalidades adicionales \u00b6 Permite la copia de archivos de la m\u00e1quina local a la m\u00e1quina remota o a la inversa mediante securecopy (SCP). Ejemplos Transferir un archivo local a un sistema remoto: scp archivo_local usuario@servidor: / archivo_remoto Transferir un archivo remoto a un sistema local: scp usuario@servidor:/archivo_remoto /archivo_loal Especificar m\u00faltiples archivos: scp/dir_local/* usuario@servidor:/dir_remoto/ Incluye soporte completo para S FTP (SSHftp) : Sin embargo, se trata de un protocolo totalmente diferente a FTP, y est\u00e1 disponible a partir de la versi\u00f3n 2.5. Ejemplos sftp usuario1@servidor.dominio.es A continuaci\u00f3n se ejecutar\u00edan comandos como: put, get, rm, ls, lpwd, ... Escritorio remoto \u00b6 Se habla de escritorio remoto cuando un usuario se conecta a un equipo desde otro utilizando la red y adem\u00e1s se conecta al entorno gr\u00e1fico de este. Se suele utilizar para realizar administraci\u00f3n remota del equipo. La mayor\u00eda de los sistemas operativos tienen incorporada alguna utilidad para la conexi\u00f3n en entorno gr\u00e1fico de forma remota. En algunos casos,el usuario desde el equipo local controla el equipo remoto y el usuario de este puede ver lo que se est\u00e1 haciendo en \u00e9l. Para esto se utilizan diferentes protocolos. Para cualquiera de ellos tendremos dos partes: La parte del servidor que se instalar\u00e1 en el equipo a controlar remotamente. La parte cliente, que se instala en el equipo local desde el que se quiere acceder al equipo remoto. Los protocolos que pueden usarse son: RDP : protocolo de acceso a escritorio remoto (Remote Desktop Protocol). Se utiliza principalmente en Windows, aunque puede instalarse en Linux si la m\u00e1quina que tiene este sistema operativo debe ser accedido por medio de escritorio remoto desde un equipo Windows. VNC : (Virtual Network Computer): Se utiliza en distintas plataformas para proveer de un escritorio remoto a cualquier equipo. Actividades de desarrollo UD5_01 \u00b6 Pr\u00e1ctica Configuraci\u00f3n Servidor SSH","title":"5.1- Acceso Remoto en modo texto"},{"location":"051_AccesoRemotoLinux.html#instalacion-configuracion-y-uso-de-servicios-de-acceso-y-administracion-remota","text":"Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 5 sesiones (12h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Administra de forma remota el sistema operativo en red valorando su importancia y aplicando criterios de seguridad. Se han descrito m\u00e9todos de acceso y administraci\u00f3n remota de sistemas. Se ha diferenciado entre los servicios orientados a sesi\u00f3n y los no orientados a sesi\u00f3n. Se han utilizado herramientas de administraci\u00f3n remota suministradas por el propio sistema operativo. Se han instalado servicios de acceso y administraci\u00f3n remota. Se han utilizado comandos y herramientas gr\u00e1ficas para gestionar los servicios de acceso y administraci\u00f3n remota. Se han creado cuentas de usuario para el acceso remoto. Se han realizado pruebas de acceso y administraci\u00f3n remota entre sistemas heterog\u00e9neos. Se han utilizado mecanismos de encriptaci\u00f3n de la informaci\u00f3n transferida. Se han documentado los procesos y servicios del sistema administrados de forma remota.","title":"Instalaci\u00f3n, configuraci\u00f3n y uso de servicios de acceso y administraci\u00f3n remota"},{"location":"051_AccesoRemotoLinux.html#introduccion","text":"En la mayor\u00eda de los casos, los servidores y m\u00e1quinas que necesitamos gestionar no comparten el mismo espacio f\u00edsico. Como por ejmeplo servidores que est\u00e9n ubicados en: Diferentes departamentos de una empresa Centros de proceso de Datos (CPD) generales Computaci\u00f3n en la nube Para poder acceder a ellos existen servicios, m\u00e9todos y herramientas, que se detallan a continuaci\u00f3n.","title":"Introducci\u00f3n"},{"location":"051_AccesoRemotoLinux.html#terminales-en-modo-texto","text":"Una de las formas de administrar de forma remota es instalar un servidor que permita el acceso en forma de terminal de texto. Estos programas permiten acceder al equipo v\u00eda red utilizando un nombre de usuario y contrase\u00f1a como si estuvi\u00e9semos accediendo de forma local al mismo. Entre los diferentes servicios de este tipo destacan: Telnet: basado en el protocolo del mismo nombre. Este protocolo utiliza por defecto el puerto 23. El problema de este es que la informaci\u00f3n viaja por la red sin cifrar , con la correspondiente falta de seguridad. Rlogin (Remote Login): es una aplicaci\u00f3n TCP/IP que comienza una sesi\u00f3n de terminal remoto sobre el anfitri\u00f3n especificado como host. El anfitri\u00f3n remoto debe hacer funcionar un servicio de Rlogind (o demonio) para que el Rlogin conecte con el anfitri\u00f3n. Utiliza un mecanismo est\u00e1ndar de autorizaci\u00f3n de los Rhosts. SSH (Secure Shell): Este protocolo permite poder acceder a otro ordenador a trav\u00e9s de una red para ejecutar comandos en esa m\u00e1quina, controlarla de manera remota e intercambiar archivos entre ambas. Ofrece una autenticaci\u00f3n muy potente y comunicaciones seguras en canales no protegidos. A continuaci\u00f3n se entra m\u00e1s en detalle en este \u00faltimo.","title":"Terminales en modo texto"},{"location":"051_AccesoRemotoLinux.html#ssh","text":"","title":"SSH"},{"location":"051_AccesoRemotoLinux.html#escritorio-remoto","text":"Se habla de escritorio remoto cuando un usuario se conecta a un equipo desde otro utilizando la red y adem\u00e1s se conecta al entorno gr\u00e1fico de este. Se suele utilizar para realizar administraci\u00f3n remota del equipo. La mayor\u00eda de los sistemas operativos tienen incorporada alguna utilidad para la conexi\u00f3n en entorno gr\u00e1fico de forma remota. En algunos casos,el usuario desde el equipo local controla el equipo remoto y el usuario de este puede ver lo que se est\u00e1 haciendo en \u00e9l. Para esto se utilizan diferentes protocolos. Para cualquiera de ellos tendremos dos partes: La parte del servidor que se instalar\u00e1 en el equipo a controlar remotamente. La parte cliente, que se instala en el equipo local desde el que se quiere acceder al equipo remoto. Los protocolos que pueden usarse son: RDP : protocolo de acceso a escritorio remoto (Remote Desktop Protocol). Se utiliza principalmente en Windows, aunque puede instalarse en Linux si la m\u00e1quina que tiene este sistema operativo debe ser accedido por medio de escritorio remoto desde un equipo Windows. VNC : (Virtual Network Computer): Se utiliza en distintas plataformas para proveer de un escritorio remoto a cualquier equipo.","title":"Escritorio remoto"},{"location":"051_AccesoRemotoLinux.html#actividades-de-desarrollo-ud5_01","text":"Pr\u00e1ctica Configuraci\u00f3n Servidor SSH","title":"Actividades de desarrollo UD5_01"},{"location":"052_EscritorioRemoto.html","text":"Escritorio remoto \u00b6 Se habla de escritorio remoto cuando un usuario se conecta a un equipo desde otro utilizando la red y adem\u00e1s se conecta al entorno gr\u00e1fico de este. Se suele utilizar para realizar administraci\u00f3n remota del equipo. La mayor\u00eda de los sistemas operativos tienen incorporada alguna utilidad para la conexi\u00f3n en entorno gr\u00e1fico de forma remota. En algunos casos,el usuario desde el equipo local controla el equipo remoto y el usuario de este puede ver lo que se est\u00e1 haciendo en \u00e9l. Para esto se utilizan diferentes protocolos. Para cualquiera de ellos tendremos dos partes: La parte del servidor que se instalar\u00e1 en el equipo a controlar remotamente. La parte cliente, que se instala en el equipo local desde el que se quiere acceder al equipo remoto. Los protocolos que pueden usarse son: RDP : protocolo de acceso a escritorio remoto (Remote Desktop Protocol). Se utiliza principalmente en Windows, aunque puede instalarse en Linux si la m\u00e1quina que tiene este sistema operativo debe ser accedido por medio de escritorio remoto desde un equipo Windows. VNC : (Virtual Network Computer): Se utiliza en distintas plataformas para proveer de un escritorio remoto a cualquier equipo. Escritorio remoto en Ubuntu 20.04 con xRDP \u00b6 xRDP es una implementaci\u00f3n gratuita y de c\u00f3digo abierto del servidor Microsoft RDP que permite que los sistemas operativos distintos de Microsoft Windows proporcionen una experiencia de escritorio remoto totalmente funcional y compatible con RDP. Para instalar xRDP utilizaremos: sudo apt install xrdp -y NOTA: Se a\u00f1ade el argumento -y para contestar autom\u00e1ticamente de manera afirmativa a cualquier pregunta que se nos haga durante la instalaci\u00f3n. Autom\u00e1ticamente se habra iniciado el servicio, para comprobarlo se puede ejecutar el siguiente comando: sudo systemctl status xrdp xRDP en ejecuci\u00f3n Cuando se instala xrdp, se crea tambi\u00e9n en el sistema una nueva cuenta de usuario llamada, precisamente, xrdp . Ademas, se crea un certificado SSL, en el archivo ssl-cert-snakeoil.key , dentro de la carpeta /etc/ssl/private/ . A continuaci\u00f3n, se debe a\u00f1adir el usuario xrdp al grupo ssl-cert para lograr que el usuario pueda leer el certificado. Lo haremos con la siguiente orden: sudo adduser xrdp ssl-cert usuario xrdp al grupo ssl-cert Un problema frecuente ocurre al usar el escritorio remoto desde otro equipo que no sea Ubuntu es encontrar la pantalla en negro. Para resolverlo, basta con editar el archivo /etc/xrdp/startwm.sh y eliminar el valor de las variables DBUS_SESSION_BUS_ADDRESS y XDG_RUNTIME_DIR , como se muestra a continuaci\u00f3n: edici\u00f3n /etc/xrdp/startwm.sh I Hacia el final del archivo se editan las variables comentadas: edici\u00f3n /etc/xrdp/startwm.sh II unset DBUS_SESSION_BUS_ADDRESS unset XDG_RUNTIME_DIR edici\u00f3n /etc/xrdp/startwm.sh III Escritorio remoto en Windows 10 \u00b6 Para configurar el Escritorio Remoto se deben realizar los siguientes pasos: Inicio \u2192 Sistema Configuraci\u00f3n Escritorio Remoto Windows 10 I NOTA: Se debe tener en cuenta que el escritorio remoto no est\u00e1 disponible en la versi\u00f3n Home de Windows 10, por lo que se necesita, como m\u00ednimo, una versi\u00f3n Pro. Al hacerlo, se obtiene la ventana Configuraci\u00f3n, donde podremos realizar diferentes ajustes sobre el comportamiento del equipo, donde se debe elegir la opci\u00f3n Escritorio remoto en el panel izquierdo de la ventana. Configuraci\u00f3n Escritorio Remoto Windows 10 II NOTA: al clickarlo aparece en el panel derecho de la ventana la informaci\u00f3n de que, con esta funci\u00f3n, podremos acceder al escritorio de este equipo desde otro dispositivo, independientemente del sistema operativo que utilice. Como se trata de una situaci\u00f3n potencialmente peligrosa, el sistema avisa de lo que estamos permitiendo, se debe confirmar la configuraci\u00f3n. Configuraci\u00f3n Escritorio Remoto Windows 10 III A\u00f1adir los usuarios autorizados \u00b6 Una vez completado el paso anterior, m\u00e1s abajo existe la posibilidad de elegir, entre los usuarios definidos en el sistema, aquellos que podr\u00e1n hacer uso del escritorio remoto. Bastar\u00e1 con hacer clic en el enlace y Seleccionar los usuarios que pueden tener acceso remoto a este equipo. Configuraci\u00f3n Escritorio Remoto Windows 10 IV Esto abrir\u00e1 una nueva ventana con los usuarios que est\u00e1n habilitados en ese momento (como se acaba de activar, a\u00fan no hay ninguno). Aqu\u00ed se puede a\u00f1adir o quitar usuarios de la lista. Configuraci\u00f3n Escritorio Remoto Windows 10 V De esta forma se obtiene una nueva ventana que nos permitir\u00e1 elegir el usuario o usuarios que necesitemos. Configuraci\u00f3n Escritorio Remoto Windows 10 VI Como el sistema tiene varios objetos que contienen el texto que se ha escrito, aparece una nueva ventana para elegir el que nos interese. Si solo hubiese existido un objeto, se saltar\u00eda este paso. Configuraci\u00f3n Escritorio Remoto Windows 10 VII As\u00ed se vuelve a la ventana anterior, pero ahora vemos que se ha reconocido correctamente el usuario (se muestra el nombre NetBIOS completo de la cuenta, incluyendo el nombre del equipo). Configuraci\u00f3n Escritorio Remoto Windows 10 VIII Esto cerrar\u00e1 la ventana Seleccionar usuarios, devolvi\u00e9ndo al paso anterior, pero ahora se observa que la cuenta de usuario ya aparece en la lista. Como es l\u00f3gico, se puede repetir el proceso tantas veces como necesitemos. Configuraci\u00f3n Escritorio Remoto Windows 10 IX RemoteApp \u00b6 RemoteApp permite que los programas a los que se obtiene acceso de forma remota mediante S ervicios de Escritorio remoto aparezcan como si se ejecutaran en el equipo local del usuario final . Estos programas se conocen como Programas RemoteApp . Caracter\u00edsticas: En lugar de presentarse al usuario en el escritorio del servidor de Host de sesi\u00f3n de Escritorio remoto, el Programa RemoteApp se integra en el escritorio del cliente. El Programa RemoteApp se ejecuta en su propia ventana ajustable, se puede arrastrar de un monitor a otro y dispone de una entrada propia en la barra de tareas. Si un usuario ejecuta m\u00e1s de un Programa RemoteApp en el mismo servidor de Host de sesi\u00f3n de Escritorio remoto, el programa RemoteApp compartir\u00e1 la misma sesi\u00f3n de Servicios de Escritorio remoto. RemoteApp puede reducir la complejidad y la carga administrativa en muchas situaciones, incluidas las siguientes: Sucursales donde puede haber un soporte local de IT limitado y un ancho de banda de red limitado. Situaciones en las que los usuarios necesitan obtener acceso a programas de forma remota. Implementaci\u00f3n de programas de l\u00ednea de negocios (LOB), especialmente programas LOB personalizados. Entornos como los espacios de trabajo \"hot desk\" o \"hoteling\", en los que los usuarios no tienen equipos asignados. Implementaci\u00f3n de m\u00faltiples versiones de un programa, especialmente si la instalaci\u00f3n de varias versiones localmente puede ocasionar conflictos. Actividades de desarrollo UD5_02 \u00b6 Instala y configura xRDP en ubuntu 20.04, comprueba que puedes acceder por escritorio remoto al Ubuntu desde Windows 10, haz una gu\u00eda de configuraci\u00f3n para poder de los pasos para poder acceder y captura que demuestre que se ha accedido. Instala y configura RDP en Windows 10, comprueba que puedes acceder por escritorio remoto del mismo desde Ubuntu, haz una gu\u00eda de configuraci\u00f3n para poder de los pasos para poder acceder y captura que demuestre que se ha accedido. Actividades de desarrollo UD5_03 \u00b6 Instalaci\u00f3n de Servidor de Aplicaciones RemoteApp","title":"5.2- Escritorio Remoto"},{"location":"052_EscritorioRemoto.html#escritorio-remoto","text":"Se habla de escritorio remoto cuando un usuario se conecta a un equipo desde otro utilizando la red y adem\u00e1s se conecta al entorno gr\u00e1fico de este. Se suele utilizar para realizar administraci\u00f3n remota del equipo. La mayor\u00eda de los sistemas operativos tienen incorporada alguna utilidad para la conexi\u00f3n en entorno gr\u00e1fico de forma remota. En algunos casos,el usuario desde el equipo local controla el equipo remoto y el usuario de este puede ver lo que se est\u00e1 haciendo en \u00e9l. Para esto se utilizan diferentes protocolos. Para cualquiera de ellos tendremos dos partes: La parte del servidor que se instalar\u00e1 en el equipo a controlar remotamente. La parte cliente, que se instala en el equipo local desde el que se quiere acceder al equipo remoto. Los protocolos que pueden usarse son: RDP : protocolo de acceso a escritorio remoto (Remote Desktop Protocol). Se utiliza principalmente en Windows, aunque puede instalarse en Linux si la m\u00e1quina que tiene este sistema operativo debe ser accedido por medio de escritorio remoto desde un equipo Windows. VNC : (Virtual Network Computer): Se utiliza en distintas plataformas para proveer de un escritorio remoto a cualquier equipo.","title":"Escritorio remoto"},{"location":"052_EscritorioRemoto.html#escritorio-remoto-en-ubuntu-2004-con-xrdp","text":"xRDP es una implementaci\u00f3n gratuita y de c\u00f3digo abierto del servidor Microsoft RDP que permite que los sistemas operativos distintos de Microsoft Windows proporcionen una experiencia de escritorio remoto totalmente funcional y compatible con RDP. Para instalar xRDP utilizaremos: sudo apt install xrdp -y NOTA: Se a\u00f1ade el argumento -y para contestar autom\u00e1ticamente de manera afirmativa a cualquier pregunta que se nos haga durante la instalaci\u00f3n. Autom\u00e1ticamente se habra iniciado el servicio, para comprobarlo se puede ejecutar el siguiente comando: sudo systemctl status xrdp xRDP en ejecuci\u00f3n Cuando se instala xrdp, se crea tambi\u00e9n en el sistema una nueva cuenta de usuario llamada, precisamente, xrdp . Ademas, se crea un certificado SSL, en el archivo ssl-cert-snakeoil.key , dentro de la carpeta /etc/ssl/private/ . A continuaci\u00f3n, se debe a\u00f1adir el usuario xrdp al grupo ssl-cert para lograr que el usuario pueda leer el certificado. Lo haremos con la siguiente orden: sudo adduser xrdp ssl-cert usuario xrdp al grupo ssl-cert Un problema frecuente ocurre al usar el escritorio remoto desde otro equipo que no sea Ubuntu es encontrar la pantalla en negro. Para resolverlo, basta con editar el archivo /etc/xrdp/startwm.sh y eliminar el valor de las variables DBUS_SESSION_BUS_ADDRESS y XDG_RUNTIME_DIR , como se muestra a continuaci\u00f3n: edici\u00f3n /etc/xrdp/startwm.sh I Hacia el final del archivo se editan las variables comentadas: edici\u00f3n /etc/xrdp/startwm.sh II unset DBUS_SESSION_BUS_ADDRESS unset XDG_RUNTIME_DIR edici\u00f3n /etc/xrdp/startwm.sh III","title":"Escritorio remoto en Ubuntu 20.04 con xRDP"},{"location":"052_EscritorioRemoto.html#escritorio-remoto-en-windows-10","text":"Para configurar el Escritorio Remoto se deben realizar los siguientes pasos: Inicio \u2192 Sistema Configuraci\u00f3n Escritorio Remoto Windows 10 I NOTA: Se debe tener en cuenta que el escritorio remoto no est\u00e1 disponible en la versi\u00f3n Home de Windows 10, por lo que se necesita, como m\u00ednimo, una versi\u00f3n Pro. Al hacerlo, se obtiene la ventana Configuraci\u00f3n, donde podremos realizar diferentes ajustes sobre el comportamiento del equipo, donde se debe elegir la opci\u00f3n Escritorio remoto en el panel izquierdo de la ventana. Configuraci\u00f3n Escritorio Remoto Windows 10 II NOTA: al clickarlo aparece en el panel derecho de la ventana la informaci\u00f3n de que, con esta funci\u00f3n, podremos acceder al escritorio de este equipo desde otro dispositivo, independientemente del sistema operativo que utilice. Como se trata de una situaci\u00f3n potencialmente peligrosa, el sistema avisa de lo que estamos permitiendo, se debe confirmar la configuraci\u00f3n. Configuraci\u00f3n Escritorio Remoto Windows 10 III","title":"Escritorio remoto en Windows 10"},{"location":"052_EscritorioRemoto.html#anadir-los-usuarios-autorizados","text":"Una vez completado el paso anterior, m\u00e1s abajo existe la posibilidad de elegir, entre los usuarios definidos en el sistema, aquellos que podr\u00e1n hacer uso del escritorio remoto. Bastar\u00e1 con hacer clic en el enlace y Seleccionar los usuarios que pueden tener acceso remoto a este equipo. Configuraci\u00f3n Escritorio Remoto Windows 10 IV Esto abrir\u00e1 una nueva ventana con los usuarios que est\u00e1n habilitados en ese momento (como se acaba de activar, a\u00fan no hay ninguno). Aqu\u00ed se puede a\u00f1adir o quitar usuarios de la lista. Configuraci\u00f3n Escritorio Remoto Windows 10 V De esta forma se obtiene una nueva ventana que nos permitir\u00e1 elegir el usuario o usuarios que necesitemos. Configuraci\u00f3n Escritorio Remoto Windows 10 VI Como el sistema tiene varios objetos que contienen el texto que se ha escrito, aparece una nueva ventana para elegir el que nos interese. Si solo hubiese existido un objeto, se saltar\u00eda este paso. Configuraci\u00f3n Escritorio Remoto Windows 10 VII As\u00ed se vuelve a la ventana anterior, pero ahora vemos que se ha reconocido correctamente el usuario (se muestra el nombre NetBIOS completo de la cuenta, incluyendo el nombre del equipo). Configuraci\u00f3n Escritorio Remoto Windows 10 VIII Esto cerrar\u00e1 la ventana Seleccionar usuarios, devolvi\u00e9ndo al paso anterior, pero ahora se observa que la cuenta de usuario ya aparece en la lista. Como es l\u00f3gico, se puede repetir el proceso tantas veces como necesitemos. Configuraci\u00f3n Escritorio Remoto Windows 10 IX","title":"A\u00f1adir los usuarios autorizados"},{"location":"052_EscritorioRemoto.html#remoteapp","text":"RemoteApp permite que los programas a los que se obtiene acceso de forma remota mediante S ervicios de Escritorio remoto aparezcan como si se ejecutaran en el equipo local del usuario final . Estos programas se conocen como Programas RemoteApp . Caracter\u00edsticas: En lugar de presentarse al usuario en el escritorio del servidor de Host de sesi\u00f3n de Escritorio remoto, el Programa RemoteApp se integra en el escritorio del cliente. El Programa RemoteApp se ejecuta en su propia ventana ajustable, se puede arrastrar de un monitor a otro y dispone de una entrada propia en la barra de tareas. Si un usuario ejecuta m\u00e1s de un Programa RemoteApp en el mismo servidor de Host de sesi\u00f3n de Escritorio remoto, el programa RemoteApp compartir\u00e1 la misma sesi\u00f3n de Servicios de Escritorio remoto. RemoteApp puede reducir la complejidad y la carga administrativa en muchas situaciones, incluidas las siguientes: Sucursales donde puede haber un soporte local de IT limitado y un ancho de banda de red limitado. Situaciones en las que los usuarios necesitan obtener acceso a programas de forma remota. Implementaci\u00f3n de programas de l\u00ednea de negocios (LOB), especialmente programas LOB personalizados. Entornos como los espacios de trabajo \"hot desk\" o \"hoteling\", en los que los usuarios no tienen equipos asignados. Implementaci\u00f3n de m\u00faltiples versiones de un programa, especialmente si la instalaci\u00f3n de varias versiones localmente puede ocasionar conflictos.","title":"RemoteApp"},{"location":"052_EscritorioRemoto.html#actividades-de-desarrollo-ud5_02","text":"Instala y configura xRDP en ubuntu 20.04, comprueba que puedes acceder por escritorio remoto al Ubuntu desde Windows 10, haz una gu\u00eda de configuraci\u00f3n para poder de los pasos para poder acceder y captura que demuestre que se ha accedido. Instala y configura RDP en Windows 10, comprueba que puedes acceder por escritorio remoto del mismo desde Ubuntu, haz una gu\u00eda de configuraci\u00f3n para poder de los pasos para poder acceder y captura que demuestre que se ha accedido.","title":"Actividades de desarrollo UD5_02"},{"location":"052_EscritorioRemoto.html#actividades-de-desarrollo-ud5_03","text":"Instalaci\u00f3n de Servidor de Aplicaciones RemoteApp","title":"Actividades de desarrollo UD5_03"},{"location":"053_HerramientasGraficAdminRemota.html","text":"Herramientas gr\u00e1ficas externas para la administraci\u00f3n remota. \u00b6 RealVNC \u00b6 Uno de los productos que est\u00e1 dise\u00f1ado para todas las plataformas m\u00e1s importantes es Real VNC. VNC : Virtual Network Computing (Computaci\u00f3n Virtual en Red). VNC es un programa de software libre basado en una estructura cliente-servidor que permite observar las acciones del ordenador servidor remotamente a trav\u00e9s de un ordenador cliente. Como su nombre indica, se basa en este protocolo. Podemos encontrar m\u00e1s aplicaciones que utilicen VNC para control remoto, pero esta es una de las m\u00e1s utilizada. Hay desde una versi\u00f3n gratuita hasta una de empresa. Esta \u00faltima incorpora m\u00e1s seguridad, y m\u00e1s utilidades, como por ejemplo, la transferencia de archivos. RealVNC viewer DESCARGA Descarga RealVNC RealVNC en Linux Gu\u00eda RealVNC en Linux TeamViewer \u00b6 TeamViewer es un software para el acceso remoto, as\u00ed como para el control y el soporte en remoto de ordenadores y otros dispositivos finales. La plataforma fue lanzada al p\u00fablico en 2005 Su cat\u00e1logo de servicios se ha ido ampliando de forma contin\u00faa. La \u00faltima innovaci\u00f3n ha sido la integraci\u00f3n de TeamViewer Meeting. TeamViewer no exige registrarse y es gratuito si se utiliza con fines no comerciales, lo cual ha ayudado a una mayor difusi\u00f3n del software. TeamViewer es el producto principal de la empresa hom\u00f3nima con sede en G\u00f6ppingen, Alemania . TeamViewer APP DESCARGA Descarga TeamViewer TeamViewer en Linux Gu\u00eda instalaci\u00f3n TeamViewer en Linux AnyDesk \u00b6 AnyDesk es un programa de software de escritorio remoto desarrollado por AnyDesk Software GmbH en Stuttgart , Alemania. Provee acceso remoto bidireccional entre computadoras personales y est\u00e1 disponible para todos los sistemas operativos comunes. El software ha estado en desarrollo activo desde 2012. Esta herramienta permite el acceso remoto bidireccional de los usuarios a trav\u00e9s de sus computadores. AnyDesk es un software multiplataforma, es decir, puede manejarse desde diferentes sistemas: Windows, Linux, OS X, Android entre otros. Ejemplo Anydesk APP DESCARGA Descarga AnyDesk TeamViewer en Linux Gu\u00eda instalaci\u00f3n AnyDesk en Linux Apache Guacamole \u00b6 Apache Guacamole es una puerta de enlace de escritorio remoto multiplataforma de c\u00f3digo abierto y gratuita mantenida por Apache Software Foundation . Permite a un usuario tomar el control de una computadora remota o m\u00e1quina virtual a trav\u00e9s de un navegador web. Apache Guacamole es una puerta de enlace de escritorio remoto sin cliente . Lo llamamos sin cliente porque no se requieren complementos ni aplicaci\u00f3n cliente. Admite protocolos est\u00e1ndar como VNC, RDP y SSH. Gracias a HTML5, una vez que Guacamole est\u00e1 instalado en un servidor, todo lo que necesita para acceder a sus escritorios es un navegador web. Arquitectura Apache Guacamole MUY INTERESANTE PARA PROYECTO FINAL Se puede plantear el despliegue de esta tecnologia usando docker, ldap, proxy inverso, ... DESCARGA Descarga Apache Guacamole Guia Apache Guacamole Manuales y guia de despliegues con Apache Guacamole","title":"5.3- Herramientas gr\u00e1ficas externas."},{"location":"053_HerramientasGraficAdminRemota.html#herramientas-graficas-externas-para-la-administracion-remota","text":"","title":"Herramientas gr\u00e1ficas externas para la administraci\u00f3n remota."},{"location":"053_HerramientasGraficAdminRemota.html#realvnc","text":"Uno de los productos que est\u00e1 dise\u00f1ado para todas las plataformas m\u00e1s importantes es Real VNC. VNC : Virtual Network Computing (Computaci\u00f3n Virtual en Red). VNC es un programa de software libre basado en una estructura cliente-servidor que permite observar las acciones del ordenador servidor remotamente a trav\u00e9s de un ordenador cliente. Como su nombre indica, se basa en este protocolo. Podemos encontrar m\u00e1s aplicaciones que utilicen VNC para control remoto, pero esta es una de las m\u00e1s utilizada. Hay desde una versi\u00f3n gratuita hasta una de empresa. Esta \u00faltima incorpora m\u00e1s seguridad, y m\u00e1s utilidades, como por ejemplo, la transferencia de archivos. RealVNC viewer DESCARGA Descarga RealVNC RealVNC en Linux Gu\u00eda RealVNC en Linux","title":"RealVNC"},{"location":"053_HerramientasGraficAdminRemota.html#teamviewer","text":"TeamViewer es un software para el acceso remoto, as\u00ed como para el control y el soporte en remoto de ordenadores y otros dispositivos finales. La plataforma fue lanzada al p\u00fablico en 2005 Su cat\u00e1logo de servicios se ha ido ampliando de forma contin\u00faa. La \u00faltima innovaci\u00f3n ha sido la integraci\u00f3n de TeamViewer Meeting. TeamViewer no exige registrarse y es gratuito si se utiliza con fines no comerciales, lo cual ha ayudado a una mayor difusi\u00f3n del software. TeamViewer es el producto principal de la empresa hom\u00f3nima con sede en G\u00f6ppingen, Alemania . TeamViewer APP DESCARGA Descarga TeamViewer TeamViewer en Linux Gu\u00eda instalaci\u00f3n TeamViewer en Linux","title":"TeamViewer"},{"location":"053_HerramientasGraficAdminRemota.html#anydesk","text":"AnyDesk es un programa de software de escritorio remoto desarrollado por AnyDesk Software GmbH en Stuttgart , Alemania. Provee acceso remoto bidireccional entre computadoras personales y est\u00e1 disponible para todos los sistemas operativos comunes. El software ha estado en desarrollo activo desde 2012. Esta herramienta permite el acceso remoto bidireccional de los usuarios a trav\u00e9s de sus computadores. AnyDesk es un software multiplataforma, es decir, puede manejarse desde diferentes sistemas: Windows, Linux, OS X, Android entre otros. Ejemplo Anydesk APP DESCARGA Descarga AnyDesk TeamViewer en Linux Gu\u00eda instalaci\u00f3n AnyDesk en Linux","title":"AnyDesk"},{"location":"053_HerramientasGraficAdminRemota.html#apache-guacamole","text":"Apache Guacamole es una puerta de enlace de escritorio remoto multiplataforma de c\u00f3digo abierto y gratuita mantenida por Apache Software Foundation . Permite a un usuario tomar el control de una computadora remota o m\u00e1quina virtual a trav\u00e9s de un navegador web. Apache Guacamole es una puerta de enlace de escritorio remoto sin cliente . Lo llamamos sin cliente porque no se requieren complementos ni aplicaci\u00f3n cliente. Admite protocolos est\u00e1ndar como VNC, RDP y SSH. Gracias a HTML5, una vez que Guacamole est\u00e1 instalado en un servidor, todo lo que necesita para acceder a sus escritorios es un navegador web. Arquitectura Apache Guacamole MUY INTERESANTE PARA PROYECTO FINAL Se puede plantear el despliegue de esta tecnologia usando docker, ldap, proxy inverso, ... DESCARGA Descarga Apache Guacamole Guia Apache Guacamole Manuales y guia de despliegues con Apache Guacamole","title":"Apache Guacamole"},{"location":"061_ServidoresImpresion.html","text":"Administraci\u00f3n de Servidores de Impresi\u00f3n \u00b6 Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 5 sesiones (12h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Administra servidores de impresi\u00f3n describiendo sus funciones e integr\u00f3ndolos en una red. Se ha descrito la funcionalidad de los sistemas y servidores de impresi\u00f3n. Se han identificado los puertos y los protocolos utilizados. Se han utilizado las herramientas para la gesti\u00f3n de impresoras integradas en el sistema operativo. Se ha instalado y configurado un servidor de impresi\u00f3n en entorno Web. Se han creado y clasificado impresoras l\u00f3gicas. Se han creado grupos de impresi\u00f3n. Se han gestionado impresoras y colas de trabajos mediante comandos y herramientas gr\u00e1ficas. Se han compartido impresoras en red entre sistemas operativos diferentes. Se ha documentado la configuraci\u00f3n del servidor de impresi\u00f3n y de las impresoras creadas. Introducci\u00f3n \u00b6 El proceso de impresi\u00f3n consiste b\u00e1sicamente en transmitir una serie de datos textuales, gr\u00e1ficos, im\u00e1genes, etc. desde el ordenador que las ha procesado hasta un determinado perif\u00e9rico de impresi\u00f3n. Para establecer una comunicaci\u00f3n con cualquier perif\u00e9rico hay un canal de comunicaci\u00f3n f\u00edsica, es decir una interfaz electr\u00f3nica que permita transmitir las se\u00f1ales que llevan la informaci\u00f3n. Estos canales de comunicaci\u00f3n pueden ser puertos y buses de comunicaci\u00f3n o bien una infraestructura de red . Uno de los dispositivos que se comparten m\u00e1s a menudo en una red son las impresoras ; para realizarlo es necesario implementar los siguientes puntos: Un software que se encargue de gestionar los trabajos de impresi\u00f3n , organiz\u00e1ndolos en colas, dando prioridad a algunos de ellos, poniendo portadas y haciendo que las hojas de los diferentes trabajos no se mezclen entre s\u00ed. Aqu\u00ed aparece el t\u00e9rmino \u201cCola de Impresi\u00f3n\" para referirse a la lista de trabajos que est\u00e1n a la espera de ser impresos en un dispositivo de impresi\u00f3n. Adem\u00e1s en el caso de empresas \" medianas/grandes \" se crean m\u00e1s necesidades, las cuales son cubiertas con pools o grupos de impresoras que comparten la misma cola de impresi\u00f3n y un software que env\u00eda el trabajo a la primera que queda libre. Servidor de Impresi\u00f3n En este \u00faltimo caso el \" SW \" que da soluci\u00f3n a las necesidades de impresi\u00f3n en las empresas con un alto n\u00famero de usuarios son los servidores de impresi\u00f3n . Estudiado en un sub-aparatado m\u00e1s adelante. Ejemplo Servidor de Impresi\u00f3n Sistemas de Impresi\u00f3n \u00b6 Imprimir puede parecer una tarea sencilla, pero conlleva una serie de inconvenientes y necesidades que los sistemas de impresi\u00f3n actuales resuelven mediante la implementaci\u00f3n de diferentes m\u00f3dulo s: El planificador de colas de impresi\u00f3n ( spooler ) Los filtros Los controladores de interfaz o backends El primer problema surge porque la mayor\u00eda de las impresoras no tienen memoria suficiente para cargar un documento completo . Este es uno de los motivos que hacen necesario disponer de colas de impresi\u00f3n y de un sistema que las gestione ( spooler ). El gestor de la cola monitoriza la impresora y env\u00eda el siguiente trabajo en el momento en que queda libre. La ubicaci\u00f3n de las colas de impresi\u00f3n est\u00e1 determinada por la complejidad del sistema de impresi\u00f3n. Las colas pueden estar situadas: Ordenador cliente Servidor de impresi\u00f3n Un servidor proxy de archivos El siguiente problema a resolver es el gran n\u00famero de modelos de impresora disponibles en el mercado que utilizan secuencias de control diferentes, es decir que hablan lenguajes propios que requieren una traducci\u00f3n. Los filtros son las herramientas, entre el planificador y las impresora s, que hacen traducci\u00f3n entre los datos de entrada y el lenguaje que entiende la Impresora. El \u00faltimo paso de la cadena es el env\u00edo de datos al perif\u00e9rico de impresi\u00f3n mediante alguno de los canales e interfaces f\u00edsicas que se han descrito. Cada una de estas interfaces requiere un c ontrolador de dispositivo o backend que gestiona y controla el puerto de comunicaci\u00f3n f\u00edsico (USB, paralelo, RS232 ...) o bien la conexi\u00f3n de red (IPP, AppSocket, etc.) . Importante El concepto modular del controlador backend permite a\u00f1adir nuevos tipos de interfaces seg\u00fan avance la tecnolog\u00eda sin afectar al resto de la arquitectura. Tipos de impresoras para trabajo en red. \u00b6 Dependiendo de c\u00f3mo est\u00e1 compartida la impresora tenemos: Local printer : Son impresoras que en principio se usan en un ordenador en concreto , que est\u00e1n conectadas a uno de sus puertos. En un momento dado se decide que van a utilizarse desde m\u00e1s equipos de la red, y se comparte. En este caso, la gesti\u00f3n de los trabajos de impresi\u00f3n y los permisos de acceso de la impresora corren a cargo del sistema operativo del equipo al que est\u00e1 conectado el dispositivo. Network printer : Estos dispositivos tienen su propia tarjeta de red, que puede ser tanto cableada como wireless por la que se conectan a esta de forma independiente de ning\u00fan equipo. Se les debe asignar una ip o bien la recoger\u00e1n del servidor DHCP de la red. Virtual printer : Para los casos en los que tenemos una o varias impresoras sin conexi\u00f3n a red, pero no queremos tener un equipo siempre encendido para poder aceptar las peticiones de impresi\u00f3n, existen unos concentradores llamados servidores de impresi\u00f3n , que permiten conectar la impresora a la red, y que permiten conectar varias impresoras haciendo pool de estas. Ejemplo Servidor de Impresi\u00f3n Puertos y protocolos de impresi\u00f3n \u00b6 En el caso de comunicar ordenadores y perif\u00e9ricos mediante una red compartida tambi\u00e9n hay que tener presente la necesidad de implementar unos protocolos de comunicaci\u00f3n adecuados para alcanzar las funcionalidades necesarias de cualquier sistema de impresi\u00f3n. Los principales protocolos ( puertos l\u00f3gicos) de comunicaci\u00f3n que se pueden utilizar en el \u00e1mbito de los sistemas de impresi\u00f3n son los siguientes: Protocolo LPD / LPR Protocolo IPP AppSocket AppleTalk SMB/ CIF Principales con sus puertos Los tres principales son: LPD (\"impresora\") en el puerto 515 , IPP en 631 , y PDL-flujo de datos en 9100 utilizado habitualmente por impresoras HP (Hewlett-Packard) . Protocolo LPD / LPR \u00b6 El Protocolo LPD / LPR ( line printer daemon / line printer remote protocolo ) es el protocolo originalmente implementado en la plataforma BDS Unix . Utiliza TCP /IP para establecer conexiones entre impresoras y ordenadores en una red. Este protocolo trabaja normalmente escuchando peticiones al puerto TCP 515 y consta de dos componentes: Line printer remote (LPR) es el t\u00e9rmino para el proceso cliente de env\u00edo de trabajos de impresi\u00f3n a una impresora o cola de impresi\u00f3n. La estaci\u00f3n de trabajo que env\u00eda el trabajo de impresi\u00f3n es el cliente LPR. Line printer daemon se refiere al proceso de recepci\u00f3n de trabajos de impresi\u00f3n desde un cliente LPR . Las impresoras o servidores de impresi\u00f3n que reciben los trabajos de impresi\u00f3n se llaman servidores LPD. Arquitectura LPD/LPR Cuando un usuario env\u00eda un documento para imprimir, el ordenador (LPR cliente) genera un trabajo en un determinado formato, por ejemplo, PostScript . Los datos de impresi\u00f3n se componen de un fichero de datos con el contenido real que se quiere imprimir, y un archivo de control que incluye la descripci\u00f3n del archivo de datos, nombre del trabajo, propietario, n\u00famero de copias a imprimir, cola de destino, etc. A continuaci\u00f3n, el trabajo de impresi\u00f3n se env\u00eda a la direcci\u00f3n IP del servidor LPD , que lo recibe habitualmente a trav\u00e9s del puerto TCP / IP 515 . Se pueden configurar y definir varias colas en el servidor de impresi\u00f3n LPD, por lo que el fichero de control del trabajo de impresi\u00f3n debe incluir informaci\u00f3n sobre qu\u00e9 cola debe ser asignada . Protocolo IPP \u00b6 El protocolo de impresi\u00f3n por Internet ( IPP o Internet printing protocolo ) define extensiones del conocido protocolo HTTP ( Hyper Text transporte protocolo ) para apoyar los servicios de impresi\u00f3n remotos, configuraci\u00f3n de impresoras y gesti\u00f3n de colas. A diferencia de otros protocolos, IPP permite control de acceso, autenticaci\u00f3n y cifrado para dar soluciones de impresi\u00f3n m\u00e1s completas y seguras. Es el protocolo usado de forma nativa para CUPS y suele utilizar el puerto 631 . Arquitectura IPP Entre las funciones de este protocolo destacan: Este protocolo gestiona los trabajos que se lanzan para imprimir , el tama\u00f1o del medio, la resoluci\u00f3n, etc. Como todos los protocolos basados en IP, puede ser usado localmente o sobre Internet para comunicarse con impresoras locales o remotas. A diferencia de otros protocolos, tambi\u00e9n soporta el control de acceso, la autenticaci\u00f3n y el cifrado , siendo as\u00ed una soluci\u00f3n de impresi\u00f3n m\u00e1s capaz y segura que otras m\u00e1s antiguas. Por contra, recibe cr\u00edticas por la sobrecarga del protocolo, al estar construido sobre HTTP. Esto lo convierte en un protocolo y una realizaci\u00f3n m\u00e1s complejos y recargados de lo necesario. AppSocket \u00b6 Este protocolo est\u00e1 basado en el protocolo Jetdirect de HewlettPackard . Suele trabajar en el puerto 9100 y se considera muy fiable, sencillo y r\u00e1pido. AppleTalk \u00b6 Es un conjunto de protocolos de comunicaci\u00f3n de Apple que permite, entre otras cosas, la comunicaci\u00f3n con impresoras y servidores de impresi\u00f3n. SMB/ CIFS \u00b6 El servidor de bloques de mensajes ( server message block ) y su evoluci\u00f3n, el sistema de archivos com\u00fan de internet ( common Internet file system ), son protocolos de red de la capa de aplicaci\u00f3n del modelo OSI que permiten gestionar y compartir archivos e impresoras entre nodos de una red. SMB utiliza el puerto TCP 445 y fue ideado por IBM , pero modificado y perfeccionado por Microsoft, que lo utiliza en sus sistemas operativos Windows. Tambi\u00e9n hay implementaciones del protocolo en c\u00f3digo libre para sistemas Linux. Samba Es la m\u00e1s popular implementaci\u00f3n en c\u00f3digo libre del protocolo SMB / CIFS (entre otros) y permite la compartici\u00f3n de archivos e impresoras en redes heterog\u00e9neas. \u00d3rdenes para la gesti\u00f3n de impresoras y trabajos \u00b6 Windows \u00b6 Debemos saber que la cola de impresi\u00f3n, en un equipo local, se encuentra en %systemroot%\\system32\\spool\\printers . Nota Depende de actualizaci\u00f3n de las \u00faltimas versiones Tenemos, por un lado, el comando lpq . Si utilizamos la ayuda del comando ( lpq /? ) obtendr\u00edamos algo similar a: C:\\Documents and Settings\\Usuario>lpq /? Muestra el estado de una cola lpd remota. Uso : lpq -Sservidor -Pimpresora [-l] Opciones : -S servidor Nombre o direcci\u00f3n IP del host que proporciona servicio lpd. -P impresora Nombre de la cola de impresi\u00f3n. -l Salida detallada. Por otro lado se destaca el comando net ; utilizado para gestionar las colas de impresi\u00f3n. net stop spooler : parar\u00e1 el servicio de cola de impresi\u00f3n. net start spooler : arrancar\u00e1 el servicio de cola impresi\u00f3n. Se puede utilizar el comando net con el par\u00e1metro use podr\u00edamos obteniendo una salida como la siguiente: C:\\Documents and Settings\\administrador>net use \\\\Win-qni8olz3ihl\\PDFCreator Se ha completado el comando correctamente. C:\\Documents and Settings\\administrador>net use \\\\Win-qni8olz3ihl\\PDFCreator Nombre local Nombre remoto \\\\Win-qni8olz3ihl\\PDFCreator Tipo de recurso Impresora Estado Conectado Abiertos 0 N\u00ba de conexiones 1 Aclaraci\u00f3n El par\u00e1metro de entrada, se tiene una impresora, la aplicaci\u00f3n PDFCreator , en el servidor Win-qni8olz3ihl compartida para todos los usuarios del dominio) Linux \u00b6 El trabajo de impresi\u00f3n en Linux se ha realizado hist\u00f3ricamente usando uno de estos dos sistemas de gesti\u00f3n de impresi\u00f3n: el sistema de impresi\u00f3n de AT&T (Unix System V) y el demonio de impresoras en l\u00ednea ( LPD) de Berkeley. Estos sistemas estuvieron dise\u00f1ados en los a\u00f1os 70 con el \u00fanico prop\u00f3sito de imprimir texto en impresoras de caracteres. Por este motivo han aparecido nuevas opciones con m\u00e1s prestaciones, como LPRng o el sistema CUPS , aunque se ha intentado siempre conservar la compatibilidad y sintaxis de las \u00f3rdenes de consola originales. /etc/pintcap Este es el archivo de configuraci\u00f3n del sistema de impresi\u00f3n lpd que contiene el registro y definici\u00f3n de todas las impresoras del sistema, indicando el alias, nombre del dispositivo, el directorio de la cola de trabajos, filtros, etc. Los principales sistemas de impresi\u00f3n Linux: LPD , sistema de impresi\u00f3n Berkeley: este es el tradicional gestor de impresi\u00f3n de Unix de la plataforma Unix BSD. Es controlado por el demonio de impresoras de l\u00ednea ( line printer daemon ) situado en /usr/sbin/lpd y utiliza el protocolo LPD/LPR . Los clientes se comunican con el demonio mediante el dispositivo /dev/printer y utilizan el archivo de configuraci\u00f3n /etc/printcap para determinar el directorio de la cola de trabajos de impresi\u00f3n. LPRng : LPR es una implementaci\u00f3n en c\u00f3digo libre que mejora el sistema de impresi\u00f3n BDS pero manteniendo la compatibilidad, ya que tambi\u00e9n utiliza el demonio LPD. Incluye nuevas funcionalidades en el control de la cola detrabajos y las funciones de servidores de impresi\u00f3n en red . CUPS : el sistema de impresi\u00f3n com\u00fan de Unix es un potente y completo gestor de impresi\u00f3n basado en el protocolo IPP (Internet printing protocolo) e integrando PostScript como el lenguaje de definici\u00f3n de p\u00e1ginas est\u00e1ndar. NOTA La mayor\u00eda de distribuciones Linux ya incorpora CUPS como sistema de impresi\u00f3n por defecto. En GNU/Linux tenemos una serie de comandos u \u00f3rdenes que nos permiten interactuar con la impresora o bien con la cola de impresi\u00f3n. Ejemplos: lpr texto : a\u00f1ade el documento texto a la cola de impresi\u00f3n por defecto. El comando lp hace exactamente lo mismo que el comando lpr. Lpq : mostrar\u00e1 todos los trabajos que est\u00e1n en la cola de impresi\u00f3n. Lprm : cancela todos los trabajos en la cola de impresi\u00f3n. Si indicamos el n\u00famero de trabajo, s\u00f3lo cancelar\u00e1 ese trabajo. Obtendremos el mismo resultado con el comando cancel . lpstat \u2013t : obtiene toda la informaci\u00f3n de las impresoras y sus estados. El comando lpadmin nos permitir\u00e1 administrar una determinada impresora. Servidores de Impresi\u00f3n \u00b6 Un servidor de impresi\u00f3n es un software que permite que los PCs de una red local puedan hacer uso de las impresoras de la red de una forma eficaz, ya que centraliza las tareas de impresi\u00f3n, facilitando una gesti\u00f3n de las mismas. Los objetivos de los servidores de impresi\u00f3n son: Compartir todas sus impresoras desde un \u00fanico servidor centralizado, ya sean de red o no. Controlar las impresiones por usuario, grupos de trabajo, departamentos, etc. Realizar cobros por impresi\u00f3n (por trabajos, p\u00e1ginas, etc). Implementar quotas (por trabajos, p\u00e1ginas, etc). Utilizar dichas impresoras desde cualquier dispositivo disponible en su red (Windows, Linux, Mac, celulares, etc)","title":"6.1- Servidores de Impresi\u00f3n"},{"location":"061_ServidoresImpresion.html#administracion-de-servidores-de-impresion","text":"Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 5 sesiones (12h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Administra servidores de impresi\u00f3n describiendo sus funciones e integr\u00f3ndolos en una red. Se ha descrito la funcionalidad de los sistemas y servidores de impresi\u00f3n. Se han identificado los puertos y los protocolos utilizados. Se han utilizado las herramientas para la gesti\u00f3n de impresoras integradas en el sistema operativo. Se ha instalado y configurado un servidor de impresi\u00f3n en entorno Web. Se han creado y clasificado impresoras l\u00f3gicas. Se han creado grupos de impresi\u00f3n. Se han gestionado impresoras y colas de trabajos mediante comandos y herramientas gr\u00e1ficas. Se han compartido impresoras en red entre sistemas operativos diferentes. Se ha documentado la configuraci\u00f3n del servidor de impresi\u00f3n y de las impresoras creadas.","title":"Administraci\u00f3n de Servidores de Impresi\u00f3n"},{"location":"061_ServidoresImpresion.html#introduccion","text":"El proceso de impresi\u00f3n consiste b\u00e1sicamente en transmitir una serie de datos textuales, gr\u00e1ficos, im\u00e1genes, etc. desde el ordenador que las ha procesado hasta un determinado perif\u00e9rico de impresi\u00f3n. Para establecer una comunicaci\u00f3n con cualquier perif\u00e9rico hay un canal de comunicaci\u00f3n f\u00edsica, es decir una interfaz electr\u00f3nica que permita transmitir las se\u00f1ales que llevan la informaci\u00f3n. Estos canales de comunicaci\u00f3n pueden ser puertos y buses de comunicaci\u00f3n o bien una infraestructura de red . Uno de los dispositivos que se comparten m\u00e1s a menudo en una red son las impresoras ; para realizarlo es necesario implementar los siguientes puntos: Un software que se encargue de gestionar los trabajos de impresi\u00f3n , organiz\u00e1ndolos en colas, dando prioridad a algunos de ellos, poniendo portadas y haciendo que las hojas de los diferentes trabajos no se mezclen entre s\u00ed. Aqu\u00ed aparece el t\u00e9rmino \u201cCola de Impresi\u00f3n\" para referirse a la lista de trabajos que est\u00e1n a la espera de ser impresos en un dispositivo de impresi\u00f3n. Adem\u00e1s en el caso de empresas \" medianas/grandes \" se crean m\u00e1s necesidades, las cuales son cubiertas con pools o grupos de impresoras que comparten la misma cola de impresi\u00f3n y un software que env\u00eda el trabajo a la primera que queda libre. Servidor de Impresi\u00f3n En este \u00faltimo caso el \" SW \" que da soluci\u00f3n a las necesidades de impresi\u00f3n en las empresas con un alto n\u00famero de usuarios son los servidores de impresi\u00f3n . Estudiado en un sub-aparatado m\u00e1s adelante. Ejemplo Servidor de Impresi\u00f3n","title":"Introducci\u00f3n"},{"location":"061_ServidoresImpresion.html#sistemas-de-impresion","text":"Imprimir puede parecer una tarea sencilla, pero conlleva una serie de inconvenientes y necesidades que los sistemas de impresi\u00f3n actuales resuelven mediante la implementaci\u00f3n de diferentes m\u00f3dulo s: El planificador de colas de impresi\u00f3n ( spooler ) Los filtros Los controladores de interfaz o backends El primer problema surge porque la mayor\u00eda de las impresoras no tienen memoria suficiente para cargar un documento completo . Este es uno de los motivos que hacen necesario disponer de colas de impresi\u00f3n y de un sistema que las gestione ( spooler ). El gestor de la cola monitoriza la impresora y env\u00eda el siguiente trabajo en el momento en que queda libre. La ubicaci\u00f3n de las colas de impresi\u00f3n est\u00e1 determinada por la complejidad del sistema de impresi\u00f3n. Las colas pueden estar situadas: Ordenador cliente Servidor de impresi\u00f3n Un servidor proxy de archivos El siguiente problema a resolver es el gran n\u00famero de modelos de impresora disponibles en el mercado que utilizan secuencias de control diferentes, es decir que hablan lenguajes propios que requieren una traducci\u00f3n. Los filtros son las herramientas, entre el planificador y las impresora s, que hacen traducci\u00f3n entre los datos de entrada y el lenguaje que entiende la Impresora. El \u00faltimo paso de la cadena es el env\u00edo de datos al perif\u00e9rico de impresi\u00f3n mediante alguno de los canales e interfaces f\u00edsicas que se han descrito. Cada una de estas interfaces requiere un c ontrolador de dispositivo o backend que gestiona y controla el puerto de comunicaci\u00f3n f\u00edsico (USB, paralelo, RS232 ...) o bien la conexi\u00f3n de red (IPP, AppSocket, etc.) . Importante El concepto modular del controlador backend permite a\u00f1adir nuevos tipos de interfaces seg\u00fan avance la tecnolog\u00eda sin afectar al resto de la arquitectura.","title":"Sistemas de Impresi\u00f3n"},{"location":"061_ServidoresImpresion.html#tipos-de-impresoras-para-trabajo-en-red","text":"Dependiendo de c\u00f3mo est\u00e1 compartida la impresora tenemos: Local printer : Son impresoras que en principio se usan en un ordenador en concreto , que est\u00e1n conectadas a uno de sus puertos. En un momento dado se decide que van a utilizarse desde m\u00e1s equipos de la red, y se comparte. En este caso, la gesti\u00f3n de los trabajos de impresi\u00f3n y los permisos de acceso de la impresora corren a cargo del sistema operativo del equipo al que est\u00e1 conectado el dispositivo. Network printer : Estos dispositivos tienen su propia tarjeta de red, que puede ser tanto cableada como wireless por la que se conectan a esta de forma independiente de ning\u00fan equipo. Se les debe asignar una ip o bien la recoger\u00e1n del servidor DHCP de la red. Virtual printer : Para los casos en los que tenemos una o varias impresoras sin conexi\u00f3n a red, pero no queremos tener un equipo siempre encendido para poder aceptar las peticiones de impresi\u00f3n, existen unos concentradores llamados servidores de impresi\u00f3n , que permiten conectar la impresora a la red, y que permiten conectar varias impresoras haciendo pool de estas. Ejemplo Servidor de Impresi\u00f3n","title":"Tipos de impresoras para trabajo en red."},{"location":"061_ServidoresImpresion.html#puertos-y-protocolos-de-impresion","text":"En el caso de comunicar ordenadores y perif\u00e9ricos mediante una red compartida tambi\u00e9n hay que tener presente la necesidad de implementar unos protocolos de comunicaci\u00f3n adecuados para alcanzar las funcionalidades necesarias de cualquier sistema de impresi\u00f3n. Los principales protocolos ( puertos l\u00f3gicos) de comunicaci\u00f3n que se pueden utilizar en el \u00e1mbito de los sistemas de impresi\u00f3n son los siguientes: Protocolo LPD / LPR Protocolo IPP AppSocket AppleTalk SMB/ CIF Principales con sus puertos Los tres principales son: LPD (\"impresora\") en el puerto 515 , IPP en 631 , y PDL-flujo de datos en 9100 utilizado habitualmente por impresoras HP (Hewlett-Packard) .","title":"Puertos y protocolos de impresi\u00f3n"},{"location":"061_ServidoresImpresion.html#protocolo-lpd-lpr","text":"El Protocolo LPD / LPR ( line printer daemon / line printer remote protocolo ) es el protocolo originalmente implementado en la plataforma BDS Unix . Utiliza TCP /IP para establecer conexiones entre impresoras y ordenadores en una red. Este protocolo trabaja normalmente escuchando peticiones al puerto TCP 515 y consta de dos componentes: Line printer remote (LPR) es el t\u00e9rmino para el proceso cliente de env\u00edo de trabajos de impresi\u00f3n a una impresora o cola de impresi\u00f3n. La estaci\u00f3n de trabajo que env\u00eda el trabajo de impresi\u00f3n es el cliente LPR. Line printer daemon se refiere al proceso de recepci\u00f3n de trabajos de impresi\u00f3n desde un cliente LPR . Las impresoras o servidores de impresi\u00f3n que reciben los trabajos de impresi\u00f3n se llaman servidores LPD. Arquitectura LPD/LPR Cuando un usuario env\u00eda un documento para imprimir, el ordenador (LPR cliente) genera un trabajo en un determinado formato, por ejemplo, PostScript . Los datos de impresi\u00f3n se componen de un fichero de datos con el contenido real que se quiere imprimir, y un archivo de control que incluye la descripci\u00f3n del archivo de datos, nombre del trabajo, propietario, n\u00famero de copias a imprimir, cola de destino, etc. A continuaci\u00f3n, el trabajo de impresi\u00f3n se env\u00eda a la direcci\u00f3n IP del servidor LPD , que lo recibe habitualmente a trav\u00e9s del puerto TCP / IP 515 . Se pueden configurar y definir varias colas en el servidor de impresi\u00f3n LPD, por lo que el fichero de control del trabajo de impresi\u00f3n debe incluir informaci\u00f3n sobre qu\u00e9 cola debe ser asignada .","title":"Protocolo LPD / LPR"},{"location":"061_ServidoresImpresion.html#protocolo-ipp","text":"El protocolo de impresi\u00f3n por Internet ( IPP o Internet printing protocolo ) define extensiones del conocido protocolo HTTP ( Hyper Text transporte protocolo ) para apoyar los servicios de impresi\u00f3n remotos, configuraci\u00f3n de impresoras y gesti\u00f3n de colas. A diferencia de otros protocolos, IPP permite control de acceso, autenticaci\u00f3n y cifrado para dar soluciones de impresi\u00f3n m\u00e1s completas y seguras. Es el protocolo usado de forma nativa para CUPS y suele utilizar el puerto 631 . Arquitectura IPP Entre las funciones de este protocolo destacan: Este protocolo gestiona los trabajos que se lanzan para imprimir , el tama\u00f1o del medio, la resoluci\u00f3n, etc. Como todos los protocolos basados en IP, puede ser usado localmente o sobre Internet para comunicarse con impresoras locales o remotas. A diferencia de otros protocolos, tambi\u00e9n soporta el control de acceso, la autenticaci\u00f3n y el cifrado , siendo as\u00ed una soluci\u00f3n de impresi\u00f3n m\u00e1s capaz y segura que otras m\u00e1s antiguas. Por contra, recibe cr\u00edticas por la sobrecarga del protocolo, al estar construido sobre HTTP. Esto lo convierte en un protocolo y una realizaci\u00f3n m\u00e1s complejos y recargados de lo necesario.","title":"Protocolo IPP"},{"location":"061_ServidoresImpresion.html#appsocket","text":"Este protocolo est\u00e1 basado en el protocolo Jetdirect de HewlettPackard . Suele trabajar en el puerto 9100 y se considera muy fiable, sencillo y r\u00e1pido.","title":"AppSocket"},{"location":"061_ServidoresImpresion.html#appletalk","text":"Es un conjunto de protocolos de comunicaci\u00f3n de Apple que permite, entre otras cosas, la comunicaci\u00f3n con impresoras y servidores de impresi\u00f3n.","title":"AppleTalk"},{"location":"061_ServidoresImpresion.html#smb-cifs","text":"El servidor de bloques de mensajes ( server message block ) y su evoluci\u00f3n, el sistema de archivos com\u00fan de internet ( common Internet file system ), son protocolos de red de la capa de aplicaci\u00f3n del modelo OSI que permiten gestionar y compartir archivos e impresoras entre nodos de una red. SMB utiliza el puerto TCP 445 y fue ideado por IBM , pero modificado y perfeccionado por Microsoft, que lo utiliza en sus sistemas operativos Windows. Tambi\u00e9n hay implementaciones del protocolo en c\u00f3digo libre para sistemas Linux. Samba Es la m\u00e1s popular implementaci\u00f3n en c\u00f3digo libre del protocolo SMB / CIFS (entre otros) y permite la compartici\u00f3n de archivos e impresoras en redes heterog\u00e9neas.","title":"SMB/ CIFS"},{"location":"061_ServidoresImpresion.html#ordenes-para-la-gestion-de-impresoras-y-trabajos","text":"","title":"\u00d3rdenes para la gesti\u00f3n de impresoras y trabajos"},{"location":"061_ServidoresImpresion.html#windows","text":"Debemos saber que la cola de impresi\u00f3n, en un equipo local, se encuentra en %systemroot%\\system32\\spool\\printers . Nota Depende de actualizaci\u00f3n de las \u00faltimas versiones Tenemos, por un lado, el comando lpq . Si utilizamos la ayuda del comando ( lpq /? ) obtendr\u00edamos algo similar a: C:\\Documents and Settings\\Usuario>lpq /? Muestra el estado de una cola lpd remota. Uso : lpq -Sservidor -Pimpresora [-l] Opciones : -S servidor Nombre o direcci\u00f3n IP del host que proporciona servicio lpd. -P impresora Nombre de la cola de impresi\u00f3n. -l Salida detallada. Por otro lado se destaca el comando net ; utilizado para gestionar las colas de impresi\u00f3n. net stop spooler : parar\u00e1 el servicio de cola de impresi\u00f3n. net start spooler : arrancar\u00e1 el servicio de cola impresi\u00f3n. Se puede utilizar el comando net con el par\u00e1metro use podr\u00edamos obteniendo una salida como la siguiente: C:\\Documents and Settings\\administrador>net use \\\\Win-qni8olz3ihl\\PDFCreator Se ha completado el comando correctamente. C:\\Documents and Settings\\administrador>net use \\\\Win-qni8olz3ihl\\PDFCreator Nombre local Nombre remoto \\\\Win-qni8olz3ihl\\PDFCreator Tipo de recurso Impresora Estado Conectado Abiertos 0 N\u00ba de conexiones 1 Aclaraci\u00f3n El par\u00e1metro de entrada, se tiene una impresora, la aplicaci\u00f3n PDFCreator , en el servidor Win-qni8olz3ihl compartida para todos los usuarios del dominio)","title":"Windows"},{"location":"061_ServidoresImpresion.html#linux","text":"El trabajo de impresi\u00f3n en Linux se ha realizado hist\u00f3ricamente usando uno de estos dos sistemas de gesti\u00f3n de impresi\u00f3n: el sistema de impresi\u00f3n de AT&T (Unix System V) y el demonio de impresoras en l\u00ednea ( LPD) de Berkeley. Estos sistemas estuvieron dise\u00f1ados en los a\u00f1os 70 con el \u00fanico prop\u00f3sito de imprimir texto en impresoras de caracteres. Por este motivo han aparecido nuevas opciones con m\u00e1s prestaciones, como LPRng o el sistema CUPS , aunque se ha intentado siempre conservar la compatibilidad y sintaxis de las \u00f3rdenes de consola originales. /etc/pintcap Este es el archivo de configuraci\u00f3n del sistema de impresi\u00f3n lpd que contiene el registro y definici\u00f3n de todas las impresoras del sistema, indicando el alias, nombre del dispositivo, el directorio de la cola de trabajos, filtros, etc. Los principales sistemas de impresi\u00f3n Linux: LPD , sistema de impresi\u00f3n Berkeley: este es el tradicional gestor de impresi\u00f3n de Unix de la plataforma Unix BSD. Es controlado por el demonio de impresoras de l\u00ednea ( line printer daemon ) situado en /usr/sbin/lpd y utiliza el protocolo LPD/LPR . Los clientes se comunican con el demonio mediante el dispositivo /dev/printer y utilizan el archivo de configuraci\u00f3n /etc/printcap para determinar el directorio de la cola de trabajos de impresi\u00f3n. LPRng : LPR es una implementaci\u00f3n en c\u00f3digo libre que mejora el sistema de impresi\u00f3n BDS pero manteniendo la compatibilidad, ya que tambi\u00e9n utiliza el demonio LPD. Incluye nuevas funcionalidades en el control de la cola detrabajos y las funciones de servidores de impresi\u00f3n en red . CUPS : el sistema de impresi\u00f3n com\u00fan de Unix es un potente y completo gestor de impresi\u00f3n basado en el protocolo IPP (Internet printing protocolo) e integrando PostScript como el lenguaje de definici\u00f3n de p\u00e1ginas est\u00e1ndar. NOTA La mayor\u00eda de distribuciones Linux ya incorpora CUPS como sistema de impresi\u00f3n por defecto. En GNU/Linux tenemos una serie de comandos u \u00f3rdenes que nos permiten interactuar con la impresora o bien con la cola de impresi\u00f3n. Ejemplos: lpr texto : a\u00f1ade el documento texto a la cola de impresi\u00f3n por defecto. El comando lp hace exactamente lo mismo que el comando lpr. Lpq : mostrar\u00e1 todos los trabajos que est\u00e1n en la cola de impresi\u00f3n. Lprm : cancela todos los trabajos en la cola de impresi\u00f3n. Si indicamos el n\u00famero de trabajo, s\u00f3lo cancelar\u00e1 ese trabajo. Obtendremos el mismo resultado con el comando cancel . lpstat \u2013t : obtiene toda la informaci\u00f3n de las impresoras y sus estados. El comando lpadmin nos permitir\u00e1 administrar una determinada impresora.","title":"Linux"},{"location":"061_ServidoresImpresion.html#servidores-de-impresion","text":"Un servidor de impresi\u00f3n es un software que permite que los PCs de una red local puedan hacer uso de las impresoras de la red de una forma eficaz, ya que centraliza las tareas de impresi\u00f3n, facilitando una gesti\u00f3n de las mismas. Los objetivos de los servidores de impresi\u00f3n son: Compartir todas sus impresoras desde un \u00fanico servidor centralizado, ya sean de red o no. Controlar las impresiones por usuario, grupos de trabajo, departamentos, etc. Realizar cobros por impresi\u00f3n (por trabajos, p\u00e1ginas, etc). Implementar quotas (por trabajos, p\u00e1ginas, etc). Utilizar dichas impresoras desde cualquier dispositivo disponible en su red (Windows, Linux, Mac, celulares, etc)","title":"Servidores de Impresi\u00f3n"},{"location":"062_ServidoresImpresionLinux.html","text":"Servidor de impresi\u00f3n en GNU/Linux \u00b6 Introducci\u00f3n \u00b6 En GNU/Linux tenemos dos maneras de compartir los recursos de impresi\u00f3n: A trav\u00e9s del servicio Samba A trav\u00e9s del servicio CUPS Samba es una implementaci\u00f3n libre del protocolo de archivos compartidos de Microsoft Windows (SMB/CIFS) para sistemas de tipo UNIX. De esta forma, es posible que ordenadores con GNU/Linux, Mac OS X o Unix, en general se vean como servidores, o act\u00faen como clientes en redes de Windows. Es decir, entre clientes Windows aparece como otro equipo Windows sin serlo. Este servicio se estudiar\u00e1 m\u00e1s en detalle en la siguiente unidad. A continuaci\u00f3n se estudiar\u00e1 el servicio de CUPS. CUPS \u00b6 Common Unix Printing System Es un sistema de impresi\u00f3n modular para sistemas operativos de tipo Unix, como GNU/Linux y Mac OS X, que permite que un ordenador act\u00fae como servidor de impresi\u00f3n. Fue desarrollado por Easy Software Products y liberado como software libre con licencia GNU / GPL . Caracter\u00edsticas: Utiliza el protocolo IPP (Internet Printing Protocol) sobre HTTP/1.1 como base para el manejo de tareas de impresi\u00f3n y de colas de impresi\u00f3n. Por otra parte funciona con LPD/LPR para proporcionar acceso a clientes Linux, Windows y Mac OS. Tambi\u00e9n prove\u00e9 de comandos tradicionales en l\u00ednea de impresi\u00f3n de los sistemas Unix. Para configurar el servidor CUPS debemos modificar, principalmente, el archivo cups.conf . Este archivo se encuentra en el directorio /etc/cups en muchos casos. Panel de control de CUPS NOTA En la imagen anterior se puede observar el panel de control de CUPS. Un panel al que se accede a trav\u00e9s de un navegador web. Es decir, se puede administrar de forma remota. Funcionamiento del sistema CUPS \u00b6 De manera similar a otros sistemas de impresi\u00f3n, CUPS est\u00e1 dise\u00f1ado en torno a un proceso de planificaci\u00f3n de impresi\u00f3n ( scheduler ) que distribuye los trabajos de impresi\u00f3n, procesa las \u00f3rdenes administrativas y proporciona informaci\u00f3n y monitorizaci\u00f3n del estado de las impresoras y los trabajos. Este proceso corresponde al demonio llamado cupsd , que se suele cargar en el arranque del sistema trabajando en segundo plano y al que haremos referencia como planificador. Destacan las siguientes funciones: El planificador o scheduler gestiona las peticiones que llegan siguiendo el protocolo IPP . Estos trabajos pueden provenir del ordenador local o bien de clientes en red de varias plataformas (Linux, Windows, Mac OS ) y generan dos archivos, uno con los datos propiamente dichos , y un archivo de control con informaci\u00f3n sobre el trabajo de impresi\u00f3n . Estos archivos se guardan en el directorio /var/spool/cups Los trabajos de impresi\u00f3n pueden incorporar texto, gr\u00e1ficos e im\u00e1genes vectoriales o de mapa de bits. Estos tipos de datos son reconocidos utilizando las entradas del archivo: /etc/cups/mime.types o bien en: /var/share/cups/mime/mime.types Para describir estos elementos anteriores, CUPS utiliza de forma est\u00e1ndar el lenguaje de programaci\u00f3n de gr\u00e1ficos PostScript desarrollado por Adobe. Los filtros de conversi\u00f3n en funci\u00f3n del tipo de datos est\u00e1n determinados en el archivo: /etc/cups/mime.convs o bien en: /var/share/cups/mime/mime.convs El planificador gestiona las impresoras disponibles en la red local y env\u00eda los trabajos de impresi\u00f3n utilizando los filtros y controladores de interfaz (backends) apropiados, que est\u00e1n situados en: $ ls /usr/lib/cups/backend Las impresoras compatibles con PostScrip t pueden interpretar directamente los datos recibidos del planificador sin necesitar un filtro espec\u00edfico. En el caso de impresoras que no sean PostScript hay que hacer la traducci\u00f3n al lenguaje objetivo de la impresora mediante los filtros suministrados o con otras aplicaciones como Ghostscript , software tambi\u00e9n de c\u00f3digo libre. NOTA Ghostscript es un programa int\u00e9rprete de archivos PS (PostScript) y PDF ( portable document format ) que permite representarlos en pantalla y traducirlos de manera que puedan ser impresos en una impresora con capacidad gr\u00e1fica. Una vez que el trabajo ha sido transferido a la impresora, el planificador borra el archivo de datos de la cola en /var/spool/cups , pero deja el archivo de control, donde quedan numerados correlativamente (desde el primero, /var/spool/cups/c00001 ) Otras caracter\u00edsticas adicionales proporcionadas por CUPS son: Servicio de directorio : llamado examinador de impresoras ( printer browsing ). Los clientes pueden encontrar autom\u00e1ticamente y utilizar impresoras de cualquier servidor de la red. Si esta funci\u00f3n est\u00e1 activada, el servidor distribuye por la red la informaci\u00f3n de las impresoras disponibles mediante mensajes de difusi\u00f3n general ( broadcasting ) cada poco tiempo. Clases : CUPS tambi\u00e9n permite definir clases, que son grupos de impresoras de similares caracter\u00edsticas. Los trabajos de impresi\u00f3n enviados a una clase son redirigidos a la primera impresora disponible de aquella clase. Este esquema tambi\u00e9n permite habilitar seguridad y reparto de cargas definiendo la misma impresora en varios servidores. Soporte clientes LPD: usando un minidemonio ( cups-lpd) que atiende todas las tareas de impresi\u00f3n recibidas por LPD y las redirige al subsistema CUPS convirti\u00e9ndolas en protocolo IPP . Administraci\u00f3n web : este servidor tambi\u00e9n act\u00faa como servidor web para la documentaci\u00f3n, motorizaci\u00f3n de estado y administraci\u00f3n del sistema Impresi\u00f3n desde l\u00ednea de comandos : CUPS entiende directamente muchos tipos diferentes de archivos, incluyendo texto, PostScript, PDF y archivos de imagen. Esto le permite imprimir este archivos desde las aplicaciones de usuario o directamente desde la l\u00ednea de comandos. \u00d3rdenes de consola para la gesti\u00f3n de impresi\u00f3n y trabajos \u00b6 CUPS proporciona compatibilidad y emula las \u00f3rdenes de consola tradicionales de las principales plataformas Unix (Unix Berkeley BDS y Unix System V). NOTA Hay que remarcar que CUPS s\u00f3lo proporciona compatibilidad con la orden lpc de administraci\u00f3n de Unix BDS en modo de lectura. As\u00ed, pues, para la administraci\u00f3n por l\u00ednea de comandos, es m\u00e1s habitual utilizar la orden lpadmin de System V. A continuaci\u00f3n se comentan las principales tareas administrativas de control de impresi\u00f3n utilizando comandos de consola. \u00d3rdenes relacionadas con la generaci\u00f3n de trabajos de impresi\u00f3n : Imprimir un archivo en la impresora por defecto del sistema: $ lp nomArchivo $ lpr nomArchivo Imprimir un archivo en una impresora espec\u00edfica: $ lp d nomImpresora \u2010 nomArchivo $ lpr \u2010P nomImpresora nomArchivo Impresi\u00f3n de la salida de un programa: Las \u00f3rdenes lp y lpr aceptan tuber\u00edas para imprimir la salida est\u00e1ndar de cualquier otra orden o programa: $ programa | lp $ programa | lpr \u00d3rdenes relacionadas con el listado de impresoras disponibles : Muchos sistemas tienen m\u00e1s de una impresora a disposici\u00f3n del usuario. Para obtener un listado de las impresoras y clases disponibles: $ lpstat \u2010p printer ClasseBN disabled since mar 31gen2015 18 : 57 : 57 CET printer hp9040DN is idle. enabled since dt 31gen2015 18 : 23 : 36 CET printer PDF is idle. enabled since dt 31gen2015 01 : 47 : 33 CE Alternativamente se puede usar la orden lpc : $ lpc status Asignar impresora predeterminada para definir cu\u00e1l es la impresora que recibir\u00e1 los trabajos por defecto: $ lpoptions \u2010d nomImpressora \u00d3rdenes relacionadas con la administraci\u00f3n de trabajos de impresi\u00f3n: Para eliminar un trabajo de impresi\u00f3n pendiente en la cola. $ cancel id_trabajo $ lprm id_trabajo Cancelar todos los trabajos de un usuario determinado: $ cancel \u2010u nomusuario $ lprm nomusuario Traslado de un trabajo de impresi\u00f3n. Con esta orden se mueve un trabajo de impresi\u00f3n a otra impresora o clase de impresoras. $ lpmove id_trabajo nomImpressora Podemos obtener el identificador de un trabajo (id_trabajo) con las \u00f3rdenes $ lpq $ lpstat Imprimir varias copias. Tanto el orden lp como el lpr tienen opciones para la impresi\u00f3n de m\u00e1s de una copia de un archivo: $ lp \u2010n num_copias nomArchivo $ lpr \u2010 # num_copias nomArchivo \u00d3rdenes relacionadas con la gesti\u00f3n de las clases de impresora: A\u00f1adir una impresora a una clase. En este ejemplo a\u00f1adimos la impresora HP9040 en la clase de impresoras en blanco y negro: $ lpadmin \u2010p hp9040 \u2010c ClasseBN Retirar una impresora de una clase. En este caso eliminamos la impresora virtual PDF de la clase de impresoras en color. $ lpadmin \u2010p PDF \u2010r ClasseColor NOTA Si la clase no existe se crea autom\u00e1ticamente al a\u00f1adir la primera impresora. Si la clase queda vac\u00eda se borra. Se pueden comprobar las clases existentes en el archivo /etc/cups/classe.conf . \u00d3rdenes relacionadas con el control de acceso de usuarios : Para determinar el control de acceso de los usuarios a una determinada impresora se utiliza la orden lpadmin con la opci\u00f3n -u y a continuaci\u00f3n las listas de usuarios con permiso ( allow ) o sin permiso ( deny ). $ lpadmin p hp9040DN \u2010 \u2010u allow : pepe,juan En las listas se puede utilizar la expresi\u00f3n all (todos) y none (nadie). En el siguiente ejemplo se permite el acceso a la impresora HP9040DN a todo el mundo menos a los usuarios Pepe y Juan. $ lpadmin \u2010p hp9040DN \u2010u allow:all deny : pepe, juan La configuraci\u00f3n por defecto de la impresora puede ser suficiente en la mayor\u00eda de ocasiones. Si hay que cambiar alguna opci\u00f3n al imprimir un determinado archivo podemos utilizar la opci\u00f3n -o de las \u00f3rdenes lp y lpr , tal como se muestra en este ejemplo donde indicamos orientaci\u00f3n de papel, escala y tama\u00f1o del papel: lp \u2010o landscape \u2010o scaling = 80 \u2010o media = A4 nomArchivo.jpg lpr \u2010o landscape \u2010o scaling = 70 \u2010o media = A3 nomArchivo.pdf NOTA Todas las opciones anteriores se aplican a un trabajo de impresi\u00f3n determinado. Si queremos que una impresora quede permanentemente configurada con una opci\u00f3n determinada debemos usar la orden lpoptions con la siguiente sintaxis: $ lpoptions \u2010p NomImpresora \u2010o NomOpcio = ValorOpcion As\u00ed, en el ejemplo siguiente se deja como predeterminda el tama\u00f1o de la p\u00e1gina por defecto de la impresora HP9040: $ lpoptions p hp9040 \u2010 \u2010o PageSize = Letter Sin embargo, este cambio puede tener efecto para un conjunto de usuarios diferente seg\u00fan quien ha hecho la orden: Si la orden ha sido hecha por un usuario normal, esta configuraci\u00f3n se guarda en el archivo personal ~ / .lpoptions y s\u00f3lo afecta a los trabajos de impresi\u00f3n de este usuario. Si la orden la ha efectuado un usuario administrador, esta configuraci\u00f3n se guarda en el archivo /etc/cups/lpoptions y afecta a todos los usuarios de la m\u00e1quina. Si la impresora es compartida y queremos que esta configuraci\u00f3n afecte a los trabajos que env\u00eden a la cola todos los clientes de la red, ser\u00e1 necesario cambiar la configuraci\u00f3n por defecto del archivo PPD correspondiente mediante la orden lpadmin y la misma sintaxis: $ lpadmin \u2010p hp9040 \u2010o PageSize = Letter Para borrar un cambio de opciones predeterminadas hecho con lpoptions se utiliza la misma sintaxis pero con la opci\u00f3n -r (remove) $ lpoptions \u2010p hp9040 \u2010r PageSize = Letter Finalmente, si queremos visualizar la configuraci\u00f3n completa de una impresora determinada, por ejemplo: $ lpoptions p hp9040DN -l PageSize / Page Size : Custom.WIDTHxHEIGHT 11x14 11x17 13x19 16x20 16x24 2A 4A 8x10 8x12 A0 A1 A2 A3 * A4 A5 ansias AnsiB AnsiC AnsiD AnsiE Arch ArchB ArchC ArchD Arche C0 C1 C2 C3 C4 C5 Env10 EnvC5 EnvDL EnvMonarch Executive ISO B0 ISOB1 ISOB2 ISOB3 ISOB4 ISOB5 JISB0 JISB1 JISB2 JISB3 JISB4 JISB5 Ledger Legal Letter RA0 RA1 RA2 RA3 RA4 SRA0 SRA1 SRA2 SRA3 SRA4 Super soberbio Tab loidExtra Tabloid Resolution / Output Resolution : 150dpi * 300dpi 600dpi 1200dpi 2400dpi NOTA El s\u00edmbolo * indica el valor activo en este momento, en este ejemplo: tama\u00f1o A4 y resoluci\u00f3n de 300 dpi. PARA SABER M\u00c1S Wiki CUPS Command-Line Printing and Options CUPS Actividades de desarrollo UD6_01 \u00b6 Instalaci\u00f3n y configuraci\u00f3n de CUPS","title":"6.2- Servidor de impresi\u00f3n en GNU/Linux"},{"location":"062_ServidoresImpresionLinux.html#servidor-de-impresion-en-gnulinux","text":"","title":"Servidor de impresi\u00f3n en GNU/Linux"},{"location":"062_ServidoresImpresionLinux.html#introduccion","text":"En GNU/Linux tenemos dos maneras de compartir los recursos de impresi\u00f3n: A trav\u00e9s del servicio Samba A trav\u00e9s del servicio CUPS Samba es una implementaci\u00f3n libre del protocolo de archivos compartidos de Microsoft Windows (SMB/CIFS) para sistemas de tipo UNIX. De esta forma, es posible que ordenadores con GNU/Linux, Mac OS X o Unix, en general se vean como servidores, o act\u00faen como clientes en redes de Windows. Es decir, entre clientes Windows aparece como otro equipo Windows sin serlo. Este servicio se estudiar\u00e1 m\u00e1s en detalle en la siguiente unidad. A continuaci\u00f3n se estudiar\u00e1 el servicio de CUPS.","title":"Introducci\u00f3n"},{"location":"062_ServidoresImpresionLinux.html#cups","text":"Common Unix Printing System Es un sistema de impresi\u00f3n modular para sistemas operativos de tipo Unix, como GNU/Linux y Mac OS X, que permite que un ordenador act\u00fae como servidor de impresi\u00f3n. Fue desarrollado por Easy Software Products y liberado como software libre con licencia GNU / GPL . Caracter\u00edsticas: Utiliza el protocolo IPP (Internet Printing Protocol) sobre HTTP/1.1 como base para el manejo de tareas de impresi\u00f3n y de colas de impresi\u00f3n. Por otra parte funciona con LPD/LPR para proporcionar acceso a clientes Linux, Windows y Mac OS. Tambi\u00e9n prove\u00e9 de comandos tradicionales en l\u00ednea de impresi\u00f3n de los sistemas Unix. Para configurar el servidor CUPS debemos modificar, principalmente, el archivo cups.conf . Este archivo se encuentra en el directorio /etc/cups en muchos casos. Panel de control de CUPS NOTA En la imagen anterior se puede observar el panel de control de CUPS. Un panel al que se accede a trav\u00e9s de un navegador web. Es decir, se puede administrar de forma remota.","title":"CUPS"},{"location":"062_ServidoresImpresionLinux.html#funcionamiento-del-sistema-cups","text":"De manera similar a otros sistemas de impresi\u00f3n, CUPS est\u00e1 dise\u00f1ado en torno a un proceso de planificaci\u00f3n de impresi\u00f3n ( scheduler ) que distribuye los trabajos de impresi\u00f3n, procesa las \u00f3rdenes administrativas y proporciona informaci\u00f3n y monitorizaci\u00f3n del estado de las impresoras y los trabajos. Este proceso corresponde al demonio llamado cupsd , que se suele cargar en el arranque del sistema trabajando en segundo plano y al que haremos referencia como planificador. Destacan las siguientes funciones: El planificador o scheduler gestiona las peticiones que llegan siguiendo el protocolo IPP . Estos trabajos pueden provenir del ordenador local o bien de clientes en red de varias plataformas (Linux, Windows, Mac OS ) y generan dos archivos, uno con los datos propiamente dichos , y un archivo de control con informaci\u00f3n sobre el trabajo de impresi\u00f3n . Estos archivos se guardan en el directorio /var/spool/cups Los trabajos de impresi\u00f3n pueden incorporar texto, gr\u00e1ficos e im\u00e1genes vectoriales o de mapa de bits. Estos tipos de datos son reconocidos utilizando las entradas del archivo: /etc/cups/mime.types o bien en: /var/share/cups/mime/mime.types Para describir estos elementos anteriores, CUPS utiliza de forma est\u00e1ndar el lenguaje de programaci\u00f3n de gr\u00e1ficos PostScript desarrollado por Adobe. Los filtros de conversi\u00f3n en funci\u00f3n del tipo de datos est\u00e1n determinados en el archivo: /etc/cups/mime.convs o bien en: /var/share/cups/mime/mime.convs El planificador gestiona las impresoras disponibles en la red local y env\u00eda los trabajos de impresi\u00f3n utilizando los filtros y controladores de interfaz (backends) apropiados, que est\u00e1n situados en: $ ls /usr/lib/cups/backend Las impresoras compatibles con PostScrip t pueden interpretar directamente los datos recibidos del planificador sin necesitar un filtro espec\u00edfico. En el caso de impresoras que no sean PostScript hay que hacer la traducci\u00f3n al lenguaje objetivo de la impresora mediante los filtros suministrados o con otras aplicaciones como Ghostscript , software tambi\u00e9n de c\u00f3digo libre. NOTA Ghostscript es un programa int\u00e9rprete de archivos PS (PostScript) y PDF ( portable document format ) que permite representarlos en pantalla y traducirlos de manera que puedan ser impresos en una impresora con capacidad gr\u00e1fica. Una vez que el trabajo ha sido transferido a la impresora, el planificador borra el archivo de datos de la cola en /var/spool/cups , pero deja el archivo de control, donde quedan numerados correlativamente (desde el primero, /var/spool/cups/c00001 ) Otras caracter\u00edsticas adicionales proporcionadas por CUPS son: Servicio de directorio : llamado examinador de impresoras ( printer browsing ). Los clientes pueden encontrar autom\u00e1ticamente y utilizar impresoras de cualquier servidor de la red. Si esta funci\u00f3n est\u00e1 activada, el servidor distribuye por la red la informaci\u00f3n de las impresoras disponibles mediante mensajes de difusi\u00f3n general ( broadcasting ) cada poco tiempo. Clases : CUPS tambi\u00e9n permite definir clases, que son grupos de impresoras de similares caracter\u00edsticas. Los trabajos de impresi\u00f3n enviados a una clase son redirigidos a la primera impresora disponible de aquella clase. Este esquema tambi\u00e9n permite habilitar seguridad y reparto de cargas definiendo la misma impresora en varios servidores. Soporte clientes LPD: usando un minidemonio ( cups-lpd) que atiende todas las tareas de impresi\u00f3n recibidas por LPD y las redirige al subsistema CUPS convirti\u00e9ndolas en protocolo IPP . Administraci\u00f3n web : este servidor tambi\u00e9n act\u00faa como servidor web para la documentaci\u00f3n, motorizaci\u00f3n de estado y administraci\u00f3n del sistema Impresi\u00f3n desde l\u00ednea de comandos : CUPS entiende directamente muchos tipos diferentes de archivos, incluyendo texto, PostScript, PDF y archivos de imagen. Esto le permite imprimir este archivos desde las aplicaciones de usuario o directamente desde la l\u00ednea de comandos.","title":"Funcionamiento del sistema CUPS"},{"location":"062_ServidoresImpresionLinux.html#ordenes-de-consola-para-la-gestion-de-impresion-y-trabajos","text":"CUPS proporciona compatibilidad y emula las \u00f3rdenes de consola tradicionales de las principales plataformas Unix (Unix Berkeley BDS y Unix System V). NOTA Hay que remarcar que CUPS s\u00f3lo proporciona compatibilidad con la orden lpc de administraci\u00f3n de Unix BDS en modo de lectura. As\u00ed, pues, para la administraci\u00f3n por l\u00ednea de comandos, es m\u00e1s habitual utilizar la orden lpadmin de System V. A continuaci\u00f3n se comentan las principales tareas administrativas de control de impresi\u00f3n utilizando comandos de consola. \u00d3rdenes relacionadas con la generaci\u00f3n de trabajos de impresi\u00f3n : Imprimir un archivo en la impresora por defecto del sistema: $ lp nomArchivo $ lpr nomArchivo Imprimir un archivo en una impresora espec\u00edfica: $ lp d nomImpresora \u2010 nomArchivo $ lpr \u2010P nomImpresora nomArchivo Impresi\u00f3n de la salida de un programa: Las \u00f3rdenes lp y lpr aceptan tuber\u00edas para imprimir la salida est\u00e1ndar de cualquier otra orden o programa: $ programa | lp $ programa | lpr \u00d3rdenes relacionadas con el listado de impresoras disponibles : Muchos sistemas tienen m\u00e1s de una impresora a disposici\u00f3n del usuario. Para obtener un listado de las impresoras y clases disponibles: $ lpstat \u2010p printer ClasseBN disabled since mar 31gen2015 18 : 57 : 57 CET printer hp9040DN is idle. enabled since dt 31gen2015 18 : 23 : 36 CET printer PDF is idle. enabled since dt 31gen2015 01 : 47 : 33 CE Alternativamente se puede usar la orden lpc : $ lpc status Asignar impresora predeterminada para definir cu\u00e1l es la impresora que recibir\u00e1 los trabajos por defecto: $ lpoptions \u2010d nomImpressora \u00d3rdenes relacionadas con la administraci\u00f3n de trabajos de impresi\u00f3n: Para eliminar un trabajo de impresi\u00f3n pendiente en la cola. $ cancel id_trabajo $ lprm id_trabajo Cancelar todos los trabajos de un usuario determinado: $ cancel \u2010u nomusuario $ lprm nomusuario Traslado de un trabajo de impresi\u00f3n. Con esta orden se mueve un trabajo de impresi\u00f3n a otra impresora o clase de impresoras. $ lpmove id_trabajo nomImpressora Podemos obtener el identificador de un trabajo (id_trabajo) con las \u00f3rdenes $ lpq $ lpstat Imprimir varias copias. Tanto el orden lp como el lpr tienen opciones para la impresi\u00f3n de m\u00e1s de una copia de un archivo: $ lp \u2010n num_copias nomArchivo $ lpr \u2010 # num_copias nomArchivo \u00d3rdenes relacionadas con la gesti\u00f3n de las clases de impresora: A\u00f1adir una impresora a una clase. En este ejemplo a\u00f1adimos la impresora HP9040 en la clase de impresoras en blanco y negro: $ lpadmin \u2010p hp9040 \u2010c ClasseBN Retirar una impresora de una clase. En este caso eliminamos la impresora virtual PDF de la clase de impresoras en color. $ lpadmin \u2010p PDF \u2010r ClasseColor NOTA Si la clase no existe se crea autom\u00e1ticamente al a\u00f1adir la primera impresora. Si la clase queda vac\u00eda se borra. Se pueden comprobar las clases existentes en el archivo /etc/cups/classe.conf . \u00d3rdenes relacionadas con el control de acceso de usuarios : Para determinar el control de acceso de los usuarios a una determinada impresora se utiliza la orden lpadmin con la opci\u00f3n -u y a continuaci\u00f3n las listas de usuarios con permiso ( allow ) o sin permiso ( deny ). $ lpadmin p hp9040DN \u2010 \u2010u allow : pepe,juan En las listas se puede utilizar la expresi\u00f3n all (todos) y none (nadie). En el siguiente ejemplo se permite el acceso a la impresora HP9040DN a todo el mundo menos a los usuarios Pepe y Juan. $ lpadmin \u2010p hp9040DN \u2010u allow:all deny : pepe, juan La configuraci\u00f3n por defecto de la impresora puede ser suficiente en la mayor\u00eda de ocasiones. Si hay que cambiar alguna opci\u00f3n al imprimir un determinado archivo podemos utilizar la opci\u00f3n -o de las \u00f3rdenes lp y lpr , tal como se muestra en este ejemplo donde indicamos orientaci\u00f3n de papel, escala y tama\u00f1o del papel: lp \u2010o landscape \u2010o scaling = 80 \u2010o media = A4 nomArchivo.jpg lpr \u2010o landscape \u2010o scaling = 70 \u2010o media = A3 nomArchivo.pdf NOTA Todas las opciones anteriores se aplican a un trabajo de impresi\u00f3n determinado. Si queremos que una impresora quede permanentemente configurada con una opci\u00f3n determinada debemos usar la orden lpoptions con la siguiente sintaxis: $ lpoptions \u2010p NomImpresora \u2010o NomOpcio = ValorOpcion As\u00ed, en el ejemplo siguiente se deja como predeterminda el tama\u00f1o de la p\u00e1gina por defecto de la impresora HP9040: $ lpoptions p hp9040 \u2010 \u2010o PageSize = Letter Sin embargo, este cambio puede tener efecto para un conjunto de usuarios diferente seg\u00fan quien ha hecho la orden: Si la orden ha sido hecha por un usuario normal, esta configuraci\u00f3n se guarda en el archivo personal ~ / .lpoptions y s\u00f3lo afecta a los trabajos de impresi\u00f3n de este usuario. Si la orden la ha efectuado un usuario administrador, esta configuraci\u00f3n se guarda en el archivo /etc/cups/lpoptions y afecta a todos los usuarios de la m\u00e1quina. Si la impresora es compartida y queremos que esta configuraci\u00f3n afecte a los trabajos que env\u00eden a la cola todos los clientes de la red, ser\u00e1 necesario cambiar la configuraci\u00f3n por defecto del archivo PPD correspondiente mediante la orden lpadmin y la misma sintaxis: $ lpadmin \u2010p hp9040 \u2010o PageSize = Letter Para borrar un cambio de opciones predeterminadas hecho con lpoptions se utiliza la misma sintaxis pero con la opci\u00f3n -r (remove) $ lpoptions \u2010p hp9040 \u2010r PageSize = Letter Finalmente, si queremos visualizar la configuraci\u00f3n completa de una impresora determinada, por ejemplo: $ lpoptions p hp9040DN -l PageSize / Page Size : Custom.WIDTHxHEIGHT 11x14 11x17 13x19 16x20 16x24 2A 4A 8x10 8x12 A0 A1 A2 A3 * A4 A5 ansias AnsiB AnsiC AnsiD AnsiE Arch ArchB ArchC ArchD Arche C0 C1 C2 C3 C4 C5 Env10 EnvC5 EnvDL EnvMonarch Executive ISO B0 ISOB1 ISOB2 ISOB3 ISOB4 ISOB5 JISB0 JISB1 JISB2 JISB3 JISB4 JISB5 Ledger Legal Letter RA0 RA1 RA2 RA3 RA4 SRA0 SRA1 SRA2 SRA3 SRA4 Super soberbio Tab loidExtra Tabloid Resolution / Output Resolution : 150dpi * 300dpi 600dpi 1200dpi 2400dpi NOTA El s\u00edmbolo * indica el valor activo en este momento, en este ejemplo: tama\u00f1o A4 y resoluci\u00f3n de 300 dpi. PARA SABER M\u00c1S Wiki CUPS Command-Line Printing and Options CUPS","title":"\u00d3rdenes de consola para la gesti\u00f3n de impresi\u00f3n y trabajos"},{"location":"062_ServidoresImpresionLinux.html#actividades-de-desarrollo-ud6_01","text":"Instalaci\u00f3n y configuraci\u00f3n de CUPS","title":"Actividades de desarrollo UD6_01"},{"location":"063_ServidorImpresionWindowsServer.html","text":"Administraci\u00f3n de los Servicios de Impresi\u00f3n en Windows Server \u00b6 El objetivo final del servicio de impresi\u00f3n es proporcionar la capacidad de impresi\u00f3n a los usuarios de la red. Como se ha vista en el subaparatdo anterior. Existen diferentes maneras de compartir en red un dispositivo f\u00edsico de impresi\u00f3n. La m\u00e1s com\u00fan en entornos corporativos es la instalaci\u00f3n de una impresora f\u00edsica que soporta el direccionamiento IP y puede ser conectada directamente a la LAN a trav\u00e9s de un switch o un hub: Esquema de red habitual Instalaci\u00f3n de los Servicios de Impresi\u00f3n \u00b6 Como hemos visto en el punto anterior, la manera m\u00e1s habitual de conexi\u00f3n de impresoras en organizaciones de tama\u00f1o medio y grande consiste en conectar la impresora directamente a la red a trav\u00e9s de un switch. Vamos a implantar esta estructura en nuestro dominio. Para ello lo primero que tenemos que hacer es instalar la funci\u00f3n de 'Servicios de Impresi\u00f3n': Agregar el rol de Servicios de Impresi\u00f3n En la siguiente figura podemos seleccionar qu\u00e9 servicios de impresi\u00f3n queremos instalar. Instalaremos \u00fanicamente el ' Servidor de Impresi\u00f3n ', la segunda opci\u00f3n permite poner en marcha un servidor web para gestionar los trabajos de impresi\u00f3n. La tercera ('Servidor LPD') la instalar\u00edamos en caso de tener una red heterog\u00e9nea Windows-GNU/Linux , y la tercera permite la gesti\u00f3n de digitalizaci\u00f3n de documentos. Servicios a instala Confirmamos e instalamos el Servicio de Impresi\u00f3n: Instalar Servicio de Impresi\u00f3n Instalar Servicio de Impresi\u00f3n II Una vez instalado el Servidor de Impresi\u00f3n, ya podemos acceder al administrador de la impresi\u00f3n a trav\u00e9s del Panel del Administrador --> Herramientas --> Administraci\u00f3n de Impresi\u00f3n : Administraci\u00f3n de Impresi\u00f3n Administraci\u00f3n de Impresi\u00f3n II Agregando un Dispositivo de Impresi\u00f3n \u00b6 Una vez que tenemos instalados los servicios de impresi\u00f3n en el controlador de dominio, agregaremos un dispositivo de impresi\u00f3n en red. Para ello, abrimos el Administrador de Impresi\u00f3n y a\u00f1adimos una nueva impresora: Agregar una impresora Se abrir\u00e1 el Asistente para la instalaci\u00f3n de impresoras en red, y ah\u00ed podremos especificar el m\u00e9todo de instalaci\u00f3n. La primera de las opciones (Buscar impresoras en la red) nos mostrar\u00e1 un listado de los dispositivos f\u00edsicos de impresi\u00f3n accesibles desde nuestro equipo. Como no hemos conectado ninguno, esta opci\u00f3n no nos sirve. La segunda de las opciones (Agregar una impresora TCP/IP o de servicios web en base a la direcci\u00f3n IP o nombre de host) nos permite configurar una impresora l\u00f3gica que apuntar\u00e1 a la direcci\u00f3n IP que definiremos en el dispositivo f\u00edsico de impresi\u00f3n. La tercera opci\u00f3n (Agregar una nueva impresora por medio de un puerto existe) nos permitir\u00eda configurar una impresora l\u00f3gica que apuntar\u00eda a un puerto ya existente del controlador de dominio (LPT, USB, etc.) donde podr\u00edamos conectar el dispositivo f\u00edsico de impresi\u00f3n. Finalmente la \u00faltima opci\u00f3n (Crear un nuevo puerto y agregar una nueva impresora) nos permite definir un nuevo puerto local como interfaz entre una impresora l\u00f3gica a configurar y el dispositivo f\u00edsico. Como queremos administrar un dispositivo f\u00edsico de impresi\u00f3n que se conectar\u00e1 directamente a la red, seleccionaremos la segunda opci\u00f3n: 'Agregar una impresora TCP/IP o de servicios web en base a la direcci\u00f3n IP o nombre de host'. Buscando impresoras de red Buscando impresoras de red II Una vez encontrada la impresora, procedemos a realizar la instalaci\u00f3n de la misma. Habr\u00e1 que seleccionar los drivers, bien por defecto o bien si hemos de descargarlos de internet y realizar la instalaci\u00f3n de los mismos. Al final la impresora queda instalada: Buscando impresoras de red III Buscando impresoras de red IV Buscando impresoras de red V Despliegue de los Dispositivos de Impresi\u00f3n \u00b6 Ahora veremos c\u00f3mo asociar los dispositivos de impresi\u00f3n a usuarios o grupos, sin que estos tengan que llevar a cabo ning\u00fan tipo de configuraci\u00f3n, lo cual es un proceso delicado. Para poder realizar esta tarea, debemos asegurarnos de que la impresora est\u00e1 compartida en red, y que los usuarios que planifiquemos tienen acceso a la misma. Para ello, en el administrador de impresi\u00f3n, haremos clic con el bot\u00f3n secundario en el dispositivo de impresi\u00f3n que queremos configurar, y accederemos a las Propiedades . En la pesta\u00f1a ' Compartir' corroboraremos que la compartici\u00f3n est\u00e1 habilitada, tal y como configuramos en la instalaci\u00f3n de la impresora, y en la pesta\u00f1a 'Seguridad' comprobaremos que los grupos o usuarios que definamos tienen permiso para imprimir: Permisos a dispositivos de impresi\u00f3n CONSEJO En principio no es aconsejable otorgar a los usuarios convencionales del dominio los permisos de administrar impresoras o administrar documentos. La administraci\u00f3n de impresoras proporciona al usuario un control total sobre la impresora y sus controladores. La administraci\u00f3n de documentos permite al usuario realizar tareas de control sobre los documentos y puede detener, reiniciar o cancelar las tareas de impresi\u00f3n: Permisos de seguridad en Impresoras Lo m\u00e1s habitual es que los dispositivos de impresi\u00f3n est\u00e9n distribuidos en la empresa en diversos departamentos o plantas del edificio, y normalmente los usuarios suelen tener acceso \u00fanicamente a las impresoras asignadas a su grupo, por lo que eliminaremos el grupo Todos de los permisos, y a\u00f1adiremos al grupo Pistonazo, ya que a priori, podr\u00e1n imprimir documentos: Asignar permisos de impresi\u00f3n Como el despliegue de los dispositivos de impresi\u00f3n lo haremos mediante directivas de grupo, antes de empezar crearemos un GPO sobre todo el dominio que llamaremos (en este caso) ImpresoraPistonazo. En el filtrado de seguridad del GPO incluiremos \u00fanicamente al grupo Pistonazo. Crear GPO para Impresora y a\u00f1adimos al grupo Pistonazo: Agregamos a la GPO el grupo Pistonazo A continuaci\u00f3n, abriremos el Administrador de Impresi\u00f3n y seleccionamos la impresora que queremos desplegar. Hacemos clic con el bot\u00f3n derecho y seleccionamos la opci\u00f3n Implementar con directiva de grupo : Implementar con directiva de grupo Se abrir\u00e1 el cuadro de dialogo y haremos clic en Examinar... para seleccionar a qu\u00e9 directiva queremos a\u00f1adir la configuraci\u00f3n de la impresi\u00f3n: Implementar con directiva de grupo Seleccionar la GPO A\u00f1adir GPO aplicada por usuario Aplicar la GPO Si ahora iniciamos sesi\u00f3n con un usuario de Pistonazo, veremos que la Impresora se ha conectado y podemos imprimir en ella: Impresora conectada por GPO Si inici\u00e1ramos sesi\u00f3n con otro usuario que no fuera de Pistonazo, no conectar\u00eda la impresora: Usuario sin permisos de conexi\u00f3n Controladores Adicionales \u00b6 Para empezar, nos aseguraremos de que est\u00e9n instalados los drivers de la impresora para las distintas arquitecturas de equipos presentes en la red. Para ello en la pesta\u00f1a Compartir haremos clic en el bot\u00f3n Controladores adicionales . Controladores adicionales Nos aparecer\u00e1 un cuadro donde podremos seleccionar la arquitectura de los controladores de la impresora: x64: arquitectura de 64 bits. x86: arquitectura de 32 bits Controladores x86 y x64 Instalaremos aquellas versiones que necesitemos en funci\u00f3n de los equipos de nuestra red y los equipos clientes se descargar\u00e1n los drivers adecuados accediendo al recurso compartido print$ que se halla alojado en el servidor en la ruta C:\\system32\\spool\\drivers , de una manera transparente al usuario. Preferencias de Impresi\u00f3n \u00b6 Podemos configurar las Preferencias de impresi\u00f3n en la pesta\u00f1a General : Preferencias de Impresi\u00f3n Ah\u00ed podemos definir aspectos como el formato de ahorro en papel imprimiendo en modo folleto, aunque posteriormente el usuario pueda modificar esta configuraci\u00f3n antes de enviar el trabajo de impresi\u00f3n: Preferencias de Impresi\u00f3n Configuraci\u00f3n de la Impresi\u00f3n \u00b6 Supongamos que disponemos de una \u00fanica impresora f\u00edsica en nuestra empresa, y queremos configurarla de manera diferente para cada departamento. Por ejemplo, podr\u00edamos querer asignar prioridades diferentes: - El grupo Almac\u00e9n podr\u00eda tener una prioridad en la impresi\u00f3n inferior a la del grupo Direcci\u00f3n. - Adem\u00e1s tambi\u00e9n podr\u00edamos hacer una planificaci\u00f3n en la que el grupo Almac\u00e9n solo pudiera imprimir de 8.00 a 16.00. - Mientras que el grupo Direcci\u00f3n podr\u00eda imprimir durante todo el d\u00eda. Veamos como implantar esta pol\u00edtica de administraci\u00f3n paso a paso. En primer lugar tenemos que crear dos impresoras l\u00f3gicas que apunten al mismo dispositivo de impresi\u00f3n f\u00edsico, una para la secci\u00f3n de Direcci\u00f3n y otra para la secci\u00f3n de Administraci\u00f3n: Permisos diferentes de Impresi\u00f3n Es importante que ambas impresoras est\u00e9n compartidas, y que los miembros de los respectivos grupos tengan permisos para imprimir: Configuraci\u00f3n de dos impresoras l\u00f3gicas Configuraremos las impresoras (l\u00f3gicas) de Almac\u00e9n y Direcci\u00f3n como hemos planificado al principio de este apartado: Configuraci\u00f3n de opciones avanzadas A continuaci\u00f3n creamos un GPO para cada grupo que nos permitir\u00e1 desplegar la correspondiente impresora a los miembros de cada grupo: Definici\u00f3n de las GPOs En el siguiente paso implementamos la conexi\u00f3n de cada impresora mediante su correspondiente GPO: Implementaci\u00f3n de la GPO Almac\u00e9n I Implementaci\u00f3n de GPO a Almac\u00e9n II Y hacemos el mismo proceso para Direcci\u00f3n: Implementaci\u00f3n de la GPO a Direcci\u00f3n Para finalizar ejecutamos gpupdate/force en el controlador de dominio y ya tendremos implementadas las impresoras con sus respectivas restricciones para los grupos de Almac\u00e9n y Direcci\u00f3n. NOTA Destacar de nuevo que hemos creado dos impresoras l\u00f3gicas que apuntan al mismo dispositivo f\u00edsico con el fin de realizar una gesti\u00f3n de la impresi\u00f3n f\u00edsica diferenciada en funci\u00f3n del usuario o grupo que env\u00ede los trabajos a la impresora. Comprobaci\u00f3n de la configuraci\u00f3n \u00b6 Para comprobar la configuraci\u00f3n anterior, vamos a iniciar sesi\u00f3n en un equipo cliente con el usuario usucont1 perteneciente al grupo Almac\u00e9n, y vamos a enviar un trabajo de impresi\u00f3n fuera del horario en el que tiene permitido imprimir: Impresora de usuario de Almac\u00e9n Vemos en la figura anterior que aparece autom\u00e1ticamente la nueva impresora EpsonWF3620-Almacen . Si nos vamos al controlador de dominio y abrimos el asistente de impresi\u00f3n vemos que efectivamente el trabajo est\u00e1 en la cola, pero no se est\u00e1 imprimiendo por restricciones horarias: Impresora con restricci\u00f3n horaria Ahora iniciaremos una sesi\u00f3n con el usuario usudir1 que es del grupo de Direcci\u00f3n: Impresora sin restricci\u00f3n para grupo Direcci\u00f3n Actividades de desarrollo UD6_02 \u00b6 En esta actividad instalaremos una impresora en el controlador de dominio y la compartiremos y administraremos en red, como hemos visto en los diferentes apartados de este tema. La principal diferencia con lo visto hasta ahora consiste en que la impresora que 'conectaremos' al servidor ser\u00e1 una impresora pdf, por lo que con el instalable se crear\u00e1 el puerto de impresora y se instalar\u00e1n los drivers necesarios de una manera pr\u00e1cticamente trasparente para nosotros. En primer lugar instalaremos la impresora pdf, puede ser PDF Creator La descargaremos de aqu\u00ed e la instalaremos con las opciones por defecto pero en modo servidor, Investiga por Internet como instalarla. Nota : Si no funciona buscar versiones anteriores. Compartiremos la impresora en red (desde el Administrador de Impresi\u00f3n) para que los usuarios de dominio tengan permiso de impresi\u00f3n. Crearemos una GPO en el dominio pero que solo aplicaremos a un grupo que ya tengas configurado de las pr\u00e1cticas de AD (no a la UO ), llamemos GRUPOA . Configura la impresora pdf para que se despliegue autom\u00e1ticamente en todos los usuarios de GRUPOA (utiliza la GPO que hemos creado en el punto anterior). Crea un documento de texto en un equipo cliente al que has accedido con un miembro del GRUPOA . Desde el bloc de notas (notepad) imprime (en la impresora pdf que est\u00e1 albergada en el servidor y que debe aparecer autom\u00e1ticamente a los miembros de GRUPOA ) el fichero que acabas de generar. Inicia sesi\u00f3n con un usuario que no pertenezca a GRUPOA y comprueba que no aparece la impresora pdf en las opciones de impresi\u00f3n. Adjunta las capturas de pantalla describiendo el proceso, en especial las correspondientes a los puntos 4, 5, 7 y 8.","title":"6.3- Servidor de impresi\u00f3n en Windows Server"},{"location":"063_ServidorImpresionWindowsServer.html#administracion-de-los-servicios-de-impresion-en-windows-server","text":"El objetivo final del servicio de impresi\u00f3n es proporcionar la capacidad de impresi\u00f3n a los usuarios de la red. Como se ha vista en el subaparatdo anterior. Existen diferentes maneras de compartir en red un dispositivo f\u00edsico de impresi\u00f3n. La m\u00e1s com\u00fan en entornos corporativos es la instalaci\u00f3n de una impresora f\u00edsica que soporta el direccionamiento IP y puede ser conectada directamente a la LAN a trav\u00e9s de un switch o un hub: Esquema de red habitual","title":"Administraci\u00f3n de los Servicios de Impresi\u00f3n en Windows Server"},{"location":"063_ServidorImpresionWindowsServer.html#instalacion-de-los-servicios-de-impresion","text":"Como hemos visto en el punto anterior, la manera m\u00e1s habitual de conexi\u00f3n de impresoras en organizaciones de tama\u00f1o medio y grande consiste en conectar la impresora directamente a la red a trav\u00e9s de un switch. Vamos a implantar esta estructura en nuestro dominio. Para ello lo primero que tenemos que hacer es instalar la funci\u00f3n de 'Servicios de Impresi\u00f3n': Agregar el rol de Servicios de Impresi\u00f3n En la siguiente figura podemos seleccionar qu\u00e9 servicios de impresi\u00f3n queremos instalar. Instalaremos \u00fanicamente el ' Servidor de Impresi\u00f3n ', la segunda opci\u00f3n permite poner en marcha un servidor web para gestionar los trabajos de impresi\u00f3n. La tercera ('Servidor LPD') la instalar\u00edamos en caso de tener una red heterog\u00e9nea Windows-GNU/Linux , y la tercera permite la gesti\u00f3n de digitalizaci\u00f3n de documentos. Servicios a instala Confirmamos e instalamos el Servicio de Impresi\u00f3n: Instalar Servicio de Impresi\u00f3n Instalar Servicio de Impresi\u00f3n II Una vez instalado el Servidor de Impresi\u00f3n, ya podemos acceder al administrador de la impresi\u00f3n a trav\u00e9s del Panel del Administrador --> Herramientas --> Administraci\u00f3n de Impresi\u00f3n : Administraci\u00f3n de Impresi\u00f3n Administraci\u00f3n de Impresi\u00f3n II","title":"Instalaci\u00f3n de los Servicios de Impresi\u00f3n"},{"location":"063_ServidorImpresionWindowsServer.html#agregando-un-dispositivo-de-impresion","text":"Una vez que tenemos instalados los servicios de impresi\u00f3n en el controlador de dominio, agregaremos un dispositivo de impresi\u00f3n en red. Para ello, abrimos el Administrador de Impresi\u00f3n y a\u00f1adimos una nueva impresora: Agregar una impresora Se abrir\u00e1 el Asistente para la instalaci\u00f3n de impresoras en red, y ah\u00ed podremos especificar el m\u00e9todo de instalaci\u00f3n. La primera de las opciones (Buscar impresoras en la red) nos mostrar\u00e1 un listado de los dispositivos f\u00edsicos de impresi\u00f3n accesibles desde nuestro equipo. Como no hemos conectado ninguno, esta opci\u00f3n no nos sirve. La segunda de las opciones (Agregar una impresora TCP/IP o de servicios web en base a la direcci\u00f3n IP o nombre de host) nos permite configurar una impresora l\u00f3gica que apuntar\u00e1 a la direcci\u00f3n IP que definiremos en el dispositivo f\u00edsico de impresi\u00f3n. La tercera opci\u00f3n (Agregar una nueva impresora por medio de un puerto existe) nos permitir\u00eda configurar una impresora l\u00f3gica que apuntar\u00eda a un puerto ya existente del controlador de dominio (LPT, USB, etc.) donde podr\u00edamos conectar el dispositivo f\u00edsico de impresi\u00f3n. Finalmente la \u00faltima opci\u00f3n (Crear un nuevo puerto y agregar una nueva impresora) nos permite definir un nuevo puerto local como interfaz entre una impresora l\u00f3gica a configurar y el dispositivo f\u00edsico. Como queremos administrar un dispositivo f\u00edsico de impresi\u00f3n que se conectar\u00e1 directamente a la red, seleccionaremos la segunda opci\u00f3n: 'Agregar una impresora TCP/IP o de servicios web en base a la direcci\u00f3n IP o nombre de host'. Buscando impresoras de red Buscando impresoras de red II Una vez encontrada la impresora, procedemos a realizar la instalaci\u00f3n de la misma. Habr\u00e1 que seleccionar los drivers, bien por defecto o bien si hemos de descargarlos de internet y realizar la instalaci\u00f3n de los mismos. Al final la impresora queda instalada: Buscando impresoras de red III Buscando impresoras de red IV Buscando impresoras de red V","title":"Agregando un Dispositivo de Impresi\u00f3n"},{"location":"063_ServidorImpresionWindowsServer.html#despliegue-de-los-dispositivos-de-impresion","text":"Ahora veremos c\u00f3mo asociar los dispositivos de impresi\u00f3n a usuarios o grupos, sin que estos tengan que llevar a cabo ning\u00fan tipo de configuraci\u00f3n, lo cual es un proceso delicado. Para poder realizar esta tarea, debemos asegurarnos de que la impresora est\u00e1 compartida en red, y que los usuarios que planifiquemos tienen acceso a la misma. Para ello, en el administrador de impresi\u00f3n, haremos clic con el bot\u00f3n secundario en el dispositivo de impresi\u00f3n que queremos configurar, y accederemos a las Propiedades . En la pesta\u00f1a ' Compartir' corroboraremos que la compartici\u00f3n est\u00e1 habilitada, tal y como configuramos en la instalaci\u00f3n de la impresora, y en la pesta\u00f1a 'Seguridad' comprobaremos que los grupos o usuarios que definamos tienen permiso para imprimir: Permisos a dispositivos de impresi\u00f3n CONSEJO En principio no es aconsejable otorgar a los usuarios convencionales del dominio los permisos de administrar impresoras o administrar documentos. La administraci\u00f3n de impresoras proporciona al usuario un control total sobre la impresora y sus controladores. La administraci\u00f3n de documentos permite al usuario realizar tareas de control sobre los documentos y puede detener, reiniciar o cancelar las tareas de impresi\u00f3n: Permisos de seguridad en Impresoras Lo m\u00e1s habitual es que los dispositivos de impresi\u00f3n est\u00e9n distribuidos en la empresa en diversos departamentos o plantas del edificio, y normalmente los usuarios suelen tener acceso \u00fanicamente a las impresoras asignadas a su grupo, por lo que eliminaremos el grupo Todos de los permisos, y a\u00f1adiremos al grupo Pistonazo, ya que a priori, podr\u00e1n imprimir documentos: Asignar permisos de impresi\u00f3n Como el despliegue de los dispositivos de impresi\u00f3n lo haremos mediante directivas de grupo, antes de empezar crearemos un GPO sobre todo el dominio que llamaremos (en este caso) ImpresoraPistonazo. En el filtrado de seguridad del GPO incluiremos \u00fanicamente al grupo Pistonazo. Crear GPO para Impresora y a\u00f1adimos al grupo Pistonazo: Agregamos a la GPO el grupo Pistonazo A continuaci\u00f3n, abriremos el Administrador de Impresi\u00f3n y seleccionamos la impresora que queremos desplegar. Hacemos clic con el bot\u00f3n derecho y seleccionamos la opci\u00f3n Implementar con directiva de grupo : Implementar con directiva de grupo Se abrir\u00e1 el cuadro de dialogo y haremos clic en Examinar... para seleccionar a qu\u00e9 directiva queremos a\u00f1adir la configuraci\u00f3n de la impresi\u00f3n: Implementar con directiva de grupo Seleccionar la GPO A\u00f1adir GPO aplicada por usuario Aplicar la GPO Si ahora iniciamos sesi\u00f3n con un usuario de Pistonazo, veremos que la Impresora se ha conectado y podemos imprimir en ella: Impresora conectada por GPO Si inici\u00e1ramos sesi\u00f3n con otro usuario que no fuera de Pistonazo, no conectar\u00eda la impresora: Usuario sin permisos de conexi\u00f3n","title":"Despliegue de los Dispositivos de Impresi\u00f3n"},{"location":"063_ServidorImpresionWindowsServer.html#controladores-adicionales","text":"Para empezar, nos aseguraremos de que est\u00e9n instalados los drivers de la impresora para las distintas arquitecturas de equipos presentes en la red. Para ello en la pesta\u00f1a Compartir haremos clic en el bot\u00f3n Controladores adicionales . Controladores adicionales Nos aparecer\u00e1 un cuadro donde podremos seleccionar la arquitectura de los controladores de la impresora: x64: arquitectura de 64 bits. x86: arquitectura de 32 bits Controladores x86 y x64 Instalaremos aquellas versiones que necesitemos en funci\u00f3n de los equipos de nuestra red y los equipos clientes se descargar\u00e1n los drivers adecuados accediendo al recurso compartido print$ que se halla alojado en el servidor en la ruta C:\\system32\\spool\\drivers , de una manera transparente al usuario.","title":"Controladores Adicionales"},{"location":"063_ServidorImpresionWindowsServer.html#preferencias-de-impresion","text":"Podemos configurar las Preferencias de impresi\u00f3n en la pesta\u00f1a General : Preferencias de Impresi\u00f3n Ah\u00ed podemos definir aspectos como el formato de ahorro en papel imprimiendo en modo folleto, aunque posteriormente el usuario pueda modificar esta configuraci\u00f3n antes de enviar el trabajo de impresi\u00f3n: Preferencias de Impresi\u00f3n","title":"Preferencias de Impresi\u00f3n"},{"location":"063_ServidorImpresionWindowsServer.html#configuracion-de-la-impresion","text":"Supongamos que disponemos de una \u00fanica impresora f\u00edsica en nuestra empresa, y queremos configurarla de manera diferente para cada departamento. Por ejemplo, podr\u00edamos querer asignar prioridades diferentes: - El grupo Almac\u00e9n podr\u00eda tener una prioridad en la impresi\u00f3n inferior a la del grupo Direcci\u00f3n. - Adem\u00e1s tambi\u00e9n podr\u00edamos hacer una planificaci\u00f3n en la que el grupo Almac\u00e9n solo pudiera imprimir de 8.00 a 16.00. - Mientras que el grupo Direcci\u00f3n podr\u00eda imprimir durante todo el d\u00eda. Veamos como implantar esta pol\u00edtica de administraci\u00f3n paso a paso. En primer lugar tenemos que crear dos impresoras l\u00f3gicas que apunten al mismo dispositivo de impresi\u00f3n f\u00edsico, una para la secci\u00f3n de Direcci\u00f3n y otra para la secci\u00f3n de Administraci\u00f3n: Permisos diferentes de Impresi\u00f3n Es importante que ambas impresoras est\u00e9n compartidas, y que los miembros de los respectivos grupos tengan permisos para imprimir: Configuraci\u00f3n de dos impresoras l\u00f3gicas Configuraremos las impresoras (l\u00f3gicas) de Almac\u00e9n y Direcci\u00f3n como hemos planificado al principio de este apartado: Configuraci\u00f3n de opciones avanzadas A continuaci\u00f3n creamos un GPO para cada grupo que nos permitir\u00e1 desplegar la correspondiente impresora a los miembros de cada grupo: Definici\u00f3n de las GPOs En el siguiente paso implementamos la conexi\u00f3n de cada impresora mediante su correspondiente GPO: Implementaci\u00f3n de la GPO Almac\u00e9n I Implementaci\u00f3n de GPO a Almac\u00e9n II Y hacemos el mismo proceso para Direcci\u00f3n: Implementaci\u00f3n de la GPO a Direcci\u00f3n Para finalizar ejecutamos gpupdate/force en el controlador de dominio y ya tendremos implementadas las impresoras con sus respectivas restricciones para los grupos de Almac\u00e9n y Direcci\u00f3n. NOTA Destacar de nuevo que hemos creado dos impresoras l\u00f3gicas que apuntan al mismo dispositivo f\u00edsico con el fin de realizar una gesti\u00f3n de la impresi\u00f3n f\u00edsica diferenciada en funci\u00f3n del usuario o grupo que env\u00ede los trabajos a la impresora.","title":"Configuraci\u00f3n de la Impresi\u00f3n"},{"location":"063_ServidorImpresionWindowsServer.html#comprobacion-de-la-configuracion","text":"Para comprobar la configuraci\u00f3n anterior, vamos a iniciar sesi\u00f3n en un equipo cliente con el usuario usucont1 perteneciente al grupo Almac\u00e9n, y vamos a enviar un trabajo de impresi\u00f3n fuera del horario en el que tiene permitido imprimir: Impresora de usuario de Almac\u00e9n Vemos en la figura anterior que aparece autom\u00e1ticamente la nueva impresora EpsonWF3620-Almacen . Si nos vamos al controlador de dominio y abrimos el asistente de impresi\u00f3n vemos que efectivamente el trabajo est\u00e1 en la cola, pero no se est\u00e1 imprimiendo por restricciones horarias: Impresora con restricci\u00f3n horaria Ahora iniciaremos una sesi\u00f3n con el usuario usudir1 que es del grupo de Direcci\u00f3n: Impresora sin restricci\u00f3n para grupo Direcci\u00f3n","title":"Comprobaci\u00f3n de la configuraci\u00f3n"},{"location":"063_ServidorImpresionWindowsServer.html#actividades-de-desarrollo-ud6_02","text":"En esta actividad instalaremos una impresora en el controlador de dominio y la compartiremos y administraremos en red, como hemos visto en los diferentes apartados de este tema. La principal diferencia con lo visto hasta ahora consiste en que la impresora que 'conectaremos' al servidor ser\u00e1 una impresora pdf, por lo que con el instalable se crear\u00e1 el puerto de impresora y se instalar\u00e1n los drivers necesarios de una manera pr\u00e1cticamente trasparente para nosotros. En primer lugar instalaremos la impresora pdf, puede ser PDF Creator La descargaremos de aqu\u00ed e la instalaremos con las opciones por defecto pero en modo servidor, Investiga por Internet como instalarla. Nota : Si no funciona buscar versiones anteriores. Compartiremos la impresora en red (desde el Administrador de Impresi\u00f3n) para que los usuarios de dominio tengan permiso de impresi\u00f3n. Crearemos una GPO en el dominio pero que solo aplicaremos a un grupo que ya tengas configurado de las pr\u00e1cticas de AD (no a la UO ), llamemos GRUPOA . Configura la impresora pdf para que se despliegue autom\u00e1ticamente en todos los usuarios de GRUPOA (utiliza la GPO que hemos creado en el punto anterior). Crea un documento de texto en un equipo cliente al que has accedido con un miembro del GRUPOA . Desde el bloc de notas (notepad) imprime (en la impresora pdf que est\u00e1 albergada en el servidor y que debe aparecer autom\u00e1ticamente a los miembros de GRUPOA ) el fichero que acabas de generar. Inicia sesi\u00f3n con un usuario que no pertenezca a GRUPOA y comprueba que no aparece la impresora pdf en las opciones de impresi\u00f3n. Adjunta las capturas de pantalla describiendo el proceso, en especial las correspondientes a los puntos 4, 5, 7 y 8.","title":"Actividades de desarrollo UD6_02"},{"location":"071_ServiciosRedRecursosCompartidos.html","text":"Integraci\u00f3n de sistemas operativos en red libres y propietarios \u00b6 Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 5 sesiones (12h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Integra sistemas operativos libres y propietarios, justificando y garantizando su interoperabilidad. Se ha identificado la necesidad de compartir recursos en red entre diferentes sistemas operativos. Se han establecido niveles de seguridad para controlar el acceso del cliente a los recursos compartidos en red. Se ha comprobado la conectividad de la red en un escenario heterog\u00e9neo. Se ha descrito la funcionalidad de los servicios que permiten compartir recursos en red. Se han instalado y configurado servicios para compartir recursos en red. Se ha comprobado el funcionamiento de los servicios instalados. Se ha trabajado en grupo para acceder a sistemas de archivos e impresoras en red desde equipos con diferentes sistemas operativos. Se ha documentado la configuraci\u00f3n de los servicios instalados. Introducci\u00f3n. Descripci\u00f3n de escenarios heterog\u00e9neos \u00b6 Un escenario heterog\u00e9neo es aqu\u00e9l donde conviven, en una red ( LAN , WAN ) diversos equipos con distintas arquitecturas y sistemas operativos distintos, bien sea por su versi\u00f3n, bien sea porque son de distinta factor\u00eda. En dichos escenarios, el intercambio de datos es posible s\u00f3lo si los dos extremos de la comunicaci\u00f3n entienden el protocolo utilizado . En este sentido, a lo largo de los a\u00f1os se han desarrollado enormes cantidades de protocolos , m\u00e1s o menos especializados, destinados a este intercambio de datos, los m\u00e1s conocidos son: SMB/CIFS y NFS (Network File System) y los servicios que los implementan son Samba y NFS respectivamente, en este tema se estudiar\u00e1 su instalaci\u00f3n y configuraci\u00f3n. Protocolos para redes heterog\u00e9neas \u00b6 El primer sistema de ficheros en red ideado en los a\u00f1os ochenta por la empresa \u2018 Novell Data Systems \u2019 (despu\u00e9s llamada \u2018 Novell Inc .\u2019). Novell , cre\u00f3 su producto llamado Netware , basado en una arquitectura cliente/servidor y con su propio protocolo de red, IPX . Fue, durante mucho tiempo, l\u00edder indiscutible en el apartado de servidores de red. Pero aunque se mantiene vivo, no es f\u00e1cil de conseguir y su utilizaci\u00f3n ha ido en detrimento de otros como plataformas Windows y GNU/Linux; como se ha comentado en la introducci\u00f3n, los m\u00e1s utilizados en la comunicaci\u00f3n entre equipos dentro de una red son: SMB/CIFS y NFS , a continuaci\u00f3n se describen brevemente. SMB/CIFS : se basa en la arquitectura cliente/servidor, y permite compartir recursos entre equipos con sistemas operativos diferentes; Windows , GNU/Linux y MacOSXh . NFS (Network File System) : es un protocolo de nivel de aplicaci\u00f3n, seg\u00fan el Modelo OSI . Es utilizado para sistemas de archivos distribuido en un entorno de red heterog\u00e9neo de computadoras de \u00e1rea local. Originalmente fue desarrollado en 1984 por Sun Microsystems Adem\u00e1s se destaca el protocolo \u2018 Apple File Service \u2019 ( AFS ), que ofrece servicios de archivos compartidos para sistemas operativos \u2018 macOS \u2019, que funcionan en equipos \u2018 Macintosh \u2019 (o simplemente \u2018Mac\u2019) de la empresa \u2018 Apple Inc .\u2019. Sistemas de archivos compartidos en red \u00b6 Cuando se habka de compartir archivos y carpetas, nos referimos principalmente al sistema de archivos en red que se utiliza, los sistemas de archivos se definen como un conjunto de normas y procedimientos para almacenar informaci\u00f3n en los dispositivos de almacenamiento. En el caso de los sistemas de archivos en red las normas y procedimientos adem\u00e1s de afectar al almacenamiento tambi\u00e9n afectan a la transmisi\u00f3n por red, y se realizan a trav\u00e9s de protocolos y servicios. Entre los servicios que implementan los protocolos descritos en el apartado anterior destacan: NFS (Network File System) , servicio de GNU/Linux que comparte el mismo nombre del protocolo, el cual permite compartir recursos de almacenamiento masivo con otros equipos. Con equipos que tengan instalado el sistema operativo MacOSX no debemos tener ning\u00fan problema , ya que esta basado en Unix como GNU/Linux. NOTA En cuanto a m\u00e1quinas que tengan el sistema operativo Windows en cualquiera de sus versiones es un poco m\u00e1s complicado. Requiere un software espec\u00edfico para poder implementarlo. En este sentido, para a\u00f1adir los SOs de Microsoft se dispone de Samba , el cual es uno de los grandes logros del movimiento de c\u00f3digo abierto. Prueba de ello es el reconocimiento y la aceptaci\u00f3n que ha tenido \u00faltimamente en el mundo de las TIC, donde se ha convertido en una especie de servicio est\u00e1ndar en redes donde conviven sistemas operativos GNU / Linux y Windows . Un poco de historia Gran parte de su popularidad se debe precisamente a su capacidad para integrarse en redes Windows. Samba toma el nombre del protocolo server message block (SMB) , inicialmente desarrollado por Microsoft , IBM, Intel y otros para permitir que los sistemas operativos DOS , Xenix , OS/2 y Windows ; al final de los a\u00f1os 80 se llego a realizar, pudiendo compartir unidades, archivos e impresoras. El protocolo SMB cambi\u00f3 de nombre en 1998 y pas\u00f3 a llamarse Common Internet File System (CIFS) . A d\u00eda de hoy, este protocolo es el que todav\u00eda se utiliza en los sistemas Windows para compartir archivos. Esquema de Red utilizando Samba Samba Definici\u00f3n Samba es una implementaci\u00f3n libre del protocolo de archivos compartidos de Microsoft Windows para sistemas de tipo UNIX . De esta forma, es posible que computadoras con GNU/Linux, Mac OS X o Unix en general se vean como servidores o act\u00faen como clientes en redes de Windows. Tabla Resumen Protocolos y Servicios de los Sistemas de Archivos Compartidos \u00b6 A continuaci\u00f3n la tabla resumen de protocolos y servicios en los Sistemas de Archivos Compartidos en Red: Sistema Descripci\u00f3n \u2018Network File System\u2019 (NFS) Sistema de archivos de red distribuido, desarrollado originalmente por la empresa ' Sun Microsystems ', incluido por defecto en los sistemas ' UNIX ' y en la mayor\u00eda de las distribuciones ' Linux ' . \u2018Server Message Block\u2019 (SMB) Protocolo de red, desarrollado originalmente por la empresa ' International Business Machines Corporation ' (IBM), que permite compartir archivos, impresoras y otros dispositivos, entre equipos clientes ' Microsoft Windows '. \u2018Common Internet File System\u2019 (CIFS) Versi\u00f3n modificada ampliamente del protocolo SMB, realizada por ' Mircrosoft Corporation '. \u2018Samba\u2019 Implementaci\u00f3n libre del protocolo SMB con las extensiones de ' Microsoft ', que funciona sobre las distribuciones gratuitas GNU (' GNU's Not UNIX! ') de sistemas ' Linux ' y en algunos sistemas ' UNIX ' \u2018Apple Filing Protocol\u2019 (AFS) Protocolo que forma parte de la tecnolog\u00eda ' Apple File Service ' (AFS), que ofrece servicios de archivos compartidos para sistemas operativos ' macOS ', que funcionan en equipos ' Macintosh ' (o simplemente ' Mac ') de la empresa ' Apple Inc. '. Otros servicios \u00b6 Independientemente del sistema operativo usado necesitaremos de otros servicios para complementar la configuraci\u00f3n de recursos compartidos en redes Heterog\u00e9neas: LDAP : Ser\u00e1 la base de datos que alberga la informaci\u00f3n de los usuarios. Kerberos : Se encarga de la seguridad a nivel de autentificaci\u00f3n segura de los usuarios. DNS : Habitualmente el acceso al dominio se hace a trav\u00e9s de un nombre de dominio. El servicio DNS permite la resoluci\u00f3n de ese nombre de dominio al direccionamiento IP. NTP : Es el servicio que se encarga de la sincronizaci\u00f3n del reloj de cada m\u00e1quina. Kerberos \u00b6 Kerberos es un protocolo de autenticaci\u00f3n de redes de ordenador creado por el MIT que permite a dos ordenadores en una red insegura demostrar su identidad mutuamente de manera segura. Logo Kerberos Caracter\u00edsticas Principales : Es un protocolo de seguridad que permite al cliente autentificarse de forma segura. Cifra los datos de autentificaci\u00f3n, por lo que alguien que est\u00e9 robando (sniffing) los datos de la red no ser\u00e1 capaz de averiguar la contrase\u00f1a, de hecho la contrase\u00f1a no viaja por la red. Adem\u00e1s permite al cliente asegurarse de la autenticidad del servidor, es decir, que impide que nadie se haga pasar por el servidor para robarte las claves.","title":"7.1- Servicios de red para compartir recursos"},{"location":"071_ServiciosRedRecursosCompartidos.html#integracion-de-sistemas-operativos-en-red-libres-y-propietarios","text":"Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 5 sesiones (12h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Integra sistemas operativos libres y propietarios, justificando y garantizando su interoperabilidad. Se ha identificado la necesidad de compartir recursos en red entre diferentes sistemas operativos. Se han establecido niveles de seguridad para controlar el acceso del cliente a los recursos compartidos en red. Se ha comprobado la conectividad de la red en un escenario heterog\u00e9neo. Se ha descrito la funcionalidad de los servicios que permiten compartir recursos en red. Se han instalado y configurado servicios para compartir recursos en red. Se ha comprobado el funcionamiento de los servicios instalados. Se ha trabajado en grupo para acceder a sistemas de archivos e impresoras en red desde equipos con diferentes sistemas operativos. Se ha documentado la configuraci\u00f3n de los servicios instalados.","title":"Integraci\u00f3n de sistemas operativos en red libres y propietarios"},{"location":"071_ServiciosRedRecursosCompartidos.html#introduccion-descripcion-de-escenarios-heterogeneos","text":"Un escenario heterog\u00e9neo es aqu\u00e9l donde conviven, en una red ( LAN , WAN ) diversos equipos con distintas arquitecturas y sistemas operativos distintos, bien sea por su versi\u00f3n, bien sea porque son de distinta factor\u00eda. En dichos escenarios, el intercambio de datos es posible s\u00f3lo si los dos extremos de la comunicaci\u00f3n entienden el protocolo utilizado . En este sentido, a lo largo de los a\u00f1os se han desarrollado enormes cantidades de protocolos , m\u00e1s o menos especializados, destinados a este intercambio de datos, los m\u00e1s conocidos son: SMB/CIFS y NFS (Network File System) y los servicios que los implementan son Samba y NFS respectivamente, en este tema se estudiar\u00e1 su instalaci\u00f3n y configuraci\u00f3n.","title":"Introducci\u00f3n. Descripci\u00f3n de escenarios heterog\u00e9neos"},{"location":"071_ServiciosRedRecursosCompartidos.html#protocolos-para-redes-heterogeneas","text":"El primer sistema de ficheros en red ideado en los a\u00f1os ochenta por la empresa \u2018 Novell Data Systems \u2019 (despu\u00e9s llamada \u2018 Novell Inc .\u2019). Novell , cre\u00f3 su producto llamado Netware , basado en una arquitectura cliente/servidor y con su propio protocolo de red, IPX . Fue, durante mucho tiempo, l\u00edder indiscutible en el apartado de servidores de red. Pero aunque se mantiene vivo, no es f\u00e1cil de conseguir y su utilizaci\u00f3n ha ido en detrimento de otros como plataformas Windows y GNU/Linux; como se ha comentado en la introducci\u00f3n, los m\u00e1s utilizados en la comunicaci\u00f3n entre equipos dentro de una red son: SMB/CIFS y NFS , a continuaci\u00f3n se describen brevemente. SMB/CIFS : se basa en la arquitectura cliente/servidor, y permite compartir recursos entre equipos con sistemas operativos diferentes; Windows , GNU/Linux y MacOSXh . NFS (Network File System) : es un protocolo de nivel de aplicaci\u00f3n, seg\u00fan el Modelo OSI . Es utilizado para sistemas de archivos distribuido en un entorno de red heterog\u00e9neo de computadoras de \u00e1rea local. Originalmente fue desarrollado en 1984 por Sun Microsystems Adem\u00e1s se destaca el protocolo \u2018 Apple File Service \u2019 ( AFS ), que ofrece servicios de archivos compartidos para sistemas operativos \u2018 macOS \u2019, que funcionan en equipos \u2018 Macintosh \u2019 (o simplemente \u2018Mac\u2019) de la empresa \u2018 Apple Inc .\u2019.","title":"Protocolos para redes heterog\u00e9neas"},{"location":"071_ServiciosRedRecursosCompartidos.html#sistemas-de-archivos-compartidos-en-red","text":"Cuando se habka de compartir archivos y carpetas, nos referimos principalmente al sistema de archivos en red que se utiliza, los sistemas de archivos se definen como un conjunto de normas y procedimientos para almacenar informaci\u00f3n en los dispositivos de almacenamiento. En el caso de los sistemas de archivos en red las normas y procedimientos adem\u00e1s de afectar al almacenamiento tambi\u00e9n afectan a la transmisi\u00f3n por red, y se realizan a trav\u00e9s de protocolos y servicios. Entre los servicios que implementan los protocolos descritos en el apartado anterior destacan: NFS (Network File System) , servicio de GNU/Linux que comparte el mismo nombre del protocolo, el cual permite compartir recursos de almacenamiento masivo con otros equipos. Con equipos que tengan instalado el sistema operativo MacOSX no debemos tener ning\u00fan problema , ya que esta basado en Unix como GNU/Linux. NOTA En cuanto a m\u00e1quinas que tengan el sistema operativo Windows en cualquiera de sus versiones es un poco m\u00e1s complicado. Requiere un software espec\u00edfico para poder implementarlo. En este sentido, para a\u00f1adir los SOs de Microsoft se dispone de Samba , el cual es uno de los grandes logros del movimiento de c\u00f3digo abierto. Prueba de ello es el reconocimiento y la aceptaci\u00f3n que ha tenido \u00faltimamente en el mundo de las TIC, donde se ha convertido en una especie de servicio est\u00e1ndar en redes donde conviven sistemas operativos GNU / Linux y Windows . Un poco de historia Gran parte de su popularidad se debe precisamente a su capacidad para integrarse en redes Windows. Samba toma el nombre del protocolo server message block (SMB) , inicialmente desarrollado por Microsoft , IBM, Intel y otros para permitir que los sistemas operativos DOS , Xenix , OS/2 y Windows ; al final de los a\u00f1os 80 se llego a realizar, pudiendo compartir unidades, archivos e impresoras. El protocolo SMB cambi\u00f3 de nombre en 1998 y pas\u00f3 a llamarse Common Internet File System (CIFS) . A d\u00eda de hoy, este protocolo es el que todav\u00eda se utiliza en los sistemas Windows para compartir archivos. Esquema de Red utilizando Samba Samba Definici\u00f3n Samba es una implementaci\u00f3n libre del protocolo de archivos compartidos de Microsoft Windows para sistemas de tipo UNIX . De esta forma, es posible que computadoras con GNU/Linux, Mac OS X o Unix en general se vean como servidores o act\u00faen como clientes en redes de Windows.","title":"Sistemas de archivos compartidos en red"},{"location":"071_ServiciosRedRecursosCompartidos.html#tabla-resumen-protocolos-y-servicios-de-los-sistemas-de-archivos-compartidos","text":"A continuaci\u00f3n la tabla resumen de protocolos y servicios en los Sistemas de Archivos Compartidos en Red: Sistema Descripci\u00f3n \u2018Network File System\u2019 (NFS) Sistema de archivos de red distribuido, desarrollado originalmente por la empresa ' Sun Microsystems ', incluido por defecto en los sistemas ' UNIX ' y en la mayor\u00eda de las distribuciones ' Linux ' . \u2018Server Message Block\u2019 (SMB) Protocolo de red, desarrollado originalmente por la empresa ' International Business Machines Corporation ' (IBM), que permite compartir archivos, impresoras y otros dispositivos, entre equipos clientes ' Microsoft Windows '. \u2018Common Internet File System\u2019 (CIFS) Versi\u00f3n modificada ampliamente del protocolo SMB, realizada por ' Mircrosoft Corporation '. \u2018Samba\u2019 Implementaci\u00f3n libre del protocolo SMB con las extensiones de ' Microsoft ', que funciona sobre las distribuciones gratuitas GNU (' GNU's Not UNIX! ') de sistemas ' Linux ' y en algunos sistemas ' UNIX ' \u2018Apple Filing Protocol\u2019 (AFS) Protocolo que forma parte de la tecnolog\u00eda ' Apple File Service ' (AFS), que ofrece servicios de archivos compartidos para sistemas operativos ' macOS ', que funcionan en equipos ' Macintosh ' (o simplemente ' Mac ') de la empresa ' Apple Inc. '.","title":"Tabla Resumen Protocolos y Servicios de los Sistemas de Archivos Compartidos"},{"location":"071_ServiciosRedRecursosCompartidos.html#otros-servicios","text":"Independientemente del sistema operativo usado necesitaremos de otros servicios para complementar la configuraci\u00f3n de recursos compartidos en redes Heterog\u00e9neas: LDAP : Ser\u00e1 la base de datos que alberga la informaci\u00f3n de los usuarios. Kerberos : Se encarga de la seguridad a nivel de autentificaci\u00f3n segura de los usuarios. DNS : Habitualmente el acceso al dominio se hace a trav\u00e9s de un nombre de dominio. El servicio DNS permite la resoluci\u00f3n de ese nombre de dominio al direccionamiento IP. NTP : Es el servicio que se encarga de la sincronizaci\u00f3n del reloj de cada m\u00e1quina.","title":"Otros servicios"},{"location":"071_ServiciosRedRecursosCompartidos.html#kerberos","text":"Kerberos es un protocolo de autenticaci\u00f3n de redes de ordenador creado por el MIT que permite a dos ordenadores en una red insegura demostrar su identidad mutuamente de manera segura. Logo Kerberos Caracter\u00edsticas Principales : Es un protocolo de seguridad que permite al cliente autentificarse de forma segura. Cifra los datos de autentificaci\u00f3n, por lo que alguien que est\u00e9 robando (sniffing) los datos de la red no ser\u00e1 capaz de averiguar la contrase\u00f1a, de hecho la contrase\u00f1a no viaja por la red. Adem\u00e1s permite al cliente asegurarse de la autenticidad del servidor, es decir, que impide que nadie se haga pasar por el servidor para robarte las claves.","title":"Kerberos"},{"location":"072_Samba.html","text":"SAMBA \u00b6 Configuraci\u00f3n del servicio SAMBA \u00b6 Como ya se ha visto con anterioridad, Samba es un conjunto de aplicaciones para GNU/Linux que implementan el protocolo de comunicaci\u00f3n SMB utilizado por Microsoft Windows para compartir carpetas e impresoras. Permite a sistemas GNU/ Linux compartir carpetas como si de un sistema Microsoft Windows se tratara. En un servidor de archivos, el acceso a una carpeta puede estar determinado por dos conjuntos de entradas de permisos: los permisos de recurso compartido definidos tan solo a carpetas . los permisos de red o NTFS ( New Technology File System ) definidos tanto en carpetas como en archivos . NOTA En sistemas operativos basados en GNU/Linux la gesti\u00f3n de los grupos y privilegios se hace a trav\u00e9s de los comandos samba-tool user y samba-tool group . Los permisos de recurso compartido suelen utilizarse para administrar equipos con sistemas de archivos FAT32 ( File Allocation Table ) o posterior, por lo que quedan desterrados en sistemas operativos de red. Con la aparici\u00f3n del sistema de archivos NTFS ( New Technology File System ), se incluyeron nuevos tipos de permisos asignables a carpetas, y adem\u00e1s, tambi\u00e9n a ficheros. A tener en cuenta Ambos sistemas de permisos conviven en entornos de Microsoft por lo que ser\u00e1 en el tema dedicado a ello cuando entraremos en detalle. Fichero Configuraci\u00f3n \u00b6 Toda la configuraci\u00f3n de Samba se encuentra en el fichero /etc/samba/smb.conf \u2192 DOCUMENTACI\u00d3N OFICIAL . NOTA Existen multitud de opciones pero tan solo se analizar\u00e1n las imprescindibles para la compartici\u00f3n de recursos. Las l\u00edneas que comiencen con # o ; est\u00e1n comentadas y el servicio no las tendr\u00e1 en cuenta. Este fichero tiene varios apartados, con opciones que se comentar\u00e1n a continuaci\u00f3n: [global], se especifican opciones generales: Variable Descripci\u00f3n workgroup Esta variable ha de almacenar el nombre del grupo de trabajo o dominio que usamos en nuestra red. server string Permite reconocer el equipo dentro del dominio. Por defecto tiene como valor el nombre del servidor. hosts allow Especifica desde qu\u00e9 direcciones IP se podr\u00e1 acceder al servicio. Si se especifica 192.168. todas las direcciones que empiecen de ese modo tendr\u00e1n acceso al recurso. Se puede establecer direcciones IP completas. hosts deny Especifica los rangos no permitidos, del mismo modo que host allow . security, Especifica el nivel de seguridad con el que se puede acceder. [autentication] , donde se destaca server role \u2192 indica la forma en la que va a trabajar el servidor Samba : Variable Descripci\u00f3n standalone server Modo por defecto, act\u00faa como un servidor de ficheros y directorios compartidos pero no como servidor de dominio. member server similar al anterior con la diferencia que a\u00f1adimos al equipo a un dominio ya existente y por tanto su funcionamiento se ver\u00e1 afectado por las reglas de \u00e9ste. Esta opci\u00f3n requiere a\u00f1adir las l\u00edneas security=ADM , para indicar que el control de acceso lo gestionar\u00e1 el controlador de dominio, y realm =NOMBREDOMINIO.COM para indicar el nombre de dominio al que pertenece el servidor. Adem\u00e1s, hay que comentar la l\u00ednea workgroup ya que no pertenecemos a un grupo de trabajo. AD domain controler act\u00faa como un controlador de dominio. Creaci\u00f3n Directorio Compartido \u00b6 Para crear un directorio compartido es necesario a\u00f1adir una nueva secci\u00f3n del siguiente modo: [ compartidoUser1 ] comment = Carpeta compartida path = /media/compartido/user1 guest ok = Yes read only = Yes write list = @Ceos, administrador, user1 directory mask = 0755 NOTA Estas l\u00edneas crean un recurso compartido con el nombre compartidoUser1 en el directorio /media/compartido/user1 de solo lectura, con acceso de invitado, los usuarios administrador y user1 pueden escribir y el grupo @Ceos tambi\u00e9n. Adem\u00e1s, se aplicar\u00e1 una m\u00e1scara de permisos autom\u00e1tica de 0755 a los ficheros y carpetas que se creen en este recurso. Las opciones m\u00e1s relevantes son: Variable Descripci\u00f3n guest ok Permite el acceso como usuario invitado. Su valor puede ser Yes o No . public Equivalente del par\u00e1metro guest ok . browseable Permitir\u00e1 mostrar este recurso en las listas de recursos compartidos. Su valor puede ser Yes o No . writable Permitir\u00e1 la escritura. Su valor puede ser Yes o No . valid users Especifica qu\u00e9 usuarios o grupos pueden acceder al recurso compartido. Mirar valores en la Nota a continuaci\u00f3n de esta tabla. write list Usuarios o grupos pueden acceder con permiso de escritura. admin users Usuarios o grupos pueden acceder con permisos administrativos. directory mask Define que permisos en el sistema tendr\u00e1n los subdirectorios creados dentro del recurso. NOTA: valores valid users nombres de usuarios separados por comas nombres de grupo precedidos por una @ %S indica que solo el usuario cuyo nombre sea igual al de ese directorio, tiene acceso (\u00fatil para las carpetas personales de usuario) A tener en cuenta Una vez a\u00f1adido el recurso, es necesario reiniciar el servicio para que se apliquen los cambios /etc/init.d/smbd restart Por \u00faltimo, para acceder al recurso se realizar\u00e1 a trav\u00e9s de cualquier navegador de archivos usando el protocolo smb especificando el usuario, la direcci\u00f3n del recurso y su nombre del siguiente modo: smb://usuario1@servidorubuntu/compartido1 Integraci\u00f3n de permisos GNU/Linux \u2013 Microsoft Windows \u00b6 Para poder utilizar los permisos NTFS en GNU/Linux es necesario realizar una serie de configuraciones descritas en el siguiente apartado. Esto permitir\u00e1 integrar de forma transparente ambos sistemas . NOTA La administraci\u00f3n de los permisos en Ubuntu Server se realizan a trav\u00e9s del conjunto de herramientas de samba-tool , en concreto dsacl y ntacl . Hay que tener en cuenta varias cosas antes de usar los permisos NTFS en Ubuntu Server : El volumen que contenga el recurso compartido debe disponer de las opciones acl durante su montaje. Estas opciones ser\u00e1n indicadas en el fichero /etc/fstab para automatizar el proceso. Si el sistema de ficheros del volumen no es ext4 , ser\u00e1 necesario la instalaci\u00f3n de esta caracter\u00edstica. En ext4 viene integrada por defecto. los permisos que se apliquen a un recurso a trav\u00e9s de Samba solo ser\u00e1n v\u00e1lidos a trav\u00e9s de este servicio, por lo que se desaconseja el acceso en local al controlador de Active Directory . A tener en cuenta Ser\u00e1 necesario ahora ampliar los permisos que GNU/Linux establece a los ficheros para que sean compatibles con los de NTFS de Microsoft Windows . Ya que se quiere integrar este servido en una estructura de Active Directory ser\u00e1 necesario que los permisos asignados a los ficheros sean entendibles por los clientes Microsoft Windows que accedan a este servidor. Para ello se necesita instalar dos paquetes el attr y el acl que juntos compatibilizan las listas de control de acceso entre ambos sistemas. NOTA La parte interesante de estos paquetes es que esta ampliaci\u00f3n de permisos se le puede asignar a tan un medio determinado o a todo el sistema, por lo que ambos permisos de acceso pueden convivir sin conflicto alguno . Los pasos para realizar los dos aspectos comentados son: A continuaci\u00f3n, se debe instalar un segundo disco duro en el servidor . Se convertir\u00e1 este disco duro en un volumen y se destinar\u00e1 a almacenar los ficheros compartidos del servidor, por lo tanto, ser\u00e1 a este volumen al que se le asignar\u00e1 la nueva configuraci\u00f3n de permisos. Para realizar esta tarea, seguiremos estos pasos: Se a\u00f1adir\u00e1 un disco duro SATA a la m\u00e1quina virtual de 1 TB de capacidad. Se asignar\u00e1 una partici\u00f3n primaria que ocupe el disco entero. sudo fisk /dev/sdb Es necesario asignar un sistema de ficheros, en este caso ext4 sudo mkfs -t ext4 /dev/sdb1 Debe crearse un punto de montaje en /media/datos . sudo mount /dev/sdb1 /media/datos Otra acci\u00f3n a llevar a cabo es hacer el montaje del nuevo volumen de forma autom\u00e1tica al iniciar el sistema. Pare ello ser\u00e1 necesario incluir esta informaci\u00f3n en el fichero /etc/fstab : /dev/sdb1 /media/datos ext4 defaults 0 0 Ahora se instalar\u00e1n los paquetes necesarios para la asignaci\u00f3n de los nuevos permisos: sudo apt-get install acl attr Una vez terminada la instalaci\u00f3n, se asignar\u00e1 la ampliaci\u00f3n de permisos a este nuevo volumen a\u00f1adiendo user_xattr,acl,barrier=1 al fichero /etc/fstab . Debe quedar de la siguiente manera: /dev/sdb1 /media/datos ext4 user\\_xattr,acl,barrier=1,defaults 0 0 Por \u00faltimo se comprueba que todo ha ido bien reiniciando el equipo y accediendo a la carpeta /media/datos . NOTA Antes de administrar los permisos de un recurso compartido en un servicio Active Directory con Samba , ser\u00e1 necesario su creaci\u00f3n y compartici\u00f3n. Esta tarea se realiza a\u00f1adiendo el recurso al fichero /etc/samba/smb.conf . El aspecto que tiene este fichero es el siguiente: \\# Global parameters [global] dns forwarder = 8.8.8.8 netbios name = SERVIDORUBUNTU realm = MIEMPRESA.LOCAL server role = active directory domain controller workgroup = MIEMPRESA idmap\\_ldb:use rfc2307 = yes [netlogon] path = /var/lib/samba/sysvol/miempresa.local/scripts read only = No [sysvol] path = /var/lib/samba/sysvol read only = No Tanto netlogon como sysvol son recursos compartidos que han sido creados durante el proceso de instalaci\u00f3n del directorio, y por tanto, son necesarios para el correcto funcionamiento del sistema. Ser\u00e1 aqu\u00ed d\u00f3nde se crear\u00e1n los nuevos recursos [ compartido ] path = /media/datos read only = No Una vez guardado el fichero de configuraci\u00f3n, se reinicia el servicio Samba para que los cambios tengan efecto service smbd stop service smbd start NOTA A partir de este momento, el recurso /media/datos est\u00e1 accesible desde Samba , aunque sin ning\u00fan tipo de restricci\u00f3n. Ser\u00e1 necesario ahora el acceso a esta carpeta desde RSAT con una cuenta de administraci\u00f3n para modificar los permisos de acceso, de igual forma como se realiza en una carpeta compartido en un controlador de domino con Microsoft Windows . A medida que se vayan cambiado los permisos de este recurso a trav\u00e9s de RSAT , ser\u00e1 posible consultarlos desde el terminal con el subcomando ntacl o directamente con el comando getfacl samba-tool ntacl get /media/datos El cual ofrece informaci\u00f3n detallada de los permisos o que ofrecer\u00e1 informaci\u00f3n de los permisos a modo de resumen. getfacl /media/datos Administraci\u00f3n de permisos con RSAT \u00b6 A pesar de la existencia de las herramientas ofrecidas por Samba , la gesti\u00f3n de los permisos de carpetas se realizar\u00e1 con RSAT . RSAT ( Remote Server Administration Tools ) es una aplicaci\u00f3n cuyo objetivo es administrar el servidor pensada para instalarse en clientes que replica las herramientas disponibles en el controlador del dominio. Este software est\u00e1 idealmente pensado para servidores tipo CORE en los que no existe una GUI y toda su administraci\u00f3n queda adscrita a un terminal. El consumo de recursos de la GUI queda traspasada al cliente. NOTA Es preciso se\u00f1alar que cualquier usuario con permiso para instalar software podr\u00e1 realizar estas acciones, pero en ning\u00fan caso administrar el servidor. Actualizaci\u00f3n del sistema con el a\u00f1adido de RSAT. NOTA Esta tarea es m\u00e1s efectiva y concisa desde el GUI ya que no ser\u00e1 necesario recordar todos los usuarios ni grupos creados en el directorio mientras se configuran los permisos. En efecto, el uso de GUI para la asignaci\u00f3n de permisos facilita esta tarea que, en CLI, puede llegar a complicarse en demas\u00eda. Por este motivo se utilizar\u00e1 la administraci\u00f3n remota que funciona de igual modo que en sistemas operativos de Microsoft . Para poder utilizar RSAT ser\u00e1 necesario iniciar sesi\u00f3n como administrador del dominio o una cuenta que disponga de permisos suficientes . No obstante, por coherencia del proceso, se realizar\u00e1 todo con la cuenta de administrador de dominio. Se inicia sesi\u00f3n en el cliente con la cuenta de administrador de dominio, descargar la versi\u00f3n correcta y se instala el programa. En realidad lo que hace este programa es a\u00f1adir una herramienta al sistema operativo, como si de una actualizaci\u00f3n del mismo se tratase. Para ello hay que dirigirse a Inicio \u2192 Configuraci\u00f3n \u2192 Aplicaciones \u2192 Caracter\u00edsticas Opcionales \u2192 Agregar una caracter\u00edstica \u2192 RSAT: Administrador del servidor y pulsar el bot\u00f3n de Instalar . Tras el proceso de instalaci\u00f3n y el pertinente reinicio, se comprueba que en el men\u00fa de Inicio existe una nueva aplicaci\u00f3n denominada Administrador del servidor y que la interfaz gr\u00e1fica de esta herramienta es exactamente igual que la de Microsoft Windows Server . De esta forma ser\u00e1 m\u00e1s sencillo el cambio entre una y otra forma de administrar el servidor. El siguiente paso es conectar esta herramienta con el servidor que se debe administrar. Si en la infraestructura de red existe m\u00e1s de uno, es posible tener una de estas herramientas para cada uno, eso s\u00ed, en diferentes clientes. Para enlazar esta herramienta con el servidor se pulsa el bot\u00f3n derecho sobre la opci\u00f3n Todos los servidores \u2192 Agregar servidores del panel de la izquierda A\u00f1adir el servidor a administrar al RSAT. NOTA A partir de este momento toda la gesti\u00f3n realizada en esta herramienta tendr\u00e1 su efecto en el controlador de dominio configurado. Perfiles de usuario y carpetas personales \u00b6 Habitualmente los usuarios trabajan con la misma m\u00e1quina, pero hay ocasiones en las que es necesario que cambien su ubicaci\u00f3n de trabajo. Es buena idea entonces que el perfil de ese usuario viaje con \u00e9l, ya que \u00e9ste contiene gran parte de la informaci\u00f3n de trabajo. El fichero /etc/profile contiene la estructura de los perfiles. Adem\u00e1s, durante el proceso de creaci\u00f3n de perfiles, consulta los scripts ubicados en la carpeta /etc/profile.d que tambi\u00e9n ejecutar\u00e1 durante la creaci\u00f3n de un usuario. Dentro de cada perfil es posible encontrar la siguiente informaci\u00f3n: Configuraci\u00f3n local , que contiene datos de programa, historial y archivos temporales Datos de programa , configuraciones especificas de software de cada usuario, archivos, carpetas, accesos directos, escritorio documentos y plantillas de usuario Configuraci\u00f3n de inicio , elementos del men\u00fa Inicio del usuario as\u00ed como aplicaciones NOTA No es de extra\u00f1ar que si un usuario cambia de equipo y crea un nuevo perfil, eche de menos toda esta informaci\u00f3n y, a\u00fan peor, no pueda desempe\u00f1ar su trabajo con normalidad. Perfiles \u00b6 Existen diferentes tipos de perfiles, aunque en este tema se trabajar\u00e1 con los siguientes: Perfiles locales , creados en un equipo cuando un usuario inicia sesi\u00f3n. El perfil es espec\u00edfico de un usuario y se almacena en el disco duro del equipo local. Perfiles m\u00f3viles , creados por un administrador y almacenados en un servidor. Estos perfiles siguen al usuario a cualquier m\u00e1quina donde \u00e9ste inicie sesi\u00f3n. Perfiles locales \u00b6 Los perfiles locales se crean en los equipos cuando los usuarios inician sesi\u00f3n. En GNU/Linux, los perfiles de usuario se crean en la carpeta /home/$USER , con la excepci\u00f3n del usuario root , que por motivos de seguridad posee su propio perfil en la ruta /root . Toda la informaci\u00f3n referida al usuario se encuentra en el directorio /home/$USER . Cuando se accede con usuarios distintos, tanto el usuario local como el usuario de red dispondr\u00e1n de diferentes perfiles. Perfiles m\u00f3viles \u00b6 Un perfil m\u00f3vil se almacena en un servidor y, despu\u00e9s de que el inicio de sesi\u00f3n del usuario sea autentificado, se copia al equipo local. Esto permite al usuario tener el mismo escritorio, la configuraci\u00f3n de las aplicaciones y la configuraci\u00f3n local en cualquier m\u00e1quina. Al cerrar la sesi\u00f3n, el perfil se almacena tanto localmente como en la ubicaci\u00f3n de la ruta de acceso al perfil del usuario. Cuando el usuario inicia sesi\u00f3n de nuevo, el perfil del servidor se compara con la copia en el equipo local y se carga la versi\u00f3n m\u00e1s reciente. Si el servidor no esta disponible, se utiliza la copia local. Si el servidor no esta disponible y es la primera vez que el usuario ha iniciado sesi\u00f3n en el equipo se crea un perfil de usuario localmente utilizando la configuraci\u00f3n por defecto. Para configurar un perfil m\u00f3vil simplemente hay que completar las siguientes acciones: crear una carpeta compartida en el servidor para los perfiles. asignar en la cuenta de usuario una ruta de acceso a la carpeta compartida. Una vez realizadas estas acciones, el perfil de usuario se copia en el servidor y estar\u00e1 disponible para el usuario desde cualquier equipo. Para poder acceder desde un equipo a una carpeta compartida por nfs en un servidor, ser\u00e1 necesario instalar los paquetes portmap y nfs-common en el cliente sudo apt-get install portmap nfs-common sudo /etc/init.d/portmap restart Cuando finalice la instalaci\u00f3n ser\u00e1 posible utilizar el sistema nfs como un nuevo sistema de ficheros de red, lo que permitir\u00e1 gestionar carpetas remotas como si fuesen propias del sistema local. Ahora es posible montar la carpeta compartida en nuestro sistema de archivos. De esta manera, el acceso es exactamente igual que a cualquier otra carpeta del disco duro local. En el servidor existe la carpeta compartida /datos/usuarios/usuario1 con los datos del usuario usuario1 . Es posible montar esa carpeta como si fuera una m\u00e1s del sistema de ficheros local sudo mount -t nfs ip-del-servidor:/home/MIEMPRESA.LOCAL/usuario1/datos NOTA A partir de este momento la carpeta datos contiene la informaci\u00f3n de la carpeta /datos/usuarios/usuario1 del servidor. Como ya se ha estudiado, es posible que el sistema monte de forma autom\u00e1tica una carpeta compartida por nfs al iniciar sesi\u00f3n a trav\u00e9s del archivo /etc/fstab ip-del-servidor:/home/MIEMPRESA.LOCAL/usuario1/datos nfs Del mismo modo que se ha creado un recurso de red para contener el perfil del usuario, es posible repetir estos pasos para crear una carpeta personal a cada usuario . Para esta tarea se utilizar\u00e1 el servicio Samba , aunque es posible realizarla tambi\u00e9n con el protocolo nfs . Para ello habr\u00e1 que crear un recurso para cada usuario del siguiente modo: [ usuario1 ] comment = Carpeta con acceso exclusivo para usuario1 path = /media/usuarios/usuario1 guest ok = No public = No read only = Yes write list = %S NOTA La \u00faltima l\u00ednea del la configuraci\u00f3n limita el acceso al recurso al usuario que se llame igual que el nombre de la carpeta. Cuotas de disco \u00b6 Las cuotas de disco permiten controlar la cantidad de ficheros que se introducen en un recurso compartido . El espacio de almacenamiento de un servidor es finito y, aunque no lo parezca, si se estrangula uno de los vol\u00famenes, es un tarea costosa asignar nuevo espacio o simplemente no es posible. Con la herramienta Administraci\u00f3n de cuotas , se pueden realizar las siguientes tareas: Crear cuotas para limitar el espacio asignado a un volumen o carpeta y generar notificaciones cuando se est\u00e9 a punto de alcanzar o superar el l\u00edmite de dichas cuotas Generar cuotas autom\u00e1ticas aplicables a todas las carpetas existentes en un volumen o una carpeta y a todas las subcarpetas que se creen Definir plantillas de cuota que puedan aplicarse f\u00e1cilmente a nuevos vol\u00famenes o carpetas y que puedan utilizarse en toda una organizaci\u00f3n En los sistemas operativos basados en GNU/Linux es posible establecer l\u00edmites de almacenamiento por usuario e incluso por grupo de usuarios. Es factible establecer cuotas con dos enfoques diferentes: Es posible limitar el n\u00famero de bloques de disco, con lo que se limita el tama\u00f1o en disco del que el usuario dispone, tal y como ocurr\u00eda en Microsoft Windows Server , Por otro lado, se puede limitar el n\u00famero de nodos-i , lo que establece un l\u00edmite de ficheros por usuario, independientemente del espacio que ocupen Adem\u00e1s se puede fijar dos tipos de l\u00edmites, el r\u00edgido o hard que impide que el l\u00edmite sea sobrepasado, y el flexible o soft que no limita el espacio en disco pero s\u00ed avisa al administrador que se han excedido ciertos l\u00edmites. Desde la versi\u00f3n 14.04 de Ubuntu Server el kernel viene preparado para soportar cuotas de disco, por lo que tan solo ser\u00e1 necesario la instalaci\u00f3n del paquete que permite gestionar las cuotas: quota y quotatool . sudo apt-get install quota quotatool Al igual que ocurr\u00eda en el caso anterior, las cuotas han de ser activadas para cada uno de los vol\u00famenes del sistema. Para ello es necesario especificarlo en las opciones del fichero /etc/fstab . /dev/sdb1 /media/Datos ext4 defaults,usrquota,grpquota 0 0 En las opciones de montaje se han a\u00f1adido las opciones de usrquota y grpquota , que permitir\u00e1n la asignaci\u00f3n de cuotas de disco tanto a usuarios como a grupos respectivamente. Para que los cambios tengan efecto, se monta y desmonta el volumen aplicando la nueva configuraci\u00f3n especificada en el fichero /etc/fstab sudo mount -o remount,rw /media/Datos La unidad ya est\u00e1 preparada para contener cuotas de disco, por lo que ser\u00e1 preciso crearlas a trav\u00e9s de los comandos que se han instalado: quotacheck , edquota y repquota . sudo quotacheck -cgu /media/Datos El comando anterior activa las cuotas para el volumen. La opci\u00f3n -c crea los ficheros de configuraci\u00f3n necesarios para guardar la informaci\u00f3n de las cuotas, mientras que las opciones -u y -g activan las cuotas de usuario y grupo respectivamente. Si todo ha ido bien, en la carpeta ra\u00edz del volumen montado aparecer\u00e1n dos ficheros aquota.group y aquota.user que contendr\u00e1n la configuraci\u00f3n de las cuotas para los usuarios y grupos. No se trata de archivos de texto plano como es habitual, sino que estar\u00e1n cifrados. Para a\u00f1adir una cuota a un usuario se utiliza el comando edquota -u administrador Aparecer\u00e1 en pantalla el editor de texto predeterminado junto con la configuraci\u00f3n del usuario especificado Disk quotas dor user administrador (uid 1000) : Filesystem blocks soft hard inodes soft hard /dev/sdb1 0 0 0 0 0 0 El significado de cada columna es: Filesystem , indica el volumen en el que se activan las cuotas blocks , se\u00f1ala el n\u00famero de bloques que el usuario o grupo est\u00e1 utilizando inodes , apunta el n\u00famero de nodos-i que el usuario o grupo est\u00e1 usando soft , representa un valor de bloques o nodos-i que permite sobrepasar durante un determinado tiempo hard , es el l\u00edmite de bloques o nodos-i que no es posible superar Modificando estos valores y guardando el fichero se establecer\u00e1n las cuotas del usuario administrador . Adem\u00e1s se debe tener en cuenta: Configurar un valor de cuota a cero significa que no existe l\u00edmite alguno de almacenamiento para ese usuario. Las cuotas para grupos se realizan exactamente igual que con los usuarios. Si es necesario su edici\u00f3n, se volver\u00e1 a ejecutar el mismo comando y se modificar\u00e1n los valores oportunos. En la descripci\u00f3n de la columna soft se hizo referencia a que ese valor es posible rebasarlo durante un tiempo determinado. A ese tiempo se le conoce como periodo de gracia , y una vez superado el l\u00edmite flexible soft se convierte en l\u00edmite r\u00edgido no pudiendo superarlo. Para modificar esta configuraci\u00f3n se utiliza el comando: sudo edquota -t NOTA Establecer\u00e1 un valor para el volumen que afectar\u00e1 a todos los usuarios y grupos que tengan una cuota configurada en dicho volumen. Para consultar todas las cuotas disponibles se utilizar\u00e1 el comando: sudo repquota /dev/sdb1 El cual ofrecer\u00e1 informaci\u00f3n detallada sobre los usuarios y grupos que disponen de cuota en dicho volumen. \\*\\*\\* Report for user quotas on device /dev/sdb1 Block grace time : 7days; Inode grace time : 7days Block limits File limits User used soft hard grace used soft hard grace ---------------------------------------------------------------------- root -- 20 0 0 2 0 0 usuario +- 351 300 0 15 0 0 A tener en cuenta El formato de salida del informe es autoexplicativo, a excepci\u00f3n de la segunda columna. Los guiones que aparecen a la derecha del nombre de usuario, representan si se ha excedido o no el l\u00edmite flexible tanto de bloques como de nodos-i. Si se excede este l\u00edmite el - ser\u00e1 modificado por + . De esta forma es relativamente sencillo buscar aquellos usuarios que han superado el l\u00edmite flexible a trav\u00e9s del comando sudo repqutota /dev/sdb1 | grep \u201c\\+\u201d Para calcular el tama\u00f1o de la cuota a trav\u00e9s de bloques ser\u00e1 necesario conocer el tama\u00f1o del bloque del volumen al que se han aplicado las cuotas. Para ello se puede usar el comando tune2fs que ofrece amplia informaci\u00f3n sobre las caracter\u00edsticas de un volumen, entre toda ella, el n\u00famero de bloques: tune2fs -l /dev/sdb1 | grep \u201cBlock size\u201d A tener en cuenta Ahora tan solo queda multiplicar este tama\u00f1o por el n\u00famero de bloques asignado a la cuota. Por \u00faltimo, es posible desactivar las cuotas de forma temporal para, por ejemplo, realizar ciertas tareas de mantenimiento o administraci\u00f3n, quotaoff /dev/sdb1 Y volverlas a activar quotaon /dev/sdb1 NOTA Recuerda que esta desactivaci\u00f3n es temporal. Si se desactivan las cuotas con este comando y se reinicia el sistema, volver\u00e1n a estar activas ya que se inicializan a trav\u00e9s del fichero /etc/fstab . Si es necesario desactivarlas de forma permanente se deben configurar con un valor de cero en el archivo de cuotas. Actividades Iniciales UD7 \u00b6 Instalaci\u00f3n Servidor Samba Actividades de desarrollo UD7_01 \u00b6 Configuraci\u00f3n de Secciones y Usuarios en SAMBA Actividades de desarrollo UD7_02 \u00b6 Configuraci\u00f3n de Controlador de Dominio en SAMBA","title":"7.2- Samba"},{"location":"072_Samba.html#samba","text":"","title":"SAMBA"},{"location":"072_Samba.html#configuracion-del-servicio-samba","text":"Como ya se ha visto con anterioridad, Samba es un conjunto de aplicaciones para GNU/Linux que implementan el protocolo de comunicaci\u00f3n SMB utilizado por Microsoft Windows para compartir carpetas e impresoras. Permite a sistemas GNU/ Linux compartir carpetas como si de un sistema Microsoft Windows se tratara. En un servidor de archivos, el acceso a una carpeta puede estar determinado por dos conjuntos de entradas de permisos: los permisos de recurso compartido definidos tan solo a carpetas . los permisos de red o NTFS ( New Technology File System ) definidos tanto en carpetas como en archivos . NOTA En sistemas operativos basados en GNU/Linux la gesti\u00f3n de los grupos y privilegios se hace a trav\u00e9s de los comandos samba-tool user y samba-tool group . Los permisos de recurso compartido suelen utilizarse para administrar equipos con sistemas de archivos FAT32 ( File Allocation Table ) o posterior, por lo que quedan desterrados en sistemas operativos de red. Con la aparici\u00f3n del sistema de archivos NTFS ( New Technology File System ), se incluyeron nuevos tipos de permisos asignables a carpetas, y adem\u00e1s, tambi\u00e9n a ficheros. A tener en cuenta Ambos sistemas de permisos conviven en entornos de Microsoft por lo que ser\u00e1 en el tema dedicado a ello cuando entraremos en detalle.","title":"Configuraci\u00f3n del servicio SAMBA"},{"location":"072_Samba.html#fichero-configuracion","text":"Toda la configuraci\u00f3n de Samba se encuentra en el fichero /etc/samba/smb.conf \u2192 DOCUMENTACI\u00d3N OFICIAL . NOTA Existen multitud de opciones pero tan solo se analizar\u00e1n las imprescindibles para la compartici\u00f3n de recursos. Las l\u00edneas que comiencen con # o ; est\u00e1n comentadas y el servicio no las tendr\u00e1 en cuenta. Este fichero tiene varios apartados, con opciones que se comentar\u00e1n a continuaci\u00f3n: [global], se especifican opciones generales: Variable Descripci\u00f3n workgroup Esta variable ha de almacenar el nombre del grupo de trabajo o dominio que usamos en nuestra red. server string Permite reconocer el equipo dentro del dominio. Por defecto tiene como valor el nombre del servidor. hosts allow Especifica desde qu\u00e9 direcciones IP se podr\u00e1 acceder al servicio. Si se especifica 192.168. todas las direcciones que empiecen de ese modo tendr\u00e1n acceso al recurso. Se puede establecer direcciones IP completas. hosts deny Especifica los rangos no permitidos, del mismo modo que host allow . security, Especifica el nivel de seguridad con el que se puede acceder. [autentication] , donde se destaca server role \u2192 indica la forma en la que va a trabajar el servidor Samba : Variable Descripci\u00f3n standalone server Modo por defecto, act\u00faa como un servidor de ficheros y directorios compartidos pero no como servidor de dominio. member server similar al anterior con la diferencia que a\u00f1adimos al equipo a un dominio ya existente y por tanto su funcionamiento se ver\u00e1 afectado por las reglas de \u00e9ste. Esta opci\u00f3n requiere a\u00f1adir las l\u00edneas security=ADM , para indicar que el control de acceso lo gestionar\u00e1 el controlador de dominio, y realm =NOMBREDOMINIO.COM para indicar el nombre de dominio al que pertenece el servidor. Adem\u00e1s, hay que comentar la l\u00ednea workgroup ya que no pertenecemos a un grupo de trabajo. AD domain controler act\u00faa como un controlador de dominio.","title":"Fichero Configuraci\u00f3n"},{"location":"072_Samba.html#creacion-directorio-compartido","text":"Para crear un directorio compartido es necesario a\u00f1adir una nueva secci\u00f3n del siguiente modo: [ compartidoUser1 ] comment = Carpeta compartida path = /media/compartido/user1 guest ok = Yes read only = Yes write list = @Ceos, administrador, user1 directory mask = 0755 NOTA Estas l\u00edneas crean un recurso compartido con el nombre compartidoUser1 en el directorio /media/compartido/user1 de solo lectura, con acceso de invitado, los usuarios administrador y user1 pueden escribir y el grupo @Ceos tambi\u00e9n. Adem\u00e1s, se aplicar\u00e1 una m\u00e1scara de permisos autom\u00e1tica de 0755 a los ficheros y carpetas que se creen en este recurso. Las opciones m\u00e1s relevantes son: Variable Descripci\u00f3n guest ok Permite el acceso como usuario invitado. Su valor puede ser Yes o No . public Equivalente del par\u00e1metro guest ok . browseable Permitir\u00e1 mostrar este recurso en las listas de recursos compartidos. Su valor puede ser Yes o No . writable Permitir\u00e1 la escritura. Su valor puede ser Yes o No . valid users Especifica qu\u00e9 usuarios o grupos pueden acceder al recurso compartido. Mirar valores en la Nota a continuaci\u00f3n de esta tabla. write list Usuarios o grupos pueden acceder con permiso de escritura. admin users Usuarios o grupos pueden acceder con permisos administrativos. directory mask Define que permisos en el sistema tendr\u00e1n los subdirectorios creados dentro del recurso. NOTA: valores valid users nombres de usuarios separados por comas nombres de grupo precedidos por una @ %S indica que solo el usuario cuyo nombre sea igual al de ese directorio, tiene acceso (\u00fatil para las carpetas personales de usuario) A tener en cuenta Una vez a\u00f1adido el recurso, es necesario reiniciar el servicio para que se apliquen los cambios /etc/init.d/smbd restart Por \u00faltimo, para acceder al recurso se realizar\u00e1 a trav\u00e9s de cualquier navegador de archivos usando el protocolo smb especificando el usuario, la direcci\u00f3n del recurso y su nombre del siguiente modo: smb://usuario1@servidorubuntu/compartido1","title":"Creaci\u00f3n Directorio Compartido"},{"location":"072_Samba.html#integracion-de-permisos-gnulinux-microsoft-windows","text":"Para poder utilizar los permisos NTFS en GNU/Linux es necesario realizar una serie de configuraciones descritas en el siguiente apartado. Esto permitir\u00e1 integrar de forma transparente ambos sistemas . NOTA La administraci\u00f3n de los permisos en Ubuntu Server se realizan a trav\u00e9s del conjunto de herramientas de samba-tool , en concreto dsacl y ntacl . Hay que tener en cuenta varias cosas antes de usar los permisos NTFS en Ubuntu Server : El volumen que contenga el recurso compartido debe disponer de las opciones acl durante su montaje. Estas opciones ser\u00e1n indicadas en el fichero /etc/fstab para automatizar el proceso. Si el sistema de ficheros del volumen no es ext4 , ser\u00e1 necesario la instalaci\u00f3n de esta caracter\u00edstica. En ext4 viene integrada por defecto. los permisos que se apliquen a un recurso a trav\u00e9s de Samba solo ser\u00e1n v\u00e1lidos a trav\u00e9s de este servicio, por lo que se desaconseja el acceso en local al controlador de Active Directory . A tener en cuenta Ser\u00e1 necesario ahora ampliar los permisos que GNU/Linux establece a los ficheros para que sean compatibles con los de NTFS de Microsoft Windows . Ya que se quiere integrar este servido en una estructura de Active Directory ser\u00e1 necesario que los permisos asignados a los ficheros sean entendibles por los clientes Microsoft Windows que accedan a este servidor. Para ello se necesita instalar dos paquetes el attr y el acl que juntos compatibilizan las listas de control de acceso entre ambos sistemas. NOTA La parte interesante de estos paquetes es que esta ampliaci\u00f3n de permisos se le puede asignar a tan un medio determinado o a todo el sistema, por lo que ambos permisos de acceso pueden convivir sin conflicto alguno . Los pasos para realizar los dos aspectos comentados son: A continuaci\u00f3n, se debe instalar un segundo disco duro en el servidor . Se convertir\u00e1 este disco duro en un volumen y se destinar\u00e1 a almacenar los ficheros compartidos del servidor, por lo tanto, ser\u00e1 a este volumen al que se le asignar\u00e1 la nueva configuraci\u00f3n de permisos. Para realizar esta tarea, seguiremos estos pasos: Se a\u00f1adir\u00e1 un disco duro SATA a la m\u00e1quina virtual de 1 TB de capacidad. Se asignar\u00e1 una partici\u00f3n primaria que ocupe el disco entero. sudo fisk /dev/sdb Es necesario asignar un sistema de ficheros, en este caso ext4 sudo mkfs -t ext4 /dev/sdb1 Debe crearse un punto de montaje en /media/datos . sudo mount /dev/sdb1 /media/datos Otra acci\u00f3n a llevar a cabo es hacer el montaje del nuevo volumen de forma autom\u00e1tica al iniciar el sistema. Pare ello ser\u00e1 necesario incluir esta informaci\u00f3n en el fichero /etc/fstab : /dev/sdb1 /media/datos ext4 defaults 0 0 Ahora se instalar\u00e1n los paquetes necesarios para la asignaci\u00f3n de los nuevos permisos: sudo apt-get install acl attr Una vez terminada la instalaci\u00f3n, se asignar\u00e1 la ampliaci\u00f3n de permisos a este nuevo volumen a\u00f1adiendo user_xattr,acl,barrier=1 al fichero /etc/fstab . Debe quedar de la siguiente manera: /dev/sdb1 /media/datos ext4 user\\_xattr,acl,barrier=1,defaults 0 0 Por \u00faltimo se comprueba que todo ha ido bien reiniciando el equipo y accediendo a la carpeta /media/datos . NOTA Antes de administrar los permisos de un recurso compartido en un servicio Active Directory con Samba , ser\u00e1 necesario su creaci\u00f3n y compartici\u00f3n. Esta tarea se realiza a\u00f1adiendo el recurso al fichero /etc/samba/smb.conf . El aspecto que tiene este fichero es el siguiente: \\# Global parameters [global] dns forwarder = 8.8.8.8 netbios name = SERVIDORUBUNTU realm = MIEMPRESA.LOCAL server role = active directory domain controller workgroup = MIEMPRESA idmap\\_ldb:use rfc2307 = yes [netlogon] path = /var/lib/samba/sysvol/miempresa.local/scripts read only = No [sysvol] path = /var/lib/samba/sysvol read only = No Tanto netlogon como sysvol son recursos compartidos que han sido creados durante el proceso de instalaci\u00f3n del directorio, y por tanto, son necesarios para el correcto funcionamiento del sistema. Ser\u00e1 aqu\u00ed d\u00f3nde se crear\u00e1n los nuevos recursos [ compartido ] path = /media/datos read only = No Una vez guardado el fichero de configuraci\u00f3n, se reinicia el servicio Samba para que los cambios tengan efecto service smbd stop service smbd start NOTA A partir de este momento, el recurso /media/datos est\u00e1 accesible desde Samba , aunque sin ning\u00fan tipo de restricci\u00f3n. Ser\u00e1 necesario ahora el acceso a esta carpeta desde RSAT con una cuenta de administraci\u00f3n para modificar los permisos de acceso, de igual forma como se realiza en una carpeta compartido en un controlador de domino con Microsoft Windows . A medida que se vayan cambiado los permisos de este recurso a trav\u00e9s de RSAT , ser\u00e1 posible consultarlos desde el terminal con el subcomando ntacl o directamente con el comando getfacl samba-tool ntacl get /media/datos El cual ofrece informaci\u00f3n detallada de los permisos o que ofrecer\u00e1 informaci\u00f3n de los permisos a modo de resumen. getfacl /media/datos","title":"Integraci\u00f3n de permisos GNU/Linux \u2013 Microsoft Windows"},{"location":"072_Samba.html#administracion-de-permisos-con-rsat","text":"A pesar de la existencia de las herramientas ofrecidas por Samba , la gesti\u00f3n de los permisos de carpetas se realizar\u00e1 con RSAT . RSAT ( Remote Server Administration Tools ) es una aplicaci\u00f3n cuyo objetivo es administrar el servidor pensada para instalarse en clientes que replica las herramientas disponibles en el controlador del dominio. Este software est\u00e1 idealmente pensado para servidores tipo CORE en los que no existe una GUI y toda su administraci\u00f3n queda adscrita a un terminal. El consumo de recursos de la GUI queda traspasada al cliente. NOTA Es preciso se\u00f1alar que cualquier usuario con permiso para instalar software podr\u00e1 realizar estas acciones, pero en ning\u00fan caso administrar el servidor. Actualizaci\u00f3n del sistema con el a\u00f1adido de RSAT. NOTA Esta tarea es m\u00e1s efectiva y concisa desde el GUI ya que no ser\u00e1 necesario recordar todos los usuarios ni grupos creados en el directorio mientras se configuran los permisos. En efecto, el uso de GUI para la asignaci\u00f3n de permisos facilita esta tarea que, en CLI, puede llegar a complicarse en demas\u00eda. Por este motivo se utilizar\u00e1 la administraci\u00f3n remota que funciona de igual modo que en sistemas operativos de Microsoft . Para poder utilizar RSAT ser\u00e1 necesario iniciar sesi\u00f3n como administrador del dominio o una cuenta que disponga de permisos suficientes . No obstante, por coherencia del proceso, se realizar\u00e1 todo con la cuenta de administrador de dominio. Se inicia sesi\u00f3n en el cliente con la cuenta de administrador de dominio, descargar la versi\u00f3n correcta y se instala el programa. En realidad lo que hace este programa es a\u00f1adir una herramienta al sistema operativo, como si de una actualizaci\u00f3n del mismo se tratase. Para ello hay que dirigirse a Inicio \u2192 Configuraci\u00f3n \u2192 Aplicaciones \u2192 Caracter\u00edsticas Opcionales \u2192 Agregar una caracter\u00edstica \u2192 RSAT: Administrador del servidor y pulsar el bot\u00f3n de Instalar . Tras el proceso de instalaci\u00f3n y el pertinente reinicio, se comprueba que en el men\u00fa de Inicio existe una nueva aplicaci\u00f3n denominada Administrador del servidor y que la interfaz gr\u00e1fica de esta herramienta es exactamente igual que la de Microsoft Windows Server . De esta forma ser\u00e1 m\u00e1s sencillo el cambio entre una y otra forma de administrar el servidor. El siguiente paso es conectar esta herramienta con el servidor que se debe administrar. Si en la infraestructura de red existe m\u00e1s de uno, es posible tener una de estas herramientas para cada uno, eso s\u00ed, en diferentes clientes. Para enlazar esta herramienta con el servidor se pulsa el bot\u00f3n derecho sobre la opci\u00f3n Todos los servidores \u2192 Agregar servidores del panel de la izquierda A\u00f1adir el servidor a administrar al RSAT. NOTA A partir de este momento toda la gesti\u00f3n realizada en esta herramienta tendr\u00e1 su efecto en el controlador de dominio configurado.","title":"Administraci\u00f3n de permisos con RSAT"},{"location":"072_Samba.html#perfiles-de-usuario-y-carpetas-personales","text":"Habitualmente los usuarios trabajan con la misma m\u00e1quina, pero hay ocasiones en las que es necesario que cambien su ubicaci\u00f3n de trabajo. Es buena idea entonces que el perfil de ese usuario viaje con \u00e9l, ya que \u00e9ste contiene gran parte de la informaci\u00f3n de trabajo. El fichero /etc/profile contiene la estructura de los perfiles. Adem\u00e1s, durante el proceso de creaci\u00f3n de perfiles, consulta los scripts ubicados en la carpeta /etc/profile.d que tambi\u00e9n ejecutar\u00e1 durante la creaci\u00f3n de un usuario. Dentro de cada perfil es posible encontrar la siguiente informaci\u00f3n: Configuraci\u00f3n local , que contiene datos de programa, historial y archivos temporales Datos de programa , configuraciones especificas de software de cada usuario, archivos, carpetas, accesos directos, escritorio documentos y plantillas de usuario Configuraci\u00f3n de inicio , elementos del men\u00fa Inicio del usuario as\u00ed como aplicaciones NOTA No es de extra\u00f1ar que si un usuario cambia de equipo y crea un nuevo perfil, eche de menos toda esta informaci\u00f3n y, a\u00fan peor, no pueda desempe\u00f1ar su trabajo con normalidad.","title":"Perfiles de usuario y carpetas personales"},{"location":"072_Samba.html#perfiles","text":"Existen diferentes tipos de perfiles, aunque en este tema se trabajar\u00e1 con los siguientes: Perfiles locales , creados en un equipo cuando un usuario inicia sesi\u00f3n. El perfil es espec\u00edfico de un usuario y se almacena en el disco duro del equipo local. Perfiles m\u00f3viles , creados por un administrador y almacenados en un servidor. Estos perfiles siguen al usuario a cualquier m\u00e1quina donde \u00e9ste inicie sesi\u00f3n.","title":"Perfiles"},{"location":"072_Samba.html#cuotas-de-disco","text":"Las cuotas de disco permiten controlar la cantidad de ficheros que se introducen en un recurso compartido . El espacio de almacenamiento de un servidor es finito y, aunque no lo parezca, si se estrangula uno de los vol\u00famenes, es un tarea costosa asignar nuevo espacio o simplemente no es posible. Con la herramienta Administraci\u00f3n de cuotas , se pueden realizar las siguientes tareas: Crear cuotas para limitar el espacio asignado a un volumen o carpeta y generar notificaciones cuando se est\u00e9 a punto de alcanzar o superar el l\u00edmite de dichas cuotas Generar cuotas autom\u00e1ticas aplicables a todas las carpetas existentes en un volumen o una carpeta y a todas las subcarpetas que se creen Definir plantillas de cuota que puedan aplicarse f\u00e1cilmente a nuevos vol\u00famenes o carpetas y que puedan utilizarse en toda una organizaci\u00f3n En los sistemas operativos basados en GNU/Linux es posible establecer l\u00edmites de almacenamiento por usuario e incluso por grupo de usuarios. Es factible establecer cuotas con dos enfoques diferentes: Es posible limitar el n\u00famero de bloques de disco, con lo que se limita el tama\u00f1o en disco del que el usuario dispone, tal y como ocurr\u00eda en Microsoft Windows Server , Por otro lado, se puede limitar el n\u00famero de nodos-i , lo que establece un l\u00edmite de ficheros por usuario, independientemente del espacio que ocupen Adem\u00e1s se puede fijar dos tipos de l\u00edmites, el r\u00edgido o hard que impide que el l\u00edmite sea sobrepasado, y el flexible o soft que no limita el espacio en disco pero s\u00ed avisa al administrador que se han excedido ciertos l\u00edmites. Desde la versi\u00f3n 14.04 de Ubuntu Server el kernel viene preparado para soportar cuotas de disco, por lo que tan solo ser\u00e1 necesario la instalaci\u00f3n del paquete que permite gestionar las cuotas: quota y quotatool . sudo apt-get install quota quotatool Al igual que ocurr\u00eda en el caso anterior, las cuotas han de ser activadas para cada uno de los vol\u00famenes del sistema. Para ello es necesario especificarlo en las opciones del fichero /etc/fstab . /dev/sdb1 /media/Datos ext4 defaults,usrquota,grpquota 0 0 En las opciones de montaje se han a\u00f1adido las opciones de usrquota y grpquota , que permitir\u00e1n la asignaci\u00f3n de cuotas de disco tanto a usuarios como a grupos respectivamente. Para que los cambios tengan efecto, se monta y desmonta el volumen aplicando la nueva configuraci\u00f3n especificada en el fichero /etc/fstab sudo mount -o remount,rw /media/Datos La unidad ya est\u00e1 preparada para contener cuotas de disco, por lo que ser\u00e1 preciso crearlas a trav\u00e9s de los comandos que se han instalado: quotacheck , edquota y repquota . sudo quotacheck -cgu /media/Datos El comando anterior activa las cuotas para el volumen. La opci\u00f3n -c crea los ficheros de configuraci\u00f3n necesarios para guardar la informaci\u00f3n de las cuotas, mientras que las opciones -u y -g activan las cuotas de usuario y grupo respectivamente. Si todo ha ido bien, en la carpeta ra\u00edz del volumen montado aparecer\u00e1n dos ficheros aquota.group y aquota.user que contendr\u00e1n la configuraci\u00f3n de las cuotas para los usuarios y grupos. No se trata de archivos de texto plano como es habitual, sino que estar\u00e1n cifrados. Para a\u00f1adir una cuota a un usuario se utiliza el comando edquota -u administrador Aparecer\u00e1 en pantalla el editor de texto predeterminado junto con la configuraci\u00f3n del usuario especificado Disk quotas dor user administrador (uid 1000) : Filesystem blocks soft hard inodes soft hard /dev/sdb1 0 0 0 0 0 0 El significado de cada columna es: Filesystem , indica el volumen en el que se activan las cuotas blocks , se\u00f1ala el n\u00famero de bloques que el usuario o grupo est\u00e1 utilizando inodes , apunta el n\u00famero de nodos-i que el usuario o grupo est\u00e1 usando soft , representa un valor de bloques o nodos-i que permite sobrepasar durante un determinado tiempo hard , es el l\u00edmite de bloques o nodos-i que no es posible superar Modificando estos valores y guardando el fichero se establecer\u00e1n las cuotas del usuario administrador . Adem\u00e1s se debe tener en cuenta: Configurar un valor de cuota a cero significa que no existe l\u00edmite alguno de almacenamiento para ese usuario. Las cuotas para grupos se realizan exactamente igual que con los usuarios. Si es necesario su edici\u00f3n, se volver\u00e1 a ejecutar el mismo comando y se modificar\u00e1n los valores oportunos. En la descripci\u00f3n de la columna soft se hizo referencia a que ese valor es posible rebasarlo durante un tiempo determinado. A ese tiempo se le conoce como periodo de gracia , y una vez superado el l\u00edmite flexible soft se convierte en l\u00edmite r\u00edgido no pudiendo superarlo. Para modificar esta configuraci\u00f3n se utiliza el comando: sudo edquota -t NOTA Establecer\u00e1 un valor para el volumen que afectar\u00e1 a todos los usuarios y grupos que tengan una cuota configurada en dicho volumen. Para consultar todas las cuotas disponibles se utilizar\u00e1 el comando: sudo repquota /dev/sdb1 El cual ofrecer\u00e1 informaci\u00f3n detallada sobre los usuarios y grupos que disponen de cuota en dicho volumen. \\*\\*\\* Report for user quotas on device /dev/sdb1 Block grace time : 7days; Inode grace time : 7days Block limits File limits User used soft hard grace used soft hard grace ---------------------------------------------------------------------- root -- 20 0 0 2 0 0 usuario +- 351 300 0 15 0 0 A tener en cuenta El formato de salida del informe es autoexplicativo, a excepci\u00f3n de la segunda columna. Los guiones que aparecen a la derecha del nombre de usuario, representan si se ha excedido o no el l\u00edmite flexible tanto de bloques como de nodos-i. Si se excede este l\u00edmite el - ser\u00e1 modificado por + . De esta forma es relativamente sencillo buscar aquellos usuarios que han superado el l\u00edmite flexible a trav\u00e9s del comando sudo repqutota /dev/sdb1 | grep \u201c\\+\u201d Para calcular el tama\u00f1o de la cuota a trav\u00e9s de bloques ser\u00e1 necesario conocer el tama\u00f1o del bloque del volumen al que se han aplicado las cuotas. Para ello se puede usar el comando tune2fs que ofrece amplia informaci\u00f3n sobre las caracter\u00edsticas de un volumen, entre toda ella, el n\u00famero de bloques: tune2fs -l /dev/sdb1 | grep \u201cBlock size\u201d A tener en cuenta Ahora tan solo queda multiplicar este tama\u00f1o por el n\u00famero de bloques asignado a la cuota. Por \u00faltimo, es posible desactivar las cuotas de forma temporal para, por ejemplo, realizar ciertas tareas de mantenimiento o administraci\u00f3n, quotaoff /dev/sdb1 Y volverlas a activar quotaon /dev/sdb1 NOTA Recuerda que esta desactivaci\u00f3n es temporal. Si se desactivan las cuotas con este comando y se reinicia el sistema, volver\u00e1n a estar activas ya que se inicializan a trav\u00e9s del fichero /etc/fstab . Si es necesario desactivarlas de forma permanente se deben configurar con un valor de cero en el archivo de cuotas.","title":"Cuotas de disco"},{"location":"072_Samba.html#actividades-iniciales-ud7","text":"Instalaci\u00f3n Servidor Samba","title":"Actividades Iniciales UD7"},{"location":"072_Samba.html#actividades-de-desarrollo-ud7_01","text":"Configuraci\u00f3n de Secciones y Usuarios en SAMBA","title":"Actividades de desarrollo UD7_01"},{"location":"072_Samba.html#actividades-de-desarrollo-ud7_02","text":"Configuraci\u00f3n de Controlador de Dominio en SAMBA","title":"Actividades de desarrollo UD7_02"},{"location":"073_NFS.html","text":"NFS (Network File System) \u00b6 Caracter\u00edsticas Generales \u00b6 Creado por Sun Microsystems en 1984 ; y Su implementaci\u00f3n se public\u00f3 en una RFC (Request For Comment) para que cualquiera pudiese implementarlo. Una RFC es una publicaci\u00f3n de la IETF. Se utiliza en la redes de \u00e1rea local para crear un sistema de archivo distribuido. Su objetivo es que varios usuarios puedan acceder a los archivos compartidos como si fueran locales. Se centraliza por tanto el almacenamiento de la red. Consta de Dos partes: Servidor \u2192 Almacena los archivos compartidos. Cliente \u2192 Acceden e interact\u00faan con los recursos compartidos. IMPORTANTE Para el uso de NFS en Windows es necesario usar Windows 8 Enterprise o superior o recurrir a software de terceros. Esquema de red NFS. Ventajas \u00b6 Al centralizar los recursos evitamos tener varias copias en diferentes nodos de la red. \u2192 Ahorrando espacio y evitando duplicidad de informaci\u00f3n. Asegura integridad de datos, al obligar a que todas las escrituras sean finalizadas antes de que otro usuario haga otras modificaciones. Permite almacenar toda la informaci\u00f3n de los perfiles de usuario, incluyendo su directorio /home . Por tanto un usuario podr\u00e1 acceder a su partici\u00f3n de datos desde cualquier nodo de la red. Permite compartir dispositivos de almacenamiento externos como memorias flash o discos externos. Esto permite ahorrar costes en la compra de equipamiento al ahorrar su aprovechamiento. Caracter\u00edsticas de seguridad para el control de acceso: ACLS o KERBEROS . Permisos en NFS. \u00b6 NFS tiene una carencia en el control de permisos, por ello se combina con LDAP que se encargar\u00e1 de la gesti\u00f3n de los permisos. La carencia es debida a que en UNIX cada usuario tiene un identificador llamado UID y cada grupo de usuarios tiene otro identificador GID . NFS traspasa los ficheros a los clientes con los permisos relacionados con el UID y el GID existentes en el servidor. Es decir, que si en el servidor existe un usuario \u201cjavi\u201d con UID 1003 y en el cliente hay un usuario \u201cmar\u00eda\u201d con UID 1003 ambos tendr\u00e1n los mismos permisos. Ejemplo (somebooks.es): Ejemplo de problema de permisos en NFS. A continuaci\u00f3n se explican los problemas del ejemplo anterior: root : Como coinciden tanto el UID como el GID el usuario root del cliente podr\u00e1 actuar como usuario root del servidor NFS, al no ser que tengamos la opci\u00f3n de root_squash activada. usuario : Al igual que pasa con root al tener mismo UID y GID tanto en el servidor como en el cliente. jlopez : no tiene el mismo UID o GID en el servidor que en el cliente. No obstante en el cliente tiene un GID 1030 por lo que tendr\u00e1 los permisos del grupo \u201c Direcci\u00f3n \u201d, cuando realmente dicho usuario no pertenece a ese grupo. fgil : El usuario fgil, el cual solo se encuentra en el cliente, tendr\u00e1 los permisos del usuario aperez del servidor, ya que comparten UID. Adem\u00e1s pertenecer\u00e1 al grupo de \u201c Direcci\u00f3n \u201d debido a su GID. Montaje Autom\u00e1tico de un cliente NFS. \u00b6 En los sistemas UNIX los vol\u00famenes (discos duros, servidores, usb, etc) pueden montarse autom\u00e1ticamente al arrancar. Esto se consigue editando el fichero /etc/fstab (file systems table). Fichero /etc/fstab : Cada l\u00ednea pertenece al montaje de un volumen y se compone de: Dispositivo que se va a montar : \u201cIP del servidor\u201d:\u201druta de la carpeta compartida\u201d Ejemplo: 192.168.0.100:/home/usuarioServidor/Escritorio/compartido Punto de montaje : Donde queremos que se monte en nuestro equipo. Ejemplo: /mnt/nfs/compartir Sistema de archivos : Indica el sistema de archivo utilizado en el volumen. En este caso ser\u00e1 \u201cnfs\u201d. Opciones de montaje , usaremos las siguientes: auto,noatime,nolock,bg,nfsvers=3,intr,tcp,actimeo= Frecuencia de Respaldo : Tiempo con el que se realiza copia de seguridad, si su valor es 0 no se realiza copia. Orden de revisi\u00f3n : Uso para la herramienta fsck para revisar errores en el volumen. Si su valor es 0 no se realiza revisi\u00f3n. Ejemplos: 192.168.1.10:/home /mnt/nfs/home nfs auto,noatime,nolock,bg,nfsvers=3,intr,tcp,actimeo=1800 0 0 192.168.1.10:/home/usuarioServidor/Escritorio/compartir /mnt/nfs/compartir nfs auto,noatime,nolock,bg,nfsvers=3,intr,tcp,actimeo=1800 0 0 Ejemplo de problema de fstab. Nota: Finalmente es necesario reiniciar la m\u00e1quina. Instalaci\u00f3n NFS. \u00b6 Servidor: Actualiza repositorios. Instala el paquete nfs-kernel-server. Cliente: Actualiza repositorios. Instala el paquete nfs-common. Montar en una carpeta la carpeta compartida del servidor. Configuraci\u00f3n General NFS. \u00b6 Servidor: Crea la carpeta compartida. Comprobar permisos en el servidor dependiendo de lo restrictivo que deba ser. Modifica la configuraci\u00f3n de los recursos compartidos en /etc/exports . Actualiza los cambios: sudo exportfs \u2013a sudo systemctl restart nfs-kernel-server Cliente: Montar en una carpeta la carpeta compartida del servidor. sudo mount IPSerivdor:/RutaCarpetaCompartida /RutaDondeSeMontaEnCliente Ejemplos: mount 192.168.18.4:/home/alumno/compartida /home/salva/compartida Fichero de Configuraci\u00f3n NFS (/etc/exports). \u00b6 Cada recurso compartido que se a\u00f1ada debe ir en una nueva l\u00ednea. Los nombres de clientes/usuarios no pueden tener espacios. Entre el nombre de usuario y las opciones no hay espacio en blanco. Las l\u00edneas tienen el siguiente formato: \u201cruta_micarpeta\u201d cliente1(opciones) cliente2(opciones)...clienteN(opciones) Ejemplos: /home *(rw,sync,no_subtree_check) /home/javi/Escritorio/SOR/COMPARTIR/ *(rw,sync,no_subtree_check) /home 192.168.0.19(rw,sync,no_subtree_check) /home 192.168.0.0/24(rw,sync,no_subtree_check) Opciones: \u00b6 ro(read-only) : La carpeta compartida ser\u00e1 de s\u00f3lo lectura. Es la opci\u00f3n predeterminada. rw (read-write) : El usuario podr\u00e1 realizar cambios en el contenido de la carpeta compartida. root_squash : Evita que los usuarios con privilegios administrativos los mantengan, sobre la carpeta compartida, cuando se conectan remotamente. En su lugar, se les trata como un usuario \u201cnfsnobody\u201d que es un usuario con permisos m\u00ednimos. Es la opci\u00f3n predeterminada. no_root_squash : Deshabilita la caracter\u00edstica anterior. sync : Evita responder peticiones antes de escribir los cambios pendientes en disco. De tal forma que cada cambio que recibe la escribe en disco y luego confirma que ha sido escrita correctamente. Es la opci\u00f3n predeterminada. async : Deshabilita la caracter\u00edstica anterior. Mejora el rendimiento a cambio de que exista el riesgo de corrupci\u00f3n en los archivos o, incluso, en todo el sistema de archivos, si se produjese una interrupci\u00f3n del fluido el\u00e9ctrico o un bloqueo del sistema. Recibe la orden de escritura y confirma al cliente que ha sido realizada con \u00e9xito (mentira, ya que no ha sido realizada), acto seguido puede recibir X \u00f3rdenes de otros clientes y a todos les har\u00e1 lo mismo, finalmente realiza escribe todos los cambios a la vez. Por tanto es m\u00e1s r\u00e1pido que el m\u00e9todo s\u00edncrono ya que no debe realizar tantos accesos a memoria. subtree_check : Cuando el directorio compartido es un subdirectorio de un sistema de archivos mayor, NFS comprueba los directorios por encima de \u00e9ste para verificar sus permisos y caracter\u00edsticas. Es la opci\u00f3n predeterminada. no_subtree_check : Deshabilita la caracter\u00edstica anterior, lo que hace que el env\u00edo de la lista de archivos sea m\u00e1s r\u00e1pido, pero puede reducir la seguridad. Actividades de desarrollo UD7_03 \u00b6 Crea una gu\u00eda de instalaci\u00f3n y configuraci\u00f3n de NFS, creando recursos compartidos y comprobando funcinan en Windows 10 y Ubuntu. Te puedes basar en los siguientes enlaces: NFS parte 1 NFS parte 2 NFS parte 3 NFS parte 4 NFS parte 5","title":"7.3- NFS"},{"location":"073_NFS.html#nfs-network-file-system","text":"","title":"NFS (Network File System)"},{"location":"073_NFS.html#caracteristicas-generales","text":"Creado por Sun Microsystems en 1984 ; y Su implementaci\u00f3n se public\u00f3 en una RFC (Request For Comment) para que cualquiera pudiese implementarlo. Una RFC es una publicaci\u00f3n de la IETF. Se utiliza en la redes de \u00e1rea local para crear un sistema de archivo distribuido. Su objetivo es que varios usuarios puedan acceder a los archivos compartidos como si fueran locales. Se centraliza por tanto el almacenamiento de la red. Consta de Dos partes: Servidor \u2192 Almacena los archivos compartidos. Cliente \u2192 Acceden e interact\u00faan con los recursos compartidos. IMPORTANTE Para el uso de NFS en Windows es necesario usar Windows 8 Enterprise o superior o recurrir a software de terceros. Esquema de red NFS.","title":"Caracter\u00edsticas Generales"},{"location":"073_NFS.html#ventajas","text":"Al centralizar los recursos evitamos tener varias copias en diferentes nodos de la red. \u2192 Ahorrando espacio y evitando duplicidad de informaci\u00f3n. Asegura integridad de datos, al obligar a que todas las escrituras sean finalizadas antes de que otro usuario haga otras modificaciones. Permite almacenar toda la informaci\u00f3n de los perfiles de usuario, incluyendo su directorio /home . Por tanto un usuario podr\u00e1 acceder a su partici\u00f3n de datos desde cualquier nodo de la red. Permite compartir dispositivos de almacenamiento externos como memorias flash o discos externos. Esto permite ahorrar costes en la compra de equipamiento al ahorrar su aprovechamiento. Caracter\u00edsticas de seguridad para el control de acceso: ACLS o KERBEROS .","title":"Ventajas"},{"location":"073_NFS.html#permisos-en-nfs","text":"NFS tiene una carencia en el control de permisos, por ello se combina con LDAP que se encargar\u00e1 de la gesti\u00f3n de los permisos. La carencia es debida a que en UNIX cada usuario tiene un identificador llamado UID y cada grupo de usuarios tiene otro identificador GID . NFS traspasa los ficheros a los clientes con los permisos relacionados con el UID y el GID existentes en el servidor. Es decir, que si en el servidor existe un usuario \u201cjavi\u201d con UID 1003 y en el cliente hay un usuario \u201cmar\u00eda\u201d con UID 1003 ambos tendr\u00e1n los mismos permisos. Ejemplo (somebooks.es): Ejemplo de problema de permisos en NFS. A continuaci\u00f3n se explican los problemas del ejemplo anterior: root : Como coinciden tanto el UID como el GID el usuario root del cliente podr\u00e1 actuar como usuario root del servidor NFS, al no ser que tengamos la opci\u00f3n de root_squash activada. usuario : Al igual que pasa con root al tener mismo UID y GID tanto en el servidor como en el cliente. jlopez : no tiene el mismo UID o GID en el servidor que en el cliente. No obstante en el cliente tiene un GID 1030 por lo que tendr\u00e1 los permisos del grupo \u201c Direcci\u00f3n \u201d, cuando realmente dicho usuario no pertenece a ese grupo. fgil : El usuario fgil, el cual solo se encuentra en el cliente, tendr\u00e1 los permisos del usuario aperez del servidor, ya que comparten UID. Adem\u00e1s pertenecer\u00e1 al grupo de \u201c Direcci\u00f3n \u201d debido a su GID.","title":"Permisos en NFS."},{"location":"073_NFS.html#montaje-automatico-de-un-cliente-nfs","text":"En los sistemas UNIX los vol\u00famenes (discos duros, servidores, usb, etc) pueden montarse autom\u00e1ticamente al arrancar. Esto se consigue editando el fichero /etc/fstab (file systems table). Fichero /etc/fstab : Cada l\u00ednea pertenece al montaje de un volumen y se compone de: Dispositivo que se va a montar : \u201cIP del servidor\u201d:\u201druta de la carpeta compartida\u201d Ejemplo: 192.168.0.100:/home/usuarioServidor/Escritorio/compartido Punto de montaje : Donde queremos que se monte en nuestro equipo. Ejemplo: /mnt/nfs/compartir Sistema de archivos : Indica el sistema de archivo utilizado en el volumen. En este caso ser\u00e1 \u201cnfs\u201d. Opciones de montaje , usaremos las siguientes: auto,noatime,nolock,bg,nfsvers=3,intr,tcp,actimeo= Frecuencia de Respaldo : Tiempo con el que se realiza copia de seguridad, si su valor es 0 no se realiza copia. Orden de revisi\u00f3n : Uso para la herramienta fsck para revisar errores en el volumen. Si su valor es 0 no se realiza revisi\u00f3n. Ejemplos: 192.168.1.10:/home /mnt/nfs/home nfs auto,noatime,nolock,bg,nfsvers=3,intr,tcp,actimeo=1800 0 0 192.168.1.10:/home/usuarioServidor/Escritorio/compartir /mnt/nfs/compartir nfs auto,noatime,nolock,bg,nfsvers=3,intr,tcp,actimeo=1800 0 0 Ejemplo de problema de fstab. Nota: Finalmente es necesario reiniciar la m\u00e1quina.","title":"Montaje Autom\u00e1tico de un cliente NFS."},{"location":"073_NFS.html#instalacion-nfs","text":"Servidor: Actualiza repositorios. Instala el paquete nfs-kernel-server. Cliente: Actualiza repositorios. Instala el paquete nfs-common. Montar en una carpeta la carpeta compartida del servidor.","title":"Instalaci\u00f3n NFS."},{"location":"073_NFS.html#configuracion-general-nfs","text":"Servidor: Crea la carpeta compartida. Comprobar permisos en el servidor dependiendo de lo restrictivo que deba ser. Modifica la configuraci\u00f3n de los recursos compartidos en /etc/exports . Actualiza los cambios: sudo exportfs \u2013a sudo systemctl restart nfs-kernel-server Cliente: Montar en una carpeta la carpeta compartida del servidor. sudo mount IPSerivdor:/RutaCarpetaCompartida /RutaDondeSeMontaEnCliente Ejemplos: mount 192.168.18.4:/home/alumno/compartida /home/salva/compartida","title":"Configuraci\u00f3n General NFS."},{"location":"073_NFS.html#fichero-de-configuracion-nfs-etcexports","text":"Cada recurso compartido que se a\u00f1ada debe ir en una nueva l\u00ednea. Los nombres de clientes/usuarios no pueden tener espacios. Entre el nombre de usuario y las opciones no hay espacio en blanco. Las l\u00edneas tienen el siguiente formato: \u201cruta_micarpeta\u201d cliente1(opciones) cliente2(opciones)...clienteN(opciones) Ejemplos: /home *(rw,sync,no_subtree_check) /home/javi/Escritorio/SOR/COMPARTIR/ *(rw,sync,no_subtree_check) /home 192.168.0.19(rw,sync,no_subtree_check) /home 192.168.0.0/24(rw,sync,no_subtree_check)","title":"Fichero de Configuraci\u00f3n NFS (/etc/exports)."},{"location":"073_NFS.html#actividades-de-desarrollo-ud7_03","text":"Crea una gu\u00eda de instalaci\u00f3n y configuraci\u00f3n de NFS, creando recursos compartidos y comprobando funcinan en Windows 10 y Ubuntu. Te puedes basar en los siguientes enlaces: NFS parte 1 NFS parte 2 NFS parte 3 NFS parte 4 NFS parte 5","title":"Actividades de desarrollo UD7_03"},{"location":"074_NextCloud.html","text":"NextCloud \u00b6 Nextcloud es una serie de programas cliente-servidor que permiten la creaci\u00f3n de servicios de alojamiento de archivos. Su funcionalidad es similar al software Dropbox, aunque Nextcloud en su totalidad de c\u00f3digo abierto. Nextcloud permite a los usuarios crear servidores privados. NextCloud con Docker. \u00b6 Estamos trabajando en una empresa maravillosa y tienen la necesidad de compartir recursos (carpetas, documentos, im\u00e1genes...), tanto entre las personas dentro de la empresa como con clientes fuera de \u00e9sta. Para haceros valer dentro de la empresa indic\u00e1is que pod\u00e9is montar un servidor \u201cNextCloud\u201d en unos pocos minutos para solventar dicho problema. La empresa cuenta con un equipo Linux que hace de servidor, decid\u00eds hacer uso de docker para levantar el servicio NextCloud de una forma muy r\u00e1pida y sencilla. No obstante deb\u00e9is cumplir con los siguientes requerimientos: El servicio docker se debe levantar en la red 192.168.20.0/24. Debe tener la traducci\u00f3n est\u00e1tica del puerto 80 de la m\u00e1quina anfitriona al puerto 80 del contenedor. Debe tener un volumen asociado llamado \u201cvolNextCloud\u201d. Sube un fichero de prueba, comprueba si est\u00e1 en la carpeta volumen creada. En caso de no estar: Prueba a subir un fichero a la plataforma NextCloud. Acto seguido dentro del contenedor busca en que directorio se ha guardado dicho fichero. Lee la documentaci\u00f3n sobre la imagen NextCloud que hay en Dockerhub Nextcloud_Docker . Actividades de desarrollo UD7_03 \u00b6 Realiza las siguientes actividades: Investiga: \u00b6 Crea el contenedor Nextcloud \u00bfAl crear el contenedor se ha generado autom\u00e1ticamente alg\u00fan volumen? \u00bfCu\u00e1l? Dentro del sistema anfitri\u00f3n (lliurex/Windows) \u00bfD\u00f3nde est\u00e1 guardado el fichero subido previamente? \u00bfEste contenedor es persistente? \u00bfQu\u00e9 significa que el contenedor es persistente? \u00bfC\u00f3mo lo has comprobado? NextCloud \u2013 Usuarios. \u00b6 \u00bfC\u00f3mo podemos ver el hist\u00f3rico de acciones de nuestro usuario? \u00bfC\u00f3mo podemos a\u00f1adir contactos para poder compartir ficheros con ellos? \u00bfC\u00f3mo compartes un fichero con un compa\u00f1ero? Indica los permisos de escritura/lectura que se le pueden poner al fichero compartido. \u00bfC\u00f3mo puedes dejar de compartir un fichero sin eliminarlo? \u00bfC\u00f3mo puedes eliminar un fichero que has subido? Si ese fichero estaba compartido con alguien \u00bfqu\u00e9 sucede desde el punto de vista de \u00e9ste \u00faltimo? \u00bfC\u00f3mo se establece una fecha de caducidad de un fichero compartido, par que tras esa fecha, deje de ser accesible autom\u00e1ticamente. \u00bfC\u00f3mo podemos crear un enlace para compartir un recurso con personas que no tengan usuario y sean completamente ajenas a nuestro sistema? \u00bfC\u00f3mo podemos marcar con una etiqueta varios ficheros y luego usar el buscador de etiquetas para que nos muestre todos los recursos con dicha etiqueta? \u00bfC\u00f3mo se puede realizar una b\u00fasqueda por nombre de fichero? Muestra como desactivar las notificaciones por correo. Una vez desactivadas dichas notificaciones inserta tu correo personal en el perfil para en caso de olvidar la contrase\u00f1a el equipo pueda enviarte un correo con una nueva. NextCloud \u2013 Administraci\u00f3n. \u00b6 Describe gr\u00e1fica y detalladamente como realizar las siguientes acciones: Crea un usuario administrador, que tenga espacio limitado para 300MB. Crea un grupo \u201cInform\u00e1tica\u201d y crea un usuario nuevo con espacio ilimitado que pertenezca a ese grupo. \u00bfDicho usuario es el administrador del grupo? Busca como obligar que las contrase\u00f1as de los usuarios deban incluir may\u00fasculas y min\u00fasculas. \u00bfC\u00f3mo activar\u00edas el cifrado de la informaci\u00f3n que se intercambian cliente-servidor? \u00bfQu\u00e9 impacto tiene sobre el servicio? \u00bfC\u00f3mo puedes restringir a un usuario para que solo pueda compartir con usuarios de su grupo? Cambia el tema y el fondo de pantalla de tu servidor NextCloud. Describe que elementos podemos monitorizar desde la pantalla de Monitorizaci\u00f3n e indica para que nos puede servir esta informaci\u00f3n.","title":"7.4- NextCloud"},{"location":"074_NextCloud.html#nextcloud","text":"Nextcloud es una serie de programas cliente-servidor que permiten la creaci\u00f3n de servicios de alojamiento de archivos. Su funcionalidad es similar al software Dropbox, aunque Nextcloud en su totalidad de c\u00f3digo abierto. Nextcloud permite a los usuarios crear servidores privados.","title":"NextCloud"},{"location":"074_NextCloud.html#nextcloud-con-docker","text":"Estamos trabajando en una empresa maravillosa y tienen la necesidad de compartir recursos (carpetas, documentos, im\u00e1genes...), tanto entre las personas dentro de la empresa como con clientes fuera de \u00e9sta. Para haceros valer dentro de la empresa indic\u00e1is que pod\u00e9is montar un servidor \u201cNextCloud\u201d en unos pocos minutos para solventar dicho problema. La empresa cuenta con un equipo Linux que hace de servidor, decid\u00eds hacer uso de docker para levantar el servicio NextCloud de una forma muy r\u00e1pida y sencilla. No obstante deb\u00e9is cumplir con los siguientes requerimientos: El servicio docker se debe levantar en la red 192.168.20.0/24. Debe tener la traducci\u00f3n est\u00e1tica del puerto 80 de la m\u00e1quina anfitriona al puerto 80 del contenedor. Debe tener un volumen asociado llamado \u201cvolNextCloud\u201d. Sube un fichero de prueba, comprueba si est\u00e1 en la carpeta volumen creada. En caso de no estar: Prueba a subir un fichero a la plataforma NextCloud. Acto seguido dentro del contenedor busca en que directorio se ha guardado dicho fichero. Lee la documentaci\u00f3n sobre la imagen NextCloud que hay en Dockerhub Nextcloud_Docker .","title":"NextCloud con Docker."},{"location":"074_NextCloud.html#actividades-de-desarrollo-ud7_03","text":"Realiza las siguientes actividades:","title":"Actividades de desarrollo UD7_03"},{"location":"074_NextCloud.html#investiga","text":"Crea el contenedor Nextcloud \u00bfAl crear el contenedor se ha generado autom\u00e1ticamente alg\u00fan volumen? \u00bfCu\u00e1l? Dentro del sistema anfitri\u00f3n (lliurex/Windows) \u00bfD\u00f3nde est\u00e1 guardado el fichero subido previamente? \u00bfEste contenedor es persistente? \u00bfQu\u00e9 significa que el contenedor es persistente? \u00bfC\u00f3mo lo has comprobado?","title":"Investiga:"},{"location":"074_NextCloud.html#nextcloud-usuarios","text":"\u00bfC\u00f3mo podemos ver el hist\u00f3rico de acciones de nuestro usuario? \u00bfC\u00f3mo podemos a\u00f1adir contactos para poder compartir ficheros con ellos? \u00bfC\u00f3mo compartes un fichero con un compa\u00f1ero? Indica los permisos de escritura/lectura que se le pueden poner al fichero compartido. \u00bfC\u00f3mo puedes dejar de compartir un fichero sin eliminarlo? \u00bfC\u00f3mo puedes eliminar un fichero que has subido? Si ese fichero estaba compartido con alguien \u00bfqu\u00e9 sucede desde el punto de vista de \u00e9ste \u00faltimo? \u00bfC\u00f3mo se establece una fecha de caducidad de un fichero compartido, par que tras esa fecha, deje de ser accesible autom\u00e1ticamente. \u00bfC\u00f3mo podemos crear un enlace para compartir un recurso con personas que no tengan usuario y sean completamente ajenas a nuestro sistema? \u00bfC\u00f3mo podemos marcar con una etiqueta varios ficheros y luego usar el buscador de etiquetas para que nos muestre todos los recursos con dicha etiqueta? \u00bfC\u00f3mo se puede realizar una b\u00fasqueda por nombre de fichero? Muestra como desactivar las notificaciones por correo. Una vez desactivadas dichas notificaciones inserta tu correo personal en el perfil para en caso de olvidar la contrase\u00f1a el equipo pueda enviarte un correo con una nueva.","title":"NextCloud \u2013 Usuarios."},{"location":"074_NextCloud.html#nextcloud-administracion","text":"Describe gr\u00e1fica y detalladamente como realizar las siguientes acciones: Crea un usuario administrador, que tenga espacio limitado para 300MB. Crea un grupo \u201cInform\u00e1tica\u201d y crea un usuario nuevo con espacio ilimitado que pertenezca a ese grupo. \u00bfDicho usuario es el administrador del grupo? Busca como obligar que las contrase\u00f1as de los usuarios deban incluir may\u00fasculas y min\u00fasculas. \u00bfC\u00f3mo activar\u00edas el cifrado de la informaci\u00f3n que se intercambian cliente-servidor? \u00bfQu\u00e9 impacto tiene sobre el servicio? \u00bfC\u00f3mo puedes restringir a un usuario para que solo pueda compartir con usuarios de su grupo? Cambia el tema y el fondo de pantalla de tu servidor NextCloud. Describe que elementos podemos monitorizar desde la pantalla de Monitorizaci\u00f3n e indica para que nos puede servir esta informaci\u00f3n.","title":"NextCloud \u2013 Administraci\u00f3n."},{"location":"Administraci%C3%B3n%20de%20servicios.html","text":"Iniciar y detener servicios \u00b6 Para iniciar un servicio systemd , ejecutar instrucciones en el archivo de la unidad del servicio, utilice el comando start . Si est\u00e1 ejecutando como usuario non-root, tendr\u00e1 que usar sudo , ya que esto afectar\u00e1 al estado del sistema operativo. sudo systemctl start application.service Como hemos mencionado antes, systemd sabe buscar los archivos *.service para los comandos de administraci\u00f3n de servicio, de forma que el comando podr\u00eda escribirse f\u00e1cilmente as\u00ed: sudo systemctl start application Aunque puede usar el formato anterior para la administraci\u00f3n general, para mayor claridad, usaremos el sufijo .service para el resto de los comandos, con el objetivo de ser expl\u00edcitos sobre el destino en el que estamos operando. Para detener un servicio que se est\u00e9 ejecutando actualmente, puede usar el comando stop : sudo systemctl stop application.service Reiniciar y volver a cargar \u00b6 Para reiniciar un servicio en ejecuci\u00f3n, puede usar el comando restart : sudo systemctl restart application.service Si la aplicaci\u00f3n en cuesti\u00f3n puede volver a cargar sus archivos de configuraci\u00f3n (sin reiniciar), puede emitir el comando reload para iniciar ese proceso: sudo systemctl reload application.service Si no est\u00e1 seguro de si el servicio tiene la funcionalidad de volver a cargar su configuraci\u00f3n, puede emitir el comando reload-or-restart . Esto volver\u00e1 a cargar la configuraci\u00f3n en vigor, si est\u00e1 disponible. De lo contrario, reiniciar\u00e1 el servicio de forma que se recoja la nueva configuraci\u00f3n: sudo systemctl reload-or-restart application.service C\u00f3mo habilitar y deshabilitar servicios \u00b6 Los comandos anteriores son \u00fatiles para iniciar o detener servicios durante la sesi\u00f3n actual. Para indicar a systemd que inicie servicios autom\u00e1ticamente en el arranque, debe habilitarlos. Para iniciar un servicio en el arranque, utilice el comando enable : sudo systemctl enable application.service Esto crear\u00e1 un enlace simb\u00f3lico desde la copia del sistema del archivo de servicio (normalmente en /lib/systemd/system o /etc/systemd/system ) en la ubicaci\u00f3n del disco donde systemd busca los archivos de inicio autom\u00e1tico (normalmente /etc/systemd/system/some_target.target.wants . Repasaremos qu\u00e9 es un destino m\u00e1s adelante en esta gu\u00eda). Para impedir que el servicio se inicie autom\u00e1ticamente, puede escribir: sudo systemctl disable application.service Esto eliminar\u00e1 el enlace simb\u00f3lico que indicaba que el servicio deb\u00eda iniciarse autom\u00e1ticamente. Tenga en cuenta que habilitar el servicio no lo inicia en la sesi\u00f3n actual. Si desea iniciar el servicio y habilitarlo en el arranque, tendr\u00e1 que emitir los comandos start y enable . C\u00f3mo comprobar el estado de los servicios \u00b6 Para comprobar el estado de un servicio en su sistema, puede usar el comando status : systemctl status application.service Esto le proporcionar\u00e1 el estado del servicio, la jerarqu\u00eda de cgroup y las primeras l\u00edneas de registro. Por ejemplo, cuando se comprueba el estado de un servidor Nginx, puede ver un resultado como este: Output\u25cf nginx.service - A high performance web server and a reverse proxy server Loaded : loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset : disabled) Active : active (running) since Tue 2015-01-27 19:41:23 EST; 22h ago Main PID : 495 (nginx) CGroup : /system.slice/nginx.service \u251c\u2500495 nginx : master process /usr/bin/nginx -g pid /run/nginx.pid; error_log stderr; \u2514\u2500496 nginx : worker process Jan 27 19:41:23 desktop systemd[1] : Starting A high performance web server and a reverse proxy server... Jan 27 19:41:23 desktop systemd[1] : Started A high performance web server and a reverse proxy server. Esto le proporciona una buena visi\u00f3n general del estado actual de la aplicaci\u00f3n, y le notifica de cualquier problema y cualquier acci\u00f3n que pueda ser necesaria. Tambi\u00e9n hay m\u00e9todos para comprobar los estados espec\u00edficos. Por ejemplo, para comprobar si una unidad est\u00e1 activa actualmente (ejecut\u00e1ndose) puede usar el comando is-active : systemctl is-active application.service Esto devolver\u00e1 el estado actual de la unidad, que es normalmente activo o inactivo . El c\u00f3digo de salida ser\u00e1 \"0\" si est\u00e1 activo, lo que hace que el resultado sea m\u00e1s sencillo de analizar en las secuencias de comando shell. Para ver si la unidad est\u00e1 habilitada, puede usar el comando is-enabled : systemctl is-enabled application.service Esto indicar\u00e1 si el servicio est\u00e1 habilitado o deshabilitado y establecer\u00e1 el c\u00f3digo de salida a \"0\" o \"1\", dependiendo de la respuesta a la pregunta del comando. Una tercera comprobaci\u00f3n es si la unidad est\u00e1 en estado fallido. Esto indica que hubo un problema al iniciar la unidad en cuesti\u00f3n: systemctl is-failed application.service Esto devolver\u00e1 active si se est\u00e1 ejecutando adecuadamente o failed si se ha producido un error. Si la unidad se detuvo intencionadamente, puede devolver unknown o inactive . Un estado de salida de \"0\" indica que se produjo un error y un estado de salida de \"1\" indica cualquier otro estado. Descripci\u00f3n general del estado del sistema \u00b6 Los comandos hasta ahora han sido \u00fatiles para administrar servicios individuales, pero no son muy \u00fatiles para explorar el estado actual del sistema. Hay varios comandos systemctl que proporcionan esta informaci\u00f3n. C\u00f3mo enumerar las unidades actuales \u00b6 Para ver una lista de todas las unidades activas que systemd conoce, podemos usar el comando list-units : systemctl list-units Esto le mostrar\u00e1 una lista de todas las unidades que systemd tiene activas actualmente en el sistema. El resultado tendr\u00e1 un aspecto similar a este: OutputUNIT LOAD ACTIVE SUB DESCRIPTION atd.service loaded active running ATD daemon avahi-daemon.service loaded active running Avahi mDNS/DNS-SD Stack dbus.service loaded active running D-Bus System Message Bus dcron.service loaded active running Periodic Command Scheduler dkms.service loaded active exited Dynamic Kernel Modules System getty@tty1.service loaded active running Getty on tty1 . . . El resultado tiene las siguientes columnas: UNIT: El nombre de la unidad de systemd LOAD: Si la configuraci\u00f3n de la unidad ha sido analizada por systemd . La configuraci\u00f3n de las unidades cargadas se mantiene en la memoria. ACTIVE: Un estado resumido que indica si la unidad est\u00e1 activa. Esta es normalmente una forma bastante b\u00e1sica de saber si la unidad se ha iniciado correctamente o no. SUB: Este es un estado de nivel inferior que indica informaci\u00f3n m\u00e1s detallada sobre la unidad. Esto a menudo var\u00eda por tipo de unidad, estado y el m\u00e9todo real en el que se ejecuta la unidad. DESCRIPTION: Una descripci\u00f3n textual breve de qu\u00e9 es y hace la unidad. Ya que el comando list-units muestra solo las unidades activas por defecto, todas las entradas por encima se mostrar\u00e1n loaded en la columna LOAD y active en la columna ACTIVE. Esta pantalla es, en realidad, el comportamiento predeterminado de systemctl cuando se invoca sin comandos adicionales, de modo que ver\u00e1 lo mismo si invoca systemctl sin argumentos: systemctl Podemos indicar a systemctl que produzca informaci\u00f3n diferente a\u00f1adiendo marcadores adicionales. Por ejemplo, para ver todas las unidades que systemd ha cargado (o intentado cargar), independientemente de si est\u00e1n activas actualmente, puede usar el marcador --all , de esta forma: systemctl list-units --all Esto mostrar\u00e1 cualquier unidad que systemd haya cargado o intentado cargar, independientemente de su estado actual en el sistema. Ciertas unidades se vuelven inactivas tras ejecutarse, y algunas de las unidades que systemd intent\u00f3 cargar pueden no haberse encontrado en el disco. Puede usar otros marcadores para filtrar estos resultados. Por ejemplo, puede usar el indicador --state= para indicar los estados LOAD, ACTIVE o SUB que deseamos ver. Tendremos que mantener el marcador --all para que systemctl permita que se muestren las unidades no activas: systemctl list-units --all --state=inactive Otro filtro com\u00fan es el filtro --type= . Podemos indicar a systemctl que solo muestre unidades del tipo en el que estemos interesados. Por ejemplo, para ver \u00fanicamente las unidades de servicio activas, podemos usar: systemctl list-units --type=service Listar todos los archivos de la unidad \u00b6 El comando list-units solo muestra las unidades que systemd ha intentado analizar y cargar en la memoria. Ya que systemd solo leer\u00e1 unidades que cree que necesita, esto no incluir\u00e1 necesariamente todas las unidades disponibles en el sistema. Para ver todos los archivos de unidad disponibles en las rutas systemd , incluidos aquellos que systemd no haya intentado cargar, puede usar el comando list-unit-files : systemctl list-unit-files Las unidades son representaciones de los recursos que systemd conoce. Ya que systemd no ha le\u00eddo necesariamente todas las definiciones de la unidades en esta vista, solo presente informaci\u00f3n sobre los propios archivos. El resultado tiene dos columnas, el archivo de la unidad y el estado. OutputUNIT FILE STATE proc-sys-fs-binfmt_misc.automount static dev-hugepages.mount static dev-mqueue.mount static proc-fs-nfsd.mount static proc-sys-fs-binfmt_misc.mount static sys-fs-fuse-connections.mount static sys-kernel-config.mount static sys-kernel-debug.mount static tmp.mount static var-lib-nfs-rpc_pipefs.mount static org.cups.cupsd.path enabled . . . El estado normalmente estar\u00e1 habilitado , deshabilitado , est\u00e1tico o enmascarado . En este contexto, \"est\u00e1tico\" significa que el archivo de unidad no contiene una secci\u00f3n install , que se utiliza para habilitar una unidad. Como tal, estas unidades no pueden habilitarse. Normalmente, esto significa que la unidad realiza una \u00fanica acci\u00f3n o se utiliza solo como dependencia de otra unidad y no deber\u00eda ejecutarse por s\u00ed misma. En breve explicaremos lo que significa enmascarado . Gesti\u00f3n de la unidad \u00b6 Hasta ahora, hemos estado trabajando con servicios y mostrando informaci\u00f3n sobre la unidad y los archivos de la unidad que systemd conoce. Sin embargo, encontraremos m\u00e1s informaci\u00f3n espec\u00edfica sobre las unidades usando algunos comandos adicionales. Mostrar un archivo de unidad \u00b6 Para mostrar el archivo de unidad que systemd ha cargado en su sistema, puede usar el comando cat (esto se a\u00f1adi\u00f3 en la versi\u00f3n 209 de systemd ). Por ejemplo, para ver el archivo de unidad del daemon de programaci\u00f3n atd , podr\u00edamos escribir: systemctl cat atd.service Output[Unit] Description=ATD daemon [Service] Type=forking ExecStart=/usr/bin/atd [Install] WantedBy=multi-user.target El resultado es el archivo de unidad tal como lo conoce el proceso systemd que se est\u00e1 ejecutando actualmente. Esto puede ser importante si ha modificado archivos de unidad recientemente o si est\u00e1 omitiendo ciertas opciones en un fragmento del archivo de unidad (hablaremos de esto m\u00e1s tarde). Mostrar dependencias \u00b6 Para ver el \u00e1rbol de dependencias de una unidad, puede usar el comando list-dependencies : systemctl list-dependencies sshd.service Esto mostrar\u00e1 una jerarqu\u00eda asignando las dependencias que deben tratarse para iniciar la unidad en cuesti\u00f3n. Las dependencias, en este contexto, incluyen las unidades que son necesarias o deseadas por unidades de nivel superior. Outputsshd.service \u251c\u2500system.slice \u2514\u2500basic.target \u251c\u2500microcode.service \u251c\u2500rhel-autorelabel-mark.service \u251c\u2500rhel-autorelabel.service \u251c\u2500rhel-configure.service \u251c\u2500rhel-dmesg.service \u251c\u2500rhel-loadmodules.service \u251c\u2500paths.target \u251c\u2500slices.target . . . Las dependencias recursivas solo se muestran para las unidades .target , que indican los estados del sistema. Para listar de forma recursiva todas las dependencias, incluya el indicador --all . Para mostrar las dependencias inversas (unidades que dependen de la unidad especificada) puede a\u00f1adir el indicador --reverse al comando. Otros indicadores que son \u00fatiles son los indicadores --before y --after , que pueden usarse para mostrar las unidades que dependen de la unidad especificada que comienza antes y despu\u00e9s de ellas mismas respectivamente. Comprobar las propiedades de la unidad \u00b6 Para ver las propiedades de nivel bajo de una unidad, puede usar el comando show . Esto mostrar\u00e1 una lista de propiedades que se establecen para la unidad especificada usando un formato key=value : systemctl show sshd.service OutputId=sshd.service Names=sshd.service Requires=basic.target Wants=system.slice WantedBy=multi-user.target Conflicts=shutdown.target Before=shutdown.target multi-user.target After=syslog.target network.target auditd.service systemd-journald.socket basic.target system.slice Description=OpenSSH server daemon . . . Si desea mostrar una \u00fanica propiedad, pude pasar el indicador -p con el nombre de la propiedad. Por ejemplo, para ver los conflictos que la unidad sshd.service tiene, puede escribir: systemctl show sshd.service -p Conflicts OutputConflicts=shutdown.target Enmascarar y desenmascarar unidades \u00b6 Vimos en la secci\u00f3n de administraci\u00f3n del servicio c\u00f3mo detener o deshabilitar un servicio, pero systemd tambi\u00e9n tiene la capacidad de marcar una unidad como completamente no iniciable, autom\u00e1tica o manualmente, vincul\u00e1ndola a /dev/null . Esto se denomina enmascarar la unidad, y es posible con el comando mask : sudo systemctl mask nginx.service Esto impedir\u00e1 que el servicio Nginx se inicie, autom\u00e1tica o manualmente, siempre que est\u00e9 enmascarado. Si comprueba los list-unit-files , ver\u00e1 que el servicio ahora se lista como enmascarado: systemctl list-unit-files Output. . . kmod-static-nodes.service static ldconfig.service static mandb.service static messagebus.service static nginx.service masked quotaon.service static rc-local.service static rdisc.service disabled rescue.service static . . . Si intenta iniciar el servicio, ver\u00e1 un mensaje como este: sudo systemctl start nginx.service OutputFailed to start nginx.service: Unit nginx.service is masked. Para desenmascarar una unidad, y hacer que est\u00e9 disponible de nuevo para su uso, utilice el comando unmask : sudo systemctl unmask nginx.service Esto devolver\u00e1 la unidad a su estado anterior, permitiendo que se inicie o habilite. Editar archivos de la unidad \u00b6 Aunque el formato espec\u00edfico de los archivos de unidad est\u00e1 fuera del alcance de este tutorial, si necesita realizar ajustes, systemctl proporciona mecanismos integrados para editar y modificar archivos de unidad. Esta funcionalidad fue a\u00f1adida en la versi\u00f3n 218 de systemd . El comando edit , por defecto, abrir\u00e1 un fragmento de c\u00f3digo del archivo de la unidad para la unidad en cuesti\u00f3n: sudo systemctl edit nginx.service Este ser\u00e1 un archivo en blanco que puede usarse para omitir o a\u00f1adir directivas a la definici\u00f3n de la unidad. Se crear\u00e1 un directorio en el directorio /etc/systemd/system que contiene el nombre de la unidad con .d anexada. Por ejemplo, para el nginx.service , se crear\u00e1 un directorio llamado nginx.service.d . En este directorio, se crear\u00e1 un fragmento de c\u00f3d igo llamado o verride.conf. Cuando se carga la unidad, systemd , en la memoria, fusionar\u00e1 el fragmento de c\u00f3digo de anulaci\u00f3n con el archivo de unidad completo. Las directivas del snippet prevalecer\u00e1n sobre las encontradas en el archivo original de la unidad. Si desea editar el archivo completo de la unidad en vez de crear un fragmento de c\u00f3digo, puede pasar el indicador --full : sudo systemctl edit --full nginx.service Esto cargar\u00e1 el archivo de unidad actual en el editor, donde se podr\u00e1 modificar. Cuando sale el editor, el archivo cambiado se escribir\u00e1 a /etc/systemd/system , que tendr\u00e1 prioridad sobre la definici\u00f3n de la unidad del sistema (normalmente se encuentra en alg\u00fan lugar de /lib/systemd/system ). Para eliminar cualquier adici\u00f3n que haya realizado, elimine el directorio de configuraci\u00f3n .d de la unidad o el archivo de servicio modificado de /etc/systemd/system . Por ejemplo, para eliminar un fragmento de c\u00f3digo, podr\u00edamos escribir lo siguiente: sudo rm -r /etc/systemd/system/nginx.service.d Para eliminar un archivo de unidad completo modificado, escribir\u00edamos: sudo rm /etc/systemd/system/nginx.service Tras eliminar el archivo o directorio, deber\u00eda volver a cargar el proceso systemd de forma que deje de intentar hacer referencia a estos archivos y vuelve a usar las copias del sistema. Puede hacerlo escribiendo lo siguiente: sudo systemctl daemon-reload Ajustar el estado del sistema (Runlevel) con los destinos \u00b6 Los destinos son archivos de unidad especiales que describen el estado de un sistema o un punto de sincronizaci\u00f3n. Igual que otras unidades, los archivos que definen los destinos pueden identificarse por su sufijo, que en este caso es .target . Los destinos no hacen mucho por s\u00ed mismos, pero se utilizan para agrupar otras unidades. Esto puede usarse para llevar al sistema a ciertos estados, de forma muy similar que otros sistemas init utilizan runlevels. Se utilizan como referencia para cuando ciertas funciones est\u00e9n disponibles, lo que le permite especificar el estado deseado en vez de las unidades individuales necesarias para producir ese estado. Por ejemplo, hay un swap.target que se usa para indicar que swap est\u00e1 listo para usarse. Las unidades que son parte de este proceso pueden sincronizarse con este destino indicando en su configuraci\u00f3n que son WantedBy= o RequiredBy= el swap.target . Las unidades que requieren que swap est\u00e9 disponible pueden especificar esta condici\u00f3n usando las especificaciones Wants= , Requires= y After= para indicar la naturaleza de su relaci\u00f3n. Obtener y establecer el destino predeterminado \u00b6 El proceso systemd tiene un destino predeterminado que utiliza cuando se inicia el sistema. Satisfacer la cascada de dependencias de ese destino individual llevar\u00e1 al sistema al estado deseado. Para encontrar el destino predeterminado de su sistema, escriba: systemctl get-default Outputmulti-user.target Si desea establecer un destino predeterminado diferente, puede usar set-default . Por ejemplo, si tiene un escritorio gr\u00e1fico instalado y desea que el sistema se inicie a esto por defecto, puede cambiar el destino predeterminado: sudo systemctl set-default graphical.target C\u00f3mo enumerar los destinos disponibles \u00b6 Puede obtener una lista de los destinos disponibles en su sistema escribiendo: systemctl list-unit-files --type=target A diferencia de runlevels, puede haber m\u00faltiples destinos activos a la vez. Un destino activo indica que systemd ha intentado iniciar todas las unidades relacionadas con el destino y no ha intentado desglosarlas de nuevo. Para ver todos los destinos activos, escriba: systemctl list-units --type=target Aislar destinos \u00b6 Es posible iniciar todas las unidades asociadas con un destino y detener todas las que no son parte del \u00e1rbol de dependencias. El comando que necesitamos para hacer esto se denomina, apropiadamente, isolate . Esto es similar a cambiar el runlevel en otros sistemas init. Por ejemplo, si est\u00e1 operando en un entorno gr\u00e1fico con graphical.target activo, puede apagar el sistema gr\u00e1fico y poner el sistema en un estado de l\u00ednea de comando multi usuario asilando el multi-user.target . Ya que graphical.target depende de multi-user.target pero no al rev\u00e9s, todas las unidades gr\u00e1ficas se detendr\u00e1n. Quiz\u00e1 desee echar un vistazo a las dependencias del destino que est\u00e1 aislando antes de realizar este procedimiento para asegurarse de que no est\u00e1 deteniendo servicios cruciales: systemctl list-dependencies multi-user.target Cuando est\u00e9 satisfecho con las unidades que se mantendr\u00e1n activas, puede aislar el destino escribiendo lo siguiente: sudo systemctl isolate multi-user.target C\u00f3mo usar atajos para eventos importantes \u00b6 Existen destinos definidos para eventos importantes como apagar o reiniciar. Sin embargo, systemctl tambi\u00e9n tiene algunos atajos que a\u00f1aden ciertas funciones adicionales. Por ejemplo, para poner el sistema en el modo rescate (usuario \u00fanico), puede usar simplemente el comando rescue en vez de isolate rescue.target , sudo systemctl rescue Esto proporcionar\u00e1 la funcionalidad adicional de alertar a todos los usuarios con sesi\u00f3n iniciada sobre el evento. Para detener el sistema, puede usar el comando halt : sudo systemctl halt Para iniciar un apagado completo, puede usar el comando poweroff : sudo systemctl poweroff Puede iniciar un reinicio con el comando reboot : sudo systemctl reboot Nota Todos estos comandos alertan a los usuarios con sesi\u00f3n iniciada de que se va a producir el evento, algo que ejecutar o aislar el destino \u00fanicamente no har\u00e1. Observe que la mayor\u00eda de los equipos vincular\u00e1n los comandos m\u00e1s cortos y convencionales para estas operaciones de forma que funcionen adecuadamente con systemd .","title":"Administraci\u00f3n de servicios"},{"location":"Administraci%C3%B3n%20de%20servicios.html#iniciar-y-detener-servicios","text":"Para iniciar un servicio systemd , ejecutar instrucciones en el archivo de la unidad del servicio, utilice el comando start . Si est\u00e1 ejecutando como usuario non-root, tendr\u00e1 que usar sudo , ya que esto afectar\u00e1 al estado del sistema operativo. sudo systemctl start application.service Como hemos mencionado antes, systemd sabe buscar los archivos *.service para los comandos de administraci\u00f3n de servicio, de forma que el comando podr\u00eda escribirse f\u00e1cilmente as\u00ed: sudo systemctl start application Aunque puede usar el formato anterior para la administraci\u00f3n general, para mayor claridad, usaremos el sufijo .service para el resto de los comandos, con el objetivo de ser expl\u00edcitos sobre el destino en el que estamos operando. Para detener un servicio que se est\u00e9 ejecutando actualmente, puede usar el comando stop : sudo systemctl stop application.service","title":"Iniciar y detener servicios"},{"location":"Administraci%C3%B3n%20de%20servicios.html#reiniciar-y-volver-a-cargar","text":"Para reiniciar un servicio en ejecuci\u00f3n, puede usar el comando restart : sudo systemctl restart application.service Si la aplicaci\u00f3n en cuesti\u00f3n puede volver a cargar sus archivos de configuraci\u00f3n (sin reiniciar), puede emitir el comando reload para iniciar ese proceso: sudo systemctl reload application.service Si no est\u00e1 seguro de si el servicio tiene la funcionalidad de volver a cargar su configuraci\u00f3n, puede emitir el comando reload-or-restart . Esto volver\u00e1 a cargar la configuraci\u00f3n en vigor, si est\u00e1 disponible. De lo contrario, reiniciar\u00e1 el servicio de forma que se recoja la nueva configuraci\u00f3n: sudo systemctl reload-or-restart application.service","title":"Reiniciar y volver a cargar"},{"location":"Administraci%C3%B3n%20de%20servicios.html#como-habilitar-y-deshabilitar-servicios","text":"Los comandos anteriores son \u00fatiles para iniciar o detener servicios durante la sesi\u00f3n actual. Para indicar a systemd que inicie servicios autom\u00e1ticamente en el arranque, debe habilitarlos. Para iniciar un servicio en el arranque, utilice el comando enable : sudo systemctl enable application.service Esto crear\u00e1 un enlace simb\u00f3lico desde la copia del sistema del archivo de servicio (normalmente en /lib/systemd/system o /etc/systemd/system ) en la ubicaci\u00f3n del disco donde systemd busca los archivos de inicio autom\u00e1tico (normalmente /etc/systemd/system/some_target.target.wants . Repasaremos qu\u00e9 es un destino m\u00e1s adelante en esta gu\u00eda). Para impedir que el servicio se inicie autom\u00e1ticamente, puede escribir: sudo systemctl disable application.service Esto eliminar\u00e1 el enlace simb\u00f3lico que indicaba que el servicio deb\u00eda iniciarse autom\u00e1ticamente. Tenga en cuenta que habilitar el servicio no lo inicia en la sesi\u00f3n actual. Si desea iniciar el servicio y habilitarlo en el arranque, tendr\u00e1 que emitir los comandos start y enable .","title":"C\u00f3mo habilitar y deshabilitar servicios"},{"location":"Administraci%C3%B3n%20de%20servicios.html#como-comprobar-el-estado-de-los-servicios","text":"Para comprobar el estado de un servicio en su sistema, puede usar el comando status : systemctl status application.service Esto le proporcionar\u00e1 el estado del servicio, la jerarqu\u00eda de cgroup y las primeras l\u00edneas de registro. Por ejemplo, cuando se comprueba el estado de un servidor Nginx, puede ver un resultado como este: Output\u25cf nginx.service - A high performance web server and a reverse proxy server Loaded : loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset : disabled) Active : active (running) since Tue 2015-01-27 19:41:23 EST; 22h ago Main PID : 495 (nginx) CGroup : /system.slice/nginx.service \u251c\u2500495 nginx : master process /usr/bin/nginx -g pid /run/nginx.pid; error_log stderr; \u2514\u2500496 nginx : worker process Jan 27 19:41:23 desktop systemd[1] : Starting A high performance web server and a reverse proxy server... Jan 27 19:41:23 desktop systemd[1] : Started A high performance web server and a reverse proxy server. Esto le proporciona una buena visi\u00f3n general del estado actual de la aplicaci\u00f3n, y le notifica de cualquier problema y cualquier acci\u00f3n que pueda ser necesaria. Tambi\u00e9n hay m\u00e9todos para comprobar los estados espec\u00edficos. Por ejemplo, para comprobar si una unidad est\u00e1 activa actualmente (ejecut\u00e1ndose) puede usar el comando is-active : systemctl is-active application.service Esto devolver\u00e1 el estado actual de la unidad, que es normalmente activo o inactivo . El c\u00f3digo de salida ser\u00e1 \"0\" si est\u00e1 activo, lo que hace que el resultado sea m\u00e1s sencillo de analizar en las secuencias de comando shell. Para ver si la unidad est\u00e1 habilitada, puede usar el comando is-enabled : systemctl is-enabled application.service Esto indicar\u00e1 si el servicio est\u00e1 habilitado o deshabilitado y establecer\u00e1 el c\u00f3digo de salida a \"0\" o \"1\", dependiendo de la respuesta a la pregunta del comando. Una tercera comprobaci\u00f3n es si la unidad est\u00e1 en estado fallido. Esto indica que hubo un problema al iniciar la unidad en cuesti\u00f3n: systemctl is-failed application.service Esto devolver\u00e1 active si se est\u00e1 ejecutando adecuadamente o failed si se ha producido un error. Si la unidad se detuvo intencionadamente, puede devolver unknown o inactive . Un estado de salida de \"0\" indica que se produjo un error y un estado de salida de \"1\" indica cualquier otro estado.","title":"C\u00f3mo comprobar el estado de los servicios"},{"location":"Administraci%C3%B3n%20de%20servicios.html#descripcion-general-del-estado-del-sistema","text":"Los comandos hasta ahora han sido \u00fatiles para administrar servicios individuales, pero no son muy \u00fatiles para explorar el estado actual del sistema. Hay varios comandos systemctl que proporcionan esta informaci\u00f3n.","title":"Descripci\u00f3n general del estado del sistema"},{"location":"Administraci%C3%B3n%20de%20servicios.html#como-enumerar-las-unidades-actuales","text":"Para ver una lista de todas las unidades activas que systemd conoce, podemos usar el comando list-units : systemctl list-units Esto le mostrar\u00e1 una lista de todas las unidades que systemd tiene activas actualmente en el sistema. El resultado tendr\u00e1 un aspecto similar a este: OutputUNIT LOAD ACTIVE SUB DESCRIPTION atd.service loaded active running ATD daemon avahi-daemon.service loaded active running Avahi mDNS/DNS-SD Stack dbus.service loaded active running D-Bus System Message Bus dcron.service loaded active running Periodic Command Scheduler dkms.service loaded active exited Dynamic Kernel Modules System getty@tty1.service loaded active running Getty on tty1 . . . El resultado tiene las siguientes columnas: UNIT: El nombre de la unidad de systemd LOAD: Si la configuraci\u00f3n de la unidad ha sido analizada por systemd . La configuraci\u00f3n de las unidades cargadas se mantiene en la memoria. ACTIVE: Un estado resumido que indica si la unidad est\u00e1 activa. Esta es normalmente una forma bastante b\u00e1sica de saber si la unidad se ha iniciado correctamente o no. SUB: Este es un estado de nivel inferior que indica informaci\u00f3n m\u00e1s detallada sobre la unidad. Esto a menudo var\u00eda por tipo de unidad, estado y el m\u00e9todo real en el que se ejecuta la unidad. DESCRIPTION: Una descripci\u00f3n textual breve de qu\u00e9 es y hace la unidad. Ya que el comando list-units muestra solo las unidades activas por defecto, todas las entradas por encima se mostrar\u00e1n loaded en la columna LOAD y active en la columna ACTIVE. Esta pantalla es, en realidad, el comportamiento predeterminado de systemctl cuando se invoca sin comandos adicionales, de modo que ver\u00e1 lo mismo si invoca systemctl sin argumentos: systemctl Podemos indicar a systemctl que produzca informaci\u00f3n diferente a\u00f1adiendo marcadores adicionales. Por ejemplo, para ver todas las unidades que systemd ha cargado (o intentado cargar), independientemente de si est\u00e1n activas actualmente, puede usar el marcador --all , de esta forma: systemctl list-units --all Esto mostrar\u00e1 cualquier unidad que systemd haya cargado o intentado cargar, independientemente de su estado actual en el sistema. Ciertas unidades se vuelven inactivas tras ejecutarse, y algunas de las unidades que systemd intent\u00f3 cargar pueden no haberse encontrado en el disco. Puede usar otros marcadores para filtrar estos resultados. Por ejemplo, puede usar el indicador --state= para indicar los estados LOAD, ACTIVE o SUB que deseamos ver. Tendremos que mantener el marcador --all para que systemctl permita que se muestren las unidades no activas: systemctl list-units --all --state=inactive Otro filtro com\u00fan es el filtro --type= . Podemos indicar a systemctl que solo muestre unidades del tipo en el que estemos interesados. Por ejemplo, para ver \u00fanicamente las unidades de servicio activas, podemos usar: systemctl list-units --type=service","title":"C\u00f3mo enumerar las unidades actuales"},{"location":"Administraci%C3%B3n%20de%20servicios.html#listar-todos-los-archivos-de-la-unidad","text":"El comando list-units solo muestra las unidades que systemd ha intentado analizar y cargar en la memoria. Ya que systemd solo leer\u00e1 unidades que cree que necesita, esto no incluir\u00e1 necesariamente todas las unidades disponibles en el sistema. Para ver todos los archivos de unidad disponibles en las rutas systemd , incluidos aquellos que systemd no haya intentado cargar, puede usar el comando list-unit-files : systemctl list-unit-files Las unidades son representaciones de los recursos que systemd conoce. Ya que systemd no ha le\u00eddo necesariamente todas las definiciones de la unidades en esta vista, solo presente informaci\u00f3n sobre los propios archivos. El resultado tiene dos columnas, el archivo de la unidad y el estado. OutputUNIT FILE STATE proc-sys-fs-binfmt_misc.automount static dev-hugepages.mount static dev-mqueue.mount static proc-fs-nfsd.mount static proc-sys-fs-binfmt_misc.mount static sys-fs-fuse-connections.mount static sys-kernel-config.mount static sys-kernel-debug.mount static tmp.mount static var-lib-nfs-rpc_pipefs.mount static org.cups.cupsd.path enabled . . . El estado normalmente estar\u00e1 habilitado , deshabilitado , est\u00e1tico o enmascarado . En este contexto, \"est\u00e1tico\" significa que el archivo de unidad no contiene una secci\u00f3n install , que se utiliza para habilitar una unidad. Como tal, estas unidades no pueden habilitarse. Normalmente, esto significa que la unidad realiza una \u00fanica acci\u00f3n o se utiliza solo como dependencia de otra unidad y no deber\u00eda ejecutarse por s\u00ed misma. En breve explicaremos lo que significa enmascarado .","title":"Listar todos los archivos de la unidad"},{"location":"Administraci%C3%B3n%20de%20servicios.html#gestion-de-la-unidad","text":"Hasta ahora, hemos estado trabajando con servicios y mostrando informaci\u00f3n sobre la unidad y los archivos de la unidad que systemd conoce. Sin embargo, encontraremos m\u00e1s informaci\u00f3n espec\u00edfica sobre las unidades usando algunos comandos adicionales.","title":"Gesti\u00f3n de la unidad"},{"location":"Administraci%C3%B3n%20de%20servicios.html#mostrar-un-archivo-de-unidad","text":"Para mostrar el archivo de unidad que systemd ha cargado en su sistema, puede usar el comando cat (esto se a\u00f1adi\u00f3 en la versi\u00f3n 209 de systemd ). Por ejemplo, para ver el archivo de unidad del daemon de programaci\u00f3n atd , podr\u00edamos escribir: systemctl cat atd.service Output[Unit] Description=ATD daemon [Service] Type=forking ExecStart=/usr/bin/atd [Install] WantedBy=multi-user.target El resultado es el archivo de unidad tal como lo conoce el proceso systemd que se est\u00e1 ejecutando actualmente. Esto puede ser importante si ha modificado archivos de unidad recientemente o si est\u00e1 omitiendo ciertas opciones en un fragmento del archivo de unidad (hablaremos de esto m\u00e1s tarde).","title":"Mostrar un archivo de unidad"},{"location":"Administraci%C3%B3n%20de%20servicios.html#mostrar-dependencias","text":"Para ver el \u00e1rbol de dependencias de una unidad, puede usar el comando list-dependencies : systemctl list-dependencies sshd.service Esto mostrar\u00e1 una jerarqu\u00eda asignando las dependencias que deben tratarse para iniciar la unidad en cuesti\u00f3n. Las dependencias, en este contexto, incluyen las unidades que son necesarias o deseadas por unidades de nivel superior. Outputsshd.service \u251c\u2500system.slice \u2514\u2500basic.target \u251c\u2500microcode.service \u251c\u2500rhel-autorelabel-mark.service \u251c\u2500rhel-autorelabel.service \u251c\u2500rhel-configure.service \u251c\u2500rhel-dmesg.service \u251c\u2500rhel-loadmodules.service \u251c\u2500paths.target \u251c\u2500slices.target . . . Las dependencias recursivas solo se muestran para las unidades .target , que indican los estados del sistema. Para listar de forma recursiva todas las dependencias, incluya el indicador --all . Para mostrar las dependencias inversas (unidades que dependen de la unidad especificada) puede a\u00f1adir el indicador --reverse al comando. Otros indicadores que son \u00fatiles son los indicadores --before y --after , que pueden usarse para mostrar las unidades que dependen de la unidad especificada que comienza antes y despu\u00e9s de ellas mismas respectivamente.","title":"Mostrar dependencias"},{"location":"Administraci%C3%B3n%20de%20servicios.html#comprobar-las-propiedades-de-la-unidad","text":"Para ver las propiedades de nivel bajo de una unidad, puede usar el comando show . Esto mostrar\u00e1 una lista de propiedades que se establecen para la unidad especificada usando un formato key=value : systemctl show sshd.service OutputId=sshd.service Names=sshd.service Requires=basic.target Wants=system.slice WantedBy=multi-user.target Conflicts=shutdown.target Before=shutdown.target multi-user.target After=syslog.target network.target auditd.service systemd-journald.socket basic.target system.slice Description=OpenSSH server daemon . . . Si desea mostrar una \u00fanica propiedad, pude pasar el indicador -p con el nombre de la propiedad. Por ejemplo, para ver los conflictos que la unidad sshd.service tiene, puede escribir: systemctl show sshd.service -p Conflicts OutputConflicts=shutdown.target","title":"Comprobar las propiedades de la unidad"},{"location":"Administraci%C3%B3n%20de%20servicios.html#enmascarar-y-desenmascarar-unidades","text":"Vimos en la secci\u00f3n de administraci\u00f3n del servicio c\u00f3mo detener o deshabilitar un servicio, pero systemd tambi\u00e9n tiene la capacidad de marcar una unidad como completamente no iniciable, autom\u00e1tica o manualmente, vincul\u00e1ndola a /dev/null . Esto se denomina enmascarar la unidad, y es posible con el comando mask : sudo systemctl mask nginx.service Esto impedir\u00e1 que el servicio Nginx se inicie, autom\u00e1tica o manualmente, siempre que est\u00e9 enmascarado. Si comprueba los list-unit-files , ver\u00e1 que el servicio ahora se lista como enmascarado: systemctl list-unit-files Output. . . kmod-static-nodes.service static ldconfig.service static mandb.service static messagebus.service static nginx.service masked quotaon.service static rc-local.service static rdisc.service disabled rescue.service static . . . Si intenta iniciar el servicio, ver\u00e1 un mensaje como este: sudo systemctl start nginx.service OutputFailed to start nginx.service: Unit nginx.service is masked. Para desenmascarar una unidad, y hacer que est\u00e9 disponible de nuevo para su uso, utilice el comando unmask : sudo systemctl unmask nginx.service Esto devolver\u00e1 la unidad a su estado anterior, permitiendo que se inicie o habilite.","title":"Enmascarar y desenmascarar unidades"},{"location":"Administraci%C3%B3n%20de%20servicios.html#editar-archivos-de-la-unidad","text":"Aunque el formato espec\u00edfico de los archivos de unidad est\u00e1 fuera del alcance de este tutorial, si necesita realizar ajustes, systemctl proporciona mecanismos integrados para editar y modificar archivos de unidad. Esta funcionalidad fue a\u00f1adida en la versi\u00f3n 218 de systemd . El comando edit , por defecto, abrir\u00e1 un fragmento de c\u00f3digo del archivo de la unidad para la unidad en cuesti\u00f3n: sudo systemctl edit nginx.service Este ser\u00e1 un archivo en blanco que puede usarse para omitir o a\u00f1adir directivas a la definici\u00f3n de la unidad. Se crear\u00e1 un directorio en el directorio /etc/systemd/system que contiene el nombre de la unidad con .d anexada. Por ejemplo, para el nginx.service , se crear\u00e1 un directorio llamado nginx.service.d . En este directorio, se crear\u00e1 un fragmento de c\u00f3d igo llamado o verride.conf. Cuando se carga la unidad, systemd , en la memoria, fusionar\u00e1 el fragmento de c\u00f3digo de anulaci\u00f3n con el archivo de unidad completo. Las directivas del snippet prevalecer\u00e1n sobre las encontradas en el archivo original de la unidad. Si desea editar el archivo completo de la unidad en vez de crear un fragmento de c\u00f3digo, puede pasar el indicador --full : sudo systemctl edit --full nginx.service Esto cargar\u00e1 el archivo de unidad actual en el editor, donde se podr\u00e1 modificar. Cuando sale el editor, el archivo cambiado se escribir\u00e1 a /etc/systemd/system , que tendr\u00e1 prioridad sobre la definici\u00f3n de la unidad del sistema (normalmente se encuentra en alg\u00fan lugar de /lib/systemd/system ). Para eliminar cualquier adici\u00f3n que haya realizado, elimine el directorio de configuraci\u00f3n .d de la unidad o el archivo de servicio modificado de /etc/systemd/system . Por ejemplo, para eliminar un fragmento de c\u00f3digo, podr\u00edamos escribir lo siguiente: sudo rm -r /etc/systemd/system/nginx.service.d Para eliminar un archivo de unidad completo modificado, escribir\u00edamos: sudo rm /etc/systemd/system/nginx.service Tras eliminar el archivo o directorio, deber\u00eda volver a cargar el proceso systemd de forma que deje de intentar hacer referencia a estos archivos y vuelve a usar las copias del sistema. Puede hacerlo escribiendo lo siguiente: sudo systemctl daemon-reload","title":"Editar archivos de la unidad"},{"location":"Administraci%C3%B3n%20de%20servicios.html#ajustar-el-estado-del-sistema-runlevel-con-los-destinos","text":"Los destinos son archivos de unidad especiales que describen el estado de un sistema o un punto de sincronizaci\u00f3n. Igual que otras unidades, los archivos que definen los destinos pueden identificarse por su sufijo, que en este caso es .target . Los destinos no hacen mucho por s\u00ed mismos, pero se utilizan para agrupar otras unidades. Esto puede usarse para llevar al sistema a ciertos estados, de forma muy similar que otros sistemas init utilizan runlevels. Se utilizan como referencia para cuando ciertas funciones est\u00e9n disponibles, lo que le permite especificar el estado deseado en vez de las unidades individuales necesarias para producir ese estado. Por ejemplo, hay un swap.target que se usa para indicar que swap est\u00e1 listo para usarse. Las unidades que son parte de este proceso pueden sincronizarse con este destino indicando en su configuraci\u00f3n que son WantedBy= o RequiredBy= el swap.target . Las unidades que requieren que swap est\u00e9 disponible pueden especificar esta condici\u00f3n usando las especificaciones Wants= , Requires= y After= para indicar la naturaleza de su relaci\u00f3n.","title":"Ajustar el estado del sistema (Runlevel) con los destinos"},{"location":"Administraci%C3%B3n%20de%20servicios.html#obtener-y-establecer-el-destino-predeterminado","text":"El proceso systemd tiene un destino predeterminado que utiliza cuando se inicia el sistema. Satisfacer la cascada de dependencias de ese destino individual llevar\u00e1 al sistema al estado deseado. Para encontrar el destino predeterminado de su sistema, escriba: systemctl get-default Outputmulti-user.target Si desea establecer un destino predeterminado diferente, puede usar set-default . Por ejemplo, si tiene un escritorio gr\u00e1fico instalado y desea que el sistema se inicie a esto por defecto, puede cambiar el destino predeterminado: sudo systemctl set-default graphical.target","title":"Obtener y establecer el destino predeterminado"},{"location":"Administraci%C3%B3n%20de%20servicios.html#como-enumerar-los-destinos-disponibles","text":"Puede obtener una lista de los destinos disponibles en su sistema escribiendo: systemctl list-unit-files --type=target A diferencia de runlevels, puede haber m\u00faltiples destinos activos a la vez. Un destino activo indica que systemd ha intentado iniciar todas las unidades relacionadas con el destino y no ha intentado desglosarlas de nuevo. Para ver todos los destinos activos, escriba: systemctl list-units --type=target","title":"C\u00f3mo enumerar los destinos disponibles"},{"location":"Administraci%C3%B3n%20de%20servicios.html#aislar-destinos","text":"Es posible iniciar todas las unidades asociadas con un destino y detener todas las que no son parte del \u00e1rbol de dependencias. El comando que necesitamos para hacer esto se denomina, apropiadamente, isolate . Esto es similar a cambiar el runlevel en otros sistemas init. Por ejemplo, si est\u00e1 operando en un entorno gr\u00e1fico con graphical.target activo, puede apagar el sistema gr\u00e1fico y poner el sistema en un estado de l\u00ednea de comando multi usuario asilando el multi-user.target . Ya que graphical.target depende de multi-user.target pero no al rev\u00e9s, todas las unidades gr\u00e1ficas se detendr\u00e1n. Quiz\u00e1 desee echar un vistazo a las dependencias del destino que est\u00e1 aislando antes de realizar este procedimiento para asegurarse de que no est\u00e1 deteniendo servicios cruciales: systemctl list-dependencies multi-user.target Cuando est\u00e9 satisfecho con las unidades que se mantendr\u00e1n activas, puede aislar el destino escribiendo lo siguiente: sudo systemctl isolate multi-user.target","title":"Aislar destinos"},{"location":"Administraci%C3%B3n%20de%20servicios.html#como-usar-atajos-para-eventos-importantes","text":"Existen destinos definidos para eventos importantes como apagar o reiniciar. Sin embargo, systemctl tambi\u00e9n tiene algunos atajos que a\u00f1aden ciertas funciones adicionales. Por ejemplo, para poner el sistema en el modo rescate (usuario \u00fanico), puede usar simplemente el comando rescue en vez de isolate rescue.target , sudo systemctl rescue Esto proporcionar\u00e1 la funcionalidad adicional de alertar a todos los usuarios con sesi\u00f3n iniciada sobre el evento. Para detener el sistema, puede usar el comando halt : sudo systemctl halt Para iniciar un apagado completo, puede usar el comando poweroff : sudo systemctl poweroff Puede iniciar un reinicio con el comando reboot : sudo systemctl reboot Nota Todos estos comandos alertan a los usuarios con sesi\u00f3n iniciada de que se va a producir el evento, algo que ejecutar o aislar el destino \u00fanicamente no har\u00e1. Observe que la mayor\u00eda de los equipos vincular\u00e1n los comandos m\u00e1s cortos y convencionales para estas operaciones de forma que funcionen adecuadamente con systemd .","title":"C\u00f3mo usar atajos para eventos importantes"},{"location":"MarkdownSimbolos.html","text":"Markdown s\u00edmbolos \u00b6 flecha izquierda : \u2190 \u2190 flecha hacia arriba : \u2191 \u2191 flecha derecha : \u2192 \u2192 flecha hacia abajo : \u2193 \u2193","title":"Markdown s\u00edmbolos"},{"location":"MarkdownSimbolos.html#markdown-simbolos","text":"flecha izquierda : \u2190 \u2190 flecha hacia arriba : \u2191 \u2191 flecha derecha : \u2192 \u2192 flecha hacia abajo : \u2193 \u2193","title":"Markdown s\u00edmbolos"},{"location":"Practica01_AD.html","text":"Pr\u00e1ctica01_AD \u00b6 Windows Server. \u00b6 Instala la m\u00e1quina de Windows Server bajada de la plataforma Azure, comprobando antes los requisitos del sistema: Requisitos del Sistema \u00b6 Podemos ver los requisitos del sistema en: https://docs.microsoft.com/es-es/windows-server/get-started-19/sys-reqs-19 B\u00e1sicamente los requerimientos m\u00ednimos son: Procesador 64 bits a 1,4GHz. RAM 2GB con entorno de escritorio. 32GB de Disco Duro. Licencias CAL (Client Access Licence) \u00b6 Existen 3 tipos de licencias CAL: CAL de Usuario : Por cada usuario que est\u00e9 dado de alta en el dominio necesitaremos una licencia. CAL de dispositivo : Por cada dispositivo que registremos en el dominio (impresoras, ordenadores, tablets..) necesitaremos una licencia. CAL RDS (Remote Desktop Services) : Son licencias para el acceso mediante escritorio remoto mayormente. El que tengas una licencia que te permita acceder a un servicio remoto de un dispositivo, no te quita de que ese dispositivo tambi\u00e9n cuente con una licencia CAL. Las RDS CAL se activan a trav\u00e9s del Administrador de licenciamiento (online), en cambio sobre las CAL de usuarios y dispositivos no hay un control, pero s\u00ed est\u00e1s obligado a llevar un registro en caso de una auditor\u00eda de software. Las licencias de dispositivo salen rentable si un mismo ordenador lo van a usar m\u00faltiples usuarios, mientras que si cada usuario va a usar un ordenador ser\u00e1 m\u00e1s rentable una licencia de usuario. Example En mi empresa tengo 40 empleados, pero hacen turnos de d\u00eda (8horas), tarde (8 horas) y noches (8 horas). Por tanto, los trabajadores no coinciden a la vez en la oficina, se decide usar licencias por dispositivo y que los trabajadores compartan ordenadores (dispositivos). Example En mi empresa cada trabajador dispone de un port\u00e1til y un ordenador fijo de oficina. Por tanto, como cada usuario tiene 1 o m\u00e1s dispositivos, es m\u00e1s rentable tener licencias por usuario. Versiones de Windows Server \u00b6 Existen 3 versiones, de m\u00e1s sencillo y barato a m\u00e1s caro, estos son: Essentials, Standard y Datacenter. Essentials : S\u00f3lo permite 25 usuarios o 50 dispositivos y no son ampliables. Importante que no es necesario licencias CAL. Por otro lado s\u00f3lo permite instalar de nuevo el Windows Server en una m\u00e1quina virtual, por ejemplo para backup. Standard : Es pr\u00e1cticamente id\u00e9ntico a la versi\u00f3n Datacenter pero con alguna caracter\u00edstica m\u00e1s y solo permite 2 m\u00e1quinas virtuales con dicho Windows Server. Importante que todos los usuarios van por licencias CAL. Datacenter : No tiene limitaciones e incluye todas las caracter\u00edsticas, entre ellas: Software Defined Network: Permite la administraci\u00f3n y configuraci\u00f3n de equipos de red. Permite tambi\u00e9n una f\u00e1cil creaci\u00f3n de una red virtual para gestionar un sistema de m\u00e1quinas virtuales. Direct Storage: Permite una f\u00e1cil gesti\u00f3n de la redundancia y alta disponibilidad (HA) del almacenamiento. Host Guardian (HGS): Permite el uso de un TPM virtual para motivos de seguridad como podr\u00eda ser la encriptaci\u00f3n de los datos de mi servidor. LTSB (Long \u2013Term Servicing Branch): Simplemente son versiones con una garant\u00eda de actualizaciones de 10 a\u00f1os, es decir, se comprometen a ir sacando actualizaciones de seguridad y mantener el sistema operativo de esta versi\u00f3n por lo menos 10 a\u00f1os desde su compra. Caracter\u00edsticas de las Versiones de Windows Server Azure \u00b6 Azure es la plataforma cloud de Microsoft. Esta plataforma cloud nos ofrece poder crear y gestionar servidores virtuales en dicha plataforma. Podemos gestionar la red virtual entre nuestros servidores virtuales, crear plataformas de desarrollo o integrar aplicaciones, gestionar el almacenamiento y las copias de seguridad, monitorizaci\u00f3n de los servicios, etc. Todo esto de una forma sencilla con una interfaz de usuario. Las principales ventajas son: No necesitas comprar y mantener ning\u00fan \u201chardware\u201d, todo est\u00e1 en la nube, virtualizado en los equipos de Microsoft (Azure). Necesitas menos personal para el mantenimiento, ya que la parte hardware y de instalaci\u00f3n f\u00edsica no existen. Es m\u00e1s f\u00e1cil redundar los datos y tener tu sistema disponible para los clientes. Es decir, imagina que no usas Azure y tienes tu servidor en la empresa y hay un corte de suministro el\u00e9ctrico, los clientes se quedar\u00e1n sin servicio, por tanto no tienes una alta disponibilidad. La principal desventaja es que tus datos est\u00e1n en una empresa externa, la cual en principio no puede comercializar con dichos datos, ni siquiera acceder a ellos, no obstante es algo a tener en cuenta. Hyper-V \u00b6 Hyper-V es un hipervisor de m\u00e1quinas virtuales, es decir, permite la creaci\u00f3n y gesti\u00f3n de m\u00e1quinas virtuales. Es un hipervisor de tipo 1 (bare metal), es decir, viene integrado en el propio sistema operativo y por tanto no requiere de instalaciones adicionales. Vmware o VirtualBox ser\u00edan un ejemplo de hipervisor de tipo 2 , los cuales deben ser instalados encima del sistema operativo (Windows/MAC/Linux) de la m\u00e1quina anfitriona. Tipos de Hipervisor.","title":"Pr\u00e1ctica01_AD"},{"location":"Practica01_AD.html#practica01_ad","text":"","title":"Pr\u00e1ctica01_AD"},{"location":"Practica01_AD.html#windows-server","text":"Instala la m\u00e1quina de Windows Server bajada de la plataforma Azure, comprobando antes los requisitos del sistema:","title":"Windows Server."},{"location":"Practica01_AD.html#requisitos-del-sistema","text":"Podemos ver los requisitos del sistema en: https://docs.microsoft.com/es-es/windows-server/get-started-19/sys-reqs-19 B\u00e1sicamente los requerimientos m\u00ednimos son: Procesador 64 bits a 1,4GHz. RAM 2GB con entorno de escritorio. 32GB de Disco Duro.","title":"Requisitos del Sistema"},{"location":"Practica01_AD.html#licencias-cal-client-access-licence","text":"Existen 3 tipos de licencias CAL: CAL de Usuario : Por cada usuario que est\u00e9 dado de alta en el dominio necesitaremos una licencia. CAL de dispositivo : Por cada dispositivo que registremos en el dominio (impresoras, ordenadores, tablets..) necesitaremos una licencia. CAL RDS (Remote Desktop Services) : Son licencias para el acceso mediante escritorio remoto mayormente. El que tengas una licencia que te permita acceder a un servicio remoto de un dispositivo, no te quita de que ese dispositivo tambi\u00e9n cuente con una licencia CAL. Las RDS CAL se activan a trav\u00e9s del Administrador de licenciamiento (online), en cambio sobre las CAL de usuarios y dispositivos no hay un control, pero s\u00ed est\u00e1s obligado a llevar un registro en caso de una auditor\u00eda de software. Las licencias de dispositivo salen rentable si un mismo ordenador lo van a usar m\u00faltiples usuarios, mientras que si cada usuario va a usar un ordenador ser\u00e1 m\u00e1s rentable una licencia de usuario. Example En mi empresa tengo 40 empleados, pero hacen turnos de d\u00eda (8horas), tarde (8 horas) y noches (8 horas). Por tanto, los trabajadores no coinciden a la vez en la oficina, se decide usar licencias por dispositivo y que los trabajadores compartan ordenadores (dispositivos). Example En mi empresa cada trabajador dispone de un port\u00e1til y un ordenador fijo de oficina. Por tanto, como cada usuario tiene 1 o m\u00e1s dispositivos, es m\u00e1s rentable tener licencias por usuario.","title":"Licencias CAL (Client Access Licence)"},{"location":"Practica01_AD.html#versiones-de-windows-server","text":"Existen 3 versiones, de m\u00e1s sencillo y barato a m\u00e1s caro, estos son: Essentials, Standard y Datacenter. Essentials : S\u00f3lo permite 25 usuarios o 50 dispositivos y no son ampliables. Importante que no es necesario licencias CAL. Por otro lado s\u00f3lo permite instalar de nuevo el Windows Server en una m\u00e1quina virtual, por ejemplo para backup. Standard : Es pr\u00e1cticamente id\u00e9ntico a la versi\u00f3n Datacenter pero con alguna caracter\u00edstica m\u00e1s y solo permite 2 m\u00e1quinas virtuales con dicho Windows Server. Importante que todos los usuarios van por licencias CAL. Datacenter : No tiene limitaciones e incluye todas las caracter\u00edsticas, entre ellas: Software Defined Network: Permite la administraci\u00f3n y configuraci\u00f3n de equipos de red. Permite tambi\u00e9n una f\u00e1cil creaci\u00f3n de una red virtual para gestionar un sistema de m\u00e1quinas virtuales. Direct Storage: Permite una f\u00e1cil gesti\u00f3n de la redundancia y alta disponibilidad (HA) del almacenamiento. Host Guardian (HGS): Permite el uso de un TPM virtual para motivos de seguridad como podr\u00eda ser la encriptaci\u00f3n de los datos de mi servidor. LTSB (Long \u2013Term Servicing Branch): Simplemente son versiones con una garant\u00eda de actualizaciones de 10 a\u00f1os, es decir, se comprometen a ir sacando actualizaciones de seguridad y mantener el sistema operativo de esta versi\u00f3n por lo menos 10 a\u00f1os desde su compra. Caracter\u00edsticas de las Versiones de Windows Server","title":"Versiones de Windows Server"},{"location":"Practica01_AD.html#azure","text":"Azure es la plataforma cloud de Microsoft. Esta plataforma cloud nos ofrece poder crear y gestionar servidores virtuales en dicha plataforma. Podemos gestionar la red virtual entre nuestros servidores virtuales, crear plataformas de desarrollo o integrar aplicaciones, gestionar el almacenamiento y las copias de seguridad, monitorizaci\u00f3n de los servicios, etc. Todo esto de una forma sencilla con una interfaz de usuario. Las principales ventajas son: No necesitas comprar y mantener ning\u00fan \u201chardware\u201d, todo est\u00e1 en la nube, virtualizado en los equipos de Microsoft (Azure). Necesitas menos personal para el mantenimiento, ya que la parte hardware y de instalaci\u00f3n f\u00edsica no existen. Es m\u00e1s f\u00e1cil redundar los datos y tener tu sistema disponible para los clientes. Es decir, imagina que no usas Azure y tienes tu servidor en la empresa y hay un corte de suministro el\u00e9ctrico, los clientes se quedar\u00e1n sin servicio, por tanto no tienes una alta disponibilidad. La principal desventaja es que tus datos est\u00e1n en una empresa externa, la cual en principio no puede comercializar con dichos datos, ni siquiera acceder a ellos, no obstante es algo a tener en cuenta.","title":"Azure"},{"location":"Practica01_AD.html#hyper-v","text":"Hyper-V es un hipervisor de m\u00e1quinas virtuales, es decir, permite la creaci\u00f3n y gesti\u00f3n de m\u00e1quinas virtuales. Es un hipervisor de tipo 1 (bare metal), es decir, viene integrado en el propio sistema operativo y por tanto no requiere de instalaciones adicionales. Vmware o VirtualBox ser\u00edan un ejemplo de hipervisor de tipo 2 , los cuales deben ser instalados encima del sistema operativo (Windows/MAC/Linux) de la m\u00e1quina anfitriona. Tipos de Hipervisor.","title":"Hyper-V"},{"location":"Practica01_LDAP.html","text":"Configuraci\u00f3n b\u00e1sica del servidor \u00b6 Vamos a comenzar por modificar el contenido del fichero /etc/hosts para indicar un FQDN a nuestro servidor. El objetivo de este cambio es que cuando hagamos referencia a pandora.ldap, nuestro sistema entienda que nos estamos refiriendo al servidor. Esto, adem\u00e1s, facilitar\u00e1 la labor de configuraci\u00f3n de nuestro servicio de directorio. Tip Primeramente se puede utilizar IP fijas en el aula que ser\u00e1n: 192.168.5.1X , modificando el archivo /etc/netplan/00-installer-config.yaml A continuaci\u00f3n se modifica el archivo Hots para cambiar el nombre de la m\u00e1quina en el dominio configurado. sudo nano /etc/hosts Otra opci\u00f3n puede ser. Implantaci\u00f3n del Servicio OpenLDAP \u00b6 Ahora vamos a ver, en forma de gu\u00eda pr\u00e1ctica, la implantaci\u00f3n del servicio OpenLDAP en nuestro servidor Ubuntu 20.04 En primer lugar, vamos a instalar los paquetes necesarios en nuestro servidor. sudo apt install slapd ldap-utils Tip A priori se podr\u00eda revisar con antelaci\u00f3n los paquetes a instalar con: apt show slapd Seguidamente se instala el paquete de LDAP. Autom\u00e1ticamente nos aparecer\u00e1 una ventana donde introduciremos la contrase\u00f1a de administrador para el directorio LDAP. Seguidamente terminar\u00e1 el proceso de instalaci\u00f3n. Podemos comprobar que se ha instalado correctamente ejecutando el comando slapcat. Dicho comando nos mostrar\u00e1 en formato LDIF el contenido de las entradas existentes en el servicio de directorio. sudo slapcat Adem\u00e1s se puede comprobar que el servicio esta corriendo con systemctl status slapd.service Tambi\u00e9n se puede comprobar si el servicio de directorio OpenLdap esta escuchando por el puerto 389 . ss -lntp Ahora vamos a realizar la configuraci\u00f3n de nuestro servicio de directorio usando el asistente de slapd. Para ello ejecutamos la siguiente instrucci\u00f3n: sudo dpkg-reconfigure slapd El primer paso del asistente nos pregunta si queremos omitir la configuraci\u00f3n del servidor OpenLDAP. Elegiremos que NO para poder configurarlo. A continuaci\u00f3n nos pregunta por el dominio en el que se encuentra nuestro servidor, esto va a formar parte del DN del directorio LDAP. Al haberlo indicado anteriormente en el fichero /etc/hosts, autom\u00e1ticamente el asistente lo recoge y solo debemos darle a OK. Si no lo hubi\u00e9semos indicado, habr\u00eda que indicarlo manualmente. Luego nos pregunta por el nombre de la organizaci\u00f3n a la que va a pertenecer nuestro servidor LDAP. Se puede elegir una contrase\u00f1a facil para la pr\u00e1ctica como pandora . Pulsamos OK. Ahora nos vuelve a pedir la contrase\u00f1a de administrador del directorio LDAP. Esta que pongamos va a machacar la que indicamos en el proceso de instalaci\u00f3n y ser\u00e1 la definitiva. Como suele pasar, la deberemos introducir dos veces para evitar errores tipogr\u00e1ficos. Seguidamente nos pregunta si queremos que se elimine la base de datos del directorio LDAP cuando se borre el paquete slapd del sistema. Le diremos que NO. Y por \u00faltimo nos pregunta si queremos mover los datos de alguna antigua base de datos de directorio LDAP a la nueva que estamos configurando. En nuestro caso, como no tenemos ninguna antigua no va afectar en nada, lo dejaremos en SI y finalizaremos la configuraci\u00f3n. Una vez finalizado el asistente, volvemos a ejecutar el comando slapcat y veremos como se han modificado los valores de los atributos de las entradas, con los datos que nosotros acabamos de indicar. sudo slapcat","title":"Practica01 LDAP"},{"location":"Practica01_LDAP.html#configuracion-basica-del-servidor","text":"Vamos a comenzar por modificar el contenido del fichero /etc/hosts para indicar un FQDN a nuestro servidor. El objetivo de este cambio es que cuando hagamos referencia a pandora.ldap, nuestro sistema entienda que nos estamos refiriendo al servidor. Esto, adem\u00e1s, facilitar\u00e1 la labor de configuraci\u00f3n de nuestro servicio de directorio. Tip Primeramente se puede utilizar IP fijas en el aula que ser\u00e1n: 192.168.5.1X , modificando el archivo /etc/netplan/00-installer-config.yaml A continuaci\u00f3n se modifica el archivo Hots para cambiar el nombre de la m\u00e1quina en el dominio configurado. sudo nano /etc/hosts Otra opci\u00f3n puede ser.","title":"Configuraci\u00f3n b\u00e1sica del servidor"},{"location":"Practica01_LDAP.html#implantacion-del-servicio-openldap","text":"Ahora vamos a ver, en forma de gu\u00eda pr\u00e1ctica, la implantaci\u00f3n del servicio OpenLDAP en nuestro servidor Ubuntu 20.04 En primer lugar, vamos a instalar los paquetes necesarios en nuestro servidor. sudo apt install slapd ldap-utils Tip A priori se podr\u00eda revisar con antelaci\u00f3n los paquetes a instalar con: apt show slapd Seguidamente se instala el paquete de LDAP. Autom\u00e1ticamente nos aparecer\u00e1 una ventana donde introduciremos la contrase\u00f1a de administrador para el directorio LDAP. Seguidamente terminar\u00e1 el proceso de instalaci\u00f3n. Podemos comprobar que se ha instalado correctamente ejecutando el comando slapcat. Dicho comando nos mostrar\u00e1 en formato LDIF el contenido de las entradas existentes en el servicio de directorio. sudo slapcat Adem\u00e1s se puede comprobar que el servicio esta corriendo con systemctl status slapd.service Tambi\u00e9n se puede comprobar si el servicio de directorio OpenLdap esta escuchando por el puerto 389 . ss -lntp Ahora vamos a realizar la configuraci\u00f3n de nuestro servicio de directorio usando el asistente de slapd. Para ello ejecutamos la siguiente instrucci\u00f3n: sudo dpkg-reconfigure slapd El primer paso del asistente nos pregunta si queremos omitir la configuraci\u00f3n del servidor OpenLDAP. Elegiremos que NO para poder configurarlo. A continuaci\u00f3n nos pregunta por el dominio en el que se encuentra nuestro servidor, esto va a formar parte del DN del directorio LDAP. Al haberlo indicado anteriormente en el fichero /etc/hosts, autom\u00e1ticamente el asistente lo recoge y solo debemos darle a OK. Si no lo hubi\u00e9semos indicado, habr\u00eda que indicarlo manualmente. Luego nos pregunta por el nombre de la organizaci\u00f3n a la que va a pertenecer nuestro servidor LDAP. Se puede elegir una contrase\u00f1a facil para la pr\u00e1ctica como pandora . Pulsamos OK. Ahora nos vuelve a pedir la contrase\u00f1a de administrador del directorio LDAP. Esta que pongamos va a machacar la que indicamos en el proceso de instalaci\u00f3n y ser\u00e1 la definitiva. Como suele pasar, la deberemos introducir dos veces para evitar errores tipogr\u00e1ficos. Seguidamente nos pregunta si queremos que se elimine la base de datos del directorio LDAP cuando se borre el paquete slapd del sistema. Le diremos que NO. Y por \u00faltimo nos pregunta si queremos mover los datos de alguna antigua base de datos de directorio LDAP a la nueva que estamos configurando. En nuestro caso, como no tenemos ninguna antigua no va afectar en nada, lo dejaremos en SI y finalizaremos la configuraci\u00f3n. Una vez finalizado el asistente, volvemos a ejecutar el comando slapcat y veremos como se han modificado los valores de los atributos de las entradas, con los datos que nosotros acabamos de indicar. sudo slapcat","title":"Implantaci\u00f3n del Servicio OpenLDAP"},{"location":"Practica02_AD.html","text":"Configuraci\u00f3n B\u00e1sica Windows Server \u00b6 Rastreador de eventos \u00b6 Un servidor, habitualmente, no debe apagarse o reiniciarse, al no ser que sea por un motivo de aver\u00eda o mantenimiento. Es por ello que cada vez que necesitemos reiniciarlo/apagarlo dejemos anotado a que es debido dicha acci\u00f3n. En Windows Server es recomendable usar \u201c alt + f4 \u201d para apagar, ya que nos permitir\u00e1 dejar una descripci\u00f3n de la raz\u00f3n por la que vamos a reiniciar/apagar el servidor. Obviamente esta descripci\u00f3n quedar\u00e1 almacenada en los logs y registros del sistema. Actualizaciones \u00b6 En un servidor es muy importante que se mantenga actualizado, de lo contrario tendremos fallos de seguridad. No obstante, es importante que estas actualizaciones se realicen en horario de bajo impacto, ya que: Pueden ocupar parte del ancho de banda de nuestro servidor y los clientes pueden notar por ello una bajada del rendimiento. Vas a tener la CPU/RAM ocupada en actualizar los servicios en vez de atender las peticiones de clientes. Es posible que tras la actualizaci\u00f3n se realice un reinicio , si este reinicio no lo programamos en horas de bajo impacto, por ejemplo a las 03:00 am, supondr\u00e1 un corte en el servicio. Configurar horarios de reinicio \u00b6 Se pueden configurar en \u201cConfiguraci\u00f3n de Windows Update\u201d y en \u201cCambiar horas activas\u201d En las horas activas elegiremos las horas en las que NO queremos que se reinicie el servidor, es decir, si estamos en una empresa que trabaja de 07:00 a 20:00, \u00e9stas ser\u00e1n las horas activas. En caso de que sea una empresa 24/365, habr\u00eda que informar de un corte de servicio o tener duplicadas las m\u00e1quinas y que una soporte todo el trabajo mientras la otra se actualiza y viceversa. Configurar los horarios de descarga de actualizaciones \u00b6 Se ejecutan las pol\u00edticas de grupo del equipo local. Para que salga la ventana de \u201cEjecutar\u201d lo m\u00e1s r\u00e1pido es tocar la tecla de Windows+R . Aunque lo veremos m\u00e1s adelante es importante que teng\u00e1is claro que las pol\u00edticas de grupo de un dominio prevalecen o tienen prioridad sobre las pol\u00edticas de grupo locales. Dentro de las directivas de grupo vamos a ir a: Configuraci\u00f3n del equipo local -> Plantillas Administrativas -> Componentes de Windows -> Windows Update . Dentro de Windows Update elegiremos -> Configurar Actualizaciones Autom\u00e1ticas . Cuentas locales en el servidor \u00b6 En un servidor, por defecto, \u00fanicamente la cuenta administrador activa. Las cuentas por defecto o de invitado est\u00e1n deshabilitadas (representadas con una flecha negra apuntando hacia abajo) por seguridad. No obstante, es posible que en nuestra empresa seamos m\u00e1s de un administrador del sistema y por tanto, es posible que cada administrador tenga su propia cuenta, por ejemplo para que quede registrado quien ha hecho cada acci\u00f3n dentro del servidor. Para crear cuentas locales vamos al icono de Windows de la barra de inicio y hacemos click en el bot\u00f3n derecho, eligiendo \u201cAdministraci\u00f3n de equipos\u201d . Seleccionando bot\u00f3n derecho se puede crear un usuario nuevo. Una vez creado el usuario, hay dos cosas que tenemos que tener en cuenta: Que tenga habilitado el acceso por escritorio remoto . Habitualmente los servidores de Windows Server se gestionan en remoto, ya que el servidor se encontrar\u00e1 en el CPD y el administrador en la oficina. Que tenga permisos de administrador , ya que al servidor solo acceder\u00e1n habitualmente nuestros compa\u00f1eros que sean tambi\u00e9n administradores del sistema. Buscaremos el grupo \u201cAdministradores\u201d y lo agregaremos al usuario. Administrador de servidor \u00b6 En el administrador de servidor podremos administrar todo: Servidores remotos. Servicios: DNS, NTP, DHCP, \u2026 Notificaciones y alertas. Almacenamiento. Gestionar Copias de Seguridad. Monitorizaci\u00f3n del estado del servidor. Administraci\u00f3n de equipos / dispositivos. Cambiar nombre al servidor \u00b6 Es importante indicar el nombre de nuestros equipos para que sea f\u00e1cil identificarlos. Debemos darles un nombre significativo, por ejemplo si este equipo va a ser un Controlador de Dominio y va a ser el primero, podemos ponerle \u201cDC01\u2026\u201d Tip Se recomienda no usar caracteres especiales en el nombre y por supuesto nada de espacios en blanco. Warning Es importante cambiar el nombre antes de tener configurado el Directorio Activo, ya que si no habr\u00e1 que cambiar todo lo relacionado con la resoluci\u00f3n de nombres (DNS). Escritorio Remoto. \u00b6 Habitualmente nuestro servidor estar\u00e1 en un CPD, posiblemente ser\u00e1 un servidor virtualizado. Lo que hace esencial configurar correctamente la herramienta pertinente para su administraci\u00f3n remota. En el caso de Windows Server, que cuenta con una buena interfaz gr\u00e1fica, haremos uso de Escritorio Remoto (RDP) , del cual tenemos que ser consciente que es un servicio bastante atacado por ciberdelincuentes. Tambi\u00e9n se puede gestionar por consola a trav\u00e9s de PowerShell . Obviamente aparte de tener habilitado el Escritorio remoto, el usuario debe tener permisos de acceso remoto al servidor. Por defecto una misma cuenta de usuario solo puede conectarse una vez de forma simult\u00e1nea. Configuraci\u00f3n de Red \u00b6 La configuraci\u00f3n de red se hace igual que un Windows Cliente. En cuanto a la m\u00e1quina virtual depender\u00e1 de nuestros recursos (memoria, CPU, discos SSD, gr\u00e1fica): M\u00e1quina virtual para Windows 10 y para Windows Server 2019. Seguridad (Firewall) \u00b6 Cada vez que arrancamos un servicio (Remote Desktop Protocol, DHCP, DNS, \u2026 ) se abren una serie de puertas (puertos de red). Los ciberdelincuentes atacan estos puertos \u201cabiertos\u201d para intentar conseguir acceso indebido. Por todo ello, es importante tener abiertas solo las puertas (puertos) estrictamente necesario, es decir, si nuestro servidor no va a hacer uso de un servicio DNS, no lo actives. Adem\u00e1s, una herramienta muy importante para controlar esto es el \u201cFirewall\u201d : Existir\u00e1n unas reglas diferentes dependiendo de la IP del equipo que realiza la petici\u00f3n: Si la IP viene de Internet ( Red P\u00fablica ). Si la IP viene de mi red local ( Red Privada ). Si la IP viene de un equipo asociado al dominio ( Red Dominio ). En la configuraci\u00f3n podemos decirle que bloquee el acceso a las aplicaciones dependiendo de la red de donde provengan, por ejemplo si en la red p\u00fablica bloqueamos todas las conexiones, querr\u00e1 decir que solo podremos administrar el servidor desde una red privada o red del dominio. No obstante, quiz\u00e1 queramos que ciertas aplicaciones s\u00ed sean accesibles desde la red p\u00fablica y otras no. En tal caso, deberemos a\u00f1adir reglas por aplicaciones: Por ejemplo indicar que solo se puede gestionar este equipo de forma remota desde una red privada. Tambi\u00e9n se pueden crear filtros avanzados: Por ejemplo aqu\u00ed vemos que el Escritorio Remoto actualmente est\u00e1 usando el puerto 3389 mediante UDP. Si no tiene el icono verde, es que no est\u00e1 habilitada la regla. Si hacemos doble click en cualquier regla podremos manipular: La aplicaci\u00f3n a la que afecta. Filtrar por usuarios, interfaces (al\u00e1mbricas, inal\u00e1mbricas, remotas), tipos de red (p\u00fablica, privada, dominio) o direccionamiento IP. Puerto y Protocolo (TCP o UDP) usado. Podemos crear nuestras propias reglas: Ejercicios \u00b6 Sigue todos los pasos de configuraci\u00f3n del tutorial. Crea un usuario con permisos de administrador. Configura el Escritorio Remoto para que el nuevo usuario pueda acceder y que adem\u00e1s solo se pueda acceder desde una red privada. A\u00f1ade una captura con el nuevo usuario accediendo en remoto al servidor y de la configuraci\u00f3n del firewall. \u00bfQu\u00e9 dos formas de gesti\u00f3n remota hay para Windows Server? \u00bfPodr\u00edamos gestionar a trav\u00e9s de Escritorio remoto 2 personas Windows Server a la vez con la misma cuenta? Explica la diferencia entre una regla de entrada del firewall y una regla de salida. Activa la regla de Entrada \u201cSupervisi\u00f3n de m\u00e1quina virtual (Solicitud de eco \u2013 ICMPv4 de entrada). Adem\u00e1s debes modificar dicha regla para que solo acepte solicitudes de equipos del dominio. Adjunta pantalla de ambas tareas. Comprueba que efectivamente puedes navegar desde el Windows Server. Crea una regla de salida que corte el tr\u00e1fico TCP a los puertos 80 y 443. A continuaci\u00f3n prueba a navegar. \u00bfQu\u00e9 sucede? \u00bfA qu\u00e9 hacen referencia los puertos 80 y 443? Adjunta pantallas de la configuraci\u00f3n de la regla. Finalmente deshabilita la regla para poder navegar, aunque un servidor Windows no tiene por qu\u00e9 tener ninguna necesidad de navegaci\u00f3n web.","title":"Configuraci\u00f3n B\u00e1sica Windows Server"},{"location":"Practica02_AD.html#configuracion-basica-windows-server","text":"","title":"Configuraci\u00f3n B\u00e1sica Windows Server"},{"location":"Practica02_AD.html#rastreador-de-eventos","text":"Un servidor, habitualmente, no debe apagarse o reiniciarse, al no ser que sea por un motivo de aver\u00eda o mantenimiento. Es por ello que cada vez que necesitemos reiniciarlo/apagarlo dejemos anotado a que es debido dicha acci\u00f3n. En Windows Server es recomendable usar \u201c alt + f4 \u201d para apagar, ya que nos permitir\u00e1 dejar una descripci\u00f3n de la raz\u00f3n por la que vamos a reiniciar/apagar el servidor. Obviamente esta descripci\u00f3n quedar\u00e1 almacenada en los logs y registros del sistema.","title":"Rastreador de eventos"},{"location":"Practica02_AD.html#actualizaciones","text":"En un servidor es muy importante que se mantenga actualizado, de lo contrario tendremos fallos de seguridad. No obstante, es importante que estas actualizaciones se realicen en horario de bajo impacto, ya que: Pueden ocupar parte del ancho de banda de nuestro servidor y los clientes pueden notar por ello una bajada del rendimiento. Vas a tener la CPU/RAM ocupada en actualizar los servicios en vez de atender las peticiones de clientes. Es posible que tras la actualizaci\u00f3n se realice un reinicio , si este reinicio no lo programamos en horas de bajo impacto, por ejemplo a las 03:00 am, supondr\u00e1 un corte en el servicio.","title":"Actualizaciones"},{"location":"Practica02_AD.html#configurar-horarios-de-reinicio","text":"Se pueden configurar en \u201cConfiguraci\u00f3n de Windows Update\u201d y en \u201cCambiar horas activas\u201d En las horas activas elegiremos las horas en las que NO queremos que se reinicie el servidor, es decir, si estamos en una empresa que trabaja de 07:00 a 20:00, \u00e9stas ser\u00e1n las horas activas. En caso de que sea una empresa 24/365, habr\u00eda que informar de un corte de servicio o tener duplicadas las m\u00e1quinas y que una soporte todo el trabajo mientras la otra se actualiza y viceversa.","title":"Configurar horarios de reinicio"},{"location":"Practica02_AD.html#configurar-los-horarios-de-descarga-de-actualizaciones","text":"Se ejecutan las pol\u00edticas de grupo del equipo local. Para que salga la ventana de \u201cEjecutar\u201d lo m\u00e1s r\u00e1pido es tocar la tecla de Windows+R . Aunque lo veremos m\u00e1s adelante es importante que teng\u00e1is claro que las pol\u00edticas de grupo de un dominio prevalecen o tienen prioridad sobre las pol\u00edticas de grupo locales. Dentro de las directivas de grupo vamos a ir a: Configuraci\u00f3n del equipo local -> Plantillas Administrativas -> Componentes de Windows -> Windows Update . Dentro de Windows Update elegiremos -> Configurar Actualizaciones Autom\u00e1ticas .","title":"Configurar los horarios de descarga de actualizaciones"},{"location":"Practica02_AD.html#cuentas-locales-en-el-servidor","text":"En un servidor, por defecto, \u00fanicamente la cuenta administrador activa. Las cuentas por defecto o de invitado est\u00e1n deshabilitadas (representadas con una flecha negra apuntando hacia abajo) por seguridad. No obstante, es posible que en nuestra empresa seamos m\u00e1s de un administrador del sistema y por tanto, es posible que cada administrador tenga su propia cuenta, por ejemplo para que quede registrado quien ha hecho cada acci\u00f3n dentro del servidor. Para crear cuentas locales vamos al icono de Windows de la barra de inicio y hacemos click en el bot\u00f3n derecho, eligiendo \u201cAdministraci\u00f3n de equipos\u201d . Seleccionando bot\u00f3n derecho se puede crear un usuario nuevo. Una vez creado el usuario, hay dos cosas que tenemos que tener en cuenta: Que tenga habilitado el acceso por escritorio remoto . Habitualmente los servidores de Windows Server se gestionan en remoto, ya que el servidor se encontrar\u00e1 en el CPD y el administrador en la oficina. Que tenga permisos de administrador , ya que al servidor solo acceder\u00e1n habitualmente nuestros compa\u00f1eros que sean tambi\u00e9n administradores del sistema. Buscaremos el grupo \u201cAdministradores\u201d y lo agregaremos al usuario.","title":"Cuentas locales en el servidor"},{"location":"Practica02_AD.html#administrador-de-servidor","text":"En el administrador de servidor podremos administrar todo: Servidores remotos. Servicios: DNS, NTP, DHCP, \u2026 Notificaciones y alertas. Almacenamiento. Gestionar Copias de Seguridad. Monitorizaci\u00f3n del estado del servidor. Administraci\u00f3n de equipos / dispositivos.","title":"Administrador de servidor"},{"location":"Practica02_AD.html#cambiar-nombre-al-servidor","text":"Es importante indicar el nombre de nuestros equipos para que sea f\u00e1cil identificarlos. Debemos darles un nombre significativo, por ejemplo si este equipo va a ser un Controlador de Dominio y va a ser el primero, podemos ponerle \u201cDC01\u2026\u201d Tip Se recomienda no usar caracteres especiales en el nombre y por supuesto nada de espacios en blanco. Warning Es importante cambiar el nombre antes de tener configurado el Directorio Activo, ya que si no habr\u00e1 que cambiar todo lo relacionado con la resoluci\u00f3n de nombres (DNS).","title":"Cambiar nombre al servidor"},{"location":"Practica02_AD.html#escritorio-remoto","text":"Habitualmente nuestro servidor estar\u00e1 en un CPD, posiblemente ser\u00e1 un servidor virtualizado. Lo que hace esencial configurar correctamente la herramienta pertinente para su administraci\u00f3n remota. En el caso de Windows Server, que cuenta con una buena interfaz gr\u00e1fica, haremos uso de Escritorio Remoto (RDP) , del cual tenemos que ser consciente que es un servicio bastante atacado por ciberdelincuentes. Tambi\u00e9n se puede gestionar por consola a trav\u00e9s de PowerShell . Obviamente aparte de tener habilitado el Escritorio remoto, el usuario debe tener permisos de acceso remoto al servidor. Por defecto una misma cuenta de usuario solo puede conectarse una vez de forma simult\u00e1nea.","title":"Escritorio Remoto."},{"location":"Practica02_AD.html#configuracion-de-red","text":"La configuraci\u00f3n de red se hace igual que un Windows Cliente. En cuanto a la m\u00e1quina virtual depender\u00e1 de nuestros recursos (memoria, CPU, discos SSD, gr\u00e1fica): M\u00e1quina virtual para Windows 10 y para Windows Server 2019.","title":"Configuraci\u00f3n de Red"},{"location":"Practica02_AD.html#seguridad-firewall","text":"Cada vez que arrancamos un servicio (Remote Desktop Protocol, DHCP, DNS, \u2026 ) se abren una serie de puertas (puertos de red). Los ciberdelincuentes atacan estos puertos \u201cabiertos\u201d para intentar conseguir acceso indebido. Por todo ello, es importante tener abiertas solo las puertas (puertos) estrictamente necesario, es decir, si nuestro servidor no va a hacer uso de un servicio DNS, no lo actives. Adem\u00e1s, una herramienta muy importante para controlar esto es el \u201cFirewall\u201d : Existir\u00e1n unas reglas diferentes dependiendo de la IP del equipo que realiza la petici\u00f3n: Si la IP viene de Internet ( Red P\u00fablica ). Si la IP viene de mi red local ( Red Privada ). Si la IP viene de un equipo asociado al dominio ( Red Dominio ). En la configuraci\u00f3n podemos decirle que bloquee el acceso a las aplicaciones dependiendo de la red de donde provengan, por ejemplo si en la red p\u00fablica bloqueamos todas las conexiones, querr\u00e1 decir que solo podremos administrar el servidor desde una red privada o red del dominio. No obstante, quiz\u00e1 queramos que ciertas aplicaciones s\u00ed sean accesibles desde la red p\u00fablica y otras no. En tal caso, deberemos a\u00f1adir reglas por aplicaciones: Por ejemplo indicar que solo se puede gestionar este equipo de forma remota desde una red privada. Tambi\u00e9n se pueden crear filtros avanzados: Por ejemplo aqu\u00ed vemos que el Escritorio Remoto actualmente est\u00e1 usando el puerto 3389 mediante UDP. Si no tiene el icono verde, es que no est\u00e1 habilitada la regla. Si hacemos doble click en cualquier regla podremos manipular: La aplicaci\u00f3n a la que afecta. Filtrar por usuarios, interfaces (al\u00e1mbricas, inal\u00e1mbricas, remotas), tipos de red (p\u00fablica, privada, dominio) o direccionamiento IP. Puerto y Protocolo (TCP o UDP) usado. Podemos crear nuestras propias reglas:","title":"Seguridad (Firewall)"},{"location":"Practica02_AD.html#ejercicios","text":"Sigue todos los pasos de configuraci\u00f3n del tutorial. Crea un usuario con permisos de administrador. Configura el Escritorio Remoto para que el nuevo usuario pueda acceder y que adem\u00e1s solo se pueda acceder desde una red privada. A\u00f1ade una captura con el nuevo usuario accediendo en remoto al servidor y de la configuraci\u00f3n del firewall. \u00bfQu\u00e9 dos formas de gesti\u00f3n remota hay para Windows Server? \u00bfPodr\u00edamos gestionar a trav\u00e9s de Escritorio remoto 2 personas Windows Server a la vez con la misma cuenta? Explica la diferencia entre una regla de entrada del firewall y una regla de salida. Activa la regla de Entrada \u201cSupervisi\u00f3n de m\u00e1quina virtual (Solicitud de eco \u2013 ICMPv4 de entrada). Adem\u00e1s debes modificar dicha regla para que solo acepte solicitudes de equipos del dominio. Adjunta pantalla de ambas tareas. Comprueba que efectivamente puedes navegar desde el Windows Server. Crea una regla de salida que corte el tr\u00e1fico TCP a los puertos 80 y 443. A continuaci\u00f3n prueba a navegar. \u00bfQu\u00e9 sucede? \u00bfA qu\u00e9 hacen referencia los puertos 80 y 443? Adjunta pantallas de la configuraci\u00f3n de la regla. Finalmente deshabilita la regla para poder navegar, aunque un servidor Windows no tiene por qu\u00e9 tener ninguna necesidad de navegaci\u00f3n web.","title":"Ejercicios"},{"location":"Practica02_LDAP.html","text":"Con nuestro servicio instalado y configurado, el siguiente paso es crear la estructura b\u00e1sica del directorio. Es decir, crearemos la estructura jer\u00e1rquica del \u00e1rbol (DIT -- Directory Information Tree). Una de las formas m\u00e1s sencillas de a\u00f1adir entradas al directorio es mediante ficheros LDIF (LDAP Data Interchange Format). B\u00e1sicamente se tratan de ficheros en texto plano con un formato particular que debemos conocer para poder construirlos correctamente. El formato b\u00e1sico de una entrada es el siguiente: # comentario dn: <nombre distintivo \u00fanico> <atributo>: <valor> <atributo>: <valor> ... Teniendo en cuenta lo anteriormente mencionado, procedemos a crear un fichero base que contenga los tipos de objetos b\u00e1sicos del directorio. nano base.ldif En \u00e9l vamos a crear dos entradas referentes a unidades organizativas: \u00abusuarios\u00bb y \u00abgrupos\u00bb. Las unidades organizativas, como su propio nombre indica, son atributos que nos van a servir para estructurar de forma id\u00f3nea nuestro \u00e1rbol del directorio LDAP. Estas dos entradas ser\u00e1n la base de nuestro \u00e1rbol ya que de ellas depender\u00e1n varias entradas m\u00e1s adelante. Una vez creado el fichero base.ldif, procedemos a cargarlo en directorio LDAP. Para ello ejecutamos la siguiente instrucci\u00f3n: sudo ldapadd -x -D cn=admin,dc=pandora,dc=ldap -W -f base.ldif Una vez cargadas las entradas, vamos a proceder a crear nuevas entradas que colgar\u00e1n de las unidades organizativas que acabamos de crear. Vamos a crear una entrada para un grupo y una entrada para un usuario. Antes que nada, como buena pr\u00e1ctica de seguridad, vamos a generar una contrase\u00f1a cifrada para asign\u00e1rselas a los usuarios en el fichero LDIF que vamos a crear. Para ello ejecutamos el siguiente comando: slappasswd Escribimos la contrase\u00f1a dos veces y nos devolver\u00e1 la misma cifrada por el algoritmo criptogr\u00e1fico SSHA. Ahora que tenemos la contrase\u00f1a cifrada creamos nuestro fichero content.ldif, donde vamos a crear dos entradas: un grupo llamado devops que colgar\u00e1 de la unidad organizativa grupos y un usuario llamado mordecai que colgar\u00e1 de la unidad organizativa usuarios y a su vez pertenecer\u00e1 al grupo devops. nano content.ldif De la misma forma que anteriormente, procedemos a cargar las entradas en el directorio LDAP ejecutando la siguiente instrucci\u00f3n: sudo ldapadd -x -D cn=admin,dc=pandora,dc=ldap -W -f content.ldif Llegados a este punto ya tenemos una estructura jer\u00e1rquica del \u00e1rbol creada de la siguiente manera: Para poder ver las diferentes entradas que forman nuestro directorio LDAP ejecutamos el comando slapcat. sudo slapcat dn: dc=pandora,dc=ldap objectClass: top objectClass: dcObject objectClass: organization o: pandora dc: pandora structuralObjectClass: organization entryUUID: 7b982cc0-d599-103a-93b2-3d7047cfd04f creatorsName: cn=admin,dc=pandora,dc=ldap createTimestamp: 20201218162610Z entryCSN: 20201218162610.450021Z#000000#000#000000 modifiersName: cn=admin,dc=pandora,dc=ldap modifyTimestamp: 20201218162610Z dn: cn=admin,dc=pandora,dc=ldap objectClass: simpleSecurityObject objectClass: organizationalRole cn: admin description: LDAP administrator userPassword:: e1NTSEF9MmRTdDVqK0ZtVFJpdFAwQ0g4QmkyNUkwK242dFcxakc= structuralObjectClass: organizationalRole entryUUID: 7b9b37a8-d599-103a-93b3-3d7047cfd04f creatorsName: cn=admin,dc=pandora,dc=ldap createTimestamp: 20201218162610Z entryCSN: 20201218162610.470043Z#000000#000#000000 modifiersName: cn=admin,dc=pandora,dc=ldap modifyTimestamp: 20201218162610Z dn: ou=usuarios,dc=pandora,dc=ldap objectClass: organizationalUnit objectClass: top ou: usuarios structuralObjectClass: organizationalUnit entryUUID: 4159df9c-d74a-103a-86e5-c92b1d7a3d24 creatorsName: cn=admin,dc=pandora,dc=ldap createTimestamp: 20201220200404Z entryCSN: 20201220200404.817837Z#000000#000#000000 modifiersName: cn=admin,dc=pandora,dc=ldap modifyTimestamp: 20201220200404Z dn: ou=grupos,dc=pandora,dc=ldap objectClass: organizationalUnit objectClass: top ou: grupos structuralObjectClass: organizationalUnit entryUUID: 416283fe-d74a-103a-86e6-c92b1d7a3d24 creatorsName: cn=admin,dc=pandora,dc=ldap createTimestamp: 20201220200404Z entryCSN: 20201220200404.874510Z#000000#000#000000 modifiersName: cn=admin,dc=pandora,dc=ldap modifyTimestamp: 20201220200404Z dn: cn=devops,ou=grupos,dc=pandora,dc=ldap objectClass: posixGroup cn: devops gidNumber: 10000 memberUid: devops structuralObjectClass: posixGroup entryUUID: fdac9144-d7f4-103a-86e7-c92b1d7a3d24 creatorsName: cn=admin,dc=pandora,dc=ldap createTimestamp: 20201221162615Z entryCSN: 20201221162615.215505Z#000000#000#000000 modifiersName: cn=admin,dc=pandora,dc=ldap modifyTimestamp: 20201221162615Z dn: uid=mordecai,ou=usuarios,dc=pandora,dc=ldap objectClass: inetOrgPerson objectClass: posixAccount objectClass: shadowAccount cn: Mordecai sn: Geek userPassword:: e1NTSEF9Z0d1eUZkMGlyVld5WkNkSUNRN1AySytUUENPQ0I5ZUI= loginShell: /bin/bash uidNumber: 10000 gidNumber: 10000 homeDirectory: /home/mordecai structuralObjectClass: inetOrgPerson uid: mordecai entryUUID: fdb16106-d7f4-103a-86e8-c92b1d7a3d24 creatorsName: cn=admin,dc=pandora,dc=ldap createTimestamp: 20201221162615Z entryCSN: 20201221162615.247033Z#000000#000#000000 modifiersName: cn=admin,dc=pandora,dc=ldap modifyTimestamp: 20201221162615Z","title":"Practica02 LDAP"},{"location":"Practica03_AD.html","text":"Visor de Eventos. Esta herramienta nos mostrar\u00e1 la informaci\u00f3n del estado de las aplicaciones y servicios de nuestro servidor. Debemos habituarnos a ver el visor de eventos de forma regular para confirmar que nuestros servicios no est\u00e1n fallando o a punto de fallar. El visor de eventos tambi\u00e9n resulta \u00fatil para sacar la informaci\u00f3n en caso de que un servicio est\u00e9 fallando. Visor de Eventos Windows Server. Podemos filtrar los eventos por tiempo (\u00faltimas 24h, 1h, 30 min, \u2026), por aplicaci\u00f3n que ha generado el evento, usuarios, etc\u2026 Filtrar Eventos por tiempos. Una cosa importante es la pol\u00edtica de eventos con las aplicaciones, especialmente aquellas que ofrecen un servicio y son m\u00e1s propicias a ser atacadas o m\u00e1s cr\u00edticas. Se asigna una cantidad de memoria que pueden usar los registros (logs), pasado esta capacidad se debe decidir si sobrescribir o no sobrescribir los logs. Lo habitual ser\u00eda no sobrescribir, pero debemos estar atentos a la capacidad total que van acumulando para ir elimin\u00e1ndolos manualmente o mediante un script cada cierto tiempo. Con el icono vaciar registro podemos borrar los eventos de la aplicaci\u00f3n seleccionada. Borrar Eventos de la aplicaci\u00f3n. En caso de tener un error del sistema podemos visualizarlos en la pesta\u00f1a de \u201cSistema\u201d, cada error registrado del sistema tiene un identificador (ID) que ser\u00e1 el que usemos en caso de querer buscar informaci\u00f3n del error en Internet. Es recomendable, mirar todos los d\u00edas el registro de eventos del sistema. Importante diferenciar entre un \u201cError\u201d y un \u201cWarning / Aviso\u201d, el primero es que ya ha habido un problema grave que debe ser resuelto, el segundo es una alerta de algo que deber\u00eda revisarse, pero que no ha ocasionado un problema cr\u00edtico. Comprobar errores del sistema. Al igual que con las aplicaciones podemos decidir qu\u00e9 hacer con los registros de eventos referidos al sistema: Registros de Eventos del sistema. Monitor de recursos. El monitor de recursos nos da informaci\u00f3n sobre la memoria libre, el rendimiento de la cpu, lecturas en disco, etc. Esto nos puede dar informaci\u00f3n si fuera necesario ampliar o mejorar alg\u00fan componente hardware de nuestro servidor. Si queremos analizar o monitorizar valores m\u00e1s espec\u00edficos debemos ir al monitor de rendimiento y a\u00f1adir a la gr\u00e1fica los datos que deseamos. Estad\u00edsticas de datos seleccionados. Podemos generar un resumen/ informe de todo el sistema, referente al rendimiento de \u00e9ste: Generaci\u00f3n informe I. Generaci\u00f3n informe II. Generaci\u00f3n informe III. Podemos exportar a alg\u00fan fichero el resumen de todo el informe del rendimiento del sistema. Generaci\u00f3n informe IV. NIC redundante \u00b6 Una NIC (Network Interface Controller) no es m\u00e1s que un adaptador de red o tarjeta de red. Con una NIC redundante queremos decir que uno o m\u00e1s adaptadores de red trabajan como uno, pudiendo mejorar el ancho de banda total que puede cursar y dotando al sistema de una mayor disponibilidad, pues si uno de los adaptadores de red fallara, tendr\u00edamos otros y no se cortar\u00eda la conexi\u00f3n. Tip Es muy habitual en todos los servidores tener m\u00e1s de un adaptador de red. Visualiza el siguiente v\u00eddeo y contesta a las preguntas: Configuraci\u00f3n NIC Redundante Ejercicios \u00b6 Documenta adecuadamente (capturas de pantalla y explicaciones) todos los ejercicios. \u00bfC\u00f3mo har\u00edas para filtrar en el visor de eventos todos los eventos cr\u00edticos de seguridad? Explica como cambiar\u00edas las propiedades de un evento para que: Aumente la capacidad m\u00e1xima del registro a 50MB. No sobrescribiese cuando el log alcanzar\u00e1 la capacidad m\u00e1ximo, es decir, que archive el log. Indica cual es la ruta y el nombre del log seleccionado. \u00bfQu\u00e9 sucede si vas a dicha carpeta y abres con doble click el log seleccionado? Genera un informe de tu sistema. Crea un Segundo adaptador de red en tu m\u00e1quina virtual de Windows Server 2019. Crea un equipo de NIC y muestra el proceso mediante un v\u00eddeo o mediante capturas de pantalla. Configura una IP fija en tu NIC virtual.","title":"Practica03 AD"},{"location":"Practica03_AD.html#nic-redundante","text":"Una NIC (Network Interface Controller) no es m\u00e1s que un adaptador de red o tarjeta de red. Con una NIC redundante queremos decir que uno o m\u00e1s adaptadores de red trabajan como uno, pudiendo mejorar el ancho de banda total que puede cursar y dotando al sistema de una mayor disponibilidad, pues si uno de los adaptadores de red fallara, tendr\u00edamos otros y no se cortar\u00eda la conexi\u00f3n. Tip Es muy habitual en todos los servidores tener m\u00e1s de un adaptador de red. Visualiza el siguiente v\u00eddeo y contesta a las preguntas: Configuraci\u00f3n NIC Redundante","title":"NIC redundante"},{"location":"Practica03_AD.html#ejercicios","text":"Documenta adecuadamente (capturas de pantalla y explicaciones) todos los ejercicios. \u00bfC\u00f3mo har\u00edas para filtrar en el visor de eventos todos los eventos cr\u00edticos de seguridad? Explica como cambiar\u00edas las propiedades de un evento para que: Aumente la capacidad m\u00e1xima del registro a 50MB. No sobrescribiese cuando el log alcanzar\u00e1 la capacidad m\u00e1ximo, es decir, que archive el log. Indica cual es la ruta y el nombre del log seleccionado. \u00bfQu\u00e9 sucede si vas a dicha carpeta y abres con doble click el log seleccionado? Genera un informe de tu sistema. Crea un Segundo adaptador de red en tu m\u00e1quina virtual de Windows Server 2019. Crea un equipo de NIC y muestra el proceso mediante un v\u00eddeo o mediante capturas de pantalla. Configura una IP fija en tu NIC virtual.","title":"Ejercicios"},{"location":"Practica03_LDAP.html","text":"Ahora vamos a configurar un equipo cliente con el fin de poder iniciar sesi\u00f3n en \u00e9l a partir de un usuario creado en el directorio LDAP. Comenzamos instalando la paqueter\u00eda necesaria: sudo apt install libnss-ldap libpam-ldap ldap-utils Autom\u00e1ticamente se nos abrir\u00e1 el asistente de configuraci\u00f3n donde indicaremos los datos de nuestro servidor donde se encuentra instalado el directorio LDAP. En primer lugar, nos solicita la direcci\u00f3n URI del servidor. Sustituiremos la cadena por la que se muestra en la imagen. A continuaci\u00f3n escribiremos el nombre distinguido \u00fanico (DN) de nuestro directorio LDAP. En el siguiente paso nos dan a elegir la versi\u00f3n del protocolo LDAP que vamos utilizar. Elegimos la versi\u00f3n m\u00e1s actual, en este caso la 3. Ahora indicaremos si las aplicaciones que utilicen PAM deber\u00e1n comportarse del mismo modo que cuando cambiamos contrase\u00f1as locales. Esto har\u00e1 que las contrase\u00f1as se almacenen en un fichero independiente que s\u00f3lo podr\u00e1 ser le\u00eddo por root. Elegimos que SI. Luego nos pregunta si queremos que sea necesario identificarse para realizar consultas en la base de datos del directorio LDAP. Elegimos que NO. En el siguiente paso indicaremos el nombre de la cuenta LDAP con privilegios para realizar cambios en las contrase\u00f1as. Dicha cuenta ser\u00e1 la del administrador de nuestro directorio LDAP, indicaremos su DN completo. Y por \u00faltimo, nos solicita la contrase\u00f1a de la cuenta que hemos indicado justo antes (la que indicamos para el administrador en el asistente de configuraci\u00f3n de OpenLDAP). Habr\u00e1 que escribirla por duplicado. Una vez finalizado el asistente de configuraci\u00f3n, vamos a realizar modificaciones en el fichero /etc/nsswitch.conf. Indicaremos al sistema que realice b\u00fasquedas sobre usuarios en el directorio LDAP adem\u00e1s de en el propio sistema. sudo nano /etc/nsswitch.conf Ahora tenemos que realizar modificaciones en el fichero /etc/pam.d/common-password. En \u00e9l eliminaremos la cadena use_authtok de la l\u00ednea 26. Quitando dicha cadena, el sistema nos permitir\u00e1 usar varios m\u00e9todos de autenticaci\u00f3n. sudo nano /etc/pam.d/common-password Por \u00faltimo, modificaremos el fichero /etc/pam.d/common-session. A\u00f1adiremos una l\u00ednea al final del fichero para indicar que cuando un usuario de LDAP inicie sesi\u00f3n en el sistema, se cree su directorio Home en el equipo. sudo nano /etc/pam.d/common-session session optional pam_mkhomedir.so skel=/etc/skel umask=077 Una vez realizados todos los cambios en los ficheros anteriores, podemos comprobar la interacci\u00f3n entre equipo cliente y servidor de directorio LDAP. Para ello podemos lanzar una b\u00fasqueda a trav\u00e9s de la terminal y veremos si nos responde. ldapsearch -x -H ldap://192.168.1.90 -b \"dc=pandora,dc=ldap\" Como podemos ver, el servidor LDAP nos responde mostr\u00e1ndonos el resultado a la b\u00fasqueda que hemos realizado, que en este caso se trata de todas las entradas que se encuentran definidas en \u00e9l. En el punto donde nos encontramos, ya tenemos nuestro directorio LDAP configurado, poblado y funcionando en nuestro servidor. Y nuestro equipo cliente configurado para poder conectar con el servicio de directorio y poder iniciar sesi\u00f3n en el sistema con usuarios registrados en LDAP (Ojo! De momento, solo a trav\u00e9s de consola.) Vamos a hacer una prueba de inicio de sesi\u00f3n por consola y veremos como tambi\u00e9n se crea el directorio Home del usuario registrado en LDAP. Antes que nada, visualizamos el contenido del directorio /home y vemos que ahora mismo solo existe el de usuario. ll /home Ahora abrimos un nuevo entorno de terminal tecleando Ctrl + Alt + F5, e iniciaremos sesi\u00f3n con el usuario mordecai que hemos registrado anteriormente en LDAP. Como podremos ver, al iniciar sesi\u00f3n se creara en el equipo cliente el directorio /home/mordecai. Podemos lanzar algunos comandos m\u00e1s para verificar la identidad del usuario y ver que pertenece al grupo devops tal y como creamos las entradas en nuestro directorio LDAP. Adem\u00e1s tambi\u00e9n verificaremos que el directorio /home/mordecai pertenece y se ha creado con los permisos necesarios para dicho usuario. id pwd ll /home Como hemos mencionado antes, hasta ahora solo era posible iniciar sesi\u00f3n en el equipo cliente por terminal. Ahora vamos a realizar lo necesario para que sea posible, tambi\u00e9n, iniciar sesi\u00f3n con usuarios de LDAP en modo gr\u00e1fico. Para ello comenzamos instalando el paquete nslcd. sudo apt install nslcd Al instalar el paquete, se abrir\u00e1 un asistente de configuraci\u00f3n autom\u00e1ticamente donde tendremos que indicar nuevamente la URI de nuestro servidor LDAP y su DN (Distinguished Name). Probablemente los datos vengan ya indicados por lo que solo pulsaremos Aceptar en ambas ventanas sin necesidad de modificar nada. Al terminal de instalar el paquete, debemos reiniciar nuestro sistema para un correcto funcionamiento. Reiniciamos el equipo cliente. Y tras reiniciar ya podremos iniciar sesi\u00f3n con nuestro usuario Mordecai, directamente desde la pantalla de Login del sistema. Tras iniciar sesi\u00f3n, se crear\u00e1 un perfil para el usuario y ya podr\u00e1 usar el sistema de forma completamente gr\u00e1fica adem\u00e1s de por terminal. Podemos verificar la identidad del usuario desde consola y veremos que sigue siendo tal cual lo configuramos en nuestro directorio LDAP.","title":"Practica03 LDAP"},{"location":"Practica04_AD.html","text":"Pr\u00e1ctica04_AD \u00b6 Instalaci\u00f3n de Active DirectoryInstalaci\u00f3n de Active Directory I \u00b6 Objetivos de esta pr\u00e1ctica: Instalar y promocionar un servidor a controlador de dominio Crear estructuras centralizadas de administraci\u00f3n de redes Unir equipos cliente al dominio Creaci\u00f3n de un dominio \u00b6 El primer paso para la creaci\u00f3n del Active directory es crear un dominio; en el equipo Controlador de Dominio , y debe ser un equipo preparado para aguantar altas cargas de trabajo con una alta disponibilidad, y con un sistema operativo servidor instalado. Para crear un dominio hay que acceder al Administrador del Servidor y accedemos a -> Agregar Roles y Caracter\u00edsticas : Creaci\u00f3n de un dominio I. Nos aparecer\u00e1 el asistente para comenzar con la creaci\u00f3n del dominio: Creaci\u00f3n de un dominio II. Seleccionaremos una instalaci\u00f3n basada en caracter\u00edsticas y roles . Tambi\u00e9n podemos hacer una instalaci\u00f3n a trav\u00e9s de servicios de acceso remoto, pero en nuestro caso realizaremos la instalaci\u00f3n en local. Creaci\u00f3n de un dominio III. Una vez seleccionada la instalaci\u00f3n basada en roles , seleccionaremos nuestro servidor que ser\u00e1 donde vamos a instalar nuestro Active Directory: Creaci\u00f3n de un dominio IV. Seleccionaremos el rol Servicios de Dominio de Active Directory : Creaci\u00f3n de un dominio V. Y nos aparecer\u00e1 marcado el rol tal y como muestra la siguiente figura: Creaci\u00f3n de un dominio VI. Creaci\u00f3n de un dominio VII. Y procedemos a realizar la instalaci\u00f3n. Cuando se agrega un nuevo rol, podemos hacer clic en la opci\u00f3n de reiniciar en caso de que fuera necesario. En caso que el rol o la caracter\u00edstica no fuera necesario un reinicio, no lo har\u00eda. Creaci\u00f3n de un dominio VIII. Un vez instalado, el asistente nos dice que es necesario realizar una configuraci\u00f3n. En este caso hay que promover nuestro servidor a un servidor de controlador de dominio. As\u00ed que haremos clic en la opci\u00f3n de promover servidor a controlador de dominio : Creaci\u00f3n de un dominio IX. Ejecutamos el asistente, y las primeras pantallas nos ofrecen informaci\u00f3n \u00fatil para la creaci\u00f3n del dominio. Seleccionamos Agregar un nuevo bosque . Note Un conjunto de dominios agrupados l\u00f3gicamente conforman un \u00e1rbol de dominios y un conjunto de \u00e1rboles de dominio agrupados l\u00f3gicamente conforman un bosque. En nuestro caso pondremos el dominio ASO2122.LOCAL en lugar de CEFIRE2019.LOCAL como indica en la imagen : Agregar un nuevo Bosque. A continuaci\u00f3n, nos aparece informaci\u00f3n sobre el nivel funcional del nuevo bosque. Seg\u00fan el nivel funcional que establezcamos, implementaremos un directorio activo compatible con versiones anteriores de Windows Server, pero m\u00e1s limitado en cuanto a funciones, o menos compatible con versiones antiguas, pero con mayores funcionalidades. Tip En nuestro caso, seleccionaremos el mayor nivel funcional ( Windows Server 2016 ) ya que todos los controladores del dominio tendr\u00e1n instalado, al menos, Windows Server 2016 . Tambi\u00e9n a\u00f1adiremos la contrase\u00f1a para la restauraci\u00f3n de nuestro dominio, por defecto la misma que la del administrador. Creaci\u00f3n de un dominio X. La siguiente tarea que llevar\u00e1 a cabo el asistente para la creaci\u00f3n del dominio, ser\u00e1 preguntar por ciertas opciones adicionales del servidor, como por ejemplo la configuraci\u00f3n del servicio DNS . Como en nuestro caso no tenemos DNS, dejaremos que el asistente cree una zona de DNS para que nuestro dominio pueda funcionar. Creaci\u00f3n de un dominio XI. A continuaci\u00f3n nos aparece la ubicaci\u00f3n donde se guardar\u00e1 los objetos de nuestro AD, es decir, la base de datos : Creaci\u00f3n de un dominio XII. Seguidamente nos muestra las configuraciones que se van a realizar. Note Como pod\u00e9is observar tambi\u00e9n se puede exportar el script para poder ejecutar los mismos comandos a trav\u00e9s de PowerShell : Creaci\u00f3n de un dominio XIII. En el siguiente paso se muestra un resumen de los Requisitos previos : Comprobaci\u00f3n de requisitos previos. Y finalmente realizar\u00edamos la instalaci\u00f3n. Nuestra pantalla de inicio de sesi\u00f3n, ahora ser\u00e1 diferente, ya que nos aparece el dominio al que vamos a iniciar la sesi\u00f3n del usuario: Note Nos aparecer\u00e1 ASO2122 en lugar de CEFIRE2019 Nueva pantalla inicio de sesi\u00f3n con Dominio. Una vez instalado, podemos iniciar sesi\u00f3n con el Administrador del dominio. Podemos comprobar que en el panel de Administrador de Servidor aparece nuestro dominio configurado ASO2122.LOCAL en lugar de CEFIRE2019.LOCAL Comprobaci\u00f3n Dominio n Administrador de Servidor. Creaci\u00f3n de dominio en Server Core \u00b6 Se podr\u00eda hacer una instalaci\u00f3n sin experiencia de escritorio del Windows Server 2019 esto es una instalaci\u00f3n mucho m\u00e1s liviana que permite tener un servidor sin entorno gr\u00e1fico. A esta versi\u00f3n se le conoce como el nombre de Server Core . En este punto vamos a mostrar a realizar una instalaci\u00f3n de un dominio en una m\u00e1quina Server Core. Para hacer la instalaci\u00f3n, debemos seleccionar la opci\u00f3n de instalaci\u00f3n sin experiencia de escritorio: Instalaci\u00f3n Server Core. PowerShell para configurar un dominio \u00b6 Para configurar el dominio con PowerShell vamos a presentar unos scripts que permitir\u00e1n realizar la configuraci\u00f3n tanto de la m\u00e1quina como del Active Directory. Para entrar dentro del shell de PowerShell, teclearemos el comando powershell en la consola: Entrar al PowerShell en el Server Core. Configuraci\u00f3n inicial \u00b6 Primero realizaremos la configuraci\u00f3n de la m\u00e1quina, a trav\u00e9s del siguiente script. ConfiguracionInicial.ps1 $nombreServer=\"ASO2122\" $dirIP=\"192.168.5.1X\" $redInterna=\"Ethernet 2\" Rename-Computer -NewName $nombreServer Get-NetAdapter \u2013name $redInterna | Remove-NetIPAddress -Confirm:$false Get-NetAdapter \u2013name $redInterna | New-NetIPAddress \u2013addressfamily IPv4 \u2013ipaddress $dirIP \u2013prefixlength 24 \u2013type unicast Warming Despu\u00e9s de la captura se debe reiniciar para aplicar los cambios. Donde se Puede observar: El nombre de m\u00e1quina en la variable $nombreServer El adaptador de la red interna en $redInterna (Ejemplo en el script) y tambi\u00e9n la direcci\u00f3n IP de la red interna en $dirIP . El comando _Rename-Computer -NewName $nombreServer cambia el nombre del servidor. Los comandos: _Get-NetAdapter \u2013__name $redInterna | Remove-NetIPAddress -Confirm:$false _Get-NetAdapter \u2013name $redInterna | New-NetIPAddress \u2013addressfamily IPv4 \u2013ipaddress $dirIP \u2013prefixlength 24 \u2013type unicast Nos permiten a\u00f1adir la direcci\u00f3n IP de nuestra red interna. Finalmente con _Restart-Computer -force reiniciamos la m\u00e1quina y tendremos configurado el nombre y el interfaz de la red interna. Instalar Controlador de dominio con powershell \u00b6 Ahora vamos a promover nuestro servidor a controlador de dominio. Esto tambi\u00e9n lo vamos a realizar a trav\u00e9s de powershell mediante scripts. creaciondominio.ps1 $dominioFQDN = \"ASO2122CORE.LOCAL\" $dominioNETBIOS = \"ASO2122CORE\" $adminPass = \"aso2122.\" Install-WindowsFeature AD-Domain-Services,DNS Import-module addsdeployment Install-ADDSForest -DomainName $dominioFQDN -DomainNetBiosName $dominioNETBIOS -SafeModeAdministratorPassword (ConvertTo-SecureString -string $adminPass -AsPlainText -Force) -DomainMode WinThreshold -ForestMode WinThreshold -InstallDNS -Confirm:$false Donde se Puede observar: En la variable _$dominioFQDN_ pondremos nuestro nombre de dominio y en _$dominioNETBIOS_ el nombre de dominio NETBIOS. El comando _Install-WindowsFeature AD-Domain-Services,DNS_ instala los roles de AD y tambi\u00e9n de DNS. El comando _Install-ADDSForest_ realiza la configuraci\u00f3n del dominio. Al ejecutarlo mostrar\u00eda por pantalla: Creaci\u00f3n de dominio en Server Core. Finalmente reiniciamos la m\u00e1quina y ya tenemos instalado nuestro controlador de dominio en una m\u00e1quina core con powershell. Notad que el inicio de sesi\u00f3n ahora ya es es ASO2122.LOCAL. Nuevo Inicio Sesi\u00f3n en Server Core. Para comprobar que todo se ha configurado de manera correcta, podemos iniciar sesi\u00f3n y ejecutar el comando sconfig . Nos muestra informaci\u00f3n relativa al nombre de m\u00e1quina, dominio y algunas otras opciones: Utilidad de inspecci\u00f3n sconfig. Apagado de la m\u00e1quina \u00b6 Note Para poder apagar la m\u00e1quina podemos hacer uso del comando shutdown /p o bien a trav\u00e9s de la opci\u00f3n 14 de la utilidad sconfig . Unir clientes al dominio \u00b6 A\u00f1adir m\u00e1quinas clientes al dominio \u00b6 Para incluir en el dominio los equipos que actuar\u00e1n como cliente hay que configurar las propiedades de Internet de cada una de las m\u00e1quinas que vamos a unir al dominio, teniendo en cuenta que: La direcci\u00f3n del controlador de dominio (que implementa funciones de DNS) es la 192.168.5.1X. La m\u00e1scara de subred es de 24 bits. Note En la red que se ha montado como ejemplo hay un elemento de interconexi\u00f3n con IP 192.168.100.1 que implementa las funciones de puerta de enlace y de DNS, por ese motivo se ha incluido como puerta de enlace predeterminada y como DNS secundario, sin embargo estos dos campos no son necesarios si \u00fanicamente queremos trabajar en el interior de una \u00fanica red. M\u00e1s adelante veremos instalaci\u00f3n de un servicio de DHCP y el enrutamiento, para que nuestro servidor pueda ofrecer a los clientes de la red interna una direcci\u00f3n de manera din\u00e1mica. A continuaci\u00f3n, en el siguiente ejemplo, se revisa la configuraci\u00f3n de la m\u00e1quina cliente Windows 10 que vamos a validar en el dominio Windows Server 2019 (utilizaremos la m\u00e1quina con interfaz gr\u00e1fica): Configuraci\u00f3n red cliente Windows 10. Note La figura anterior es un ejemplo de configuraci\u00f3n, habr\u00e1 que adapatarlo al rango utilizado en el Aula. Comprobaremos tambi\u00e9n que desde la m\u00e1quina cliente podamos hacer ping a nuestro dominio, esto es al dominio ASO2122.LOCAL . Para ello abrimos una terminal en la m\u00e1quina Windows 10 (Tecla Windows + R y luego cmd) y comprobamos que el ping al dominio funcione. Warning Es importante que este ping funcione, en caso contrario no se podr\u00e1 realizar la validaci\u00f3n en nuestro dominio . ping al dominio. Y ahora s\u00ed, ya podemos unir nuestra m\u00e1quina al dominio. Para ello, en Windows 10, seleccionaremos el bot\u00f3n de inicio y con el bot\u00f3n de la derecha del rat\u00f3n, seleccionaremos Sistema: Unir cliente windows 10 a dominio I. Seleccionamos Conectar a la red del trabajo o colegio y nos aparecer\u00e1 la siguiente informaci\u00f3n: Unir cliente windows 10 a dominio II. Hacemos clic en Conectar: Unir cliente windows 10 a dominio III. Seleccionamos la opci\u00f3n de Unir este dispositivo a un dominio local de Active Directory. Nos aparecer\u00e1 una ventana para introducir el nombre de dominio al que nos queremos conectar: Unir cliente windows 10 a dominio IV. En nuestro caso, introduciremos nuestro nombre de nominio, ASO2122.LOCAL en lugar de CEFIRE2019.LOCAL : Unir cliente windows 10 a dominio V. Para poder realizar la validaci\u00f3n, hay que introducir la cuenta del Administrador del dominio y su contrase\u00f1a, en nuestro caso, ser\u00e1 Administrador y como contrase\u00f1a cefire2019. Unir cliente windows 10 a dominio VI. Seleccionamos que nuestro administrador tenga los privilegios de administrador en la m\u00e1quina cliente, para ello selecionamos Tipo Cuenta y marcamos la opci\u00f3n de Administrador. Reiniciamos la m\u00e1quina y ya tenemos nuestro cliente Windows 10 validado en el dominio. Unir cliente windows 10 a dominio VI. A partir de este momento, ya podemos iniciar sesi\u00f3n con cualquier usuario del dominio. En nuestro caso solo tenemos el usuario Administrador, podemos probar a iniciar sesi\u00f3n en la m\u00e1quina con la cuenta del Administrador del dominio. Unir cliente windows 10 a dominio VII. Tambi\u00e9n podemos ver en nuestro servidor, desde el panel del Administrador de Servidor nuestra m\u00e1quina. Para ello, desde la m\u00e1quina Windows Server 2019, accedemos al Administrador de Servidor --> Herramientas --> Usuarios y Equipos de Active Directory : Unir cliente windows 10 a dominio VIII. Seleccionamos nuestro dominio ASO2122.LOCAL y luego Computers. Aparecer\u00e1 nuestra m\u00e1quina cliente PC01, si la seleccionamos, con el bot\u00f3n de la derecha del rat\u00f3n --> propiedades. Aqu\u00ed podemos ver alguna informaci\u00f3n relativa a la m\u00e1quina conectada. Unir cliente windows 10 a dominio IX. Errores en la uni\u00f3n \u00b6 En caso de que haya habido alg\u00fan error en la uni\u00f3n del equipo cliente al dominio se deben comprobar algunos aspectos: La configuraci\u00f3n de la interfaz de red est\u00e1 en modo 'Adaptador puente', no en 'NAT'. El equipo cliente y el equipo servidor se hallan en la misma red. El nombre del dominio puede resolverse desde el equipo cliente (ping ASO2122.LOCAL ) La direcci\u00f3n del servidor DNS est\u00e1 correctamente configurada en el equipo cliente. Ejercicios \u00b6 En esta actividad vamos a realizar la configuraci\u00f3n de un dominio y la validaci\u00f3n de una m\u00e1quina Windows 10 en el mismo. Creaci\u00f3n de un dominio : En este apartado habr\u00e1 que instalar y configurar un dominio. El dominio que hay que instalar y configurar ser\u00e1 ASO2122.LOCAL . Para ello habr\u00e1 que entregar un \u00fanico archivo PDF con la captura de pantalla de nuestro Panel de Administrador del Servidor , donde aparezca claramente el nombre de m\u00e1quina y tambi\u00e9n el nombre de dominio. Ejemplo Pr\u00e1ctica 05_AD Ejercicio1. Validar una m\u00e1quina Windows 10 en el dominio : Una vez instalado y configurado el domino, habr\u00e1 que validar nuestra m\u00e1quina Windows 10 cliente en el dominio. Una vez unida al dominio, habr\u00e1 que a\u00f1adir al documento a entregar, una captura de pantalla donde se aprecie en el servidor que el equipo est\u00e1 dado correctamente de alta ( Inicio \u2192 Herramientas Administrativas \u2192 Usuarios y Equipos de Active Directory \u2192 ASO2122.LOCAL \u2192 Computer/Equipos ). A\u00f1ade tambi\u00e9n alguna captura de pantalla de las propiedades del equipo donde se identifique el sistema operativo de los equipos que has unido al dominio. Ejemplo Pr\u00e1ctica 05_AD Ejercicio2.","title":"Pr\u00e1ctica04_AD"},{"location":"Practica04_AD.html#practica04_ad","text":"","title":"Pr\u00e1ctica04_AD"},{"location":"Practica04_AD.html#instalacion-de-active-directoryinstalacion-de-active-directory-i","text":"Objetivos de esta pr\u00e1ctica: Instalar y promocionar un servidor a controlador de dominio Crear estructuras centralizadas de administraci\u00f3n de redes Unir equipos cliente al dominio","title":"Instalaci\u00f3n de Active DirectoryInstalaci\u00f3n de Active Directory I"},{"location":"Practica04_AD.html#creacion-de-un-dominio","text":"El primer paso para la creaci\u00f3n del Active directory es crear un dominio; en el equipo Controlador de Dominio , y debe ser un equipo preparado para aguantar altas cargas de trabajo con una alta disponibilidad, y con un sistema operativo servidor instalado. Para crear un dominio hay que acceder al Administrador del Servidor y accedemos a -> Agregar Roles y Caracter\u00edsticas : Creaci\u00f3n de un dominio I. Nos aparecer\u00e1 el asistente para comenzar con la creaci\u00f3n del dominio: Creaci\u00f3n de un dominio II. Seleccionaremos una instalaci\u00f3n basada en caracter\u00edsticas y roles . Tambi\u00e9n podemos hacer una instalaci\u00f3n a trav\u00e9s de servicios de acceso remoto, pero en nuestro caso realizaremos la instalaci\u00f3n en local. Creaci\u00f3n de un dominio III. Una vez seleccionada la instalaci\u00f3n basada en roles , seleccionaremos nuestro servidor que ser\u00e1 donde vamos a instalar nuestro Active Directory: Creaci\u00f3n de un dominio IV. Seleccionaremos el rol Servicios de Dominio de Active Directory : Creaci\u00f3n de un dominio V. Y nos aparecer\u00e1 marcado el rol tal y como muestra la siguiente figura: Creaci\u00f3n de un dominio VI. Creaci\u00f3n de un dominio VII. Y procedemos a realizar la instalaci\u00f3n. Cuando se agrega un nuevo rol, podemos hacer clic en la opci\u00f3n de reiniciar en caso de que fuera necesario. En caso que el rol o la caracter\u00edstica no fuera necesario un reinicio, no lo har\u00eda. Creaci\u00f3n de un dominio VIII. Un vez instalado, el asistente nos dice que es necesario realizar una configuraci\u00f3n. En este caso hay que promover nuestro servidor a un servidor de controlador de dominio. As\u00ed que haremos clic en la opci\u00f3n de promover servidor a controlador de dominio : Creaci\u00f3n de un dominio IX. Ejecutamos el asistente, y las primeras pantallas nos ofrecen informaci\u00f3n \u00fatil para la creaci\u00f3n del dominio. Seleccionamos Agregar un nuevo bosque . Note Un conjunto de dominios agrupados l\u00f3gicamente conforman un \u00e1rbol de dominios y un conjunto de \u00e1rboles de dominio agrupados l\u00f3gicamente conforman un bosque. En nuestro caso pondremos el dominio ASO2122.LOCAL en lugar de CEFIRE2019.LOCAL como indica en la imagen : Agregar un nuevo Bosque. A continuaci\u00f3n, nos aparece informaci\u00f3n sobre el nivel funcional del nuevo bosque. Seg\u00fan el nivel funcional que establezcamos, implementaremos un directorio activo compatible con versiones anteriores de Windows Server, pero m\u00e1s limitado en cuanto a funciones, o menos compatible con versiones antiguas, pero con mayores funcionalidades. Tip En nuestro caso, seleccionaremos el mayor nivel funcional ( Windows Server 2016 ) ya que todos los controladores del dominio tendr\u00e1n instalado, al menos, Windows Server 2016 . Tambi\u00e9n a\u00f1adiremos la contrase\u00f1a para la restauraci\u00f3n de nuestro dominio, por defecto la misma que la del administrador. Creaci\u00f3n de un dominio X. La siguiente tarea que llevar\u00e1 a cabo el asistente para la creaci\u00f3n del dominio, ser\u00e1 preguntar por ciertas opciones adicionales del servidor, como por ejemplo la configuraci\u00f3n del servicio DNS . Como en nuestro caso no tenemos DNS, dejaremos que el asistente cree una zona de DNS para que nuestro dominio pueda funcionar. Creaci\u00f3n de un dominio XI. A continuaci\u00f3n nos aparece la ubicaci\u00f3n donde se guardar\u00e1 los objetos de nuestro AD, es decir, la base de datos : Creaci\u00f3n de un dominio XII. Seguidamente nos muestra las configuraciones que se van a realizar. Note Como pod\u00e9is observar tambi\u00e9n se puede exportar el script para poder ejecutar los mismos comandos a trav\u00e9s de PowerShell : Creaci\u00f3n de un dominio XIII. En el siguiente paso se muestra un resumen de los Requisitos previos : Comprobaci\u00f3n de requisitos previos. Y finalmente realizar\u00edamos la instalaci\u00f3n. Nuestra pantalla de inicio de sesi\u00f3n, ahora ser\u00e1 diferente, ya que nos aparece el dominio al que vamos a iniciar la sesi\u00f3n del usuario: Note Nos aparecer\u00e1 ASO2122 en lugar de CEFIRE2019 Nueva pantalla inicio de sesi\u00f3n con Dominio. Una vez instalado, podemos iniciar sesi\u00f3n con el Administrador del dominio. Podemos comprobar que en el panel de Administrador de Servidor aparece nuestro dominio configurado ASO2122.LOCAL en lugar de CEFIRE2019.LOCAL Comprobaci\u00f3n Dominio n Administrador de Servidor.","title":"Creaci\u00f3n de un dominio"},{"location":"Practica04_AD.html#creacion-de-dominio-en-server-core","text":"Se podr\u00eda hacer una instalaci\u00f3n sin experiencia de escritorio del Windows Server 2019 esto es una instalaci\u00f3n mucho m\u00e1s liviana que permite tener un servidor sin entorno gr\u00e1fico. A esta versi\u00f3n se le conoce como el nombre de Server Core . En este punto vamos a mostrar a realizar una instalaci\u00f3n de un dominio en una m\u00e1quina Server Core. Para hacer la instalaci\u00f3n, debemos seleccionar la opci\u00f3n de instalaci\u00f3n sin experiencia de escritorio: Instalaci\u00f3n Server Core.","title":"Creaci\u00f3n de dominio en Server Core"},{"location":"Practica04_AD.html#powershell-para-configurar-un-dominio","text":"Para configurar el dominio con PowerShell vamos a presentar unos scripts que permitir\u00e1n realizar la configuraci\u00f3n tanto de la m\u00e1quina como del Active Directory. Para entrar dentro del shell de PowerShell, teclearemos el comando powershell en la consola: Entrar al PowerShell en el Server Core.","title":"PowerShell para configurar un dominio"},{"location":"Practica04_AD.html#configuracion-inicial","text":"Primero realizaremos la configuraci\u00f3n de la m\u00e1quina, a trav\u00e9s del siguiente script. ConfiguracionInicial.ps1 $nombreServer=\"ASO2122\" $dirIP=\"192.168.5.1X\" $redInterna=\"Ethernet 2\" Rename-Computer -NewName $nombreServer Get-NetAdapter \u2013name $redInterna | Remove-NetIPAddress -Confirm:$false Get-NetAdapter \u2013name $redInterna | New-NetIPAddress \u2013addressfamily IPv4 \u2013ipaddress $dirIP \u2013prefixlength 24 \u2013type unicast Warming Despu\u00e9s de la captura se debe reiniciar para aplicar los cambios. Donde se Puede observar: El nombre de m\u00e1quina en la variable $nombreServer El adaptador de la red interna en $redInterna (Ejemplo en el script) y tambi\u00e9n la direcci\u00f3n IP de la red interna en $dirIP . El comando _Rename-Computer -NewName $nombreServer cambia el nombre del servidor. Los comandos: _Get-NetAdapter \u2013__name $redInterna | Remove-NetIPAddress -Confirm:$false _Get-NetAdapter \u2013name $redInterna | New-NetIPAddress \u2013addressfamily IPv4 \u2013ipaddress $dirIP \u2013prefixlength 24 \u2013type unicast Nos permiten a\u00f1adir la direcci\u00f3n IP de nuestra red interna. Finalmente con _Restart-Computer -force reiniciamos la m\u00e1quina y tendremos configurado el nombre y el interfaz de la red interna.","title":"Configuraci\u00f3n inicial"},{"location":"Practica04_AD.html#instalar-controlador-de-dominio-con-powershell","text":"Ahora vamos a promover nuestro servidor a controlador de dominio. Esto tambi\u00e9n lo vamos a realizar a trav\u00e9s de powershell mediante scripts. creaciondominio.ps1 $dominioFQDN = \"ASO2122CORE.LOCAL\" $dominioNETBIOS = \"ASO2122CORE\" $adminPass = \"aso2122.\" Install-WindowsFeature AD-Domain-Services,DNS Import-module addsdeployment Install-ADDSForest -DomainName $dominioFQDN -DomainNetBiosName $dominioNETBIOS -SafeModeAdministratorPassword (ConvertTo-SecureString -string $adminPass -AsPlainText -Force) -DomainMode WinThreshold -ForestMode WinThreshold -InstallDNS -Confirm:$false Donde se Puede observar: En la variable _$dominioFQDN_ pondremos nuestro nombre de dominio y en _$dominioNETBIOS_ el nombre de dominio NETBIOS. El comando _Install-WindowsFeature AD-Domain-Services,DNS_ instala los roles de AD y tambi\u00e9n de DNS. El comando _Install-ADDSForest_ realiza la configuraci\u00f3n del dominio. Al ejecutarlo mostrar\u00eda por pantalla: Creaci\u00f3n de dominio en Server Core. Finalmente reiniciamos la m\u00e1quina y ya tenemos instalado nuestro controlador de dominio en una m\u00e1quina core con powershell. Notad que el inicio de sesi\u00f3n ahora ya es es ASO2122.LOCAL. Nuevo Inicio Sesi\u00f3n en Server Core. Para comprobar que todo se ha configurado de manera correcta, podemos iniciar sesi\u00f3n y ejecutar el comando sconfig . Nos muestra informaci\u00f3n relativa al nombre de m\u00e1quina, dominio y algunas otras opciones: Utilidad de inspecci\u00f3n sconfig.","title":"Instalar Controlador de dominio con powershell"},{"location":"Practica04_AD.html#apagado-de-la-maquina","text":"Note Para poder apagar la m\u00e1quina podemos hacer uso del comando shutdown /p o bien a trav\u00e9s de la opci\u00f3n 14 de la utilidad sconfig .","title":"Apagado de la m\u00e1quina"},{"location":"Practica04_AD.html#unir-clientes-al-dominio","text":"","title":"Unir clientes al dominio"},{"location":"Practica04_AD.html#anadir-maquinas-clientes-al-dominio","text":"Para incluir en el dominio los equipos que actuar\u00e1n como cliente hay que configurar las propiedades de Internet de cada una de las m\u00e1quinas que vamos a unir al dominio, teniendo en cuenta que: La direcci\u00f3n del controlador de dominio (que implementa funciones de DNS) es la 192.168.5.1X. La m\u00e1scara de subred es de 24 bits. Note En la red que se ha montado como ejemplo hay un elemento de interconexi\u00f3n con IP 192.168.100.1 que implementa las funciones de puerta de enlace y de DNS, por ese motivo se ha incluido como puerta de enlace predeterminada y como DNS secundario, sin embargo estos dos campos no son necesarios si \u00fanicamente queremos trabajar en el interior de una \u00fanica red. M\u00e1s adelante veremos instalaci\u00f3n de un servicio de DHCP y el enrutamiento, para que nuestro servidor pueda ofrecer a los clientes de la red interna una direcci\u00f3n de manera din\u00e1mica. A continuaci\u00f3n, en el siguiente ejemplo, se revisa la configuraci\u00f3n de la m\u00e1quina cliente Windows 10 que vamos a validar en el dominio Windows Server 2019 (utilizaremos la m\u00e1quina con interfaz gr\u00e1fica): Configuraci\u00f3n red cliente Windows 10. Note La figura anterior es un ejemplo de configuraci\u00f3n, habr\u00e1 que adapatarlo al rango utilizado en el Aula. Comprobaremos tambi\u00e9n que desde la m\u00e1quina cliente podamos hacer ping a nuestro dominio, esto es al dominio ASO2122.LOCAL . Para ello abrimos una terminal en la m\u00e1quina Windows 10 (Tecla Windows + R y luego cmd) y comprobamos que el ping al dominio funcione. Warning Es importante que este ping funcione, en caso contrario no se podr\u00e1 realizar la validaci\u00f3n en nuestro dominio . ping al dominio. Y ahora s\u00ed, ya podemos unir nuestra m\u00e1quina al dominio. Para ello, en Windows 10, seleccionaremos el bot\u00f3n de inicio y con el bot\u00f3n de la derecha del rat\u00f3n, seleccionaremos Sistema: Unir cliente windows 10 a dominio I. Seleccionamos Conectar a la red del trabajo o colegio y nos aparecer\u00e1 la siguiente informaci\u00f3n: Unir cliente windows 10 a dominio II. Hacemos clic en Conectar: Unir cliente windows 10 a dominio III. Seleccionamos la opci\u00f3n de Unir este dispositivo a un dominio local de Active Directory. Nos aparecer\u00e1 una ventana para introducir el nombre de dominio al que nos queremos conectar: Unir cliente windows 10 a dominio IV. En nuestro caso, introduciremos nuestro nombre de nominio, ASO2122.LOCAL en lugar de CEFIRE2019.LOCAL : Unir cliente windows 10 a dominio V. Para poder realizar la validaci\u00f3n, hay que introducir la cuenta del Administrador del dominio y su contrase\u00f1a, en nuestro caso, ser\u00e1 Administrador y como contrase\u00f1a cefire2019. Unir cliente windows 10 a dominio VI. Seleccionamos que nuestro administrador tenga los privilegios de administrador en la m\u00e1quina cliente, para ello selecionamos Tipo Cuenta y marcamos la opci\u00f3n de Administrador. Reiniciamos la m\u00e1quina y ya tenemos nuestro cliente Windows 10 validado en el dominio. Unir cliente windows 10 a dominio VI. A partir de este momento, ya podemos iniciar sesi\u00f3n con cualquier usuario del dominio. En nuestro caso solo tenemos el usuario Administrador, podemos probar a iniciar sesi\u00f3n en la m\u00e1quina con la cuenta del Administrador del dominio. Unir cliente windows 10 a dominio VII. Tambi\u00e9n podemos ver en nuestro servidor, desde el panel del Administrador de Servidor nuestra m\u00e1quina. Para ello, desde la m\u00e1quina Windows Server 2019, accedemos al Administrador de Servidor --> Herramientas --> Usuarios y Equipos de Active Directory : Unir cliente windows 10 a dominio VIII. Seleccionamos nuestro dominio ASO2122.LOCAL y luego Computers. Aparecer\u00e1 nuestra m\u00e1quina cliente PC01, si la seleccionamos, con el bot\u00f3n de la derecha del rat\u00f3n --> propiedades. Aqu\u00ed podemos ver alguna informaci\u00f3n relativa a la m\u00e1quina conectada. Unir cliente windows 10 a dominio IX.","title":"A\u00f1adir m\u00e1quinas clientes al dominio"},{"location":"Practica04_AD.html#errores-en-la-union","text":"En caso de que haya habido alg\u00fan error en la uni\u00f3n del equipo cliente al dominio se deben comprobar algunos aspectos: La configuraci\u00f3n de la interfaz de red est\u00e1 en modo 'Adaptador puente', no en 'NAT'. El equipo cliente y el equipo servidor se hallan en la misma red. El nombre del dominio puede resolverse desde el equipo cliente (ping ASO2122.LOCAL ) La direcci\u00f3n del servidor DNS est\u00e1 correctamente configurada en el equipo cliente.","title":"Errores en la uni\u00f3n"},{"location":"Practica04_AD.html#ejercicios","text":"En esta actividad vamos a realizar la configuraci\u00f3n de un dominio y la validaci\u00f3n de una m\u00e1quina Windows 10 en el mismo. Creaci\u00f3n de un dominio : En este apartado habr\u00e1 que instalar y configurar un dominio. El dominio que hay que instalar y configurar ser\u00e1 ASO2122.LOCAL . Para ello habr\u00e1 que entregar un \u00fanico archivo PDF con la captura de pantalla de nuestro Panel de Administrador del Servidor , donde aparezca claramente el nombre de m\u00e1quina y tambi\u00e9n el nombre de dominio. Ejemplo Pr\u00e1ctica 05_AD Ejercicio1. Validar una m\u00e1quina Windows 10 en el dominio : Una vez instalado y configurado el domino, habr\u00e1 que validar nuestra m\u00e1quina Windows 10 cliente en el dominio. Una vez unida al dominio, habr\u00e1 que a\u00f1adir al documento a entregar, una captura de pantalla donde se aprecie en el servidor que el equipo est\u00e1 dado correctamente de alta ( Inicio \u2192 Herramientas Administrativas \u2192 Usuarios y Equipos de Active Directory \u2192 ASO2122.LOCAL \u2192 Computer/Equipos ). A\u00f1ade tambi\u00e9n alguna captura de pantalla de las propiedades del equipo donde se identifique el sistema operativo de los equipos que has unido al dominio. Ejemplo Pr\u00e1ctica 05_AD Ejercicio2.","title":"Ejercicios"},{"location":"Practica05_AD.html","text":"Pr\u00e1ctica05_AD \u00b6 Instalaci\u00f3n de Active DirectoryInstalaci\u00f3n de Active Directory II \u00b6 Objetivos de esta pr\u00e1ctica: Eliminar Clientes de un dominio. Degradar Controlador de un dominio. Configurar un servicio de DHCP Acceso Remoto y NAT Eliminar clientes de un dominio \u00b6 Habr\u00e1 veces que una determinada m\u00e1quina queramos sacarla de un dominio por alg\u00fan motivo, para quitar un cliente Windows 10 de un domino debemos realizar los siguientes pasos: Accedemos a Sistema, a trav\u00e9s del bot\u00f3n de inicio de Windows y con el rat\u00f3n bot\u00f3n de la derecha --> Sistema . Eliminar cliente windows 10 de dominio I. Dentro de Sistema --> Seleccionamos Administrar o desconectar del trabajo o de la escuela : Eliminar cliente windows 10 de dominio II. Seleccionamos el dominio al que est\u00e1 conectado, en nuestro caso a ASO2122.LOCAL y hacemos clic en Desconectar Eliminar cliente windows 10 de dominio III. Eliminar cliente windows 10 de dominio IV. Confirmamos la desconexi\u00f3n del dominio local Eliminar cliente windows 10 de dominio V. Degradar un controlador de dominio \u00b6 En este apartado lo que vamos a ver es c\u00f3mo podemos degradar un servidor que est\u00e9 actuando como controlador de dominio , es decir, que tenga instalado un Active Directory. Para ello iremos al Panel de Administrador del Servidor y seleccionaremos Agregar roles y caracter\u00edsticas: Degradar un controlador de dominio I. Nos aparece el asistente para quitar roles y caracter\u00edsticas, seleccionamos siguiente: Degradar un controlador de dominio II. Iniciado el asistente seleccionamos el servidor en donde vamos a quitar alg\u00fan rol. En nuestro caso, eliminaremos el rol Servicios de dominio de Active Directory: Degradar un controlador de dominio III. Eliminamos las caracter\u00edsticas de los servicios de Active Directory: Degradar un controlador de dominio IV. Para poder eliminar los servicios de Active Directory, es necesario disminuir el nivel del controlador de dominio: Degradar un controlador de dominio V. Forzamos la eliminaci\u00f3n del controlador de dominio: Degradar un controlador de dominio VI. Introducimos la contrase\u00f1a del administrador del dominio, en nuestro caso \"cefire2017.\": Degradar un controlador de dominio VII. Y por \u00faltimo Disminuimos el nivel: Degradar un controlador de dominio VIII. Servicio de DHCP \u00b6 Indiscutiblemente uno de los principales roles que nos ofrece Windows Server y que son vitales en el \u00f3ptimo funcionamiento de nuestra infraestructura de red es el rol de DHCP. DHCP (Dynamic Host Configuration Protocol \u2013 Protocolo de Configuraci\u00f3n Din\u00e1mica de Equipos) nos permite definir rangos de direcciones IP para los equipos cliente del dominio y de este modo administrar de forma centralizada todas las direcciones IP del dominio. Cuando en nuestra organizaci\u00f3n tenemos disponible un servidor DHCP tenemos la plena confianza que todos los equipos y dispositivos de nuestra red tendr\u00e1n de forma autom\u00e1tica su direcci\u00f3n IP y no es necesario ir a cada m\u00e1quina a definir la direcci\u00f3n de forma manual. Con el rol DHCP proveemos los siguientes par\u00e1metros : M\u00e1scara de subred Direcci\u00f3n IP Puerta de enlace Servidores DNS, entre otros. Para iniciar el proceso de instalaci\u00f3n seleccionaremos la opci\u00f3n Agregar roles y caracter\u00edsticas desde el Administrador del servidor. La primera ventana la podemos omitir ya que es de bienvenida. Pulsamos Siguiente y en la ventana desplegada seleccionamos la opci\u00f3n Instalaci\u00f3n basada en caracter\u00edsticas y roles, pulsamos Siguiente y seleccionamos el servidor donde instalaremos el rol DHCP. Instalaci\u00f3n servicio de DHCP I. Una vez seleccionado el equipo buscaremos el rol Servidor de DHCP, al activar la casilla veremos la siguiente ventana donde se indica si deseamos agregar las caracter\u00edsticas de DHCP. Seleccionamos la opci\u00f3n Agregar caracter\u00edstica y veremos el rol seleccionado. Llegaremos al resumen y haremos clic en Instalar : Instalaci\u00f3n servicio de DHCP II. Una vez instalado, hay que realizar la configuraci\u00f3n del rol. Para ello hay que hacer clic en Completar configuraci\u00f3n DHCP: Instalaci\u00f3n servicio de DHCP III. Configuraci\u00f3n servicio de DHCP \u00b6 Como vemos debemos completar la configuraci\u00f3n del DHCP para que todo el rol quede correctamente preparado para la organizaci\u00f3n, para ello pulsamos en la opci\u00f3n \u201cCompletar configuraci\u00f3n de DHCP\u201d. Al pulsar esta opci\u00f3n veremos el siguiente asistente. Configuraci\u00f3n servicio de DHCP I. Pulsamos Siguiente y debemos configurar las credenciales del usuario que han de ser usadas para la configuraci\u00f3n del servidor DHCP: Configuraci\u00f3n servicio de DHCP II. Una vez definidas pulsamos Confirmar y veremos el resumen del proceso. Pulsamos Cerrar para salir del asistente. Con esto hemos instalado el rol de DHCP en Windows Server 2019: Configuraci\u00f3n servicio de DHCP III. Ahora debemos configurar el DHCP por lo que con este paso realizado vamos a ir a la siguiente ruta para establecer la configuraci\u00f3n deseada para el DHCP. Para ello vamos al Panel del Administrador --> Herramientas y DHCP : Como podemos observar contamos con dos opciones de configuraci\u00f3n. All\u00ed podemos configurar todos los par\u00e1metros del direccionamiento IPv4, hasta ahora el m\u00e1s usado y el de IPv6. Creaci\u00f3n de un nuevo \u00e1mbito \u00b6 Un \u00e1mbito es un rango de direcciones que ser\u00e1n asignadas de forma autom\u00e1tica a los equipos de nuestro dominio. Por tanto seleccionaremos IPv4 y con el bot\u00f3n de la derecha del rat\u00f3n accederemos a la opci\u00f3n \u00c1mbito Nuevo... Iniciar\u00e1 el asistente para creaci\u00f3n de un \u00e1mbito nuevo: Configuraci\u00f3n servicio de DHCP IV. Configuraci\u00f3n servicio de DHCP V. Pulsamos Siguiente y a continuaci\u00f3n debemos establecer un nombre a este nuevo \u00e1mbito. En nuestro caso, \u00e1mbito ASO2122.LOCAL: Configuraci\u00f3n servicio de DHCP VI. En la siguiente ventana debemos establecer el rango de direcciones IP a asignar de forma autom\u00e1tica, debemos indicar una direcci\u00f3n IP inicial y una direcci\u00f3n IP final. Es muy importante que tengamos claridad sobre la cantidad de usuarios estar\u00e1n activos para no asignar direcciones de m\u00e1s ni quedarnos cortos con las mismas. La longitud la dejamos por defecto en 24 y la m\u00e1scara de subred dejamos la que est\u00e1, clase C. En nuestro caso, introduciremos un rango desde la 192.168.100.20 - 192.168.100.250. Configuraci\u00f3n servicio de DHCP VII. Al pulsar Siguiente podemos establecer una o m\u00e1s direcciones IP que no ser\u00e1n distribuidas a los usuarios de manera normal, esto es efectivo en los siguientes casos: Tareas de administraci\u00f3n. Asignar IPs fijas a dispositivos como impresoras. Establecer direcciones IP a un grupo determinado de usuarios sin que \u00e9sta sea renovada. Configuraci\u00f3n servicio de DHCP VIII. Una vez establecido o no estas exclusiones pulsamos Siguiente y veremos que podemos configurar cu\u00e1nto tiempo durar\u00e1 la concesi\u00f3n de la direcci\u00f3n IP, esto hace que la direcci\u00f3n IP en el equipo cliente sea renovada de manera autom\u00e1tica, podemos definir este valor en d\u00edas, horas o minutos. Lo m\u00e1s recomendable es que para los equipos de nuestra organizaci\u00f3n se establezca esta concesi\u00f3n en d\u00edas ya que al renovarse la direcci\u00f3n IP el usuario puede verse afectado en su navegaci\u00f3n y uso de la red. Configuraci\u00f3n servicio de DHCP IX. Pulsamos Siguiente y debemos definir si establecemos esta configuraci\u00f3n de manera inmediata o m\u00e1s adelante. En nuestro caso marcaremos la opci\u00f3n de configurar las opciones ahora: Configuraci\u00f3n servicio de DHCP X. Al pulsar que las configure de manera inmediata el asistente nos solicitar\u00e1 que ingresemos la direcci\u00f3n IP del enrutador o puerta de enlace. En nuestro caso a\u00f1adiremos la ip 192.168.100.1 y le daremos a Agregar: Configuraci\u00f3n servicio de DHCP XI. Pulsamos nuevamente Siguiente y podemos ver el nombre del dominio o especificar cu\u00e1les equipos ser\u00e1n usados para la resoluci\u00f3n de los nombres DNS. En nuestro caso, la IP de la red interna, 192.168.100.1 y como alternativo podemos poder cualquier DNS, por ejemplo el de google 8.8.8.8: Configuraci\u00f3n servicio de DHCP XII. Al pulsar Siguiente veremos la configuraci\u00f3n de los servidores WINS los cuales permiten que los nombres de equipo NetBIOS sean convertidos en direcciones IP. Nuestro caso ninguno. Configuraci\u00f3n servicio de DHCP XIII. Finalmente activamos nuestro \u00e1mbito. Configuraci\u00f3n servicio de DHCP XIV. Configuraci\u00f3n de IP por DHCP en m\u00e1quina cliente \u00b6 Para comprobar que nuestro DHCP funciona, basta con cambiar la configuraci\u00f3n en la m\u00e1quina Windows 10 cliente y comprobar que nos asigna la primera direcci\u00f3n disponible de nuestro \u00e1mbito, t\u00edpicamente la 192.168.100.20, en nuestro caso: Configuraci\u00f3n IP din\u00e1mica en cliente. Y comprobamos la IP: Comprobaci\u00f3n de asignaci\u00f3n de IP din\u00e1mica. Concesi\u00f3n de direcciones en DHCP \u00b6 Desde el servidor, en la opci\u00f3n de DHCP, tambi\u00e9n podemos comprobar las concesiones de direcciones IPs que se han realizado: Comprobaci\u00f3n de las concesiones de direcciones IPs. Acceso Remoto. NAT. \u00b6 Servicios de enrutamiento \u00b6 En este punto vamos a realizar la configuraci\u00f3n de NAT en nuestro servidor. NAT (Network Address Translation) nos permite que nuestra interfaz externa, pueda traducir las direcciones de la red interna. De esta forma, en las m\u00e1quinas clientes de la red interna de nuestro dominio, puede tener acceso a internet. Este servicio en combinaci\u00f3n con el anterior se suele utilizar con mucha frecuencia. Para ello lo primero de debemos hacer es realizar la instalaci\u00f3n del rol Acceso Remoto , desde: el Panel del Administrador del Servidor en agregar roles y caracter\u00edsticas y seleccionar Acceso Remoto : Configuraci\u00f3n de NAT I. Marcamos y agregamos las caracter\u00edsticas, NAT va acompa\u00f1ado tambi\u00e9n del servicio de Enrutamiento y Direct Access. En nuestro caso, de momento solo realizaremos la configuraci\u00f3n de NAT: Configuraci\u00f3n de NAT II. Configuraci\u00f3n de NAT III. Una vez instalado vamos a realizar la configuraci\u00f3n del NAT. Para ello, dentro del Panel del Administrador del Servidor, accedemos a Herramientas y despu\u00e9s en Enrutamiento y Acceso Remoto: Configuraci\u00f3n de NAT IV. Dentro de enrutamiento y acceso remoto, seleccionamos nuestro servidor y con el bot\u00f3n de la derecha del rat\u00f3n, marcamos la opci\u00f3n Configurar y habilitar el Enrutamiento y acceso remoto: Configuraci\u00f3n de NAT V. Nos iniciar\u00e1 un asistente y marcaremos la opci\u00f3n Traducci\u00f3n de direcciones de red (NAT): Configuraci\u00f3n de NAT VI. Marcaremos nuestra interfaz externa (WAN) como interfaz de conexi\u00f3n a internet: Configuraci\u00f3n de NAT VII. Acceso a internet cliente Windows 10 \u00b6 Ahora desde nuestra m\u00e1quina cliente Windows 10, ya tenemos nuestro acceso a internet: Configuraci\u00f3n de NAT VIII. Actividades \u00b6 En esta actividad vamos a realizar la configuraci\u00f3n de un servicio DHCP y el acceso remoto. NAT. Creaci\u00f3n de DHCP : En este apartado habr\u00e1 que instalar y configurar el servicio DHCP. Habr\u00e1 que entregar un \u00fanico archivo PDF con la captura de pantalla de nuestra Panel de Administrador del Servidor, con las concesiones DHCP , donde aparezca claramente el nombre de m\u00e1quina; adem\u00e1s otra captura con la configuraci\u00f3n de red del Windows 10 . Validar una m\u00e1quina Windows 10 en el dominio : Configuraci\u00f3n del NAT. se mostrar\u00e1 Panel de Administrador del Servidor, con la configuraci\u00f3n NAT , donde aparezca claramente el nombre de m\u00e1quina; adem\u00e1s otra captura con demostrando que el cliente tiene conexi\u00f3n a Internet.","title":"Pr\u00e1ctica05_AD"},{"location":"Practica05_AD.html#practica05_ad","text":"","title":"Pr\u00e1ctica05_AD"},{"location":"Practica05_AD.html#instalacion-de-active-directoryinstalacion-de-active-directory-ii","text":"Objetivos de esta pr\u00e1ctica: Eliminar Clientes de un dominio. Degradar Controlador de un dominio. Configurar un servicio de DHCP Acceso Remoto y NAT","title":"Instalaci\u00f3n de Active DirectoryInstalaci\u00f3n de Active Directory II"},{"location":"Practica05_AD.html#eliminar-clientes-de-un-dominio","text":"Habr\u00e1 veces que una determinada m\u00e1quina queramos sacarla de un dominio por alg\u00fan motivo, para quitar un cliente Windows 10 de un domino debemos realizar los siguientes pasos: Accedemos a Sistema, a trav\u00e9s del bot\u00f3n de inicio de Windows y con el rat\u00f3n bot\u00f3n de la derecha --> Sistema . Eliminar cliente windows 10 de dominio I. Dentro de Sistema --> Seleccionamos Administrar o desconectar del trabajo o de la escuela : Eliminar cliente windows 10 de dominio II. Seleccionamos el dominio al que est\u00e1 conectado, en nuestro caso a ASO2122.LOCAL y hacemos clic en Desconectar Eliminar cliente windows 10 de dominio III. Eliminar cliente windows 10 de dominio IV. Confirmamos la desconexi\u00f3n del dominio local Eliminar cliente windows 10 de dominio V.","title":"Eliminar clientes de un dominio"},{"location":"Practica05_AD.html#degradar-un-controlador-de-dominio","text":"En este apartado lo que vamos a ver es c\u00f3mo podemos degradar un servidor que est\u00e9 actuando como controlador de dominio , es decir, que tenga instalado un Active Directory. Para ello iremos al Panel de Administrador del Servidor y seleccionaremos Agregar roles y caracter\u00edsticas: Degradar un controlador de dominio I. Nos aparece el asistente para quitar roles y caracter\u00edsticas, seleccionamos siguiente: Degradar un controlador de dominio II. Iniciado el asistente seleccionamos el servidor en donde vamos a quitar alg\u00fan rol. En nuestro caso, eliminaremos el rol Servicios de dominio de Active Directory: Degradar un controlador de dominio III. Eliminamos las caracter\u00edsticas de los servicios de Active Directory: Degradar un controlador de dominio IV. Para poder eliminar los servicios de Active Directory, es necesario disminuir el nivel del controlador de dominio: Degradar un controlador de dominio V. Forzamos la eliminaci\u00f3n del controlador de dominio: Degradar un controlador de dominio VI. Introducimos la contrase\u00f1a del administrador del dominio, en nuestro caso \"cefire2017.\": Degradar un controlador de dominio VII. Y por \u00faltimo Disminuimos el nivel: Degradar un controlador de dominio VIII.","title":"Degradar un controlador de dominio"},{"location":"Practica05_AD.html#servicio-de-dhcp","text":"Indiscutiblemente uno de los principales roles que nos ofrece Windows Server y que son vitales en el \u00f3ptimo funcionamiento de nuestra infraestructura de red es el rol de DHCP. DHCP (Dynamic Host Configuration Protocol \u2013 Protocolo de Configuraci\u00f3n Din\u00e1mica de Equipos) nos permite definir rangos de direcciones IP para los equipos cliente del dominio y de este modo administrar de forma centralizada todas las direcciones IP del dominio. Cuando en nuestra organizaci\u00f3n tenemos disponible un servidor DHCP tenemos la plena confianza que todos los equipos y dispositivos de nuestra red tendr\u00e1n de forma autom\u00e1tica su direcci\u00f3n IP y no es necesario ir a cada m\u00e1quina a definir la direcci\u00f3n de forma manual. Con el rol DHCP proveemos los siguientes par\u00e1metros : M\u00e1scara de subred Direcci\u00f3n IP Puerta de enlace Servidores DNS, entre otros. Para iniciar el proceso de instalaci\u00f3n seleccionaremos la opci\u00f3n Agregar roles y caracter\u00edsticas desde el Administrador del servidor. La primera ventana la podemos omitir ya que es de bienvenida. Pulsamos Siguiente y en la ventana desplegada seleccionamos la opci\u00f3n Instalaci\u00f3n basada en caracter\u00edsticas y roles, pulsamos Siguiente y seleccionamos el servidor donde instalaremos el rol DHCP. Instalaci\u00f3n servicio de DHCP I. Una vez seleccionado el equipo buscaremos el rol Servidor de DHCP, al activar la casilla veremos la siguiente ventana donde se indica si deseamos agregar las caracter\u00edsticas de DHCP. Seleccionamos la opci\u00f3n Agregar caracter\u00edstica y veremos el rol seleccionado. Llegaremos al resumen y haremos clic en Instalar : Instalaci\u00f3n servicio de DHCP II. Una vez instalado, hay que realizar la configuraci\u00f3n del rol. Para ello hay que hacer clic en Completar configuraci\u00f3n DHCP: Instalaci\u00f3n servicio de DHCP III.","title":"Servicio de DHCP"},{"location":"Practica05_AD.html#configuracion-servicio-de-dhcp","text":"Como vemos debemos completar la configuraci\u00f3n del DHCP para que todo el rol quede correctamente preparado para la organizaci\u00f3n, para ello pulsamos en la opci\u00f3n \u201cCompletar configuraci\u00f3n de DHCP\u201d. Al pulsar esta opci\u00f3n veremos el siguiente asistente. Configuraci\u00f3n servicio de DHCP I. Pulsamos Siguiente y debemos configurar las credenciales del usuario que han de ser usadas para la configuraci\u00f3n del servidor DHCP: Configuraci\u00f3n servicio de DHCP II. Una vez definidas pulsamos Confirmar y veremos el resumen del proceso. Pulsamos Cerrar para salir del asistente. Con esto hemos instalado el rol de DHCP en Windows Server 2019: Configuraci\u00f3n servicio de DHCP III. Ahora debemos configurar el DHCP por lo que con este paso realizado vamos a ir a la siguiente ruta para establecer la configuraci\u00f3n deseada para el DHCP. Para ello vamos al Panel del Administrador --> Herramientas y DHCP : Como podemos observar contamos con dos opciones de configuraci\u00f3n. All\u00ed podemos configurar todos los par\u00e1metros del direccionamiento IPv4, hasta ahora el m\u00e1s usado y el de IPv6.","title":"Configuraci\u00f3n servicio de DHCP"},{"location":"Practica05_AD.html#creacion-de-un-nuevo-ambito","text":"Un \u00e1mbito es un rango de direcciones que ser\u00e1n asignadas de forma autom\u00e1tica a los equipos de nuestro dominio. Por tanto seleccionaremos IPv4 y con el bot\u00f3n de la derecha del rat\u00f3n accederemos a la opci\u00f3n \u00c1mbito Nuevo... Iniciar\u00e1 el asistente para creaci\u00f3n de un \u00e1mbito nuevo: Configuraci\u00f3n servicio de DHCP IV. Configuraci\u00f3n servicio de DHCP V. Pulsamos Siguiente y a continuaci\u00f3n debemos establecer un nombre a este nuevo \u00e1mbito. En nuestro caso, \u00e1mbito ASO2122.LOCAL: Configuraci\u00f3n servicio de DHCP VI. En la siguiente ventana debemos establecer el rango de direcciones IP a asignar de forma autom\u00e1tica, debemos indicar una direcci\u00f3n IP inicial y una direcci\u00f3n IP final. Es muy importante que tengamos claridad sobre la cantidad de usuarios estar\u00e1n activos para no asignar direcciones de m\u00e1s ni quedarnos cortos con las mismas. La longitud la dejamos por defecto en 24 y la m\u00e1scara de subred dejamos la que est\u00e1, clase C. En nuestro caso, introduciremos un rango desde la 192.168.100.20 - 192.168.100.250. Configuraci\u00f3n servicio de DHCP VII. Al pulsar Siguiente podemos establecer una o m\u00e1s direcciones IP que no ser\u00e1n distribuidas a los usuarios de manera normal, esto es efectivo en los siguientes casos: Tareas de administraci\u00f3n. Asignar IPs fijas a dispositivos como impresoras. Establecer direcciones IP a un grupo determinado de usuarios sin que \u00e9sta sea renovada. Configuraci\u00f3n servicio de DHCP VIII. Una vez establecido o no estas exclusiones pulsamos Siguiente y veremos que podemos configurar cu\u00e1nto tiempo durar\u00e1 la concesi\u00f3n de la direcci\u00f3n IP, esto hace que la direcci\u00f3n IP en el equipo cliente sea renovada de manera autom\u00e1tica, podemos definir este valor en d\u00edas, horas o minutos. Lo m\u00e1s recomendable es que para los equipos de nuestra organizaci\u00f3n se establezca esta concesi\u00f3n en d\u00edas ya que al renovarse la direcci\u00f3n IP el usuario puede verse afectado en su navegaci\u00f3n y uso de la red. Configuraci\u00f3n servicio de DHCP IX. Pulsamos Siguiente y debemos definir si establecemos esta configuraci\u00f3n de manera inmediata o m\u00e1s adelante. En nuestro caso marcaremos la opci\u00f3n de configurar las opciones ahora: Configuraci\u00f3n servicio de DHCP X. Al pulsar que las configure de manera inmediata el asistente nos solicitar\u00e1 que ingresemos la direcci\u00f3n IP del enrutador o puerta de enlace. En nuestro caso a\u00f1adiremos la ip 192.168.100.1 y le daremos a Agregar: Configuraci\u00f3n servicio de DHCP XI. Pulsamos nuevamente Siguiente y podemos ver el nombre del dominio o especificar cu\u00e1les equipos ser\u00e1n usados para la resoluci\u00f3n de los nombres DNS. En nuestro caso, la IP de la red interna, 192.168.100.1 y como alternativo podemos poder cualquier DNS, por ejemplo el de google 8.8.8.8: Configuraci\u00f3n servicio de DHCP XII. Al pulsar Siguiente veremos la configuraci\u00f3n de los servidores WINS los cuales permiten que los nombres de equipo NetBIOS sean convertidos en direcciones IP. Nuestro caso ninguno. Configuraci\u00f3n servicio de DHCP XIII. Finalmente activamos nuestro \u00e1mbito. Configuraci\u00f3n servicio de DHCP XIV.","title":"Creaci\u00f3n de un nuevo \u00e1mbito"},{"location":"Practica05_AD.html#configuracion-de-ip-por-dhcp-en-maquina-cliente","text":"Para comprobar que nuestro DHCP funciona, basta con cambiar la configuraci\u00f3n en la m\u00e1quina Windows 10 cliente y comprobar que nos asigna la primera direcci\u00f3n disponible de nuestro \u00e1mbito, t\u00edpicamente la 192.168.100.20, en nuestro caso: Configuraci\u00f3n IP din\u00e1mica en cliente. Y comprobamos la IP: Comprobaci\u00f3n de asignaci\u00f3n de IP din\u00e1mica.","title":"Configuraci\u00f3n de IP por DHCP en m\u00e1quina cliente"},{"location":"Practica05_AD.html#concesion-de-direcciones-en-dhcp","text":"Desde el servidor, en la opci\u00f3n de DHCP, tambi\u00e9n podemos comprobar las concesiones de direcciones IPs que se han realizado: Comprobaci\u00f3n de las concesiones de direcciones IPs.","title":"Concesi\u00f3n de direcciones en DHCP"},{"location":"Practica05_AD.html#acceso-remoto-nat","text":"","title":"Acceso Remoto. NAT."},{"location":"Practica05_AD.html#servicios-de-enrutamiento","text":"En este punto vamos a realizar la configuraci\u00f3n de NAT en nuestro servidor. NAT (Network Address Translation) nos permite que nuestra interfaz externa, pueda traducir las direcciones de la red interna. De esta forma, en las m\u00e1quinas clientes de la red interna de nuestro dominio, puede tener acceso a internet. Este servicio en combinaci\u00f3n con el anterior se suele utilizar con mucha frecuencia. Para ello lo primero de debemos hacer es realizar la instalaci\u00f3n del rol Acceso Remoto , desde: el Panel del Administrador del Servidor en agregar roles y caracter\u00edsticas y seleccionar Acceso Remoto : Configuraci\u00f3n de NAT I. Marcamos y agregamos las caracter\u00edsticas, NAT va acompa\u00f1ado tambi\u00e9n del servicio de Enrutamiento y Direct Access. En nuestro caso, de momento solo realizaremos la configuraci\u00f3n de NAT: Configuraci\u00f3n de NAT II. Configuraci\u00f3n de NAT III. Una vez instalado vamos a realizar la configuraci\u00f3n del NAT. Para ello, dentro del Panel del Administrador del Servidor, accedemos a Herramientas y despu\u00e9s en Enrutamiento y Acceso Remoto: Configuraci\u00f3n de NAT IV. Dentro de enrutamiento y acceso remoto, seleccionamos nuestro servidor y con el bot\u00f3n de la derecha del rat\u00f3n, marcamos la opci\u00f3n Configurar y habilitar el Enrutamiento y acceso remoto: Configuraci\u00f3n de NAT V. Nos iniciar\u00e1 un asistente y marcaremos la opci\u00f3n Traducci\u00f3n de direcciones de red (NAT): Configuraci\u00f3n de NAT VI. Marcaremos nuestra interfaz externa (WAN) como interfaz de conexi\u00f3n a internet: Configuraci\u00f3n de NAT VII.","title":"Servicios de enrutamiento"},{"location":"Practica05_AD.html#acceso-a-internet-cliente-windows-10","text":"Ahora desde nuestra m\u00e1quina cliente Windows 10, ya tenemos nuestro acceso a internet: Configuraci\u00f3n de NAT VIII.","title":"Acceso a internet cliente Windows 10"},{"location":"Practica05_AD.html#actividades","text":"En esta actividad vamos a realizar la configuraci\u00f3n de un servicio DHCP y el acceso remoto. NAT. Creaci\u00f3n de DHCP : En este apartado habr\u00e1 que instalar y configurar el servicio DHCP. Habr\u00e1 que entregar un \u00fanico archivo PDF con la captura de pantalla de nuestra Panel de Administrador del Servidor, con las concesiones DHCP , donde aparezca claramente el nombre de m\u00e1quina; adem\u00e1s otra captura con la configuraci\u00f3n de red del Windows 10 . Validar una m\u00e1quina Windows 10 en el dominio : Configuraci\u00f3n del NAT. se mostrar\u00e1 Panel de Administrador del Servidor, con la configuraci\u00f3n NAT , donde aparezca claramente el nombre de m\u00e1quina; adem\u00e1s otra captura con demostrando que el cliente tiene conexi\u00f3n a Internet.","title":"Actividades"},{"location":"Practica06_AD.html","text":"Pr\u00e1ctica06_AD \u00b6 Administraci\u00f3n de Usuarios y Grupos \u00b6 Objetivos de esta pr\u00e1ctica: Crear y configurar usuarios Crear y configurar grupos Crear y configurar unidades organizativas Creaci\u00f3n de usuarios \u00b6 Los usuarios del dominio deben tener una cuenta para poder acceder a los recursos del mismo tras su autenticaci\u00f3n frente al controlador de dominio. Para crear una cuenta de usuario mediante la interfaz gr\u00e1fica accederemos a la herramienta: ' Usuarios y equipos de Active Directory ' desde el Panel del Administrador --> Herramientas: Usuarios y Equipos de AD. Una vez abierto el administrador de ' Usuarios y equipos de Active Director y', se hace clic con el bot\u00f3n derecho sobre ' Users ' y en el men\u00fa que aparece, se selecciona ' Nuevo ' y a continuaci\u00f3n ' Usuario ' : Creaci\u00f3n Nuevo Usuario I. Nos aparece el asistente para la creaci\u00f3n del nuevo usuario: Creaci\u00f3n Nuevo Usuario II. En la primera parte del cuadro de di\u00e1logo anterior se puede introducir el nombre, la(s) inicial(es) del segundo nombre y los apellidos del usuario. Hasta aqu\u00ed toda esta informaci\u00f3n es meramente informativa, podr\u00eda haber, por ejemplo, dos usuarios cuyo nombre completo fuera \"F\u00ba Javier Hern\u00e1ndez Ill\u00e1n\". Note Como normas generales al crear un nombre de usuario hay que observar que: Las cuentas de usuario deben ser \u00fanicas . Los nombres de inicio de sesi\u00f3n se pueden formar con una combinaci\u00f3n de letras, may\u00fasculas o min\u00fasculas, y caracteres alfanum\u00e9ricos . No se aceptan los caracteres: /, |, :, ;, =, <, > ni * . La cuenta de usuario puede tener hasta 20 caracteres . Por lo tanto en la segunda parte del cuadro de texto dode se indica ' Nombre de inicio de sesi\u00f3n de usuario ' se introduce el nombre de usuario siguiendo la estructura que haya predefinido el administrador del sistema y como se ha indicado anteriormente, este nombre debe ser \u00fanico en todo el dominio . Algunos ejemplos de criterios para la creaci\u00f3n del nombre de usuario podr\u00edan ser los siguientes: Dos primeras letras del nombre y apellidos. El nombre de inicio de sesi\u00f3n del usuario F\u00ba Javier Hern\u00e1ndez Ill\u00e1n ser\u00eda: fjhernandez . Diferentes caracteres para separar la inicial del primer nombre y el apellido completo: fj.hernandez . Primer nombre completo y primer apellido completo separados por un punto: francisco.hernandez . A continuaci\u00f3n se solicitar\u00e1 que se introduzca la contrase\u00f1a del usuario. Esta debe cumplir con los criterios de complejidad establecidos. Adem\u00e1s aparecen una serie de opciones para configurar las propiedades de la contrase\u00f1a: Creaci\u00f3n Nuevo Usuario III. En la figura anterior aparecen cuatro opciones para la contrase\u00f1a El usuario debe cambiar la contrase\u00f1a en el siguiente inicio de sesi\u00f3n. El usuario no puede cambiar la contrase\u00f1a. La contrase\u00f1a nunca expira. La cuenta est\u00e1 deshabilitada. La primera de las opciones es \u00fatil para que el administrador cree el nuevo usuario con una contrase\u00f1a convencional. El usuario cuando se autentifique por primera vez en el sistema entrar\u00e1 con la contrase\u00f1a que le ha proporcionado el administrador, pero autom\u00e1ticamente, el sistema le indicar\u00e1 que debe ser cambiada. De esta manera, el administrador ya no conocer\u00e1 la contrase\u00f1a del usuario, garantiz\u00e1ndose la privacidad de esta. Mensaje para cambio de contrase\u00f1a. El segundo de los casos ('El usuario no puede cambiar la contrase\u00f1a') est\u00e1 pensado para crear usuarios gen\u00e9ricos , supongamos que creamos una cuenta de usuario para utilizar un ordenador conectado a un esc\u00e1ner, y queremos que los Usuarios que deseen utilizar ese esc\u00e1ner, siempre entren con la misma cuenta al equipo asociado al esc\u00e1ner. La inhabilitaci\u00f3n del tercer caso ('La contrase\u00f1a nunca expira'), tiene por objetivo evitar que el sistema pida al usuario que cambie la contrase\u00f1a peri\u00f3dicamente. Resulta interesante mantener esta opci\u00f3n, aunque pueda resultar inc\u00f3modo cambiar la contrase\u00f1a cada, por ejemplo, seis meses. De esta manera estamos protegi\u00e9ndonos de posibles accesos indebidos por parte de alguien que haya averiguado la contrase\u00f1a de alguna manera. Finalmente, la cuarta opci\u00f3n ('La cuenta est\u00e1 deshabilitada') sirve para bloquear usuarios que no queremos que tengan acceso al sistema, pero tampoco queremos eliminarlos, ya que se invalidar\u00edan los permisos referidos a este usuario. Tambi\u00e9n puede servir para crear usuarios que no queremos que est\u00e9n operativos hasta un momento determinado. Creaci\u00f3n de usuarios por comandos \u00b6 DSADD USER -> CMD \u00b6 Una opci\u00f3n para poder crear usuarios del dominio es mediante el comando dsadd user . Este comando nos va a permitir definir la ubicaci\u00f3n en la que se crear\u00e1 el usuario en lo referente a: Dominio o subdominio. Unidad Organizativa. dsadd es una herramienta de l\u00ednea de comandos que est\u00e1 integrada a partir de Windows Server 2008. Est\u00e1 disponible si tiene instalada la funci\u00f3n de servidor de servicios de dominio de Active Directory (AD DS). Para utilizar dsadd , debe ejecutar el comando dsadd desde un s\u00edmbolo del sistema con privilegios de administrador. Para una referencia m\u00e1s amplia del comando, se puede acceder al siguiente enlace . Sintaxis dsadd user \u00b6 dsadd user <UserDN> [-samid <SAMName>] [-upn <UPN>] [-fn <FirstName>] [-mi <Initial>] [-ln <LastName>] [-display <DisplayName>] [-empid <EmployeeID>] [-pwd {<Password> | *}] [-desc <Description>] [-memberof <Group> ...] [-office <Office>] [-tel <PhoneNumber>] [-email <Email>] [-hometel <HomePhoneNumber>] [-pager <PagerNumber>] [-mobile <CellPhoneNumber>] [-fax <FaxNumber>] [-iptel <IPPhoneNumber>] [-webpg <WebPage>] [-title <Title>] [-dept <Department>] [-company <Company>] [-mgr <Manager>] [-hmdir <HomeDirectory>] [-hmdrv <DriveLetter>:][-profile <ProfilePath>] [-loscr <ScriptPath>] [-mustchpwd {yes | no}] [-canchpwd {yes | no}] [-reversiblepwd {yes | no}] [-pwdneverexpires {yes | no}] [-acctexpires <NumberOfDays>] [-disabled {yes | no}] [{-s <Server> | -d <Domain>}] [-u <UserName>] [-p {<Password> | *}] [-q] [{-uc | -uco | -uci}] Observaciones Si no proporciona un objeto de destino en el s\u00edmbolo del sistema, dsadd Obtiene el objeto de destino de la entrada est\u00e1ndar ( stdin ). Dsadd puede aceptar stdin desde el teclado, desde un archivo redirigido o como salida canalizada desde otro comando. Para marcar el final de los datos stdin desde el teclado o en un archivo redirigido, utilice el car\u00e1cter de fin de archivo ( CTRL+Z ). Si un valor que se proporciona contiene espacios, use comillas alrededor del texto, por ejemplo, \"CN = Javier Hern\u00e1ndez, CN = Users, DC = ASO2122, DC = LOCAL\". Si proporciona m\u00faltiples valores para un par\u00e1metro, utilice espacios para separar los valores, por ejemplo, una lista de nombres completos. Uso de contrase\u00f1as seguras en todas las cuentas de usuario ayuda a minimizar los riesgos de seguridad. Crear usuarios con PowerShell: New-ADUser \u00b6 Otra de las formas con las que podemos crear usuarios es mediante PowerShell , cada vez m\u00e1s utilizado en los sistemas Windows Server. Para poder crear usuarios con PowerShell , vamos a utilizar el comando New-ADUser . Desde el siguiente enlace pod\u00e9is obtener m\u00e1s informaci\u00f3n de este comando. La sintaxis del mismo es la siguiente: \u00b6 New-ADUser [-Name] <string> [-AccountExpirationDate <System.Nullable[System.DateTime]>] [-AccountNotDelegated <System.Nullable[bool]>] [-AccountPassword <SecureString>] [-AllowReversiblePasswordEncryption <System.Nullable[bool]>] [-AuthType {<Negotiate> | <Basic>}] [-CannotChangePassword <System.Nullable[bool]>] [-Certificates <X509Certificate[]>] [-ChangePasswordAtLogon <System.Nullable[bool]>] [-City <string>] [-Company <string>] [-Country <string>] [-Credential <PSCredential>] [-Department <string>] [-Description <string>] [-DisplayName <string>] [-Division <string>] [-EmailAddress <string>] [-EmployeeID <string>] [-EmployeeNumber <string>] [-Enabled <System.Nullable[bool]>] [-Fax <string>] [-GivenName <string>] [-HomeDirectory <string>] [-HomeDrive <string>] [-HomePage <string>] [-HomePhone <string>] [-Initials <string>] [-Instance <ADUser>] [-LogonWorkstations <string>] [-Manager <ADUser>] [-MobilePhone <string>] [-Office <string>] [-OfficePhone <string>] [-Organization <string>] [-OtherAttributes <hashtable>] [-OtherName <string>] [-PassThru <switch>] [-PasswordNeverExpires <System.Nullable[bool]>] [-PasswordNotRequired <System.Nullable[bool]>] [-Path <string>] [-POBox <string>] [-PostalCode <string>] [-ProfilePath <string>] [-SamAccountName <string>] [-ScriptPath <string>] [-Server <string>] [-ServicePrincipalNames <string[]>] [-SmartcardLogonRequired <System.Nullable[bool]>] [-State <string>] [-StreetAddress <string>] [-Surname <string>] [-Title <string>] [-TrustedForDelegation <System.Nullable[bool]>] [-Type <string>] [-UserPrincipalName <string>] [-Confirm] [-WhatIf] [<CommonParameters>] Example New-ADUser -Name \"Javier Hernandez\" -Path \"CN=Users,DC=ASO2122,DC=LOCAL\" -SamAccountName \"fjhernandez\" -UserPrincipalName \"fjhernandez@CASO2122.LOCAL\" -AccountPassword (ConvertTo-SecureString\"ASO2122.\" -AsPlainText -Force) -GivenName \"Francisco Javier\" -Surname \"Hernandez Illan\" -ChangePasswordAtLogon $true -Enabled $true Par\u00e1metros New-ADUser I. Par\u00e1metros New-ADUser II. Eliminaci\u00f3n y deshabilitaci\u00f3n de usuarios \u00b6 Note Cada cuenta de usuario creada en un dominio tiene un identificador de seguridad ( SID ) \u00fanico. Si eliminamos una cuenta de usuario y despu\u00e9s volvemos a crearla exactamente igual, el identificador SID ser\u00e1 diferente. Esto se traduce en que no se podr\u00e1n recuperar los permisos y privilegios de la cuenta eliminada . Si finalmente decidimos eliminar la cuenta, accederemos a ' Usuarios y equipos de Active Directory ', seleccionaremos el usuario a eliminar, haremos clic con el bot\u00f3n derecho y luego 'Eliminar': Eliminar usuario de AD. Comandos \u00b6 Para eliminar una cuenta de usuario mediante la l\u00ednea de comandos utilizaremos el comando dsrm Para eliminar una cuenta con PoweShell, entramos dentro del entorno powershell y ejecutamos Remove-ADUser Deshabilitar cuentas \u00b6 Para evitar posibles problemas con la eliminaci\u00f3n de cuentas, el cual es un proceso definitivo, se suele optar por la deshabilitaci\u00f3n de cuentas. Deshabilitar cuenta. Example Supongamos una empresa en la que un trabajador va a cesar su actividad. El administrador de sistemas deshabilitar\u00e1 su cuenta en la fecha en la que el trabajador vaya a dejar de prestar sus servicios. De esta manera el trabajador cesado ya no podr\u00e1 iniciar sesi\u00f3n en el dominio, pero si pasado un tiempo hiciera falta volver a iniciar sesi\u00f3n, bastar\u00eda con habilitar de nuevo la cuenta. Otro ejemplo real podr\u00eda ser una universidad, en la que cada alumno tiene una cuenta de usuario. Cuando finaliza sus estudios, la cuenta es deshabilitada, pero si posteriormente cursa otros estudios, la cuenta volver\u00eda a habilitarse. Como antes, accederemos a ' Usuarios y equipos de Active Directory ' y haciendo clic con el bot\u00f3n secundario sobre el usuario a bloquear, seleccionaremos la opci\u00f3n 'Deshabilitar la cuenta'. Comandos \u00b6 Para deshabilitar una cuenta de usuario mediante la l\u00ednea de comandos utilizaremos el comando dsmod con el modificador disabled con valor yes . Desde el entorno powershell tambi\u00e9n podemos deshabilitar una cuenta de usuario con Disable-ADAccount Configuraci\u00f3n de la cuenta de usuario \u00b6 Las cuentas de usuarios creadas en el domino se pueden configurar de una manera detallada en la ventana \u2018 Propiedades de la cuenta \u2019, para ello se hace clic con el bot\u00f3n derecho del rat\u00f3n sobre la cuenta de usuario que se desea editar : Las propiedades de la cuenta de usuario qu\u00e9 m\u00e1s utilizaremos durante este curso ser\u00e1n: General : Se puede modificar el Nombre, Apellido, etc. y adem\u00e1s modificar informaci\u00f3n administrativa como la descripci\u00f3n, oficina, tel\u00e9fono, email y p\u00e1gina web. Cuenta : Se puede configurar algunas caracter\u00edsticas de la contrase\u00f1a de usuario, las horas de inicio de sesi\u00f3n, la caducidad de la cuenta, desbloquear la cuenta, etc. Perfil : En esta ficha se pueden editar aspectos importantes como son la ubicaci\u00f3n f\u00edsica del perfil del usuario y el fichero de comandos de inicio de sesi\u00f3n. Miembro de : Se muestra el listado de grupos a los que el usuario pertenece. Configuraci\u00f3n de inicio de sesi\u00f3n \u00b6 A partir de Windows Server 2008 se permite configurar los horarios en los que se puede iniciar sesi\u00f3n. Esta funcionalidad puede ser \u00fatil para controlar accesos al sistema a horas \u2018an\u00f3malas\u2019, o para evitar que usuarios de, por ejemplo, el turno de tarde, puedan acceder al sistema con la cuenta de un usuario del turno de ma\u00f1ana. Para establecer los horarios en los que se puede iniciar sesi\u00f3n se seguir\u00e1n los siguientes pasos. En \u2018 Usuarios y Equipos de Active Directory \u2019 se selecciona el usuario buscado, y haciendo clic con el bot\u00f3n derecho se accede a \u2018Propiedades\u2019. Se abre el cuadro de di\u00e1logo \u2018 Propiedades \u2019 de la cuenta seleccionada. Se hace clic en la ficha \u2018 Cuenta \u2019 y despu\u00e9s se hace clic en el bot\u00f3n \u2018 Horas de inicio de sesi\u00f3n \u2019 Horas de inicio de sesi\u00f3n I. En color azul se muestran las horas de inicio permitidas. Para denegar el acceso basta con seleccionar las horas a las que se desea limitar el acceso y se marca la opci\u00f3n \u2018Inicio de sesi\u00f3n denegado\u2019: Horas de inicio de sesi\u00f3n II. Tambi\u00e9n es posible configurar el inicio de sesi\u00f3n en determinados equipos. Para ello basta con hacer clic en el bot\u00f3n \u2018 Iniciar sesi\u00f3n en... \u2019. Se puede seleccionar si el usuario puede iniciar sesi\u00f3n en \u2018Todos los equipos\u2019 o solo en algunos equipos determinados: Iniciar sesi\u00f3n en... Creaci\u00f3n de grupos \u00b6 Los grupos son un tipo de contenedor que permiten definir conjuntos de usuarios y definir permisos bas\u00e1ndonos en esa pertenencia al grupo, en lugar de hacerlo de modo individual, usuario por usuario. Eso no s\u00f3lo facilita la administraci\u00f3n del dominio sino que tambi\u00e9n permite trabajar de un modo menos propenso a errores. Como pauta general, la agrupaci\u00f3n de objetos suele facilitar las tareas de administraci\u00f3n reduciendo las posibilidades de error. Existen dos grandes tipos de grupos en el Directorio Activo de Windows: Grupos de seguridad : este tipo de grupos permite definir permisos para recursos del dominio. Son los utilizados en las listas de control de accesos (ACLs) que se estudiar\u00e1n m\u00e1s adelante. Este tipo de grupos son los que se utilizar\u00e1n en la administraci\u00f3n de la red. Grupos de distribuci\u00f3n : no poseen caracter\u00edsticas de seguridad, \u00fanicamente son un listado de usuarios para mensajer\u00eda. Dentro de los grupos de seguridad existen a su vez tres \u00e1mbitos: Grupo Universal : es un grupo cuyos permisos se extienden a diversos dominios. Adem\u00e1s este tipo de grupos puede estar formado por usuarios o grupos de usuarios de diferentes dominios. Grupo Global : es muy similar a los grupos universales, es decir pueden permitir el acceso a recursos de cualquiera de los dominios del \u00e1rbol del Directorio Activo, pero con la salvedad de que todos los miembros del grupo deben pertenecer al mismo dominio. Grupo Local del Dominio : es un grupo creado en un dominio con miembros que pueden provenir de otros dominios y que \u00fanicamente puede tener acceso a recursos dentro de su dominio. \u00bfEn qu\u00e9 casos utilizar un \u00e1mbito y otro de grupo? \u00b6 Los grupos universales suelen tener su utilidad en grandes empresas en las que se ha definido un bosque de dominios asignando dominios a cada uno de sus departamentos o divisiones. En este tipo de estructuras, cuando se realiza una modificaci\u00f3n en el grupo, esta debe replicarse en todos los controladores de domino que est\u00e9n configurados como cat\u00e1logo global. En redes de dominio \u00fanico se pueden aplicar grupos globales que tendr\u00e1n mayor sentido cuando se defina un segundo dominio, lo que puede ocurrir en el momento en el que haya una ampliaci\u00f3n de la organizaci\u00f3n. Como pautas generales para la administraci\u00f3n de redes tendremos en cuenta las siguientes consideraciones No se debe asignar un \u00e1mbito m\u00e1s amplio del necesario. Los grupos locales de dominio no se pueden procesar en otros dominios. Un grupo global no se replica fuera del dominio ya que no forma parte del plan de replicaci\u00f3n del cat\u00e1logo global. Los grupos universales se replican por toda la red generando tr\u00e1fico que puede tener una cierta incidencia en el rendimiento de esta (aunque este aspecto se ha optimizado a partir de Windows Server 2008). Si un grupo universal est\u00e1 compuesto por grupos globales y se producen cambios dentro de los grupos globales, no se produce un cambio en el cat\u00e1logo global, y por tanto esa modificaci\u00f3n no conlleva una replicaci\u00f3n en todos los controladores de domino del bosque. Grupos predefinidos \u00b6 Al instalar el Directorio Activo podemos comprobar que se han generado autom\u00e1ticamente una serie de grupos predefinidos con unos permisos acorde a sus funciones asignadas: Grupos predefinidos Grupos Builtin Examinemos las funciones de algunos de los grupos m\u00e1s utilizados: Usuarios del dominio : grupo global que contiene todas las cuentas de usuarios el domino. Administradores del dominio : grupo global que permite a sus miembros realizar tareas de administraci\u00f3n del dominio. Administradores de empresa : grupo universal que permite a sus miembros realizar tareas de administraci\u00f3n en todos los dominios de la red. Administradores de esquema : grupo universal que permite a sus miembros modificar la estructura de los objetos del Directorio Activo. Administradores : grupo local que permite a sus miembros realizar tareas de administraci\u00f3n en el controlador de dominio. Operadores de copias de seguridad : grupo local que permite a sus miembros realizar copias de seguridad o restaurar archivos dentro del dominio. Operadores de cuenta : grupo local que permite a sus miembros crear, editar y eliminar cuentas de usuario y grupos. Operadores de impresi\u00f3n : grupo local que permite a sus miembros configurar y administrar el uso de impresoras de red. Operadores de servidor : grupo local que permite a sus miembros crear carpetas compartidas en el servidor y realizar copias de seguridad o restaurar archivos en el controlador de dominio. Usuarios : grupo local que limita las posibilidades de que un usuario haga un cambio accidental en el sistema pero s\u00ed permite ejecutar la mayor\u00eda de las aplicaciones. Es importante darse cuenta del considerable ahorro de tiempo para el administrador que permite la existencia de grupos predefinidos para tareas muy concretas. Creaci\u00f3n de grupos \u00b6 La forma de crear los grupos es muy parecida a la que hac\u00edamos para crear a los usuarios. Para ello desde la opci\u00f3n de Usuarios y equipos de Active Directory , con el bot\u00f3n de la derecha del rat\u00f3n, nuevo --> Grupo : Creaci\u00f3n de Grupos I Se abrir\u00e1 el siguiente cuadro de dialogo: Creaci\u00f3n de Grupos II Por defecto se nos indica que el \u00e1mbito del grupo ser\u00e1 \u2018 Global \u2019 y el tipo de grupo ser\u00e1 de \u2018 Seguridad \u2019. En principio, si no tenemos unas necesidades que justifiquen lo contrario, crearemos los grupos con esas propiedades. Tras pulsar \u2018 Aceptar \u2019 nos aparecer\u00e1 el nuevo grupo en el listado de \u2018 Usuarios y equipos de Active Directory \u2019: Creaci\u00f3n de Grupos III A\u00f1adir usuarios a grupos \u00b6 Para poder a\u00f1adir un usuario a un grupo, lo podemos hacer de varias maneras. La primera de ellas mediante basta con seleccionar el usuario y en el men\u00fa que se abrir\u00e1 al hacer clic con el bot\u00f3n derecho, acceder a la opci\u00f3n \u2018 Agregar a un grupo \u2019: A\u00f1adir usuario a grupo I Se abrir\u00e1 un cuadro en el que podremos indicar/buscar el grupo al que queremos a\u00f1adir el usuario. Mediante comprobar nombres nos mostrar\u00e1 las coincidencias del grupo que hemos a\u00f1adido. Con las opciones avanzadas podemos hacer una b\u00fasqueda del grupo: A\u00f1adir usuario a grupo II Tras aceptar, aparecer\u00e1 un mensaje indicando que la operaci\u00f3n se ha realizado con \u00e9xito y podremos comprobar en las propiedades del usuario que efectivamente es miembro del grupo \u2018Profesores\u2019 : A\u00f1adir usuario a grupo III Miembro de ... Tambi\u00e9n podemos a\u00f1adir usuarios a un grupo a partir del grupo. Para ello podemos seleccionar el grupo y con el bot\u00f3n de la derecha propiedades, accedemos a la pesta\u00f1a miembros: A\u00f1adir usuario a grupo IV Y accedemos a la pesta\u00f1a miembros: A\u00f1adir usuario a grupo IV Y desde la opci\u00f3n Agregar podemos a\u00f1adir los usuarios miembros del grupo. Creaci\u00f3n de grupos por comandos \u00b6 DSADD GROUP \u00b6 Para crear un grupo desde la consola, el comando utilizado es: dsaddgroup Para especificar si el grupo es de seguridad o de distribuci\u00f3n se utiliza la opci\u00f3n: secgrp yes ( o \u2013secgrp no si se trata de un grupo de distribuci\u00f3n). Para especificar el \u00e1mbito del grupo como universal, global o local se utiliza \u2013scope seguido de u , g o l , respectivamente. Si no se especifica nada por defecto se crear\u00e1 un grupo global y de seguridad. Sintaxis: \u00b6 dsadd group <GroupDN> [-secgrp {yes | no}] [-scope {l | g | u}] [-samid <SAMName>] [-desc <Description>] [-memberof <Group> ...] [-members <Member> ...] [{-s Server> | -d <Domain>}] [-u <UserName>] [-p {<Password> | *}] [-q] [{-uc | -uco | -uci}] New-ADGroup: Creaci\u00f3n de grupos en powershell \u00b6 Tambi\u00e9n podemos realizar la creaci\u00f3n de grupos desde powershell con el comando New-AdGroup La sintaxis del comando es la siguiente: \u00b6 New-ADGroup [-Name] <string> [-GroupScope] <System.Nullable[Microsoft.ActiveDirectory.Management.ADGroupScope]> [-AuthType {<Negotiate> | <Basic>}] [-Credential <PSCredential>] [-Description <string>] [-DisplayName <string>] [-GroupCategory <System.Nullable[Microsoft.ActiveDirectory.Management.ADGroupCategory]>] [-HomePage <string>] [-Instance <ADGroup>] [-ManagedBy <ADPrincipal>] [-OtherAttributes <hashtable>] [-PassThru <switch>] [-Path <string>] [-SamAccountName <string>] [-Server <string>] [-Confirm] [-WhatIf] [<CommonParameters>] Unidades Organizativas \u00b6 Una unidad organizativa es un contenedor de objetos (usuarios, grupos, equipos, otras unidades organizativas, etc.) pertenecientes a un mismo dominio. Son especialmente \u00fatiles para reproducir la estructura de la empresa donde se halle el dominio. Es decir, si por ejemplo, una empresa est\u00e1 dividida en tres departamentos (direcci\u00f3n, ventas y producci\u00f3n), podemos crear tres unidades organizativas correspondientes a estos tres departamentos, donde incluyamos todos los objetos del dominio correspondientes a cada una de las \u00e1reas de la empresa. Su utilidad radica en dos aspectos fundamentales: De esta manera es muy sencillo establecer directivas de seguridad (las veremos en el siguiente tema) que se apliquen a todos los objetos de cada departamento. Como dentro de la unidad organizativa, se pueden introducir otras unidades organizativas, se puede replicar la estructura jer\u00e1rquica de la empresa sin necesidad de crear m\u00e1s dominios o subdominios. Creaci\u00f3n de Unidades Organizativas \u00b6 Para crear una unidad organizativa abriremos la ventana ' Usuarios y Equipos de Active Directory ' (desde el Panel del Administrador, ' Herramientas Administrativas '). A continuaci\u00f3n, nos situamos sobre el dominio y haciendo clic con el bot\u00f3n secundario seleccionamos ' Nuevo ' y ' Unidad Organizativa ' Unidades Organizativas A continuaci\u00f3n se abrir\u00e1 el di\u00e1logo que nos permite indicar el nombre del nuevo objeto: Creaci\u00f3n OU (Organizational Unit) Al pulsar en Aceptar, se crear\u00e1 la Unidad Organizativa (OU) dentro de nuestro dominio. Notad tambi\u00e9n que por defecto se crea una protecci\u00f3n contra posibles errores de eliminaci\u00f3n. Por defecto la unidad no se podr\u00e1 eliminar de manera de manera accidental. Creaci\u00f3n de una OU Dentro de una Unidad Organizativa podemos a\u00f1adir objetos, usuarios, grupos, m\u00e1s unidades organizativas, etc... para ello seleccionamos la OU y con el bot\u00f3n derecho del rat\u00f3n accedemos a la opci\u00f3n Nuevo: A\u00f1adir objetos a una OU Podemos a\u00f1adir dos unidades organizativas dentro, una para Alumnos y otra para Profesores: Crear elementos dentro de una OU Tambi\u00e9n podemos arrastras elementos de una unidad a otra, por ejemplo, vamos a arrastras los grupos de Alumnos y Profesores y los usuarios que hemos creado. Seleccionamos el grupo Profesores y lo arrastramos a la unidad organizativa Profesores: Mover objetos a OU Mover objetos entre OU Borrar una OU \u00b6 Si tratamos de borrar una OU, veremos que nos aparece un mensaje de que no tenemos los suficientes privilegios para poder realizar la acci\u00f3n de borrado. Esto es debido a la protecci\u00f3n contra eliminaciones accidentales de las que hemos comentado anteriormente: Borrar OU Para eliminar las unidades organizativas, en primer lugar deberemos activar las 'caracter\u00edsticas avanzadas' seleccionando en el men\u00fa 'Ver' la opci\u00f3n 'Caracter\u00edsticas Avanzadas'. Borrado de una OU Nos aparecer\u00e1 la ventana de la OU: Desproteger una OU Desmarcamos el check de protecci\u00f3n contra eliminaciones accidentales: Desactivar protecci\u00f3n Ahora ya s\u00ed podemos eliminar la OU. Dejamos de nuevo desactivadas las opciones avanzadas desde la opci\u00f3n men\u00fa. En la pr\u00f3xima pr\u00e1ctica, utilizaremos las unidades organizativas para gestionar de manera eficaz el dominio, aplicando directivas de seguridad espec\u00edficas a cada unidad organizativa. Comandos \u00b6 dsadd ou \u00b6 Mediante el comando dsadd ou en cmd podemos crear una unidad organizativa. ENLACE La sintaxis del comando es: \u00b6 dsadd ou <OrganizationalUnitDN> [-desc <Description>] [{-s <Server> | -d <Domain>}][-u <UserName>] [-p {<Password> | *}] [-q] [{-uc | -uco | -uci}] New-ADOrganizationalUnit \u00b6 En PowerShell New-ADOrganizationalUnit . La sintaxis del comando es: \u00b6 New-ADOrganizationalUnit [-Name] <string> [-AuthType {<Negotiate> | <Basic>}] [-City <string>] [-Country <string>] [-Credential <PSCredential>] [-Description <string>] [-DisplayName <string>] [-Instance <ADOrganizationalUnit>] [-ManagedBy <ADPrincipal>] [-OtherAttributes <hashtable>] [-PassThru <switch>] [-Path <string>] [-PostalCode <string>] [-ProtectedFromAccidentalDeletion <System.Nullable[bool]>] [-Server <string>] [-State <string>] [-StreetAddress <string>] [-Confirm] [-WhatIf] [<CommonParameters>] Actividad 1 \u00b6 Crea dos usuarios con el nombre usuario1 y usuario2. Ponles a ambos la contrase\u00f1a \"Abc123!\" y configura las cuentas de usuario para que no tengan que cambiar la contrase\u00f1a al iniciar sesi\u00f3n por primera vez. Agrega estos usuarios al grupo global Alumnos y deshabilita la cuenta de usuario2. Adjunta una captura de pantalla del error que sale al intentar acceder desde un equipo cliente con el usuario2. Habilita de nuevo la cuenta de usuario2. Configura la cuenta usuario1 para que solamente pueda iniciar sesi\u00f3n desde el equipo W10. Valida en el dominio otro equipo Windows 10 y comprueba que el usuario1 no puede iniciar sesi\u00f3n. Configura la cuenta de usuario2 para que pueda iniciar sesi\u00f3n en cualquier equipo del dominio solamente de lunes a viernes de 8.00 a 18.00. Adjunta una captura de la pantalla de la configuraci\u00f3n de los horarios de acceso al sistema del usuario2. Intenta iniciar sesi\u00f3n en el equipo controlador de dominio con usuario2. \u00bfPor qu\u00e9 no puedes?\u00bfQu\u00e9 podr\u00edas hacer para que usuario2 pudiera iniciar sesi\u00f3n en el controlador de dominio?","title":"Pr\u00e1ctica06_AD"},{"location":"Practica06_AD.html#practica06_ad","text":"","title":"Pr\u00e1ctica06_AD"},{"location":"Practica06_AD.html#administracion-de-usuarios-y-grupos","text":"Objetivos de esta pr\u00e1ctica: Crear y configurar usuarios Crear y configurar grupos Crear y configurar unidades organizativas","title":"Administraci\u00f3n de Usuarios y Grupos"},{"location":"Practica06_AD.html#creacion-de-usuarios","text":"Los usuarios del dominio deben tener una cuenta para poder acceder a los recursos del mismo tras su autenticaci\u00f3n frente al controlador de dominio. Para crear una cuenta de usuario mediante la interfaz gr\u00e1fica accederemos a la herramienta: ' Usuarios y equipos de Active Directory ' desde el Panel del Administrador --> Herramientas: Usuarios y Equipos de AD. Una vez abierto el administrador de ' Usuarios y equipos de Active Director y', se hace clic con el bot\u00f3n derecho sobre ' Users ' y en el men\u00fa que aparece, se selecciona ' Nuevo ' y a continuaci\u00f3n ' Usuario ' : Creaci\u00f3n Nuevo Usuario I. Nos aparece el asistente para la creaci\u00f3n del nuevo usuario: Creaci\u00f3n Nuevo Usuario II. En la primera parte del cuadro de di\u00e1logo anterior se puede introducir el nombre, la(s) inicial(es) del segundo nombre y los apellidos del usuario. Hasta aqu\u00ed toda esta informaci\u00f3n es meramente informativa, podr\u00eda haber, por ejemplo, dos usuarios cuyo nombre completo fuera \"F\u00ba Javier Hern\u00e1ndez Ill\u00e1n\". Note Como normas generales al crear un nombre de usuario hay que observar que: Las cuentas de usuario deben ser \u00fanicas . Los nombres de inicio de sesi\u00f3n se pueden formar con una combinaci\u00f3n de letras, may\u00fasculas o min\u00fasculas, y caracteres alfanum\u00e9ricos . No se aceptan los caracteres: /, |, :, ;, =, <, > ni * . La cuenta de usuario puede tener hasta 20 caracteres . Por lo tanto en la segunda parte del cuadro de texto dode se indica ' Nombre de inicio de sesi\u00f3n de usuario ' se introduce el nombre de usuario siguiendo la estructura que haya predefinido el administrador del sistema y como se ha indicado anteriormente, este nombre debe ser \u00fanico en todo el dominio . Algunos ejemplos de criterios para la creaci\u00f3n del nombre de usuario podr\u00edan ser los siguientes: Dos primeras letras del nombre y apellidos. El nombre de inicio de sesi\u00f3n del usuario F\u00ba Javier Hern\u00e1ndez Ill\u00e1n ser\u00eda: fjhernandez . Diferentes caracteres para separar la inicial del primer nombre y el apellido completo: fj.hernandez . Primer nombre completo y primer apellido completo separados por un punto: francisco.hernandez . A continuaci\u00f3n se solicitar\u00e1 que se introduzca la contrase\u00f1a del usuario. Esta debe cumplir con los criterios de complejidad establecidos. Adem\u00e1s aparecen una serie de opciones para configurar las propiedades de la contrase\u00f1a: Creaci\u00f3n Nuevo Usuario III. En la figura anterior aparecen cuatro opciones para la contrase\u00f1a El usuario debe cambiar la contrase\u00f1a en el siguiente inicio de sesi\u00f3n. El usuario no puede cambiar la contrase\u00f1a. La contrase\u00f1a nunca expira. La cuenta est\u00e1 deshabilitada. La primera de las opciones es \u00fatil para que el administrador cree el nuevo usuario con una contrase\u00f1a convencional. El usuario cuando se autentifique por primera vez en el sistema entrar\u00e1 con la contrase\u00f1a que le ha proporcionado el administrador, pero autom\u00e1ticamente, el sistema le indicar\u00e1 que debe ser cambiada. De esta manera, el administrador ya no conocer\u00e1 la contrase\u00f1a del usuario, garantiz\u00e1ndose la privacidad de esta. Mensaje para cambio de contrase\u00f1a. El segundo de los casos ('El usuario no puede cambiar la contrase\u00f1a') est\u00e1 pensado para crear usuarios gen\u00e9ricos , supongamos que creamos una cuenta de usuario para utilizar un ordenador conectado a un esc\u00e1ner, y queremos que los Usuarios que deseen utilizar ese esc\u00e1ner, siempre entren con la misma cuenta al equipo asociado al esc\u00e1ner. La inhabilitaci\u00f3n del tercer caso ('La contrase\u00f1a nunca expira'), tiene por objetivo evitar que el sistema pida al usuario que cambie la contrase\u00f1a peri\u00f3dicamente. Resulta interesante mantener esta opci\u00f3n, aunque pueda resultar inc\u00f3modo cambiar la contrase\u00f1a cada, por ejemplo, seis meses. De esta manera estamos protegi\u00e9ndonos de posibles accesos indebidos por parte de alguien que haya averiguado la contrase\u00f1a de alguna manera. Finalmente, la cuarta opci\u00f3n ('La cuenta est\u00e1 deshabilitada') sirve para bloquear usuarios que no queremos que tengan acceso al sistema, pero tampoco queremos eliminarlos, ya que se invalidar\u00edan los permisos referidos a este usuario. Tambi\u00e9n puede servir para crear usuarios que no queremos que est\u00e9n operativos hasta un momento determinado.","title":"Creaci\u00f3n de usuarios"},{"location":"Practica06_AD.html#creacion-de-usuarios-por-comandos","text":"","title":"Creaci\u00f3n de usuarios por comandos"},{"location":"Practica06_AD.html#dsadd-user-cmd","text":"Una opci\u00f3n para poder crear usuarios del dominio es mediante el comando dsadd user . Este comando nos va a permitir definir la ubicaci\u00f3n en la que se crear\u00e1 el usuario en lo referente a: Dominio o subdominio. Unidad Organizativa. dsadd es una herramienta de l\u00ednea de comandos que est\u00e1 integrada a partir de Windows Server 2008. Est\u00e1 disponible si tiene instalada la funci\u00f3n de servidor de servicios de dominio de Active Directory (AD DS). Para utilizar dsadd , debe ejecutar el comando dsadd desde un s\u00edmbolo del sistema con privilegios de administrador. Para una referencia m\u00e1s amplia del comando, se puede acceder al siguiente enlace .","title":"DSADD USER -&gt; CMD"},{"location":"Practica06_AD.html#crear-usuarios-con-powershell-new-aduser","text":"Otra de las formas con las que podemos crear usuarios es mediante PowerShell , cada vez m\u00e1s utilizado en los sistemas Windows Server. Para poder crear usuarios con PowerShell , vamos a utilizar el comando New-ADUser . Desde el siguiente enlace pod\u00e9is obtener m\u00e1s informaci\u00f3n de este comando.","title":"Crear usuarios con PowerShell: New-ADUser"},{"location":"Practica06_AD.html#eliminacion-y-deshabilitacion-de-usuarios","text":"Note Cada cuenta de usuario creada en un dominio tiene un identificador de seguridad ( SID ) \u00fanico. Si eliminamos una cuenta de usuario y despu\u00e9s volvemos a crearla exactamente igual, el identificador SID ser\u00e1 diferente. Esto se traduce en que no se podr\u00e1n recuperar los permisos y privilegios de la cuenta eliminada . Si finalmente decidimos eliminar la cuenta, accederemos a ' Usuarios y equipos de Active Directory ', seleccionaremos el usuario a eliminar, haremos clic con el bot\u00f3n derecho y luego 'Eliminar': Eliminar usuario de AD.","title":"Eliminaci\u00f3n y deshabilitaci\u00f3n de usuarios"},{"location":"Practica06_AD.html#comandos","text":"Para eliminar una cuenta de usuario mediante la l\u00ednea de comandos utilizaremos el comando dsrm Para eliminar una cuenta con PoweShell, entramos dentro del entorno powershell y ejecutamos Remove-ADUser","title":"Comandos"},{"location":"Practica06_AD.html#deshabilitar-cuentas","text":"Para evitar posibles problemas con la eliminaci\u00f3n de cuentas, el cual es un proceso definitivo, se suele optar por la deshabilitaci\u00f3n de cuentas. Deshabilitar cuenta. Example Supongamos una empresa en la que un trabajador va a cesar su actividad. El administrador de sistemas deshabilitar\u00e1 su cuenta en la fecha en la que el trabajador vaya a dejar de prestar sus servicios. De esta manera el trabajador cesado ya no podr\u00e1 iniciar sesi\u00f3n en el dominio, pero si pasado un tiempo hiciera falta volver a iniciar sesi\u00f3n, bastar\u00eda con habilitar de nuevo la cuenta. Otro ejemplo real podr\u00eda ser una universidad, en la que cada alumno tiene una cuenta de usuario. Cuando finaliza sus estudios, la cuenta es deshabilitada, pero si posteriormente cursa otros estudios, la cuenta volver\u00eda a habilitarse. Como antes, accederemos a ' Usuarios y equipos de Active Directory ' y haciendo clic con el bot\u00f3n secundario sobre el usuario a bloquear, seleccionaremos la opci\u00f3n 'Deshabilitar la cuenta'.","title":"Deshabilitar cuentas"},{"location":"Practica06_AD.html#comandos_1","text":"Para deshabilitar una cuenta de usuario mediante la l\u00ednea de comandos utilizaremos el comando dsmod con el modificador disabled con valor yes . Desde el entorno powershell tambi\u00e9n podemos deshabilitar una cuenta de usuario con Disable-ADAccount","title":"Comandos"},{"location":"Practica06_AD.html#configuracion-de-la-cuenta-de-usuario","text":"Las cuentas de usuarios creadas en el domino se pueden configurar de una manera detallada en la ventana \u2018 Propiedades de la cuenta \u2019, para ello se hace clic con el bot\u00f3n derecho del rat\u00f3n sobre la cuenta de usuario que se desea editar : Las propiedades de la cuenta de usuario qu\u00e9 m\u00e1s utilizaremos durante este curso ser\u00e1n: General : Se puede modificar el Nombre, Apellido, etc. y adem\u00e1s modificar informaci\u00f3n administrativa como la descripci\u00f3n, oficina, tel\u00e9fono, email y p\u00e1gina web. Cuenta : Se puede configurar algunas caracter\u00edsticas de la contrase\u00f1a de usuario, las horas de inicio de sesi\u00f3n, la caducidad de la cuenta, desbloquear la cuenta, etc. Perfil : En esta ficha se pueden editar aspectos importantes como son la ubicaci\u00f3n f\u00edsica del perfil del usuario y el fichero de comandos de inicio de sesi\u00f3n. Miembro de : Se muestra el listado de grupos a los que el usuario pertenece.","title":"Configuraci\u00f3n de la cuenta de usuario"},{"location":"Practica06_AD.html#configuracion-de-inicio-de-sesion","text":"A partir de Windows Server 2008 se permite configurar los horarios en los que se puede iniciar sesi\u00f3n. Esta funcionalidad puede ser \u00fatil para controlar accesos al sistema a horas \u2018an\u00f3malas\u2019, o para evitar que usuarios de, por ejemplo, el turno de tarde, puedan acceder al sistema con la cuenta de un usuario del turno de ma\u00f1ana. Para establecer los horarios en los que se puede iniciar sesi\u00f3n se seguir\u00e1n los siguientes pasos. En \u2018 Usuarios y Equipos de Active Directory \u2019 se selecciona el usuario buscado, y haciendo clic con el bot\u00f3n derecho se accede a \u2018Propiedades\u2019. Se abre el cuadro de di\u00e1logo \u2018 Propiedades \u2019 de la cuenta seleccionada. Se hace clic en la ficha \u2018 Cuenta \u2019 y despu\u00e9s se hace clic en el bot\u00f3n \u2018 Horas de inicio de sesi\u00f3n \u2019 Horas de inicio de sesi\u00f3n I. En color azul se muestran las horas de inicio permitidas. Para denegar el acceso basta con seleccionar las horas a las que se desea limitar el acceso y se marca la opci\u00f3n \u2018Inicio de sesi\u00f3n denegado\u2019: Horas de inicio de sesi\u00f3n II. Tambi\u00e9n es posible configurar el inicio de sesi\u00f3n en determinados equipos. Para ello basta con hacer clic en el bot\u00f3n \u2018 Iniciar sesi\u00f3n en... \u2019. Se puede seleccionar si el usuario puede iniciar sesi\u00f3n en \u2018Todos los equipos\u2019 o solo en algunos equipos determinados: Iniciar sesi\u00f3n en...","title":"Configuraci\u00f3n de inicio de sesi\u00f3n"},{"location":"Practica06_AD.html#creacion-de-grupos","text":"Los grupos son un tipo de contenedor que permiten definir conjuntos de usuarios y definir permisos bas\u00e1ndonos en esa pertenencia al grupo, en lugar de hacerlo de modo individual, usuario por usuario. Eso no s\u00f3lo facilita la administraci\u00f3n del dominio sino que tambi\u00e9n permite trabajar de un modo menos propenso a errores. Como pauta general, la agrupaci\u00f3n de objetos suele facilitar las tareas de administraci\u00f3n reduciendo las posibilidades de error. Existen dos grandes tipos de grupos en el Directorio Activo de Windows: Grupos de seguridad : este tipo de grupos permite definir permisos para recursos del dominio. Son los utilizados en las listas de control de accesos (ACLs) que se estudiar\u00e1n m\u00e1s adelante. Este tipo de grupos son los que se utilizar\u00e1n en la administraci\u00f3n de la red. Grupos de distribuci\u00f3n : no poseen caracter\u00edsticas de seguridad, \u00fanicamente son un listado de usuarios para mensajer\u00eda. Dentro de los grupos de seguridad existen a su vez tres \u00e1mbitos: Grupo Universal : es un grupo cuyos permisos se extienden a diversos dominios. Adem\u00e1s este tipo de grupos puede estar formado por usuarios o grupos de usuarios de diferentes dominios. Grupo Global : es muy similar a los grupos universales, es decir pueden permitir el acceso a recursos de cualquiera de los dominios del \u00e1rbol del Directorio Activo, pero con la salvedad de que todos los miembros del grupo deben pertenecer al mismo dominio. Grupo Local del Dominio : es un grupo creado en un dominio con miembros que pueden provenir de otros dominios y que \u00fanicamente puede tener acceso a recursos dentro de su dominio.","title":"Creaci\u00f3n de grupos"},{"location":"Practica06_AD.html#en-que-casos-utilizar-un-ambito-y-otro-de-grupo","text":"Los grupos universales suelen tener su utilidad en grandes empresas en las que se ha definido un bosque de dominios asignando dominios a cada uno de sus departamentos o divisiones. En este tipo de estructuras, cuando se realiza una modificaci\u00f3n en el grupo, esta debe replicarse en todos los controladores de domino que est\u00e9n configurados como cat\u00e1logo global. En redes de dominio \u00fanico se pueden aplicar grupos globales que tendr\u00e1n mayor sentido cuando se defina un segundo dominio, lo que puede ocurrir en el momento en el que haya una ampliaci\u00f3n de la organizaci\u00f3n. Como pautas generales para la administraci\u00f3n de redes tendremos en cuenta las siguientes consideraciones No se debe asignar un \u00e1mbito m\u00e1s amplio del necesario. Los grupos locales de dominio no se pueden procesar en otros dominios. Un grupo global no se replica fuera del dominio ya que no forma parte del plan de replicaci\u00f3n del cat\u00e1logo global. Los grupos universales se replican por toda la red generando tr\u00e1fico que puede tener una cierta incidencia en el rendimiento de esta (aunque este aspecto se ha optimizado a partir de Windows Server 2008). Si un grupo universal est\u00e1 compuesto por grupos globales y se producen cambios dentro de los grupos globales, no se produce un cambio en el cat\u00e1logo global, y por tanto esa modificaci\u00f3n no conlleva una replicaci\u00f3n en todos los controladores de domino del bosque.","title":"\u00bfEn qu\u00e9 casos utilizar un \u00e1mbito y otro de grupo?"},{"location":"Practica06_AD.html#grupos-predefinidos","text":"Al instalar el Directorio Activo podemos comprobar que se han generado autom\u00e1ticamente una serie de grupos predefinidos con unos permisos acorde a sus funciones asignadas: Grupos predefinidos Grupos Builtin Examinemos las funciones de algunos de los grupos m\u00e1s utilizados: Usuarios del dominio : grupo global que contiene todas las cuentas de usuarios el domino. Administradores del dominio : grupo global que permite a sus miembros realizar tareas de administraci\u00f3n del dominio. Administradores de empresa : grupo universal que permite a sus miembros realizar tareas de administraci\u00f3n en todos los dominios de la red. Administradores de esquema : grupo universal que permite a sus miembros modificar la estructura de los objetos del Directorio Activo. Administradores : grupo local que permite a sus miembros realizar tareas de administraci\u00f3n en el controlador de dominio. Operadores de copias de seguridad : grupo local que permite a sus miembros realizar copias de seguridad o restaurar archivos dentro del dominio. Operadores de cuenta : grupo local que permite a sus miembros crear, editar y eliminar cuentas de usuario y grupos. Operadores de impresi\u00f3n : grupo local que permite a sus miembros configurar y administrar el uso de impresoras de red. Operadores de servidor : grupo local que permite a sus miembros crear carpetas compartidas en el servidor y realizar copias de seguridad o restaurar archivos en el controlador de dominio. Usuarios : grupo local que limita las posibilidades de que un usuario haga un cambio accidental en el sistema pero s\u00ed permite ejecutar la mayor\u00eda de las aplicaciones. Es importante darse cuenta del considerable ahorro de tiempo para el administrador que permite la existencia de grupos predefinidos para tareas muy concretas.","title":"Grupos predefinidos"},{"location":"Practica06_AD.html#creacion-de-grupos_1","text":"La forma de crear los grupos es muy parecida a la que hac\u00edamos para crear a los usuarios. Para ello desde la opci\u00f3n de Usuarios y equipos de Active Directory , con el bot\u00f3n de la derecha del rat\u00f3n, nuevo --> Grupo : Creaci\u00f3n de Grupos I Se abrir\u00e1 el siguiente cuadro de dialogo: Creaci\u00f3n de Grupos II Por defecto se nos indica que el \u00e1mbito del grupo ser\u00e1 \u2018 Global \u2019 y el tipo de grupo ser\u00e1 de \u2018 Seguridad \u2019. En principio, si no tenemos unas necesidades que justifiquen lo contrario, crearemos los grupos con esas propiedades. Tras pulsar \u2018 Aceptar \u2019 nos aparecer\u00e1 el nuevo grupo en el listado de \u2018 Usuarios y equipos de Active Directory \u2019: Creaci\u00f3n de Grupos III","title":"Creaci\u00f3n de grupos"},{"location":"Practica06_AD.html#anadir-usuarios-a-grupos","text":"Para poder a\u00f1adir un usuario a un grupo, lo podemos hacer de varias maneras. La primera de ellas mediante basta con seleccionar el usuario y en el men\u00fa que se abrir\u00e1 al hacer clic con el bot\u00f3n derecho, acceder a la opci\u00f3n \u2018 Agregar a un grupo \u2019: A\u00f1adir usuario a grupo I Se abrir\u00e1 un cuadro en el que podremos indicar/buscar el grupo al que queremos a\u00f1adir el usuario. Mediante comprobar nombres nos mostrar\u00e1 las coincidencias del grupo que hemos a\u00f1adido. Con las opciones avanzadas podemos hacer una b\u00fasqueda del grupo: A\u00f1adir usuario a grupo II Tras aceptar, aparecer\u00e1 un mensaje indicando que la operaci\u00f3n se ha realizado con \u00e9xito y podremos comprobar en las propiedades del usuario que efectivamente es miembro del grupo \u2018Profesores\u2019 : A\u00f1adir usuario a grupo III Miembro de ... Tambi\u00e9n podemos a\u00f1adir usuarios a un grupo a partir del grupo. Para ello podemos seleccionar el grupo y con el bot\u00f3n de la derecha propiedades, accedemos a la pesta\u00f1a miembros: A\u00f1adir usuario a grupo IV Y accedemos a la pesta\u00f1a miembros: A\u00f1adir usuario a grupo IV Y desde la opci\u00f3n Agregar podemos a\u00f1adir los usuarios miembros del grupo.","title":"A\u00f1adir usuarios a grupos"},{"location":"Practica06_AD.html#creacion-de-grupos-por-comandos","text":"","title":"Creaci\u00f3n de grupos por comandos"},{"location":"Practica06_AD.html#dsadd-group","text":"Para crear un grupo desde la consola, el comando utilizado es: dsaddgroup Para especificar si el grupo es de seguridad o de distribuci\u00f3n se utiliza la opci\u00f3n: secgrp yes ( o \u2013secgrp no si se trata de un grupo de distribuci\u00f3n). Para especificar el \u00e1mbito del grupo como universal, global o local se utiliza \u2013scope seguido de u , g o l , respectivamente. Si no se especifica nada por defecto se crear\u00e1 un grupo global y de seguridad.","title":"DSADD GROUP"},{"location":"Practica06_AD.html#new-adgroup-creacion-de-grupos-en-powershell","text":"Tambi\u00e9n podemos realizar la creaci\u00f3n de grupos desde powershell con el comando New-AdGroup","title":"New-ADGroup: Creaci\u00f3n de grupos en powershell"},{"location":"Practica06_AD.html#unidades-organizativas","text":"Una unidad organizativa es un contenedor de objetos (usuarios, grupos, equipos, otras unidades organizativas, etc.) pertenecientes a un mismo dominio. Son especialmente \u00fatiles para reproducir la estructura de la empresa donde se halle el dominio. Es decir, si por ejemplo, una empresa est\u00e1 dividida en tres departamentos (direcci\u00f3n, ventas y producci\u00f3n), podemos crear tres unidades organizativas correspondientes a estos tres departamentos, donde incluyamos todos los objetos del dominio correspondientes a cada una de las \u00e1reas de la empresa. Su utilidad radica en dos aspectos fundamentales: De esta manera es muy sencillo establecer directivas de seguridad (las veremos en el siguiente tema) que se apliquen a todos los objetos de cada departamento. Como dentro de la unidad organizativa, se pueden introducir otras unidades organizativas, se puede replicar la estructura jer\u00e1rquica de la empresa sin necesidad de crear m\u00e1s dominios o subdominios.","title":"Unidades Organizativas"},{"location":"Practica06_AD.html#creacion-de-unidades-organizativas","text":"Para crear una unidad organizativa abriremos la ventana ' Usuarios y Equipos de Active Directory ' (desde el Panel del Administrador, ' Herramientas Administrativas '). A continuaci\u00f3n, nos situamos sobre el dominio y haciendo clic con el bot\u00f3n secundario seleccionamos ' Nuevo ' y ' Unidad Organizativa ' Unidades Organizativas A continuaci\u00f3n se abrir\u00e1 el di\u00e1logo que nos permite indicar el nombre del nuevo objeto: Creaci\u00f3n OU (Organizational Unit) Al pulsar en Aceptar, se crear\u00e1 la Unidad Organizativa (OU) dentro de nuestro dominio. Notad tambi\u00e9n que por defecto se crea una protecci\u00f3n contra posibles errores de eliminaci\u00f3n. Por defecto la unidad no se podr\u00e1 eliminar de manera de manera accidental. Creaci\u00f3n de una OU Dentro de una Unidad Organizativa podemos a\u00f1adir objetos, usuarios, grupos, m\u00e1s unidades organizativas, etc... para ello seleccionamos la OU y con el bot\u00f3n derecho del rat\u00f3n accedemos a la opci\u00f3n Nuevo: A\u00f1adir objetos a una OU Podemos a\u00f1adir dos unidades organizativas dentro, una para Alumnos y otra para Profesores: Crear elementos dentro de una OU Tambi\u00e9n podemos arrastras elementos de una unidad a otra, por ejemplo, vamos a arrastras los grupos de Alumnos y Profesores y los usuarios que hemos creado. Seleccionamos el grupo Profesores y lo arrastramos a la unidad organizativa Profesores: Mover objetos a OU Mover objetos entre OU","title":"Creaci\u00f3n de Unidades Organizativas"},{"location":"Practica06_AD.html#borrar-una-ou","text":"Si tratamos de borrar una OU, veremos que nos aparece un mensaje de que no tenemos los suficientes privilegios para poder realizar la acci\u00f3n de borrado. Esto es debido a la protecci\u00f3n contra eliminaciones accidentales de las que hemos comentado anteriormente: Borrar OU Para eliminar las unidades organizativas, en primer lugar deberemos activar las 'caracter\u00edsticas avanzadas' seleccionando en el men\u00fa 'Ver' la opci\u00f3n 'Caracter\u00edsticas Avanzadas'. Borrado de una OU Nos aparecer\u00e1 la ventana de la OU: Desproteger una OU Desmarcamos el check de protecci\u00f3n contra eliminaciones accidentales: Desactivar protecci\u00f3n Ahora ya s\u00ed podemos eliminar la OU. Dejamos de nuevo desactivadas las opciones avanzadas desde la opci\u00f3n men\u00fa. En la pr\u00f3xima pr\u00e1ctica, utilizaremos las unidades organizativas para gestionar de manera eficaz el dominio, aplicando directivas de seguridad espec\u00edficas a cada unidad organizativa.","title":"Borrar una OU"},{"location":"Practica06_AD.html#comandos_2","text":"","title":"Comandos"},{"location":"Practica06_AD.html#actividad-1","text":"Crea dos usuarios con el nombre usuario1 y usuario2. Ponles a ambos la contrase\u00f1a \"Abc123!\" y configura las cuentas de usuario para que no tengan que cambiar la contrase\u00f1a al iniciar sesi\u00f3n por primera vez. Agrega estos usuarios al grupo global Alumnos y deshabilita la cuenta de usuario2. Adjunta una captura de pantalla del error que sale al intentar acceder desde un equipo cliente con el usuario2. Habilita de nuevo la cuenta de usuario2. Configura la cuenta usuario1 para que solamente pueda iniciar sesi\u00f3n desde el equipo W10. Valida en el dominio otro equipo Windows 10 y comprueba que el usuario1 no puede iniciar sesi\u00f3n. Configura la cuenta de usuario2 para que pueda iniciar sesi\u00f3n en cualquier equipo del dominio solamente de lunes a viernes de 8.00 a 18.00. Adjunta una captura de la pantalla de la configuraci\u00f3n de los horarios de acceso al sistema del usuario2. Intenta iniciar sesi\u00f3n en el equipo controlador de dominio con usuario2. \u00bfPor qu\u00e9 no puedes?\u00bfQu\u00e9 podr\u00edas hacer para que usuario2 pudiera iniciar sesi\u00f3n en el controlador de dominio?","title":"Actividad 1"},{"location":"Practica07_AD.html","text":"Caso Pr\u00e1ctico: Creaci\u00f3n de una estructura en AD \u00b6 La administraci\u00f3n del dominio es una tarea sencilla mediante la interfaz gr\u00e1fica, pero puede ser muy tediosa si hay que repetir en innumerables ocasiones secuencias de acciones. Pensemos por ejemplo en el caso t\u00edpico en el que hay que dar de alta a una cantidad muy grande de usuarios, creando la estructura completa de la organizaci\u00f3n. Este tipo de procesos puede facilitarse enormemente mediante la utilizaci\u00f3n de scripts . Concretamente, en este ejemplo se plantea la creaci\u00f3n de las cuentas de usuario de una organizaci\u00f3n, as\u00ed como sus grupos y unidades organizativas . Vamos a suponer que tenemos que crear la siguiente estructura de AD: Estructura AD. Es decir que tendremos 3 secciones y cada secci\u00f3n tiene un conjunto de departamentos. De manera que tengamos Administraci\u00f3n , Almac\u00e9n y Direcci\u00f3n . Y cada secci\u00f3n tenga los departamentos que se indican. Para ello vamos a disponer de los ficheros: secciones.csv, departamentos.csv y personal.csv. Subidos en aules . Creaci\u00f3n de OU y Grupos \u00b6 Lo primero que vamos a crear es la Unidad Organizativa ra\u00edz. Para ello se utiliza: New-ADOrganizationalUnit y New-ADGroup Write-Output \"Creando Estructura de OU y Grupos...\" New-ADOrganizationalUnit -Name \"Pistonazo\" -Path \"DC=CEFIRE2019, DC=LOCAL\" -Description \"Unidad organizativa Pistonazo\" -ProtectedFromAccidentalDeletion $false New-ADGroup -Name \"Pistonazo\" -GroupScope Global -Path \"OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" Despu\u00e9s crearemos cada una de las unidades organizativas y grupos a partir de los ficheros secciones.csv. Para ello se har\u00e1 uso del comando foreach : $secciones = Import-CSV -Path \"./secciones.csv\" $group = Get-ADGroup \"CN=Pistonazo,OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" foreach ($ou in $secciones) { New-ADOrganizationalUnit -Name ($ou.seccion) -Path \"OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" $path=\"OU=\"+($ou.seccion)+\",OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADGroup -Name $ou.seccion -GroupScope Global -Path $path $member = \"CN=\"+($ou.seccion)+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Unidad $($ou.seccion) creada!\" } Con esto ya tendremos la estructura de Unidades Organizativas y grupos creados. OU y grupos creados. Creaci\u00f3n de Usuarios \u00b6 Ahora queda crear los usuarios de nuestra organizaci\u00f3n. Para ello leeremos del archivo personal.csv . Este archivo tiene 3 columnas, una para el login, otra para el departamento y otra para la secci\u00f3n. Crearemos una contrase\u00f1a para todos y haremos que el usuario cuando inicie la sesi\u00f3n se la tenga que cambiar. $usuarios = Import-CSV -Path \"./personal.csv\" Write-Output \"Creando usuarios....\" foreach ($user in $usuarios) { $login = $user.login $path=\"OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" New-ADUser -Name $login -Path $path -SamAccountName $login -UserPrincipalName ($login+\"@CEFIRE2019.LOCAL\") -AccountPassword (ConvertTo-SecureString \"cefire2019.\" -AsPlainText -Force) -GivenName $login -ChangePasswordAtLogon $true-Enabled $true $group = Get-ADGroup (\"CN=\"+$user.departamento+\",OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\") $member = \"CN=\"+$login+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Usuario $($user.login) creado!\" } As\u00ed ya tenemos la estructura de AD creada con los usuarios: Usuarios creados. Script de creaci\u00f3n de estructura \u00b6 Write-Output \"Creando Estructura de OU y Grupos...\" New-ADOrganizationalUnit -Name \"Pistonazo\" -Path \"DC=CEFIRE2019, DC=LOCAL\" -Description \"Unidad organizativa Pistonazo\" -ProtectedFromAccidentalDeletion $false New-ADGroup -Name \"Pistonazo\" -GroupScope Global -Path \"OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" $secciones = Import-CSV -Path \"./secciones.csv\" $group = Get-ADGroup \"CN=Pistonazo,OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" foreach ($ou in $secciones) { New-ADOrganizationalUnit -Name ($ou.seccion) -Path \"OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" $path=\"OU=\"+($ou.seccion)+\",OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADGroup -Name $ou.seccion -GroupScope Global -Path $path $member = \"CN=\"+($ou.seccion)+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Unidad $($ou.seccion) creada!\" } $departamentos = Import-CSV -Path \"./departamentos.csv\" foreach ($ou in $departamentos) { $path=\"OU=\"+($ou.seccion)+\", OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADOrganizationalUnit -Name ($ou.departamento) -Path $path $path=\"OU=\"+($ou.departamento)+\",OU=\"+$ou.seccion+\",OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADGroup -Name $ou.departamento -GroupScope Global -Path $path $group = Get-ADGroup (\"CN=\"+$ou.seccion+\",OU=\"+$ou.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\") $member = \"CN=\"+($ou.departamento)+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Unidad $($ou.departamento) - $($ou.seccion) creada!\" } $usuarios = Import-CSV -Path \"./personal.csv\" Write-Output \"Creando usuarios....\" foreach ($user in $usuarios) { $login = $user.login $path=\"OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" New-ADUser -Name $login -Path $path -SamAccountName $login -UserPrincipalName ($login+\"@CEFIRE2019.LOCAL\") -AccountPassword (ConvertTo-SecureString \"cefire2019.\" -AsPlainText -Force) -GivenName $login -ChangePasswordAtLogon $true -Enabled $true $group = Get-ADGroup (\"CN=\"+$user.departamento+\",OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\") $member = \"CN=\"+$login+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Usuario $($user.login) creado!\" } Se prueba a iniciar sesi\u00f3n con un usuario, por ejemplo usudir1@isca2019.local (su contrase\u00f1a ser\u00e1 cefire2019 .): Inicio sesi\u00f3n Post-Script. Consultas sobre objetos del dominio \u00b6 Get-AdObject \u00b6 El cmdlet Get-AdObject de PowerShell obtiene un objeto de Active Directory o realiza una b\u00fasqueda para obtener varios objetos seg\u00fan los criterios de b\u00fasqueda. Puede obtener todos los objetos en Active Directory mediante el par\u00e1metro -Filter . La sintaxis es: Get-ADObject [-AuthType <ADAuthType>] [-Credential <PSCredential>] -Filter <String> [-IncludeDeletedObjects] [-Properties <String[]>] [-ResultPageSize <Int32>] [-ResultSetSize <Int32>] [-SearchBase <String>] [-SearchScope <ADSearchScope>] [-Server <String>] [<CommonParameters>] } Get-ADObject [-AuthType <ADAuthType>] [-Credential <PSCredential>] [-Identity] <ADObject> [-IncludeDeletedObjects] [-Partition <String>] [-Properties <String[]>] [-Server <String>] [<CommonParameters>] } Get-ADObject [-AuthType <ADAuthType>] [-Credential <PSCredential>] [-IncludeDeletedObjects] -LDAPFilter <String> [-Properties <String[]>] [-ResultPageSize <Int32>] [-ResultSetSize <Int32>] [-SearchBase <String>] [-SearchScope <ADSearchScope>] [-Server <String>] [<CommonParameters>] } Se pueden observar ejemplos en el enlace de la fuente oficial Get-ADObject Actividad 1 \u00b6 Crea una estructura de AD mediante comandos PowerShell de la Empresa ASO2122. Se deben crear dos archivos csv con cuatro departamentos a definir (por ejemplo Finanzas, RRHH, Compras, TIC), y con 5 empleados; los csv deben contener: departamentos.csv: Contiene los departamentos de la empresa. El archivo departamentos.csv contiene 2 columnas, el departamento y una descripci\u00f3n. empleados.csv: Contiene los empleados de la empresa. El archivo departamento contiene 3 columnas, una para el departamento, otra para el nombre y otra el apellido. De manera que el usuario tendr\u00e1 el login compuesto por el nombre y el apellido, de manera que si existiera una empleada llamada Carla Mateu , tendr\u00e1 un login carla.mateu:","title":"Caso Pr\u00e1ctico: Creaci\u00f3n de una estructura en AD"},{"location":"Practica07_AD.html#caso-practico-creacion-de-una-estructura-en-ad","text":"La administraci\u00f3n del dominio es una tarea sencilla mediante la interfaz gr\u00e1fica, pero puede ser muy tediosa si hay que repetir en innumerables ocasiones secuencias de acciones. Pensemos por ejemplo en el caso t\u00edpico en el que hay que dar de alta a una cantidad muy grande de usuarios, creando la estructura completa de la organizaci\u00f3n. Este tipo de procesos puede facilitarse enormemente mediante la utilizaci\u00f3n de scripts . Concretamente, en este ejemplo se plantea la creaci\u00f3n de las cuentas de usuario de una organizaci\u00f3n, as\u00ed como sus grupos y unidades organizativas . Vamos a suponer que tenemos que crear la siguiente estructura de AD: Estructura AD. Es decir que tendremos 3 secciones y cada secci\u00f3n tiene un conjunto de departamentos. De manera que tengamos Administraci\u00f3n , Almac\u00e9n y Direcci\u00f3n . Y cada secci\u00f3n tenga los departamentos que se indican. Para ello vamos a disponer de los ficheros: secciones.csv, departamentos.csv y personal.csv. Subidos en aules .","title":"Caso Pr\u00e1ctico: Creaci\u00f3n de una estructura en AD"},{"location":"Practica07_AD.html#creacion-de-ou-y-grupos","text":"Lo primero que vamos a crear es la Unidad Organizativa ra\u00edz. Para ello se utiliza: New-ADOrganizationalUnit y New-ADGroup Write-Output \"Creando Estructura de OU y Grupos...\" New-ADOrganizationalUnit -Name \"Pistonazo\" -Path \"DC=CEFIRE2019, DC=LOCAL\" -Description \"Unidad organizativa Pistonazo\" -ProtectedFromAccidentalDeletion $false New-ADGroup -Name \"Pistonazo\" -GroupScope Global -Path \"OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" Despu\u00e9s crearemos cada una de las unidades organizativas y grupos a partir de los ficheros secciones.csv. Para ello se har\u00e1 uso del comando foreach : $secciones = Import-CSV -Path \"./secciones.csv\" $group = Get-ADGroup \"CN=Pistonazo,OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" foreach ($ou in $secciones) { New-ADOrganizationalUnit -Name ($ou.seccion) -Path \"OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" $path=\"OU=\"+($ou.seccion)+\",OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADGroup -Name $ou.seccion -GroupScope Global -Path $path $member = \"CN=\"+($ou.seccion)+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Unidad $($ou.seccion) creada!\" } Con esto ya tendremos la estructura de Unidades Organizativas y grupos creados. OU y grupos creados.","title":"Creaci\u00f3n de OU y Grupos"},{"location":"Practica07_AD.html#creacion-de-usuarios","text":"Ahora queda crear los usuarios de nuestra organizaci\u00f3n. Para ello leeremos del archivo personal.csv . Este archivo tiene 3 columnas, una para el login, otra para el departamento y otra para la secci\u00f3n. Crearemos una contrase\u00f1a para todos y haremos que el usuario cuando inicie la sesi\u00f3n se la tenga que cambiar. $usuarios = Import-CSV -Path \"./personal.csv\" Write-Output \"Creando usuarios....\" foreach ($user in $usuarios) { $login = $user.login $path=\"OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" New-ADUser -Name $login -Path $path -SamAccountName $login -UserPrincipalName ($login+\"@CEFIRE2019.LOCAL\") -AccountPassword (ConvertTo-SecureString \"cefire2019.\" -AsPlainText -Force) -GivenName $login -ChangePasswordAtLogon $true-Enabled $true $group = Get-ADGroup (\"CN=\"+$user.departamento+\",OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\") $member = \"CN=\"+$login+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Usuario $($user.login) creado!\" } As\u00ed ya tenemos la estructura de AD creada con los usuarios: Usuarios creados.","title":"Creaci\u00f3n de Usuarios"},{"location":"Practica07_AD.html#script-de-creacion-de-estructura","text":"Write-Output \"Creando Estructura de OU y Grupos...\" New-ADOrganizationalUnit -Name \"Pistonazo\" -Path \"DC=CEFIRE2019, DC=LOCAL\" -Description \"Unidad organizativa Pistonazo\" -ProtectedFromAccidentalDeletion $false New-ADGroup -Name \"Pistonazo\" -GroupScope Global -Path \"OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" $secciones = Import-CSV -Path \"./secciones.csv\" $group = Get-ADGroup \"CN=Pistonazo,OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" foreach ($ou in $secciones) { New-ADOrganizationalUnit -Name ($ou.seccion) -Path \"OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" $path=\"OU=\"+($ou.seccion)+\",OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADGroup -Name $ou.seccion -GroupScope Global -Path $path $member = \"CN=\"+($ou.seccion)+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Unidad $($ou.seccion) creada!\" } $departamentos = Import-CSV -Path \"./departamentos.csv\" foreach ($ou in $departamentos) { $path=\"OU=\"+($ou.seccion)+\", OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADOrganizationalUnit -Name ($ou.departamento) -Path $path $path=\"OU=\"+($ou.departamento)+\",OU=\"+$ou.seccion+\",OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADGroup -Name $ou.departamento -GroupScope Global -Path $path $group = Get-ADGroup (\"CN=\"+$ou.seccion+\",OU=\"+$ou.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\") $member = \"CN=\"+($ou.departamento)+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Unidad $($ou.departamento) - $($ou.seccion) creada!\" } $usuarios = Import-CSV -Path \"./personal.csv\" Write-Output \"Creando usuarios....\" foreach ($user in $usuarios) { $login = $user.login $path=\"OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" New-ADUser -Name $login -Path $path -SamAccountName $login -UserPrincipalName ($login+\"@CEFIRE2019.LOCAL\") -AccountPassword (ConvertTo-SecureString \"cefire2019.\" -AsPlainText -Force) -GivenName $login -ChangePasswordAtLogon $true -Enabled $true $group = Get-ADGroup (\"CN=\"+$user.departamento+\",OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\") $member = \"CN=\"+$login+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Usuario $($user.login) creado!\" } Se prueba a iniciar sesi\u00f3n con un usuario, por ejemplo usudir1@isca2019.local (su contrase\u00f1a ser\u00e1 cefire2019 .): Inicio sesi\u00f3n Post-Script.","title":"Script de creaci\u00f3n de estructura"},{"location":"Practica07_AD.html#consultas-sobre-objetos-del-dominio","text":"","title":"Consultas sobre objetos del dominio"},{"location":"Practica07_AD.html#get-adobject","text":"El cmdlet Get-AdObject de PowerShell obtiene un objeto de Active Directory o realiza una b\u00fasqueda para obtener varios objetos seg\u00fan los criterios de b\u00fasqueda. Puede obtener todos los objetos en Active Directory mediante el par\u00e1metro -Filter . La sintaxis es: Get-ADObject [-AuthType <ADAuthType>] [-Credential <PSCredential>] -Filter <String> [-IncludeDeletedObjects] [-Properties <String[]>] [-ResultPageSize <Int32>] [-ResultSetSize <Int32>] [-SearchBase <String>] [-SearchScope <ADSearchScope>] [-Server <String>] [<CommonParameters>] } Get-ADObject [-AuthType <ADAuthType>] [-Credential <PSCredential>] [-Identity] <ADObject> [-IncludeDeletedObjects] [-Partition <String>] [-Properties <String[]>] [-Server <String>] [<CommonParameters>] } Get-ADObject [-AuthType <ADAuthType>] [-Credential <PSCredential>] [-IncludeDeletedObjects] -LDAPFilter <String> [-Properties <String[]>] [-ResultPageSize <Int32>] [-ResultSetSize <Int32>] [-SearchBase <String>] [-SearchScope <ADSearchScope>] [-Server <String>] [<CommonParameters>] } Se pueden observar ejemplos en el enlace de la fuente oficial Get-ADObject","title":"Get-AdObject"},{"location":"Practica07_AD.html#actividad-1","text":"Crea una estructura de AD mediante comandos PowerShell de la Empresa ASO2122. Se deben crear dos archivos csv con cuatro departamentos a definir (por ejemplo Finanzas, RRHH, Compras, TIC), y con 5 empleados; los csv deben contener: departamentos.csv: Contiene los departamentos de la empresa. El archivo departamentos.csv contiene 2 columnas, el departamento y una descripci\u00f3n. empleados.csv: Contiene los empleados de la empresa. El archivo departamento contiene 3 columnas, una para el departamento, otra para el nombre y otra el apellido. De manera que el usuario tendr\u00e1 el login compuesto por el nombre y el apellido, de manera que si existiera una empleada llamada Carla Mateu , tendr\u00e1 un login carla.mateu:","title":"Actividad 1"},{"location":"Practica08_AD.html","text":"Permisos, directivas de grupo y perfiles I \u00b6 Objetivos de esta pr\u00e1ctica: Creaci\u00f3n de recursos compartidos. Configuraci\u00f3n y administraci\u00f3n de permisos de carpetas compartidas. Configuraci\u00f3n y administraci\u00f3n de permisos NTFS Gesti\u00f3n del dominio mediante directivas de grupo. Permisos \u00b6 Los sistemas operativos de la familia Windows poseen dos niveles de permisos para los recursos compartidos: Permisos para carpetas compartidas : se aplican cada vez que un usuario quiere acceder a un archivo o carpeta de la red. Permisos para archivos y carpetas (NTFS) : se aplican sobre dispositivos con formato NTFS para definir en mayor detalle las acciones permitidas. De lo anterior se extrae que cuando se accede en modo local a los archivos o carpetas s\u00f3lo intervienen los permisos asociados al sistema de ficheros, en este caso NTFS, sin embargo si se accede a trav\u00e9s de la red se aplican los dos niveles de permisos: en primer lugar se aplican los permisos de carpetas compartidas y posteriormente los permisos NTFS . Permisos NTFS y compartidos. Permisos de recursos compartidos \u00b6 Para acceder a la gesti\u00f3n de recursos compartidos, lo podemos hacer a trav\u00e9s de la opci\u00f3n servicios de archivo y almacenamiento, desde el Panel del Administrador del Servidor. Recursos compartidos I. Despu\u00e9s accedemos a la opci\u00f3n recursos compartidos: Recursos compartidos II. En la parte central de la consola de administraci\u00f3n del almacenamiento aparecen los recursos compartidos en el servidor. Para visualizar los permisos de cada recurso compartido, basta con hacer clic con el bot\u00f3n secundario del rat\u00f3n sobre el recurso cuyos permisos se quieren consultar y se selecciona \u2018Propiedades\u2019: Propiedades Recursos Compartidos. Veremos como aparece un cuadro de dialogo donde podemos ver en la parte de la izquierda la opci\u00f3n permisos. Y bajo Personalizar Permisos: Permisos recursos compartidos. Nos aparece despu\u00e9s el cuadro de permisos completo del recurso seleccionado: Recursos compartidos V. Si accedemos a la pesta\u00f1a compartir, podremos ver los permisos del recurso compartido. En este caso, el recurso compartido netlogon tiene los permisos: Recursos compartidos VI. Estos pueden ser de tres tipos: Control total : no solo permite cambiar y leer, sino modificar los permisos sobre el recurso compartido. Cambiar : se permite crear carpetas y archivos adem\u00e1s de modificar y borrar los archivos y directorios existentes. Lectura : \u00fanicamente permite la lectura de archivos y la ejecuci\u00f3n de archivos ejecutables que se hallen dentro del recurso compartido. Permisos de NETLOGON. Como se puede comprobar en la siguiente figura, existen dos tipos de directivas : \u2018 Permitir \u2019 y \u2018 Denegar \u2019. Warning Es importante destacar que la opci\u00f3n \u2018 Denegar \u2019 tiene prioridad sobre otros permisos asignados sobre el recurso compartido. Tipos de directivas. Establecer permisos en recursos compartidos \u00b6 Establecer permisos de recursos compartidos se puede hacer de varias maneras. Probablemente la m\u00e1s sencilla sea seleccionar el recurso sobre el cual se desean configurar los permisos, y haciendo clic con el bot\u00f3n secundario \u2018 Compartir con... \u2019 y usuarios espec\u00edficos.. Por ejemplo, vamos a crear una carpeta en C: llamada Empresa_users y la vamos a compartir: Compartir recursos. Y agregamos el grupo Empresa con lectura y escritura: Agregar permisos. Agregar Permisos recurso compartido I. Agregar Permisos recurso compartido II. Y por \u00faltimo Compartir. En lugar de hacer uso de este asistente, vamos a compartir mediante el uso compartido avanzado, que nos da m\u00e1s opciones para asignar los permisos. Para ello, seleccionaremos la carpeta y con el bot\u00f3n de la derecha del rat\u00f3n propiedades y pesta\u00f1a compartir: Uso compartido avanzado I. Uso compartido avanzado II. En la medida de lo posible, habr\u00e1 que asignar permisos a grupos y eliminar grupos que no tengan ninguna relaci\u00f3n con la carpeta que queremos compartir. Evitar el uso de grupo Todos para eso habr\u00e1 que crear los grupos correspondientes. Permisos NTFS \u00b6 Como se ha comentado anteriormente, los permisos NTFS complementan y ampl\u00edan los permisos de recursos compartidos, siendo efectivo el m\u00e1s restrictivo. Todos los archivos y carpetas de un volumen NTFS tienen asociada una ACL o lista de control de acceso que fija el nivel de acceso de un usuario o grupo que pretenda acceder al recurso. Adem\u00e1s, los permisos NTFS pueden ser aplicados a nivel de archivo, a diferencia de los permisos de recursos compartidos, los cuales \u00fanicamente pueden aplicarse a nivel de carpeta. Por otra parte, surge un nuevo concepto al aplicar los permisos NTFS que los hace m\u00e1s complejos aunque tambi\u00e9n m\u00e1s potentes: la herencia , la cual determinar\u00e1 los permisos que se reciben sobre un determinado recurso provenientes de un nivel superior, aunque esto lo veremos detalladamente m\u00e1s adelante. Tipos de permisos NTFS \u00b6 Tal y como se muestra en la figura (para abrir ese cuadro de di\u00e1logo hacer clic con el bot\u00f3n secundario sobre el recurso compartido y hacer clic en la pesta\u00f1a 'Seguridad'), los permisos (predeterminados) que pueden aplicarse sobre archivos y carpetas son: Control total. Cambiar. Leer y ejecutar. Mostrar el contenido de la carpeta. Leer. Escribir. Permisos est\u00e1ndar. No obstante, estos permisos en realidad representan varios aspectos mucho m\u00e1s concretos. Para tratar de clarificar esta cuesti\u00f3n, la tabla 1 resume qu\u00e9 tareas pueden realizarse con cada tipo de permiso. Permisos para carpetas y archivos. Para poder acceder a estos permisos especiales, lo haremos a trav\u00e9s de las propiedades, pesta\u00f1a de Seguridad y opciones avanzadas: Acceso a permisos especiales I. Acceso a permisos especiales II. Acceso a permisos especiales III. Acceso a permisos especiales. Warning Es importante entender que los permisos predeterminados est\u00e1ndar, en realidad corresponden a unas combinaciones de permisos espec\u00edficos, siendo estos \u00faltimos con los que trabajaremos m\u00e1s adelante cuando gestionemos las listas de control de acceso por l\u00ednea de comandos. Asignaci\u00f3n de permisos NTFS \u00b6 Al definir un permiso NTFS este puede ser un permiso o una denegaci\u00f3n: Permisos NTFS I. Warning Los permisos NTFS son acumulativos : se eval\u00faan los permisos otorgados al usuario y a los grupos a los que pertenece el usuario. En el caso de que haya una incompatibilidad entre los permisos asignados a un usuario y los asignados a un grupo del cual sea miembro, prevalecer\u00e1 la opci\u00f3n m\u00e1s restrictiva: Denegar (si est\u00e1 definido expl\u00edcitamente) . Para asignar permisos NTFS a un recurso compartido bastar\u00e1 con hacer clic con el bot\u00f3n secundario sobre el recurso y acceder a la pesta\u00f1a 'Seguridad'. A continuaci\u00f3n pulsaremos el bot\u00f3n 'Opciones Avanzadas', como se muestra a continuaci\u00f3n: Permisos NTFS II. Permisos NTFS III. Permisos NTFS IV. Permisos NTFS V. Permisos NTFS VI. Warning Cuidado con el grupo Usuarios (del dominio) porque aparece por defecto en los permisos NTFS (con permisos de lectura), y puede provocar que se produzcan accesos diferentes a nuestra planificaci\u00f3n. Como norma general, si queremos limitar el acceso a un recurso compartido, eliminaremos el grupo Usuarios de los permisos NTFS y explicitaremos \u00fanicamente aquellos grupos o usuarios que efectivamente queramos que tengan acceso al recurso. Permisos Impl\u00edcitos y permisos Expl\u00edcitos \u00b6 Los permisos otorgados de manera impl\u00edcita o expl\u00edcita son una cuesti\u00f3n sencilla, en la que si no nos fijamos con atenci\u00f3n, podemos hacer que los accesos a los recursos no funcionen como ten\u00edamos previsto. Para evitar problemas tendremos en cuenta que: Un permiso definido de manera expl\u00edcita siempre prevalecer\u00e1 sobre un permiso definido de manera impl\u00edcita. Denegar un permiso siempre prevalece sobre otorgar ese permiso, siempre y cuando ambos est\u00e9n definidos de la misma manera (impl\u00edcita o expl\u00edcitamente). \u00bfC\u00f3mo se define un permiso de manera expl\u00edcita? Si nos fijamos en la siguiente figura, el grupo Compras no tiene (aparentemente) definidos permisos de escritura. Sin embargo esa aparente indefinici\u00f3n, en realidad indica que el permiso de escritura est\u00e1 denegado impl\u00edcitamente. Si un usuario del grupo Ventas intenta escribir en la carpeta, se producir\u00e1 un mensaje de error como muestra la siguiente figura: Permisos expl\u00edcitos. Error al crear archivo en recurso compartido. Sin embargo, si le otorgamos el permiso expl\u00edcito de escritura, veremos que efectivamente puede escribir en el recurso, ya que la definici\u00f3n expl\u00edcita del permiso para escribir prevalece sobre la denegaci\u00f3n impl\u00edcita del permiso escribir: Permisos de escritura. Permisos de escritura. Si explicitamos la denegaci\u00f3n del permiso de escritura para los miembros del grupo Compras, podremos comprobar que efectivamente el usuario usucomp1 no puede escribir en la carpeta: Denegaci\u00f3n explicita. Denegaci\u00f3n explicita. Herencia de permisos \u00b6 Note Al crear un archivo o carpeta en un volumen NTFS ese objeto hereda autom\u00e1ticamente los permisos de su carpeta contenedora, y a la inversa: cuando asignamos permisos a una carpeta contenedora, los permisos se propagan autom\u00e1ticamente hacia los archivos y subcarpetas contenidas en el recurso. Sin embargo, pueden darse ocasiones en las que queramos eliminar esa herencia de permisos. Esto puede ejecutarse de tres maneras diferentes: Eliminar la herencia a nivel de la carpeta de nivel superior, los objetos contenidos en ella dejan de heredar los permisos. Eliminar la herencia a nivel de subcarpeta o archivo contenido dentro del recurso principal. Permitir o denegar expl\u00edcitamente un permiso de manera diferente a como est\u00e1 definido en el recurso contenedor. Note \u00bfQu\u00e9 utilidad pr\u00e1ctica piensas que puede tener la herencia de permisos? Fundamentalmente son dos las utilidades principales. La primera radica en que el administrador no tiene que asignar manualmente los permisos a los archivos y subcarpetas que haya contenidas dentro del recurso principal, y que f\u00e1cilmente pueden ser miles. Relacionado con este aspecto, tambi\u00e9n encontramos una segunda utilidad pr\u00e1ctica que es el aumento de la seguridad al descartar posibles errores de asignaci\u00f3n de permisos realizados manualmente. Eliminaci\u00f3n de herencia del recurso de nivel superior \u00b6 Para eliminar la herencia de los permisos establecidos en la carpeta de nivel superior, se debe acceder a la ficha 'Seguridad' del cuadro de di\u00e1logo 'Permisos' y a continuaci\u00f3n se hace clic en 'Opciones Avanzadas' : Denegaci\u00f3n explicita I. En este caso vemos que la carpeta c:\\pistonazo_users hereda los permisos de la unidad * c:* . Para eliminar la herencia, debemos hacer clic en Deshabilitar herencia y nos aparecer\u00e1 un di\u00e1logo para dejar los permisos expl\u00edcitos o bien para eliminar todos los permisos: Denegaci\u00f3n explicita II. Tenemos dos opciones: Convertir los permisos heredados en permisos expl\u00edcitos : mantiene los permisos de todos los archivos y subcarpetas, pero no est\u00e1n vinculados a los del nivel superior. Quitar todos los permisos : elimina todos los permisos heredados. Tip Como norma general marcaremos la primera opci\u00f3n, convertir los permisos en permisos expl\u00edcitos: Denegaci\u00f3n explicita III. Cambio de los permisos de un objeto hijo \u00b6 Si observamos los permisos de un objeto que est\u00e1 heredando permisos, veremos que las casillas de verificaci\u00f3n est\u00e1n (completa o parcialmente) inaccesibles. En este caso la carpeta Compras que hereda los permisos de la carpeta Administraci\u00f3n , hereda tambi\u00e9n los permisos del grupo administraci\u00f3n: Herencia de permisos. En primer lugar podemos interrumpir la herencia, denegando expl\u00edcitamente los permisos. Si el permiso heredado es de concesi\u00f3n, la denegaci\u00f3n est\u00e1 habilitada. Interrupci\u00f3n de herencia. Directivas de Grupo (GPO) \u00b6 Las directivas de grupo ( Group Policy ) son una serie de configuraciones creadas por el administrador que se aplican a objetos del dominio. Por medio de estas directivas, el administrador controla los entornos de trabajo de los usuarios del dominio, los equipos y el comportamiento de distintos objetos. Son en definitiva un conjunto de reglas que facilitan las labores de administraci\u00f3n de los usuarios y equipos. Algunos de los aspectos m\u00e1s \u00fatiles que se pueden definir por parte del administrador mediante las directivas son: Los comandos de inicio de sesi\u00f3n. Caracter\u00edsticas de las directivas de seguridad de las cuentas de usuario. Configuraci\u00f3n de la apariencia de la sesi\u00f3n de usuario. Redirecci\u00f3n del acceso a ciertas carpetas o archivos centralizados Distribuci\u00f3n de software a los equipos clientes. Permisos otorgados a las cuentas de usuarios y grupos, etc. Acumulaci\u00f3n de directivas de grupo \u00b6 Al existir diferentes niveles de directivas de grupo, estas pueden entrar en conflicto, haciendo que aparezcan efectos no deseados en la gesti\u00f3n del dominio. Al establecer directivas de grupo hay que tener en cuenta el orden de aplicaci\u00f3n de las mismas: Directiva de grupo local. Directiva de grupo de sitio. Directiva de grupo de dominio. Directiva de grupo de unidad organizativa. De manera predeterminada cuando existe una contradicci\u00f3n entre las directivas, la que prevalece ser\u00e1 la que est\u00e1 en un nivel inferior de la lista anterior. Obviamente, en caso de no existir contradicciones, se aplican todas las directivas. Directivas de usuario o equipo \u00b6 Si queremos saber las directivas que est\u00e1n aplicandose a un usuario o equipo, ejecutaremos rsop.msc : rsop.msc. Edici\u00f3n de las directivas de grupo predeterminadas \u00b6 Para acceder a las directivas de grupo predeterminadas, accedemos desde el Panel del Servidor --> Herramientas --> Administraci\u00f3n de directivas de grupo: Administraci\u00f3n directivas de grupo. Cuando se pone en marcha un dominio se crean dos directivas de grupo llamadas: Default Domain Controllers. Default Domain Policy. GPOs predefinidos. Estas dos directivas establecen la configuraci\u00f3n b\u00e1sica de los objetos del dominio, y est\u00e1n vinculadas respectivamente a: La unidad organizativa Domain Controllers. El dominio. Estos dos GPO se componen de un conjunto muy amplio de directivas, como se puede ver al abrir el editor de directivas: GPOs predeterminadas Default Domain Policy. Supongamos que queremos cambiar la configuraci\u00f3n de la directiva que aplica sobre el permiso para apagar el equipo. En ese caso la buscar\u00edamos entre todo el conjunto de directivas dentro del GPO Default Domain Policy y har\u00edamos doble clic sobre ella : GPO Apagar el sistema. Vemos que la directiva Apagar el Sistema no est\u00e1 habilitada. Si la habilitamos y \u00fanicamente otorgamos permiso a los administradores del dominio, podremos comprobar que efectivamente un usuario del dominio que inicia sesi\u00f3n en un equipo cliente no puede apagarlo, solamente podr\u00eda un usuario con privilegios de administraci\u00f3n. Para evitar generar un tr\u00e1fico de gesti\u00f3n excesivo en la red, las directivas de grupo no se actualizan inmediatamente tras su modificaci\u00f3n, sino que est\u00e1 establecido un intervalo de 5 minutos entre actualizaciones autom\u00e1ticas. No obstante, este intervalo se puede modificar en las propias directivas de grupo. De todas maneras, no es necesario modificar este intervalo para comprobar la correcta aplicaci\u00f3n de las directivas de grupo, basta con escribir en la consola cmd el comando gpupdate : gpupdate. Y ahora iniciamos una sesi\u00f3n con un usuario en la m\u00e1quina cliente y comprobamos que efectivamente no se puede apagar la m\u00e1quina: Denegar apagado del sistema. Tas tareas m\u00e1s comunes que se realizan con las GPOs son aquellas relativas a las directivas de contrase\u00f1as, de inicios de sesi\u00f3n y bloqueos entre otros. Para ejemplificar todo lo anterior vamos a modificar la Default Domain Policy para implementar las siguientes configuraciones en el dominio: Si el usuario se equivoca tres veces al introducir su contrase\u00f1a, su cuenta queda bloqueada (solo la podr\u00e1 desbloquear el administrador). Esto protege el sistema de posibles ataques. La contrase\u00f1a deber\u00e1 tener un m\u00ednimo de 5 caracteres, pero no es necesario obligatoriamente que sean may\u00fasculas, min\u00fasculas, caracteres alfanum\u00e9ricos, obligatoriamente, etc. La contrase\u00f1a que se haya utilizado ya, no podr\u00e1 volverse a utilizar hasta pasados al menos 10 cambios de contrase\u00f1a (de esta manera forzamos al usuario a que que no 'recicle' contrase\u00f1as antiguas, incrementando la seguridad del sistema). El usuario debe cambiar la contrase\u00f1a cada seis meses, al establecer una 'vida \u00fatil' de las contrase\u00f1as tenemos un sistema m\u00e1s seguro, ya que en caso de que alguien haya averiguado la contrase\u00f1a del usuario, y no se haya detectado, como tarde a los seis meses, perder\u00e1 el acceso a la cuenta. En las siguientes subsecciones se examina la manera de proceder para llevar a cabo estas configuraciones del sistema. Bloqueo de cuenta al introducir una contrase\u00f1a 3 veces una contrase\u00f1a err\u00f3nea \u00b6 En primer lugar editaremos el GPO ' Default Domain Policy ' para configurar la directiva de bloqueo de cuenta. Esta se halla en: ' Configuraci\u00f3n del equipo '\u2192' Directivas '\u2192' Configuraci\u00f3n de Windows '\u2192' Directiva de bloqueo de cuenta '\u2192' Umbral de bloqueo de cuenta ' Acceso a GPOs Default Domain Policy. Acceso directiva bloqueo de cuenta. Modificamos la directiva Umbral de bloqueo de cuenta a '3 intentos' de inicio de sesi\u00f3n err\u00f3neos: Umbral de bloqueo de cuenta. Adem\u00e1s configuraremos la duraci\u00f3n del bloqueo, donde un valor de 0 indica que la cuenta deber\u00e1 ser desbloqueada manualmente por el administrador: Duraci\u00f3n de bloqueo de cuenta. Finalmente tambi\u00e9n configuraremos el tiempo que debe transcurrir entre intentos para que el contador de fallos de inicio de sesi\u00f3n vuelva a cero antes de que se bloquee la cuenta. Pondremos el m\u00e1ximo valor permitido: Restablecer el bloqueo. Longitud de la contrase\u00f1a \u00b6 Como en el caso anterior editaremos el GPO ' Default Domain Policy ' para configurar la longitud y complejidad de las contrase\u00f1as: Directivas de contrase\u00f1as. Modificamos el valor de la longitud a 5 caracteres: Longitud de la contrase\u00f1a. A continuaci\u00f3n deshabilitamos los requisitos de complejidad de las contrase\u00f1as. En la siguiente figura aparecen las caracter\u00edsticas de complejidad que aplica esta directiva cuando est\u00e1 habilitada: Deshabilitar complejidad de contrase\u00f1as. Historial de contrase\u00f1as \u00b6 Editamos de nuevo el GPO 'Default Domain Policy' y accedemos a las directivas de contrase\u00f1as: Historial de contrase\u00f1as. Vigencia m\u00e1xima de la contrase\u00f1a \u00b6 Como en casos anteriores accedemos a las directivas de contrase\u00f1a: Vigencia m\u00e1xima de la contrase\u00f1a. Cambiamos la duraci\u00f3n m\u00e1xima de las contrase\u00f1as a 180 d\u00edas -6 meses El resultado de cada una de las directivas de la secci\u00f3n Directivas de contrase\u00f1as ser\u00eda: Directivas de contrase\u00f1as. Creaci\u00f3n de directivas de grupo \u00b6 Vamos a modificar ciertas directivas de la organizaci\u00f3n Pistonazo, para ello accederemos: ' Panel del administrador '\u2192' Herramientas administrativas '\u2192' Administraci\u00f3n de directivas de grupo ' Supongamos que queremos crear una Directiva de Grupo sobre la unidad organizativa 'Pistonazo' que creamos en el tema anterior. Hacemos clic con el bot\u00f3n secundario y escogemos la opci\u00f3n 'Crear un GPO en este dominio y vincularlo aqu\u00ed' Directivas de grupo. Aparecer\u00e1 el cuadro de di\u00e1logo e introduciremos el nombre que le queremos dar, por ejemplo 'Entorno de trabajo', ya que posteriormente utilizaremos esta directiva para configurar un entorno de trabajo homog\u00e9neo en todos los usuarios que pertenecen a la Unidad Organizativa 'Pistonazo'. Nueva GPO I. La nueva directiva aparecer\u00e1 en el panel de detalles: Nueva GPO II. Seleccionamos el GPO y hacemos clic con el bot\u00f3n derecho, escogiendo la opci\u00f3n 'Editar'. Con la nueva directiva vamos a establecer las siguientes configuraciones: Todos los miembros de la unidad organizativa 'Pistonazo' tendr\u00e1n un fondo de escritorio 'corporativo' que se instalar\u00e1 de manera autom\u00e1tica y que no podr\u00e1 ser modificado. Los miembros de la unidad organizativa 'Trabajadores' no pueden abrir la consola de comandos. En las siguientes subsecciones se examina la manera de proceder para llevar a cabo estas configuraciones del sistema. Fondo de escritorio obligatorio \u00b6 Para modificar de una manera centralizada el fondo de escritorio de los usuarios de la unidad organizativa 'Pistonazo' debemos editar la directiva ' Entorno de Trabajo ' y acceder a ' Configuraci\u00f3n del usuario '\u2192' Plantillas administrativas '\u2192' Active Desktop '\u2192' Active Desktop ' GPO Pistonazo. Personalizar Active Desktop. Habilitamos el Active Desktop. Active Desktop. Vamos a impedir tambi\u00e9n que los usuarios puedan modificar el fondo de escritorio: No permitir cambios. Indicamos la ruta en la que se halla la imagen que queremos poner como fondo de escritorio. En este caso se llama fondopisto.jpg y hay que a\u00f1adirla a una carpeta compartida que se encuentre en el servidor. En nuestro caso, la a\u00f1adiremos a la carpeta Pistonazo: Tapiz de escritorio. La imagen debe hallarse en una carpeta compartida en red (preferiblemente en el servidor por cuestiones de disponibilidad) donde todos los usuarios del dominio tengan permiso de lectura. Adem\u00e1s, se recomienda que la ruta se introduzca en formato UNC del tipo: \\\\server 1\\gestion\\fondocorp.jpg no en formato \\\\192.168.0.100\\gestion\\fondocorp.jpg Bloqueo de la l\u00ednea de comandos \u00b6 Para bloquear la l\u00ednea de comandos editaremos el GPO correspondiente accediendo a ' Configuraci\u00f3n del usuario '\u2192' Plantillas administrativas '\u2192' Sistema ' Bloqueo consola. Y habilitamos el bloqueo: Habilitar el bloqueo. Comprobaci\u00f3n de las directivas establecidas \u00b6 Ahora comprobaremos que las directivas se han aplicado correctamente. Para ello utilizaremos un usuario cualquiera dentro de la unidad organizativa 'Pistonazo' que es sobre la que se aplican el GPO creado 'Entorno de Trabajo', y obviamente el GPO Default Domain Policy, que hemos editado. Bloqueo de cuenta \u00b6 La primera directiva que hemos aplicado consist\u00eda en bloquear la cuenta indefinidamente al introducir en tres ocasiones la contrase\u00f1a incorrectamente. Nos equivocamos voluntariamente al iniciar sesi\u00f3n en un equipo cliente y la cuenta se acaba bloqueando. Por ejemplo, vamos a iniciar sesi\u00f3n con usuario usucomp1 e introduciremos 3 veces de manera incorrecta la contrase\u00f1a: Cuenta usucomp1 bloqueada. Comprobamos en el controlador de dominio que efectivamente est\u00e1 bloqueada y la desbloqueamos: Cuenta bloqueada. Longitud de la contrase\u00f1a \u00b6 Para comprobar la longitud de la contrase\u00f1a, vamos a cambiar la contrase\u00f1a del usuario usucomp1 y vamos a poner una contrase\u00f1a que tenga 5 caracteres, por ejemplo 12345. Restablecer contrase\u00f1a. As\u00ed tambi\u00e9n hemos visto que podemos introducir una contrase\u00f1a sin requisitos de complejidad. Note Ya se podr\u00eda comprobar estas restricciones. Actividad \u00b6 Habr\u00e1 que modificar las siguientes directivas para conseguir: Los usuarios deben cambiar la contrase\u00f1a cada 90 d\u00edas y guardar el historial de 5 contrase\u00f1as. Para facilitar la gesti\u00f3n no ser\u00e1 necesaria tener una restricci\u00f3n en cu\u00e1nto a la complejidad de la contrase\u00f1a y el n\u00famero m\u00ednimo de caracteres ser\u00e1 de 4. Para evitar posibles robos de contrase\u00f1a y ataques mal intencionados, cuando un usuario intenta 4 veces introducir de manera incorrecta su contrase\u00f1a, la cuenta se bloquear\u00e1 hasta que se reestablezca el contador de inicios de sesi\u00f3n err\u00f3neos a los 10minutos. Haced una captura de pantalla de las directivas de contrase\u00f1a y de inicios de sesi\u00f3n.","title":"Permisos, directivas de grupo y perfiles I"},{"location":"Practica08_AD.html#permisos-directivas-de-grupo-y-perfiles-i","text":"Objetivos de esta pr\u00e1ctica: Creaci\u00f3n de recursos compartidos. Configuraci\u00f3n y administraci\u00f3n de permisos de carpetas compartidas. Configuraci\u00f3n y administraci\u00f3n de permisos NTFS Gesti\u00f3n del dominio mediante directivas de grupo.","title":"Permisos, directivas de grupo y perfiles I"},{"location":"Practica08_AD.html#permisos","text":"Los sistemas operativos de la familia Windows poseen dos niveles de permisos para los recursos compartidos: Permisos para carpetas compartidas : se aplican cada vez que un usuario quiere acceder a un archivo o carpeta de la red. Permisos para archivos y carpetas (NTFS) : se aplican sobre dispositivos con formato NTFS para definir en mayor detalle las acciones permitidas. De lo anterior se extrae que cuando se accede en modo local a los archivos o carpetas s\u00f3lo intervienen los permisos asociados al sistema de ficheros, en este caso NTFS, sin embargo si se accede a trav\u00e9s de la red se aplican los dos niveles de permisos: en primer lugar se aplican los permisos de carpetas compartidas y posteriormente los permisos NTFS . Permisos NTFS y compartidos.","title":"Permisos"},{"location":"Practica08_AD.html#permisos-de-recursos-compartidos","text":"Para acceder a la gesti\u00f3n de recursos compartidos, lo podemos hacer a trav\u00e9s de la opci\u00f3n servicios de archivo y almacenamiento, desde el Panel del Administrador del Servidor. Recursos compartidos I. Despu\u00e9s accedemos a la opci\u00f3n recursos compartidos: Recursos compartidos II. En la parte central de la consola de administraci\u00f3n del almacenamiento aparecen los recursos compartidos en el servidor. Para visualizar los permisos de cada recurso compartido, basta con hacer clic con el bot\u00f3n secundario del rat\u00f3n sobre el recurso cuyos permisos se quieren consultar y se selecciona \u2018Propiedades\u2019: Propiedades Recursos Compartidos. Veremos como aparece un cuadro de dialogo donde podemos ver en la parte de la izquierda la opci\u00f3n permisos. Y bajo Personalizar Permisos: Permisos recursos compartidos. Nos aparece despu\u00e9s el cuadro de permisos completo del recurso seleccionado: Recursos compartidos V. Si accedemos a la pesta\u00f1a compartir, podremos ver los permisos del recurso compartido. En este caso, el recurso compartido netlogon tiene los permisos: Recursos compartidos VI. Estos pueden ser de tres tipos: Control total : no solo permite cambiar y leer, sino modificar los permisos sobre el recurso compartido. Cambiar : se permite crear carpetas y archivos adem\u00e1s de modificar y borrar los archivos y directorios existentes. Lectura : \u00fanicamente permite la lectura de archivos y la ejecuci\u00f3n de archivos ejecutables que se hallen dentro del recurso compartido. Permisos de NETLOGON. Como se puede comprobar en la siguiente figura, existen dos tipos de directivas : \u2018 Permitir \u2019 y \u2018 Denegar \u2019. Warning Es importante destacar que la opci\u00f3n \u2018 Denegar \u2019 tiene prioridad sobre otros permisos asignados sobre el recurso compartido. Tipos de directivas.","title":"Permisos de recursos compartidos"},{"location":"Practica08_AD.html#establecer-permisos-en-recursos-compartidos","text":"Establecer permisos de recursos compartidos se puede hacer de varias maneras. Probablemente la m\u00e1s sencilla sea seleccionar el recurso sobre el cual se desean configurar los permisos, y haciendo clic con el bot\u00f3n secundario \u2018 Compartir con... \u2019 y usuarios espec\u00edficos.. Por ejemplo, vamos a crear una carpeta en C: llamada Empresa_users y la vamos a compartir: Compartir recursos. Y agregamos el grupo Empresa con lectura y escritura: Agregar permisos. Agregar Permisos recurso compartido I. Agregar Permisos recurso compartido II. Y por \u00faltimo Compartir. En lugar de hacer uso de este asistente, vamos a compartir mediante el uso compartido avanzado, que nos da m\u00e1s opciones para asignar los permisos. Para ello, seleccionaremos la carpeta y con el bot\u00f3n de la derecha del rat\u00f3n propiedades y pesta\u00f1a compartir: Uso compartido avanzado I. Uso compartido avanzado II. En la medida de lo posible, habr\u00e1 que asignar permisos a grupos y eliminar grupos que no tengan ninguna relaci\u00f3n con la carpeta que queremos compartir. Evitar el uso de grupo Todos para eso habr\u00e1 que crear los grupos correspondientes.","title":"Establecer permisos en recursos compartidos"},{"location":"Practica08_AD.html#permisos-ntfs","text":"Como se ha comentado anteriormente, los permisos NTFS complementan y ampl\u00edan los permisos de recursos compartidos, siendo efectivo el m\u00e1s restrictivo. Todos los archivos y carpetas de un volumen NTFS tienen asociada una ACL o lista de control de acceso que fija el nivel de acceso de un usuario o grupo que pretenda acceder al recurso. Adem\u00e1s, los permisos NTFS pueden ser aplicados a nivel de archivo, a diferencia de los permisos de recursos compartidos, los cuales \u00fanicamente pueden aplicarse a nivel de carpeta. Por otra parte, surge un nuevo concepto al aplicar los permisos NTFS que los hace m\u00e1s complejos aunque tambi\u00e9n m\u00e1s potentes: la herencia , la cual determinar\u00e1 los permisos que se reciben sobre un determinado recurso provenientes de un nivel superior, aunque esto lo veremos detalladamente m\u00e1s adelante.","title":"Permisos NTFS"},{"location":"Practica08_AD.html#tipos-de-permisos-ntfs","text":"Tal y como se muestra en la figura (para abrir ese cuadro de di\u00e1logo hacer clic con el bot\u00f3n secundario sobre el recurso compartido y hacer clic en la pesta\u00f1a 'Seguridad'), los permisos (predeterminados) que pueden aplicarse sobre archivos y carpetas son: Control total. Cambiar. Leer y ejecutar. Mostrar el contenido de la carpeta. Leer. Escribir. Permisos est\u00e1ndar. No obstante, estos permisos en realidad representan varios aspectos mucho m\u00e1s concretos. Para tratar de clarificar esta cuesti\u00f3n, la tabla 1 resume qu\u00e9 tareas pueden realizarse con cada tipo de permiso. Permisos para carpetas y archivos. Para poder acceder a estos permisos especiales, lo haremos a trav\u00e9s de las propiedades, pesta\u00f1a de Seguridad y opciones avanzadas: Acceso a permisos especiales I. Acceso a permisos especiales II. Acceso a permisos especiales III. Acceso a permisos especiales. Warning Es importante entender que los permisos predeterminados est\u00e1ndar, en realidad corresponden a unas combinaciones de permisos espec\u00edficos, siendo estos \u00faltimos con los que trabajaremos m\u00e1s adelante cuando gestionemos las listas de control de acceso por l\u00ednea de comandos.","title":"Tipos de permisos NTFS"},{"location":"Practica08_AD.html#asignacion-de-permisos-ntfs","text":"Al definir un permiso NTFS este puede ser un permiso o una denegaci\u00f3n: Permisos NTFS I. Warning Los permisos NTFS son acumulativos : se eval\u00faan los permisos otorgados al usuario y a los grupos a los que pertenece el usuario. En el caso de que haya una incompatibilidad entre los permisos asignados a un usuario y los asignados a un grupo del cual sea miembro, prevalecer\u00e1 la opci\u00f3n m\u00e1s restrictiva: Denegar (si est\u00e1 definido expl\u00edcitamente) . Para asignar permisos NTFS a un recurso compartido bastar\u00e1 con hacer clic con el bot\u00f3n secundario sobre el recurso y acceder a la pesta\u00f1a 'Seguridad'. A continuaci\u00f3n pulsaremos el bot\u00f3n 'Opciones Avanzadas', como se muestra a continuaci\u00f3n: Permisos NTFS II. Permisos NTFS III. Permisos NTFS IV. Permisos NTFS V. Permisos NTFS VI. Warning Cuidado con el grupo Usuarios (del dominio) porque aparece por defecto en los permisos NTFS (con permisos de lectura), y puede provocar que se produzcan accesos diferentes a nuestra planificaci\u00f3n. Como norma general, si queremos limitar el acceso a un recurso compartido, eliminaremos el grupo Usuarios de los permisos NTFS y explicitaremos \u00fanicamente aquellos grupos o usuarios que efectivamente queramos que tengan acceso al recurso.","title":"Asignaci\u00f3n de permisos NTFS"},{"location":"Practica08_AD.html#permisos-implicitos-y-permisos-explicitos","text":"Los permisos otorgados de manera impl\u00edcita o expl\u00edcita son una cuesti\u00f3n sencilla, en la que si no nos fijamos con atenci\u00f3n, podemos hacer que los accesos a los recursos no funcionen como ten\u00edamos previsto. Para evitar problemas tendremos en cuenta que: Un permiso definido de manera expl\u00edcita siempre prevalecer\u00e1 sobre un permiso definido de manera impl\u00edcita. Denegar un permiso siempre prevalece sobre otorgar ese permiso, siempre y cuando ambos est\u00e9n definidos de la misma manera (impl\u00edcita o expl\u00edcitamente). \u00bfC\u00f3mo se define un permiso de manera expl\u00edcita? Si nos fijamos en la siguiente figura, el grupo Compras no tiene (aparentemente) definidos permisos de escritura. Sin embargo esa aparente indefinici\u00f3n, en realidad indica que el permiso de escritura est\u00e1 denegado impl\u00edcitamente. Si un usuario del grupo Ventas intenta escribir en la carpeta, se producir\u00e1 un mensaje de error como muestra la siguiente figura: Permisos expl\u00edcitos. Error al crear archivo en recurso compartido. Sin embargo, si le otorgamos el permiso expl\u00edcito de escritura, veremos que efectivamente puede escribir en el recurso, ya que la definici\u00f3n expl\u00edcita del permiso para escribir prevalece sobre la denegaci\u00f3n impl\u00edcita del permiso escribir: Permisos de escritura. Permisos de escritura. Si explicitamos la denegaci\u00f3n del permiso de escritura para los miembros del grupo Compras, podremos comprobar que efectivamente el usuario usucomp1 no puede escribir en la carpeta: Denegaci\u00f3n explicita. Denegaci\u00f3n explicita.","title":"Permisos Impl\u00edcitos y permisos Expl\u00edcitos"},{"location":"Practica08_AD.html#herencia-de-permisos","text":"Note Al crear un archivo o carpeta en un volumen NTFS ese objeto hereda autom\u00e1ticamente los permisos de su carpeta contenedora, y a la inversa: cuando asignamos permisos a una carpeta contenedora, los permisos se propagan autom\u00e1ticamente hacia los archivos y subcarpetas contenidas en el recurso. Sin embargo, pueden darse ocasiones en las que queramos eliminar esa herencia de permisos. Esto puede ejecutarse de tres maneras diferentes: Eliminar la herencia a nivel de la carpeta de nivel superior, los objetos contenidos en ella dejan de heredar los permisos. Eliminar la herencia a nivel de subcarpeta o archivo contenido dentro del recurso principal. Permitir o denegar expl\u00edcitamente un permiso de manera diferente a como est\u00e1 definido en el recurso contenedor. Note \u00bfQu\u00e9 utilidad pr\u00e1ctica piensas que puede tener la herencia de permisos? Fundamentalmente son dos las utilidades principales. La primera radica en que el administrador no tiene que asignar manualmente los permisos a los archivos y subcarpetas que haya contenidas dentro del recurso principal, y que f\u00e1cilmente pueden ser miles. Relacionado con este aspecto, tambi\u00e9n encontramos una segunda utilidad pr\u00e1ctica que es el aumento de la seguridad al descartar posibles errores de asignaci\u00f3n de permisos realizados manualmente.","title":"Herencia de permisos"},{"location":"Practica08_AD.html#eliminacion-de-herencia-del-recurso-de-nivel-superior","text":"Para eliminar la herencia de los permisos establecidos en la carpeta de nivel superior, se debe acceder a la ficha 'Seguridad' del cuadro de di\u00e1logo 'Permisos' y a continuaci\u00f3n se hace clic en 'Opciones Avanzadas' : Denegaci\u00f3n explicita I. En este caso vemos que la carpeta c:\\pistonazo_users hereda los permisos de la unidad * c:* . Para eliminar la herencia, debemos hacer clic en Deshabilitar herencia y nos aparecer\u00e1 un di\u00e1logo para dejar los permisos expl\u00edcitos o bien para eliminar todos los permisos: Denegaci\u00f3n explicita II. Tenemos dos opciones: Convertir los permisos heredados en permisos expl\u00edcitos : mantiene los permisos de todos los archivos y subcarpetas, pero no est\u00e1n vinculados a los del nivel superior. Quitar todos los permisos : elimina todos los permisos heredados. Tip Como norma general marcaremos la primera opci\u00f3n, convertir los permisos en permisos expl\u00edcitos: Denegaci\u00f3n explicita III.","title":"Eliminaci\u00f3n de herencia del recurso de nivel superior"},{"location":"Practica08_AD.html#cambio-de-los-permisos-de-un-objeto-hijo","text":"Si observamos los permisos de un objeto que est\u00e1 heredando permisos, veremos que las casillas de verificaci\u00f3n est\u00e1n (completa o parcialmente) inaccesibles. En este caso la carpeta Compras que hereda los permisos de la carpeta Administraci\u00f3n , hereda tambi\u00e9n los permisos del grupo administraci\u00f3n: Herencia de permisos. En primer lugar podemos interrumpir la herencia, denegando expl\u00edcitamente los permisos. Si el permiso heredado es de concesi\u00f3n, la denegaci\u00f3n est\u00e1 habilitada. Interrupci\u00f3n de herencia.","title":"Cambio de los permisos de un objeto hijo"},{"location":"Practica08_AD.html#directivas-de-grupo-gpo","text":"Las directivas de grupo ( Group Policy ) son una serie de configuraciones creadas por el administrador que se aplican a objetos del dominio. Por medio de estas directivas, el administrador controla los entornos de trabajo de los usuarios del dominio, los equipos y el comportamiento de distintos objetos. Son en definitiva un conjunto de reglas que facilitan las labores de administraci\u00f3n de los usuarios y equipos. Algunos de los aspectos m\u00e1s \u00fatiles que se pueden definir por parte del administrador mediante las directivas son: Los comandos de inicio de sesi\u00f3n. Caracter\u00edsticas de las directivas de seguridad de las cuentas de usuario. Configuraci\u00f3n de la apariencia de la sesi\u00f3n de usuario. Redirecci\u00f3n del acceso a ciertas carpetas o archivos centralizados Distribuci\u00f3n de software a los equipos clientes. Permisos otorgados a las cuentas de usuarios y grupos, etc.","title":"Directivas de Grupo (GPO)"},{"location":"Practica08_AD.html#acumulacion-de-directivas-de-grupo","text":"Al existir diferentes niveles de directivas de grupo, estas pueden entrar en conflicto, haciendo que aparezcan efectos no deseados en la gesti\u00f3n del dominio. Al establecer directivas de grupo hay que tener en cuenta el orden de aplicaci\u00f3n de las mismas: Directiva de grupo local. Directiva de grupo de sitio. Directiva de grupo de dominio. Directiva de grupo de unidad organizativa. De manera predeterminada cuando existe una contradicci\u00f3n entre las directivas, la que prevalece ser\u00e1 la que est\u00e1 en un nivel inferior de la lista anterior. Obviamente, en caso de no existir contradicciones, se aplican todas las directivas.","title":"Acumulaci\u00f3n de directivas de grupo"},{"location":"Practica08_AD.html#directivas-de-usuario-o-equipo","text":"Si queremos saber las directivas que est\u00e1n aplicandose a un usuario o equipo, ejecutaremos rsop.msc : rsop.msc.","title":"Directivas de usuario o equipo"},{"location":"Practica08_AD.html#edicion-de-las-directivas-de-grupo-predeterminadas","text":"Para acceder a las directivas de grupo predeterminadas, accedemos desde el Panel del Servidor --> Herramientas --> Administraci\u00f3n de directivas de grupo: Administraci\u00f3n directivas de grupo. Cuando se pone en marcha un dominio se crean dos directivas de grupo llamadas: Default Domain Controllers. Default Domain Policy. GPOs predefinidos. Estas dos directivas establecen la configuraci\u00f3n b\u00e1sica de los objetos del dominio, y est\u00e1n vinculadas respectivamente a: La unidad organizativa Domain Controllers. El dominio. Estos dos GPO se componen de un conjunto muy amplio de directivas, como se puede ver al abrir el editor de directivas: GPOs predeterminadas Default Domain Policy. Supongamos que queremos cambiar la configuraci\u00f3n de la directiva que aplica sobre el permiso para apagar el equipo. En ese caso la buscar\u00edamos entre todo el conjunto de directivas dentro del GPO Default Domain Policy y har\u00edamos doble clic sobre ella : GPO Apagar el sistema. Vemos que la directiva Apagar el Sistema no est\u00e1 habilitada. Si la habilitamos y \u00fanicamente otorgamos permiso a los administradores del dominio, podremos comprobar que efectivamente un usuario del dominio que inicia sesi\u00f3n en un equipo cliente no puede apagarlo, solamente podr\u00eda un usuario con privilegios de administraci\u00f3n. Para evitar generar un tr\u00e1fico de gesti\u00f3n excesivo en la red, las directivas de grupo no se actualizan inmediatamente tras su modificaci\u00f3n, sino que est\u00e1 establecido un intervalo de 5 minutos entre actualizaciones autom\u00e1ticas. No obstante, este intervalo se puede modificar en las propias directivas de grupo. De todas maneras, no es necesario modificar este intervalo para comprobar la correcta aplicaci\u00f3n de las directivas de grupo, basta con escribir en la consola cmd el comando gpupdate : gpupdate. Y ahora iniciamos una sesi\u00f3n con un usuario en la m\u00e1quina cliente y comprobamos que efectivamente no se puede apagar la m\u00e1quina: Denegar apagado del sistema. Tas tareas m\u00e1s comunes que se realizan con las GPOs son aquellas relativas a las directivas de contrase\u00f1as, de inicios de sesi\u00f3n y bloqueos entre otros. Para ejemplificar todo lo anterior vamos a modificar la Default Domain Policy para implementar las siguientes configuraciones en el dominio: Si el usuario se equivoca tres veces al introducir su contrase\u00f1a, su cuenta queda bloqueada (solo la podr\u00e1 desbloquear el administrador). Esto protege el sistema de posibles ataques. La contrase\u00f1a deber\u00e1 tener un m\u00ednimo de 5 caracteres, pero no es necesario obligatoriamente que sean may\u00fasculas, min\u00fasculas, caracteres alfanum\u00e9ricos, obligatoriamente, etc. La contrase\u00f1a que se haya utilizado ya, no podr\u00e1 volverse a utilizar hasta pasados al menos 10 cambios de contrase\u00f1a (de esta manera forzamos al usuario a que que no 'recicle' contrase\u00f1as antiguas, incrementando la seguridad del sistema). El usuario debe cambiar la contrase\u00f1a cada seis meses, al establecer una 'vida \u00fatil' de las contrase\u00f1as tenemos un sistema m\u00e1s seguro, ya que en caso de que alguien haya averiguado la contrase\u00f1a del usuario, y no se haya detectado, como tarde a los seis meses, perder\u00e1 el acceso a la cuenta. En las siguientes subsecciones se examina la manera de proceder para llevar a cabo estas configuraciones del sistema.","title":"Edici\u00f3n de las directivas de grupo predeterminadas"},{"location":"Practica08_AD.html#bloqueo-de-cuenta-al-introducir-una-contrasena-3-veces-una-contrasena-erronea","text":"En primer lugar editaremos el GPO ' Default Domain Policy ' para configurar la directiva de bloqueo de cuenta. Esta se halla en: ' Configuraci\u00f3n del equipo '\u2192' Directivas '\u2192' Configuraci\u00f3n de Windows '\u2192' Directiva de bloqueo de cuenta '\u2192' Umbral de bloqueo de cuenta ' Acceso a GPOs Default Domain Policy. Acceso directiva bloqueo de cuenta. Modificamos la directiva Umbral de bloqueo de cuenta a '3 intentos' de inicio de sesi\u00f3n err\u00f3neos: Umbral de bloqueo de cuenta. Adem\u00e1s configuraremos la duraci\u00f3n del bloqueo, donde un valor de 0 indica que la cuenta deber\u00e1 ser desbloqueada manualmente por el administrador: Duraci\u00f3n de bloqueo de cuenta. Finalmente tambi\u00e9n configuraremos el tiempo que debe transcurrir entre intentos para que el contador de fallos de inicio de sesi\u00f3n vuelva a cero antes de que se bloquee la cuenta. Pondremos el m\u00e1ximo valor permitido: Restablecer el bloqueo.","title":"Bloqueo de cuenta al introducir una contrase\u00f1a 3 veces una contrase\u00f1a err\u00f3nea"},{"location":"Practica08_AD.html#longitud-de-la-contrasena","text":"Como en el caso anterior editaremos el GPO ' Default Domain Policy ' para configurar la longitud y complejidad de las contrase\u00f1as: Directivas de contrase\u00f1as. Modificamos el valor de la longitud a 5 caracteres: Longitud de la contrase\u00f1a. A continuaci\u00f3n deshabilitamos los requisitos de complejidad de las contrase\u00f1as. En la siguiente figura aparecen las caracter\u00edsticas de complejidad que aplica esta directiva cuando est\u00e1 habilitada: Deshabilitar complejidad de contrase\u00f1as.","title":"Longitud de la contrase\u00f1a"},{"location":"Practica08_AD.html#historial-de-contrasenas","text":"Editamos de nuevo el GPO 'Default Domain Policy' y accedemos a las directivas de contrase\u00f1as: Historial de contrase\u00f1as.","title":"Historial de contrase\u00f1as"},{"location":"Practica08_AD.html#vigencia-maxima-de-la-contrasena","text":"Como en casos anteriores accedemos a las directivas de contrase\u00f1a: Vigencia m\u00e1xima de la contrase\u00f1a. Cambiamos la duraci\u00f3n m\u00e1xima de las contrase\u00f1as a 180 d\u00edas -6 meses El resultado de cada una de las directivas de la secci\u00f3n Directivas de contrase\u00f1as ser\u00eda: Directivas de contrase\u00f1as.","title":"Vigencia m\u00e1xima de la contrase\u00f1a"},{"location":"Practica08_AD.html#creacion-de-directivas-de-grupo","text":"Vamos a modificar ciertas directivas de la organizaci\u00f3n Pistonazo, para ello accederemos: ' Panel del administrador '\u2192' Herramientas administrativas '\u2192' Administraci\u00f3n de directivas de grupo ' Supongamos que queremos crear una Directiva de Grupo sobre la unidad organizativa 'Pistonazo' que creamos en el tema anterior. Hacemos clic con el bot\u00f3n secundario y escogemos la opci\u00f3n 'Crear un GPO en este dominio y vincularlo aqu\u00ed' Directivas de grupo. Aparecer\u00e1 el cuadro de di\u00e1logo e introduciremos el nombre que le queremos dar, por ejemplo 'Entorno de trabajo', ya que posteriormente utilizaremos esta directiva para configurar un entorno de trabajo homog\u00e9neo en todos los usuarios que pertenecen a la Unidad Organizativa 'Pistonazo'. Nueva GPO I. La nueva directiva aparecer\u00e1 en el panel de detalles: Nueva GPO II. Seleccionamos el GPO y hacemos clic con el bot\u00f3n derecho, escogiendo la opci\u00f3n 'Editar'. Con la nueva directiva vamos a establecer las siguientes configuraciones: Todos los miembros de la unidad organizativa 'Pistonazo' tendr\u00e1n un fondo de escritorio 'corporativo' que se instalar\u00e1 de manera autom\u00e1tica y que no podr\u00e1 ser modificado. Los miembros de la unidad organizativa 'Trabajadores' no pueden abrir la consola de comandos. En las siguientes subsecciones se examina la manera de proceder para llevar a cabo estas configuraciones del sistema.","title":"Creaci\u00f3n de directivas de grupo"},{"location":"Practica08_AD.html#fondo-de-escritorio-obligatorio","text":"Para modificar de una manera centralizada el fondo de escritorio de los usuarios de la unidad organizativa 'Pistonazo' debemos editar la directiva ' Entorno de Trabajo ' y acceder a ' Configuraci\u00f3n del usuario '\u2192' Plantillas administrativas '\u2192' Active Desktop '\u2192' Active Desktop ' GPO Pistonazo. Personalizar Active Desktop. Habilitamos el Active Desktop. Active Desktop. Vamos a impedir tambi\u00e9n que los usuarios puedan modificar el fondo de escritorio: No permitir cambios. Indicamos la ruta en la que se halla la imagen que queremos poner como fondo de escritorio. En este caso se llama fondopisto.jpg y hay que a\u00f1adirla a una carpeta compartida que se encuentre en el servidor. En nuestro caso, la a\u00f1adiremos a la carpeta Pistonazo: Tapiz de escritorio. La imagen debe hallarse en una carpeta compartida en red (preferiblemente en el servidor por cuestiones de disponibilidad) donde todos los usuarios del dominio tengan permiso de lectura. Adem\u00e1s, se recomienda que la ruta se introduzca en formato UNC del tipo: \\\\server 1\\gestion\\fondocorp.jpg no en formato \\\\192.168.0.100\\gestion\\fondocorp.jpg","title":"Fondo de escritorio obligatorio"},{"location":"Practica08_AD.html#bloqueo-de-la-linea-de-comandos","text":"Para bloquear la l\u00ednea de comandos editaremos el GPO correspondiente accediendo a ' Configuraci\u00f3n del usuario '\u2192' Plantillas administrativas '\u2192' Sistema ' Bloqueo consola. Y habilitamos el bloqueo: Habilitar el bloqueo.","title":"Bloqueo de la l\u00ednea de comandos"},{"location":"Practica08_AD.html#comprobacion-de-las-directivas-establecidas","text":"Ahora comprobaremos que las directivas se han aplicado correctamente. Para ello utilizaremos un usuario cualquiera dentro de la unidad organizativa 'Pistonazo' que es sobre la que se aplican el GPO creado 'Entorno de Trabajo', y obviamente el GPO Default Domain Policy, que hemos editado.","title":"Comprobaci\u00f3n de las directivas establecidas"},{"location":"Practica08_AD.html#longitud-de-la-contrasena_1","text":"Para comprobar la longitud de la contrase\u00f1a, vamos a cambiar la contrase\u00f1a del usuario usucomp1 y vamos a poner una contrase\u00f1a que tenga 5 caracteres, por ejemplo 12345. Restablecer contrase\u00f1a. As\u00ed tambi\u00e9n hemos visto que podemos introducir una contrase\u00f1a sin requisitos de complejidad. Note Ya se podr\u00eda comprobar estas restricciones.","title":"Longitud de la contrase\u00f1a"},{"location":"Practica08_AD.html#actividad","text":"Habr\u00e1 que modificar las siguientes directivas para conseguir: Los usuarios deben cambiar la contrase\u00f1a cada 90 d\u00edas y guardar el historial de 5 contrase\u00f1as. Para facilitar la gesti\u00f3n no ser\u00e1 necesaria tener una restricci\u00f3n en cu\u00e1nto a la complejidad de la contrase\u00f1a y el n\u00famero m\u00ednimo de caracteres ser\u00e1 de 4. Para evitar posibles robos de contrase\u00f1a y ataques mal intencionados, cuando un usuario intenta 4 veces introducir de manera incorrecta su contrase\u00f1a, la cuenta se bloquear\u00e1 hasta que se reestablezca el contador de inicios de sesi\u00f3n err\u00f3neos a los 10minutos. Haced una captura de pantalla de las directivas de contrase\u00f1a y de inicios de sesi\u00f3n.","title":"Actividad"},{"location":"Practica09_AD.html","text":"Permisos, directivas de grupo y perfiles II \u00b6 Objetivos de esta pr\u00e1ctica: Establecimiento de carpetas particulares de los usuarios del dominio. Ejecuci\u00f3n de comandos de inicio de sesi\u00f3n. Configuraci\u00f3n del entorno de trabajo del usuario mediante perfiles. Carpetas Personales \u00b6 Una de las opciones m\u00e1s utilizadas que puede configurarse en la ficha ' Perfiles ' de las propiedades de la cuenta de usuario es el establecimiento de una unidad en red personal para cada usuario a la que \u00fanicamente \u00e9l tiene acceso: Carpeta particular. Para configurarla, basta crear una carpeta a la que se tenga acceso desde la red. Esta carpeta la tenemos creada en el disco c:\\Pistonazo_users y dentro de esta carpeta est\u00e1n las carpetas de cada uno de los usuarios. Bastar\u00e1 asignar la ruta de esa carpeta a cada uno de los usuarios. Por ejemplo, vamos a asignar la unidad Z: a la carpeta personal de cada uno de los usuarios de nuestra organizaci\u00f3n Pistonazo: Carpetas particulares. Asignaremos estas carpetas a cada uno de los usuarios. Para ello desde la pesta\u00f1a perfil: Carpetas particulares. La carpeta del usuario debe ser una carpeta compartida y con permisos de escritura. En nuestro caso utilizaremos las carpetas que creamos en la secci\u00f3n de Permisos NTFS por l\u00ednea de comandos. Creamos una carpeta en C:\\Pistonazo_Users , esta carpeta tiene permisos de acceso el grupo Pistonazo y los Administradores. Por tanto, el recurso \\\\192.168.100.1\\Pistonazo_users\\%username% ser\u00e1 la carpeta de cada uno de los usuarios. La variable %username% sustituye el valor por el identificador de usuario. Carpetas personales ocultas \u00b6 Si quisi\u00e9ramos que las carpetas personales estuvieran ocultas, bastar\u00eda con a\u00f1adir un $ al final del nombre del recurso compartido. En nuestro caso, pod\u00edamos haber compartido el recurso Pistonazo_Users con un $ al final y as\u00ed ocultar las carpetas de usuarios. Pod\u00e9is probar el siguiente script que elimina toda la estructura pistonazo y la regenera con carpetas ocultas asignando las carpetas personales a los usuarios: Pistonazo Completo .BAT \u00b6 REM ELIMINANDO OU PISTONAZO dsrm -subtree -noprompt -c \"ou=Pistonazo, dc=cefire2017, dc=local\" Rem Creaci\u00f3n de Unidades Organizativas dsadd ou \"ou=Pistonazo, dc=cefire2017, dc=local\" FOR /F \"tokens=1-2 delims=, skip=1\" %%a in (secciones.csv) do dsadd ou \"ou=%%a, ou=Pistonazo, dc=cefire2017, dc=local\" -desc \"%%b\" FOR /F \"tokens=1-2 delims=, skip=1\" %%a in (departamentos.csv) do dsadd ou \"ou=%%b, ou=%%a, ou=Pistonazo, dc=cefire2017, dc=local\" -desc \"%%b\" Rem Creacion de grupos dsadd group \"cn=Pistonazo, ou=Pistonazo, dc=cefire2017, dc=local\" FOR /F \"tokens=1-2 delims=, skip=1\" %%a in (secciones.csv) do dsadd group \"cn=%%a, ou=%%a, ou=Pistonazo, dc=cefire2017, dc=local\" -memberof \"cn=Pistonazo, ou=Pistonazo, dc=cefire2017, dc=local\" FOR /F \"tokens=1-2 delims=, skip=1\" %%a in (departamentos.csv) do dsadd group \"cn=%%b, ou=%%b, ou=%%a, ou=Pistonazo, dc=cefire2017, dc=local\" -memberof \"cn=%%a, ou=%%a, ou=Pistonazo, dc=cefire2017, dc=local\" REM Creacion de usuarios FOR /F \"tokens=1-3 delims=, skip=1\" %%a in (personal.csv) do dsadd user \"cn=%%a, ou=%%b, ou=%%c, ou=Pistonazo, dc=cefire2017, dc=local\" -memberof \"cn=%%b, ou=%%b, ou=%%c, ou=Pistonazo, dc=cefire2017, dc=local\" -samid \"%%a\" -upn \"%%a@CEFIRE2017.LOCAL\" -pwd \"cefire2017.\" -fn \"%%a\" - mustchpwd \"yes\" REM Borrando carpetas rmdir c:\\pistonazo REM Creando carpetas mkdir c:\\pistonazo FOR /F \"tokens=1-2 delims=, skip=1\" %%a in (secciones.csv) do mkdir c:\\pistonazo\\%%a FOR /F \"tokens=1-2 delims=, skip=1\" %%a in (departamentos.csv) do mkdir c:\\pistonazo\\%%a\\%%b icacls c:\\Pistonazo /inheritance:r icacls c:\\Pistonazo /GRANT Administradores:(OI)(CI)F icacls c:\\Pistonazo /GRANT Pistonazo:RX FOR /F \"tokens=1-2 delims=, skip=1\" %%a in (secciones.csv) do mkdir c:\\pistonazo\\%%a FOR /F \"tokens=1-2 delims=, skip=1\" %%a in (secciones.csv) do icacls c:\\pistonazo\\%%a /GRANT %%a:RX FOR /F \"tokens=1-2 delims=, skip=1\" %%a in (departamentos.csv) do mkdir c:\\pistonazo\\%%a\\%%b FOR /F \"tokens=1-2 delims=, skip=1\" %%a in (departamentos.csv) do icacls c:\\pistonazo\\%%a\\%%b /GRANT %%b:(OI)(CI)F net share Pistonazo /delete net share Pistonazo=c:\\Pistonazo /grant:Administradores,FULL /grant:Pistonazo,CHANGE mkdir c:\\Pistonazo_users icacls c:\\Pistonazo_users /inheritance:r icacls c:\\Pistonazo_users /grant Administradores:(OI)(CI)F icacls c:\\Pistonazo_users /grant Pistonazo:RX REM Creacion de carpetas de usuarios FOR /F \"tokens=1-3 delims=, skip=1\" %%a in (personal.csv) do mkdir c:\\Pistonazo_users\\%%a FOR /F \"tokens=1-3 delims=, skip=1\" %%a in (personal.csv) do icacls c:\\Pistonazo_users\\%%a /grant %%a:(OI)(CI)F net share Pistonazo_users /delete net share Pistonazo_users$ /delete net share Pistonazo_users$=c:\\Pistonazo_users /grant:Administradores,FULL /grant:Pistonazo,CHANGE FOR /F \"tokens=1-3 delims=, skip=1\" %%a in (personal.csv) do dsmod user \"cn=%%a, ou=%%b, ou=%%c, ou=Pistonazo, dc=cefire2017, dc=local\" -hmdrv Z : -hmdir \"\\\\192.168.100.1\\Pistonazo_users$\\%%a\" Version completa en POWERSHELL (pistonazoCompletoPS.ps1) \u00b6 En PowerShell ser\u00eda: Write-Output \"Creando Estructura de OU y Grupos...\" New-ADOrganizationalUnit -Name \"Pistonazo\" -Path \"DC=CEFIRE2019, DC=LOCAL\" -Description \"Unidad organizativa Pistonazo\" -ProtectedFromAccidentalDeletion $false New-ADGroup -Name \"Pistonazo\" -GroupScope Global -Path \"OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" $secciones = Import-CSV -Path \"./secciones.csv\" $group = Get-ADGroup \"CN=Pistonazo,OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" foreach ($ou in $secciones) { New-ADOrganizationalUnit -Name ($ou.seccion) -Path \"OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" $path=\"OU=\"+($ou.seccion)+\",OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADGroup -Name $ou.seccion -GroupScope Global -Path $path $member = \"CN=\"+($ou.seccion)+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Unidad $($ou.seccion) creada!\" } $departamentos = Import-CSV -Path \"./departamentos.csv\" foreach ($ou in $departamentos) { $path=\"OU=\"+($ou.seccion)+\", OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADOrganizationalUnit -Name ($ou.departamento) -Path $path $path=\"OU=\"+($ou.departamento)+\",OU=\"+$ou.seccion+\",OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADGroup -Name $ou.departamento -GroupScope Global -Path $path $group = Get-ADGroup (\"CN=\"+$ou.seccion+\",OU=\"+$ou.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\") $member = \"CN=\"+($ou.departamento)+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Unidad $($ou.departamento) - $($ou.seccion) creada!\" } $usuarios = Import-CSV -Path \"./personal.csv\" Write-Output \"Creando usuarios....\" foreach ($user in $usuarios) { $login = $user.login $path=\"OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL New-ADUser -Name $login -Path $path -SamAccountName $login -UserPrincipalName ($login+\"@CEFIRE2019.LOCAL\") -AccountPassword (ConvertTo-SecureString \"cefire2019.\" - AsPlainText -Force) -GivenName $login -ChangePasswordAtLogon $true -Enabled $true $group = Get-ADGroup (\"CN=\"+$user.departamento+\",OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,D $member = \"CN=\"+$login+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Usuario $($user.login) creado!\" } Write-Host \"Creamos la estructura de Pistonazo...\" Remove-Item C:\\Pistonazo -Force New-Item C:\\Pistonazo -Type Directory $acl = Get-Acl C:\\Pistonazo $acl.SetAccessRuleProtection($true, $false) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"Administradores\",\"FullControl\", \"ContainerInherit, ObjectInherit\", \"None\", \"Allow\") $acl.AddAccessRule($rule) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"Pistonazo\",\"ReadAndExecute\", \"None\", \"None\", \"Allow\") $acl.AddAccessRule($rule) Set-Acl -path C:\\Pistonazo -AclObject $acl Write-Host \"Asignamos Permisos\" $deps = Import-CSV -Path \"./departamentos.csv\" foreach ($ou in $deps) { New-Item C:\\Pistonazo\\$($ou.seccion)\\$($ou.departamento) -Type Directory -Force $acl = Get-Acl C:\\Pistonazo\\$($ou.seccion) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule($($ou.seccion),\"ReadAndExecute\", \"None\", \"None\", \"Allow\") $acl.AddAccessRule($rule) Set-Acl -path C:\\Pistonazo\\$($ou.seccion) -AclObject $acl $acl = Get-Acl C:\\Pistonazo\\$($ou.seccion)\\$($ou.departamento) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule($($ou.departamento),\"FullControl\", \"ContainerInherit, ObjectInherit\", \"None\", \"Allow\") $acl.AddAccessRule($rule) Set-Acl -path C:\\Pistonazo\\$($ou.seccion)\\\\$($ou.departamento) -AclObject $acl } Write-Host \"Creamos la estructura de Carpetas de Usuarios\" Remove-Item C:\\Pistonazo_users -Force New-Item C:\\Pistonazo_users -Type Directory $acl = Get-Acl C:\\Pistonazo_users $acl.SetAccessRuleProtection($true, $false) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"Administradores\",\"FullControl\", \"ContainerInherit, ObjectInherit\", \"None\", \"Allow\") $acl.AddAccessRule($rule) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"Pistonazo\",\"ReadAndExecute\", \"None\", \"None\", \"Allow\") $acl.AddAccessRule($rule) Set-Acl -path C:\\Pistonazo_users -AclObject $acl $usuarios = Import-CSV -Path \"./personal.csv\" Write-Output \"Creando carpetas de usuarios....\" foreach ($user in $usuarios) { $login = $user.login New-Item C:\\Pistonazo_users\\$($user.login) -Type Directory $acl = Get-Acl C:\\Pistonazo_users\\$($user.login) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule($($user.login),\"FullControl\", \"ContainerInherit, ObjectInherit\", \"None\", \"Allow\") $acl.AddAccessRule($rule) Set-Acl -path C:\\Pistonazo_users\\$($user.login) -AclObject $acl } New-SmbShare -Name Pistonazo_Users$ -Path c:\\Pistonazo_Users -ChangeAccess Pistonazo - FullAccess Administradores New-SmbShare -Name Pistonazo -Path c:\\Pistonazo -ChangeAccess Pistonazo -FullAccess Administradores $usuarios = Import-CSV -Path \"./personal.csv\" Write-Output \"Modificando atributos de usuarios....\" foreach ($user in $usuarios) { $userObj = \"CN=\"+$user.login+\",OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,DC=CEFIRE $usuario = Get-ADUser -Identity $userObj Set-ADUser -Identity $usuario -ScriptPath \"Pistonazo2.bat\" -HomeDrive \"Z:\" - HomeDirectory \"\\\\192.168.100.1\\Pistonazo_users$\\$($user.login)\" Write-Output \"Usuario $usuario encontrado!\" } Comandos de inicio de sesi\u00f3n \u00b6 Otra opci\u00f3n que podemos configurar dentro de la ficha perfil consiste en indicar un script que se ejecutar\u00e1 en cada inicio de sesi\u00f3n de manera autom\u00e1tica y transparente al usuario. Para ello desde la pesta\u00f1a perfil del usuario accedemos a Script de inicio de sesi\u00f3n: Script de inicio de sesi\u00f3n. Estos scripts deben hallarse en la carpeta compartida NETLOGON, cuya direcci\u00f3n local en el controlador de dominio es: C:\\Windows\\SYSVOL\\sysvolCEFIRE2017.LOCAL\\scripts . En este caso concreto, la direcci\u00f3n local y la direcci\u00f3n en red ser\u00edan respectivamente: Ruta Netlogon. Crearemos en esta carpeta un fichero llamado pistonazo.bat. Que ser\u00e1 donde a\u00f1adamos los comandos que queremos que se ejecuten cuando un usuario inicie la sesi\u00f3n: Fichero pistonazo.bat Hay que tener en cuenta que por defecto est\u00e1n las extensiones de archivo ocultas. Para evitar confusiones con los archivos, vamos a marcar que nos muestre las extensiones de los archivos. Para ello seleccionamos Vista y marcamos extensiones de archivo: Marcar extensiones de archivos en Netlogon Ejemplos de scripts de inicio de sesi\u00f3n: Asignaci\u00f3n de unidad de red \u00b6 Vamos a hacer que se monte de manera autom\u00e1tica la unidad P: que ser\u00e1 la unidad donde se encuentren las carpetas de los departamentos de los usuarios de la organizaci\u00f3n Pistonazo. Para ello, a\u00f1adiremos a nuestro script, el comando Net Use P:\\192.168.100.1\\Pistonazo Pistonazo.bat Ahora lo que haremos ser\u00e1 modificar el campo Script de inicio de sesi\u00f3n a los usuarios de la organizaci\u00f3n Pistonazo. Podemos a\u00f1adir a nuestro script el siguiente comando: FOR /F \"tokens=1-3 delims=, skip=1\" %%a in (personal.csv) do dsmod user \"cn=%%a, ou=%%b, ou=%%c, ou=Pistonazo, dc=cefire2017, dc=local\" -loscr \"pistonazo.bat\" Tambi\u00e9n podemos ejecutar el siguiente comando desde la l\u00ednea de comandos: dsmod user \"OU=Pistonazo, DC=CEFIRE2017, DC=LOCAL\" | dsmod user -loscr \"Pistonazo.bat\" dsmod user para modificar el script de inicio Esto habr\u00e1 modificado el campo Script de inicio de sesi\u00f3n de nuestros usuarios de la organizaci\u00f3n de Pistonazo: Script de inicio de sesi\u00f3n Y ahora si iniciamos sesi\u00f3n con alguno de los usuarios de Pistonazo, veremos que nos habr\u00e1 a\u00f1adido una nueva unidad de red, la unidad P: que conectar\u00e1 a la estructura de Pistonazo que se encuentra en el servidor: Unidad de red Pistonazo Ejemplos de scripts de inicio de sesi\u00f3n: Asignaci\u00f3n de unidad de red \u00b6 Supongamos que queremos enviar un mensaje a los usuarios cuando se conecten al sistema. Suele ser habitual enviar mensajes del tipo 'Guarda los datos en red' o 'No instales software sin permiso del administrador', o simplemente avisar de paradas planeadas en el sistema. Para enviar este tipo de mensajes autom\u00e1ticamente cuando el usuario inicia sesi\u00f3n podemos utilizar el comando msg dentro del fichero de comandos de inicio de sesi\u00f3n que hemos creado en el punto anterior: if NOT EXIST P : net use P : \\\\192.168.100.1\\Pistonazo msg %username% Recuerda guardar los datos en las unidades Z : o P : Mensajes de aviso a usuarios Perfiles \u00b6 Podemos definir un perfil como aquellos aspectos de configuraci\u00f3n del equipo y del entorno de trabajo propios del usuario y que adem\u00e1s son exportables a otras m\u00e1quinas de manera transparente al mismo. En otras palabras, mediante los perfiles conseguimos que el usuario independientemente del equipo en el que inicie la sesi\u00f3n disponga de un entorno de trabajo similar. Todo esto se entender\u00e1 mejor con los ejemplos preparados en las secciones siguientes. Existen tres tipos de perfiles: Perfiles locales : se almacenan en el equipo, y configuran el entorno de trabajo de cada usuario. No los abordaremos en este curso ya que lo que nos interesa es la gesti\u00f3n centralizada de recursos. Perfiles m\u00f3viles : el usuario configura el entorno de trabajo a su gusto en un equipo, y al iniciar sesi\u00f3n en cualquier otra estaci\u00f3n de trabajo, la configuraci\u00f3n se importa y aplica a ese nuevo equipo. Abordaremos este tipo de perfiles m\u00e1s adelante. Perfiles obligatorios : un usuario con permisos de administraci\u00f3n define la configuraci\u00f3n del entorno de trabajo, y se aplica a los usuarios del dominio. Estos pueden modificarla durante la sesi\u00f3n, pero al iniciar otra sesi\u00f3n, se vuelve a cargar la configuraci\u00f3n del perfil obligatorio. En lugar de trabajar con perfiles obligatorios, en el apartado anterior hemos visto c\u00f3mo configurar entornos de trabajo definidos para los miembros de una unidad organizativa de una manera m\u00e1s c\u00f3moda y potente. Perfiles m\u00f3viles \u00b6 Como se ha comentado en el apartado anterior, los perfiles consisten en una serie de ficheros de configuraci\u00f3n del entorno de trabajo, que se aplican a todos los equipos de la red desde donde pueda iniciar sesi\u00f3n el usuario. Estos ficheros de configuraci\u00f3n deben almacenarse en una ubicaci\u00f3n accesible por los equipos clientes, como por ejemplo el controlador de dominio. Concretamente, almacenaremos los perfiles en una carpeta de perfil. Esta carpeta de perfil la crearemos dentro de las carpetas particulares de los usuarios. Por ejemplo, vamos a hacer que los usuarios del departamento Gesti\u00f3n tengan un perfil m\u00f3vil: Perfil m\u00f3vil para usuarios de departamento Gesti\u00f3n Esto har\u00e1 que estos usuarios cuando inicien sesi\u00f3n en alguna de las m\u00e1quinas cliente de nuestro dominio, recupere todo su perfil de la carpeta personal del usuario. Para ello, vamos a modificar el siguiente campo de la pesta\u00f1a perfil: Perfil m\u00f3vil usuario usudir1 Y estableceremos la ruta de acceso al perfil. En nuestro caso, vamos a establecer la ruta de acceso al perfil m\u00f3vil, dentro de la carpeta personal del usuario. Por tanto, seleccionaremos los dos usuarios y con el bot\u00f3n de la derecha del rat\u00f3n: Perfil m\u00f3vil usuarios gestion Y para la ruta del perfil m\u00f3vil estableceremos la siguiente direcci\u00f3n: \\\\192.168.100.1\\Pistonazo_users$\\%username%\\perfil De esta forma cuando alg\u00fan usuario de Gesti\u00f3n inicie sesi\u00f3n, se crear\u00e1 en la carpeta personal su perfil. As\u00ed independientemente del equipo donde se conecte, siempre tendr\u00e1 la informaci\u00f3n: Creaci\u00f3n de carpeta de perfil m\u00f3vil Warning Carga en red Perfil M\u00f3vil : Hay que tener en cuenta de que cuando un usuario con perfil m\u00f3vil inicia la sesi\u00f3n, la informaci\u00f3n del servidor se copia al cliente. Cuando cierra la sesi\u00f3n se realiza la operaci\u00f3n inversa. Un alto n\u00famero de usuario con perfil m\u00f3vil puede sobrecargar la red demasiado. Por tanto, hay que saber exactamente en qu\u00e9 usuarios debemos aplicar esta caracter\u00edstica. Actividades \u00b6 En esta actividad, vamos a seguir con la organizaci\u00f3n de vuestra empresa. La que realizasteis en la pr\u00e1ctica anterior: Un supuesto ejemplo de empresa: Estructura Empresa Crear la estructura de carpetas en disco y definir los siguientes permisos: Se puede seguir el siguiente ejemplo: A la carpeta principal Empresa, s\u00f3lo podr\u00e1n acceder los miembros del grupo Empresa. En esta carpeta solo tendr\u00e1n acceso de lectura. Cada departamento podr\u00e1 entrar en su carpeta con permisos de control total y no podr\u00e1 acceder al resto de departamentos de la empresa. Estructura de carpetas Empresa Crear tambi\u00e9n la estructura para almacenar las carpetas particulares de los usuarios. Por ejemplo en C:\\Empresa_users Carpeta de usuarios Cuando un usuario inicie sesi\u00f3n, conectar\u00e1 de manera autom\u00e1tica la carpeta personal en la unidad X: y la carpeta de empresas en la unidad Y: Inicio sesi\u00f3n usuario Empresa Para esta actividad hay que utilizar los scripts pistonazoCompleto.bat | pistonazoCompletoPS.ps1 ; Note Se debe adaptadar a la actividad y explicar cada parte del script. En esta actividad se entregar\u00e1 un script.ps1 y script.bat con las \u00f3rdenes para crear las carpetas de los departamentos, las carpetas de los usuarios y los permisos correspondientes. Tambi\u00e9n un informe con una captura de pantalla con las unidades de red montadas de un usuario.","title":"Permisos, directivas de grupo y perfiles II"},{"location":"Practica09_AD.html#permisos-directivas-de-grupo-y-perfiles-ii","text":"Objetivos de esta pr\u00e1ctica: Establecimiento de carpetas particulares de los usuarios del dominio. Ejecuci\u00f3n de comandos de inicio de sesi\u00f3n. Configuraci\u00f3n del entorno de trabajo del usuario mediante perfiles.","title":"Permisos, directivas de grupo y perfiles II"},{"location":"Practica09_AD.html#carpetas-personales","text":"Una de las opciones m\u00e1s utilizadas que puede configurarse en la ficha ' Perfiles ' de las propiedades de la cuenta de usuario es el establecimiento de una unidad en red personal para cada usuario a la que \u00fanicamente \u00e9l tiene acceso: Carpeta particular. Para configurarla, basta crear una carpeta a la que se tenga acceso desde la red. Esta carpeta la tenemos creada en el disco c:\\Pistonazo_users y dentro de esta carpeta est\u00e1n las carpetas de cada uno de los usuarios. Bastar\u00e1 asignar la ruta de esa carpeta a cada uno de los usuarios. Por ejemplo, vamos a asignar la unidad Z: a la carpeta personal de cada uno de los usuarios de nuestra organizaci\u00f3n Pistonazo: Carpetas particulares. Asignaremos estas carpetas a cada uno de los usuarios. Para ello desde la pesta\u00f1a perfil: Carpetas particulares. La carpeta del usuario debe ser una carpeta compartida y con permisos de escritura. En nuestro caso utilizaremos las carpetas que creamos en la secci\u00f3n de Permisos NTFS por l\u00ednea de comandos. Creamos una carpeta en C:\\Pistonazo_Users , esta carpeta tiene permisos de acceso el grupo Pistonazo y los Administradores. Por tanto, el recurso \\\\192.168.100.1\\Pistonazo_users\\%username% ser\u00e1 la carpeta de cada uno de los usuarios. La variable %username% sustituye el valor por el identificador de usuario.","title":"Carpetas Personales"},{"location":"Practica09_AD.html#carpetas-personales-ocultas","text":"Si quisi\u00e9ramos que las carpetas personales estuvieran ocultas, bastar\u00eda con a\u00f1adir un $ al final del nombre del recurso compartido. En nuestro caso, pod\u00edamos haber compartido el recurso Pistonazo_Users con un $ al final y as\u00ed ocultar las carpetas de usuarios. Pod\u00e9is probar el siguiente script que elimina toda la estructura pistonazo y la regenera con carpetas ocultas asignando las carpetas personales a los usuarios:","title":"Carpetas personales ocultas"},{"location":"Practica09_AD.html#version-completa-en-powershell-pistonazocompletopsps1","text":"En PowerShell ser\u00eda: Write-Output \"Creando Estructura de OU y Grupos...\" New-ADOrganizationalUnit -Name \"Pistonazo\" -Path \"DC=CEFIRE2019, DC=LOCAL\" -Description \"Unidad organizativa Pistonazo\" -ProtectedFromAccidentalDeletion $false New-ADGroup -Name \"Pistonazo\" -GroupScope Global -Path \"OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" $secciones = Import-CSV -Path \"./secciones.csv\" $group = Get-ADGroup \"CN=Pistonazo,OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\" foreach ($ou in $secciones) { New-ADOrganizationalUnit -Name ($ou.seccion) -Path \"OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" $path=\"OU=\"+($ou.seccion)+\",OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADGroup -Name $ou.seccion -GroupScope Global -Path $path $member = \"CN=\"+($ou.seccion)+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Unidad $($ou.seccion) creada!\" } $departamentos = Import-CSV -Path \"./departamentos.csv\" foreach ($ou in $departamentos) { $path=\"OU=\"+($ou.seccion)+\", OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADOrganizationalUnit -Name ($ou.departamento) -Path $path $path=\"OU=\"+($ou.departamento)+\",OU=\"+$ou.seccion+\",OU=Pistonazo, DC=CEFIRE2019, DC=LOCAL\" New-ADGroup -Name $ou.departamento -GroupScope Global -Path $path $group = Get-ADGroup (\"CN=\"+$ou.seccion+\",OU=\"+$ou.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL\") $member = \"CN=\"+($ou.departamento)+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Unidad $($ou.departamento) - $($ou.seccion) creada!\" } $usuarios = Import-CSV -Path \"./personal.csv\" Write-Output \"Creando usuarios....\" foreach ($user in $usuarios) { $login = $user.login $path=\"OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,DC=CEFIRE2019,DC=LOCAL New-ADUser -Name $login -Path $path -SamAccountName $login -UserPrincipalName ($login+\"@CEFIRE2019.LOCAL\") -AccountPassword (ConvertTo-SecureString \"cefire2019.\" - AsPlainText -Force) -GivenName $login -ChangePasswordAtLogon $true -Enabled $true $group = Get-ADGroup (\"CN=\"+$user.departamento+\",OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,D $member = \"CN=\"+$login+\",\"+$path Add-ADGroupMember $group -Members $member Write-Output \"Usuario $($user.login) creado!\" } Write-Host \"Creamos la estructura de Pistonazo...\" Remove-Item C:\\Pistonazo -Force New-Item C:\\Pistonazo -Type Directory $acl = Get-Acl C:\\Pistonazo $acl.SetAccessRuleProtection($true, $false) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"Administradores\",\"FullControl\", \"ContainerInherit, ObjectInherit\", \"None\", \"Allow\") $acl.AddAccessRule($rule) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"Pistonazo\",\"ReadAndExecute\", \"None\", \"None\", \"Allow\") $acl.AddAccessRule($rule) Set-Acl -path C:\\Pistonazo -AclObject $acl Write-Host \"Asignamos Permisos\" $deps = Import-CSV -Path \"./departamentos.csv\" foreach ($ou in $deps) { New-Item C:\\Pistonazo\\$($ou.seccion)\\$($ou.departamento) -Type Directory -Force $acl = Get-Acl C:\\Pistonazo\\$($ou.seccion) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule($($ou.seccion),\"ReadAndExecute\", \"None\", \"None\", \"Allow\") $acl.AddAccessRule($rule) Set-Acl -path C:\\Pistonazo\\$($ou.seccion) -AclObject $acl $acl = Get-Acl C:\\Pistonazo\\$($ou.seccion)\\$($ou.departamento) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule($($ou.departamento),\"FullControl\", \"ContainerInherit, ObjectInherit\", \"None\", \"Allow\") $acl.AddAccessRule($rule) Set-Acl -path C:\\Pistonazo\\$($ou.seccion)\\\\$($ou.departamento) -AclObject $acl } Write-Host \"Creamos la estructura de Carpetas de Usuarios\" Remove-Item C:\\Pistonazo_users -Force New-Item C:\\Pistonazo_users -Type Directory $acl = Get-Acl C:\\Pistonazo_users $acl.SetAccessRuleProtection($true, $false) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"Administradores\",\"FullControl\", \"ContainerInherit, ObjectInherit\", \"None\", \"Allow\") $acl.AddAccessRule($rule) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"Pistonazo\",\"ReadAndExecute\", \"None\", \"None\", \"Allow\") $acl.AddAccessRule($rule) Set-Acl -path C:\\Pistonazo_users -AclObject $acl $usuarios = Import-CSV -Path \"./personal.csv\" Write-Output \"Creando carpetas de usuarios....\" foreach ($user in $usuarios) { $login = $user.login New-Item C:\\Pistonazo_users\\$($user.login) -Type Directory $acl = Get-Acl C:\\Pistonazo_users\\$($user.login) $rule = New-Object System.Security.AccessControl.FileSystemAccessRule($($user.login),\"FullControl\", \"ContainerInherit, ObjectInherit\", \"None\", \"Allow\") $acl.AddAccessRule($rule) Set-Acl -path C:\\Pistonazo_users\\$($user.login) -AclObject $acl } New-SmbShare -Name Pistonazo_Users$ -Path c:\\Pistonazo_Users -ChangeAccess Pistonazo - FullAccess Administradores New-SmbShare -Name Pistonazo -Path c:\\Pistonazo -ChangeAccess Pistonazo -FullAccess Administradores $usuarios = Import-CSV -Path \"./personal.csv\" Write-Output \"Modificando atributos de usuarios....\" foreach ($user in $usuarios) { $userObj = \"CN=\"+$user.login+\",OU=\"+$user.departamento+\",OU=\"+$user.seccion+\",OU=Pistonazo,DC=CEFIRE $usuario = Get-ADUser -Identity $userObj Set-ADUser -Identity $usuario -ScriptPath \"Pistonazo2.bat\" -HomeDrive \"Z:\" - HomeDirectory \"\\\\192.168.100.1\\Pistonazo_users$\\$($user.login)\" Write-Output \"Usuario $usuario encontrado!\" }","title":"Version completa en POWERSHELL (pistonazoCompletoPS.ps1)"},{"location":"Practica09_AD.html#comandos-de-inicio-de-sesion","text":"Otra opci\u00f3n que podemos configurar dentro de la ficha perfil consiste en indicar un script que se ejecutar\u00e1 en cada inicio de sesi\u00f3n de manera autom\u00e1tica y transparente al usuario. Para ello desde la pesta\u00f1a perfil del usuario accedemos a Script de inicio de sesi\u00f3n: Script de inicio de sesi\u00f3n. Estos scripts deben hallarse en la carpeta compartida NETLOGON, cuya direcci\u00f3n local en el controlador de dominio es: C:\\Windows\\SYSVOL\\sysvolCEFIRE2017.LOCAL\\scripts . En este caso concreto, la direcci\u00f3n local y la direcci\u00f3n en red ser\u00edan respectivamente: Ruta Netlogon. Crearemos en esta carpeta un fichero llamado pistonazo.bat. Que ser\u00e1 donde a\u00f1adamos los comandos que queremos que se ejecuten cuando un usuario inicie la sesi\u00f3n: Fichero pistonazo.bat Hay que tener en cuenta que por defecto est\u00e1n las extensiones de archivo ocultas. Para evitar confusiones con los archivos, vamos a marcar que nos muestre las extensiones de los archivos. Para ello seleccionamos Vista y marcamos extensiones de archivo: Marcar extensiones de archivos en Netlogon","title":"Comandos de inicio de sesi\u00f3n"},{"location":"Practica09_AD.html#ejemplos-de-scripts-de-inicio-de-sesion-asignacion-de-unidad-de-red","text":"Vamos a hacer que se monte de manera autom\u00e1tica la unidad P: que ser\u00e1 la unidad donde se encuentren las carpetas de los departamentos de los usuarios de la organizaci\u00f3n Pistonazo. Para ello, a\u00f1adiremos a nuestro script, el comando Net Use P:\\192.168.100.1\\Pistonazo Pistonazo.bat Ahora lo que haremos ser\u00e1 modificar el campo Script de inicio de sesi\u00f3n a los usuarios de la organizaci\u00f3n Pistonazo. Podemos a\u00f1adir a nuestro script el siguiente comando: FOR /F \"tokens=1-3 delims=, skip=1\" %%a in (personal.csv) do dsmod user \"cn=%%a, ou=%%b, ou=%%c, ou=Pistonazo, dc=cefire2017, dc=local\" -loscr \"pistonazo.bat\" Tambi\u00e9n podemos ejecutar el siguiente comando desde la l\u00ednea de comandos: dsmod user \"OU=Pistonazo, DC=CEFIRE2017, DC=LOCAL\" | dsmod user -loscr \"Pistonazo.bat\" dsmod user para modificar el script de inicio Esto habr\u00e1 modificado el campo Script de inicio de sesi\u00f3n de nuestros usuarios de la organizaci\u00f3n de Pistonazo: Script de inicio de sesi\u00f3n Y ahora si iniciamos sesi\u00f3n con alguno de los usuarios de Pistonazo, veremos que nos habr\u00e1 a\u00f1adido una nueva unidad de red, la unidad P: que conectar\u00e1 a la estructura de Pistonazo que se encuentra en el servidor: Unidad de red Pistonazo","title":"Ejemplos de scripts de inicio de sesi\u00f3n: Asignaci\u00f3n de unidad de red"},{"location":"Practica09_AD.html#ejemplos-de-scripts-de-inicio-de-sesion-asignacion-de-unidad-de-red_1","text":"Supongamos que queremos enviar un mensaje a los usuarios cuando se conecten al sistema. Suele ser habitual enviar mensajes del tipo 'Guarda los datos en red' o 'No instales software sin permiso del administrador', o simplemente avisar de paradas planeadas en el sistema. Para enviar este tipo de mensajes autom\u00e1ticamente cuando el usuario inicia sesi\u00f3n podemos utilizar el comando msg dentro del fichero de comandos de inicio de sesi\u00f3n que hemos creado en el punto anterior: if NOT EXIST P : net use P : \\\\192.168.100.1\\Pistonazo msg %username% Recuerda guardar los datos en las unidades Z : o P : Mensajes de aviso a usuarios","title":"Ejemplos de scripts de inicio de sesi\u00f3n: Asignaci\u00f3n de unidad de red"},{"location":"Practica09_AD.html#perfiles","text":"Podemos definir un perfil como aquellos aspectos de configuraci\u00f3n del equipo y del entorno de trabajo propios del usuario y que adem\u00e1s son exportables a otras m\u00e1quinas de manera transparente al mismo. En otras palabras, mediante los perfiles conseguimos que el usuario independientemente del equipo en el que inicie la sesi\u00f3n disponga de un entorno de trabajo similar. Todo esto se entender\u00e1 mejor con los ejemplos preparados en las secciones siguientes. Existen tres tipos de perfiles: Perfiles locales : se almacenan en el equipo, y configuran el entorno de trabajo de cada usuario. No los abordaremos en este curso ya que lo que nos interesa es la gesti\u00f3n centralizada de recursos. Perfiles m\u00f3viles : el usuario configura el entorno de trabajo a su gusto en un equipo, y al iniciar sesi\u00f3n en cualquier otra estaci\u00f3n de trabajo, la configuraci\u00f3n se importa y aplica a ese nuevo equipo. Abordaremos este tipo de perfiles m\u00e1s adelante. Perfiles obligatorios : un usuario con permisos de administraci\u00f3n define la configuraci\u00f3n del entorno de trabajo, y se aplica a los usuarios del dominio. Estos pueden modificarla durante la sesi\u00f3n, pero al iniciar otra sesi\u00f3n, se vuelve a cargar la configuraci\u00f3n del perfil obligatorio. En lugar de trabajar con perfiles obligatorios, en el apartado anterior hemos visto c\u00f3mo configurar entornos de trabajo definidos para los miembros de una unidad organizativa de una manera m\u00e1s c\u00f3moda y potente.","title":"Perfiles"},{"location":"Practica09_AD.html#perfiles-moviles","text":"Como se ha comentado en el apartado anterior, los perfiles consisten en una serie de ficheros de configuraci\u00f3n del entorno de trabajo, que se aplican a todos los equipos de la red desde donde pueda iniciar sesi\u00f3n el usuario. Estos ficheros de configuraci\u00f3n deben almacenarse en una ubicaci\u00f3n accesible por los equipos clientes, como por ejemplo el controlador de dominio. Concretamente, almacenaremos los perfiles en una carpeta de perfil. Esta carpeta de perfil la crearemos dentro de las carpetas particulares de los usuarios. Por ejemplo, vamos a hacer que los usuarios del departamento Gesti\u00f3n tengan un perfil m\u00f3vil: Perfil m\u00f3vil para usuarios de departamento Gesti\u00f3n Esto har\u00e1 que estos usuarios cuando inicien sesi\u00f3n en alguna de las m\u00e1quinas cliente de nuestro dominio, recupere todo su perfil de la carpeta personal del usuario. Para ello, vamos a modificar el siguiente campo de la pesta\u00f1a perfil: Perfil m\u00f3vil usuario usudir1 Y estableceremos la ruta de acceso al perfil. En nuestro caso, vamos a establecer la ruta de acceso al perfil m\u00f3vil, dentro de la carpeta personal del usuario. Por tanto, seleccionaremos los dos usuarios y con el bot\u00f3n de la derecha del rat\u00f3n: Perfil m\u00f3vil usuarios gestion Y para la ruta del perfil m\u00f3vil estableceremos la siguiente direcci\u00f3n: \\\\192.168.100.1\\Pistonazo_users$\\%username%\\perfil De esta forma cuando alg\u00fan usuario de Gesti\u00f3n inicie sesi\u00f3n, se crear\u00e1 en la carpeta personal su perfil. As\u00ed independientemente del equipo donde se conecte, siempre tendr\u00e1 la informaci\u00f3n: Creaci\u00f3n de carpeta de perfil m\u00f3vil Warning Carga en red Perfil M\u00f3vil : Hay que tener en cuenta de que cuando un usuario con perfil m\u00f3vil inicia la sesi\u00f3n, la informaci\u00f3n del servidor se copia al cliente. Cuando cierra la sesi\u00f3n se realiza la operaci\u00f3n inversa. Un alto n\u00famero de usuario con perfil m\u00f3vil puede sobrecargar la red demasiado. Por tanto, hay que saber exactamente en qu\u00e9 usuarios debemos aplicar esta caracter\u00edstica.","title":"Perfiles m\u00f3viles"},{"location":"Practica09_AD.html#actividades","text":"En esta actividad, vamos a seguir con la organizaci\u00f3n de vuestra empresa. La que realizasteis en la pr\u00e1ctica anterior: Un supuesto ejemplo de empresa: Estructura Empresa Crear la estructura de carpetas en disco y definir los siguientes permisos: Se puede seguir el siguiente ejemplo: A la carpeta principal Empresa, s\u00f3lo podr\u00e1n acceder los miembros del grupo Empresa. En esta carpeta solo tendr\u00e1n acceso de lectura. Cada departamento podr\u00e1 entrar en su carpeta con permisos de control total y no podr\u00e1 acceder al resto de departamentos de la empresa. Estructura de carpetas Empresa Crear tambi\u00e9n la estructura para almacenar las carpetas particulares de los usuarios. Por ejemplo en C:\\Empresa_users Carpeta de usuarios Cuando un usuario inicie sesi\u00f3n, conectar\u00e1 de manera autom\u00e1tica la carpeta personal en la unidad X: y la carpeta de empresas en la unidad Y: Inicio sesi\u00f3n usuario Empresa Para esta actividad hay que utilizar los scripts pistonazoCompleto.bat | pistonazoCompletoPS.ps1 ; Note Se debe adaptadar a la actividad y explicar cada parte del script. En esta actividad se entregar\u00e1 un script.ps1 y script.bat con las \u00f3rdenes para crear las carpetas de los departamentos, las carpetas de los usuarios y los permisos correspondientes. Tambi\u00e9n un informe con una captura de pantalla con las unidades de red montadas de un usuario.","title":"Actividades"},{"location":"Practica10_PWSH_Cron.html","text":"Scripts PowerShell con tareas programadas en Windows Server \u00b6 En esta pr\u00e1ctica vamos a ver un ejemplo de como ejecutar scripts de PowerShell con tareas programadas en Windows Server y poder as\u00ed automatizar tareas. Puentos a realizar: La Pr\u00e1ctica esta realizada en un Windows Server 2016, se trata de adaptar la pr\u00e1ctica a un Windows Server 2019. Generar varios temporales con los datos que se quiera, para comprobar que se eliminan con el Powershell, (la condici\u00f3n de eliminaci\u00f3n habr\u00e1 que modificarla para que elimine temporales seg\u00fan las ultimas horas o minutos en los que hayais realizado la pr\u00e1ctica). Realizar un nuevo informe con las capturas destacables de la pr\u00e1ctica. A continuaci\u00f3n el Ejemplo : Para empezar se muestra un script realizado en PowerShell, llamado \"eliminarfiles.ps1\", cuya funci\u00f3n ser\u00e1 eliminar los ficheros de un directorio que tengan m\u00e1s de 7 d\u00edas: Poweshell eliminarfiles.ps1 A continuaci\u00f3n el directorio que se ha introducido en el script, y se pueden ver los archivos que debe eliminar y los que tiene que dejar: Archivos a eliminar Ahora se abre el \" Programador de tareas \", a trav\u00e9s del Administrador del servidor: Programador de tareas Se crea una carpeta llamada \" PoweShell \": Creaci\u00f3n carpeta PowerShell I Creaci\u00f3n carpeta PowerShell II A continuaci\u00f3n dentro de esta carpeta se crea una tarea: Creaci\u00f3n tarea I Se abre el siguiente asistente, y sobre la pesta\u00f1a \" General \" se configura, un nombre y una descripci\u00f3n para la tarea, que ejecute la tarea con la cuenta de Administrador y la configuramos para Windows Server: Sobre la pesta\u00f1a \" Desencadenadores \" se programarla tarea, para que la realice todos los Domingos a las 16:00 horas: Configuraci\u00f3n Desencadenador I Configuraci\u00f3n Desencadenador II Sobre la pesta\u00f1a \" Acciones \" se indica que inicie un PowerShell y ejecute el script que se ha mostrado anteriormente y que elimina los ficheros con m\u00e1s de 7 d\u00edas: Configuraci\u00f3n Acciones I Configuraci\u00f3n Acciones II A continuaci\u00f3n se pregunta si queremos ejecutar el programa \"PowerShell\" con los siguientes argumentos, le indicamos que \"S\u00ed\": Configuraci\u00f3n Acciones III Se quedar\u00eda de la siguiente manera: Las \"Condiciones\" y \"Configuraci\u00f3n\" se dejan por defecto: Se podr\u00eda comprobar que la tarea esta programada: Comprobaci\u00f3n tarea programada Se habilita el \" Historial de todas las tareas \": Habilitar Historial de todas las tareas Se ejecuta la tarea manualmente y para verificar que ha eliminado los ficheros con m\u00e1s de 7 d\u00edas: Ejecuci\u00f3n tarea manualmente Se puede observar que la tarea se ha completado correctamente y sobre el \"Historial\" podemos ver los logs de la tarea: Comprobaci\u00f3n de la ejecuci\u00f3n Se puede ver que se ha eliminado los ficheros del directorio indicado en el script superiores a 7 d\u00edas: Comprobaci\u00f3n de la ejecuci\u00f3n","title":"Practica10 PWSH Cron"},{"location":"Practica10_PWSH_Cron.html#scripts-powershell-con-tareas-programadas-en-windows-server","text":"En esta pr\u00e1ctica vamos a ver un ejemplo de como ejecutar scripts de PowerShell con tareas programadas en Windows Server y poder as\u00ed automatizar tareas. Puentos a realizar: La Pr\u00e1ctica esta realizada en un Windows Server 2016, se trata de adaptar la pr\u00e1ctica a un Windows Server 2019. Generar varios temporales con los datos que se quiera, para comprobar que se eliminan con el Powershell, (la condici\u00f3n de eliminaci\u00f3n habr\u00e1 que modificarla para que elimine temporales seg\u00fan las ultimas horas o minutos en los que hayais realizado la pr\u00e1ctica). Realizar un nuevo informe con las capturas destacables de la pr\u00e1ctica. A continuaci\u00f3n el Ejemplo : Para empezar se muestra un script realizado en PowerShell, llamado \"eliminarfiles.ps1\", cuya funci\u00f3n ser\u00e1 eliminar los ficheros de un directorio que tengan m\u00e1s de 7 d\u00edas: Poweshell eliminarfiles.ps1 A continuaci\u00f3n el directorio que se ha introducido en el script, y se pueden ver los archivos que debe eliminar y los que tiene que dejar: Archivos a eliminar Ahora se abre el \" Programador de tareas \", a trav\u00e9s del Administrador del servidor: Programador de tareas Se crea una carpeta llamada \" PoweShell \": Creaci\u00f3n carpeta PowerShell I Creaci\u00f3n carpeta PowerShell II A continuaci\u00f3n dentro de esta carpeta se crea una tarea: Creaci\u00f3n tarea I Se abre el siguiente asistente, y sobre la pesta\u00f1a \" General \" se configura, un nombre y una descripci\u00f3n para la tarea, que ejecute la tarea con la cuenta de Administrador y la configuramos para Windows Server: Sobre la pesta\u00f1a \" Desencadenadores \" se programarla tarea, para que la realice todos los Domingos a las 16:00 horas: Configuraci\u00f3n Desencadenador I Configuraci\u00f3n Desencadenador II Sobre la pesta\u00f1a \" Acciones \" se indica que inicie un PowerShell y ejecute el script que se ha mostrado anteriormente y que elimina los ficheros con m\u00e1s de 7 d\u00edas: Configuraci\u00f3n Acciones I Configuraci\u00f3n Acciones II A continuaci\u00f3n se pregunta si queremos ejecutar el programa \"PowerShell\" con los siguientes argumentos, le indicamos que \"S\u00ed\": Configuraci\u00f3n Acciones III Se quedar\u00eda de la siguiente manera: Las \"Condiciones\" y \"Configuraci\u00f3n\" se dejan por defecto: Se podr\u00eda comprobar que la tarea esta programada: Comprobaci\u00f3n tarea programada Se habilita el \" Historial de todas las tareas \": Habilitar Historial de todas las tareas Se ejecuta la tarea manualmente y para verificar que ha eliminado los ficheros con m\u00e1s de 7 d\u00edas: Ejecuci\u00f3n tarea manualmente Se puede observar que la tarea se ha completado correctamente y sobre el \"Historial\" podemos ver los logs de la tarea: Comprobaci\u00f3n de la ejecuci\u00f3n Se puede ver que se ha eliminado los ficheros del directorio indicado en el script superiores a 7 d\u00edas: Comprobaci\u00f3n de la ejecuci\u00f3n","title":"Scripts PowerShell con tareas programadas en Windows Server"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html","text":"Pr\u00e1ctica 11 - Configuraci\u00f3n de un servicio de acceso remoto mediante OpenSSH \u00b6 Instalaci\u00f3n del servicio \u00b6 Llevaremos a cabo la instalaci\u00f3n del servicio mediante el gestor de paquetes del sistema operativo. $ apt install openssh-server Una vez instalado, sin necesidad de configurar nada, ya es posible acceder v\u00eda ssh utilizando un cliente GNU/ linux . El comando m\u00e1s com\u00fan para llevar a cabo esta acci\u00f3n es: $ ssh usuario @ip_de_la_maquina A continuaci\u00f3n nos pedir\u00e1 la contrase\u00f1a del usuario entraremos en el sistema. Para gestionar el demonio del sshd utilizaremos systemctl o su correspondiente service $ systemctl [start|stop|restart] ssh $ service ssh [start|stop|restart] Nota Deber\u00e1s tener en cuenta que ser\u00e1 necesario abrir el puerto 22 en el firewall** (si existe) para que nos permita acceder a la m\u00e1quina destino Autenticaci\u00f3n del servidor \u00b6 La primera vez que nos conectemos a un servidor tardar\u00e1 un poco m\u00e1s ya que nos pedir\u00e1 confirmaci\u00f3n (yes / no) para aceptar la conexi\u00f3n remota. De esta forma, en nuestra m\u00e1quina cliente quedar\u00e1 registrada la clave p\u00fablica del servidor y su direcci\u00f3n de red (IP) con el fin de que en las pr\u00f3ximas conexiones podamos asegurar la identidad del servidor al que nos estamos conectando y evitar posibles ataques \u201c man in the middle\u201d Ejemplo Autentificaci\u00f3n Una vez conectados, podremos trabajar en la m\u00e1quina remota como si estuvi\u00e9ramos en la nuestra. Observa el prompt del sistema y ver\u00e1s c\u00f3mo ha cambiado: ahora es el de la m\u00e1quina remota . Todos los comandos , programas y scripts que lancemos despu\u00e9s se ejecutar\u00e1n en la m\u00e1quina a la que nos hayamos conectado, utilizando los recursos del host remoto (CPU, memoria, disco, etc.). Actividad 1 \u00b6 Instala el servicio openssh en una m\u00e1quina virtual con Ubuntu Server 20.04 y haz una conexi\u00f3n mediante la autenticaci\u00f3n usuario/password . Qu\u00e9 puerto has tenido que abrir en el firewall? \u00bfPara que sirve el \" key fingerprint \" Que aparece en la captura? \u00bfQu\u00e9 se guarda en el archivo /home/xxxx/.ssh/known_hosts del cliente? \u00bfDonde podemos encontrar el archivo principal de configuraci\u00f3n del demonio sshd (sshd_config)? Puedes consultar la documentaci\u00f3n oficial aqu\u00ed Nota Debes adjuntar capturas de pantalla que permitan comprobar la realizaci\u00f3n de la tarea, el funcionamiento del servicio y que permitan verificar las respuestas a todas las preguntas planteadas. Configuraci\u00f3n del servicio \u00b6 En este punto es importante se\u00f1alar que, dada la naturaleza del servicio y, aunque parezca que se trata de una sola entidad, tendremos que configurar de forma independiente el cliente y el servidor. En esta primera actividad nos basaremos en la configuraci\u00f3n del servidor , obviando la del cliente. Estructura de carpetas y ficheros \u00b6 Archivos de configuraci\u00f3n del demonio ssh Los archivos m\u00e1s importantes para la configuraci\u00f3n y funcionamiento del servidor openssh se encuentran en la carpeta /etc/ssh y son: archivo configuraci\u00f3n sshd_config El archivo de configuraci\u00f3n para el demonio sshd ssh_host_XXX_key Claves privadas de la m\u00e1quina utilizadas por el demonio sshd seg\u00fan la versi\u00f3n del protocolo utilizada ssh_host_XXX_key.pub Claves p\u00fablicas de la m\u00e1quina utilizadas por el demonio sshd seg\u00fan la versi\u00f3n del protocolo utilizada Archivos de configuraci\u00f3n del usuario de conexi\u00f3n Cuando nos conectemos al servidor SSH, lo haremos con un usuario espec\u00edfico presente en el sistema operativo de la m\u00e1quina remota ( seg\u00fan el ejemplo del punto 2 el usuario ). La configuraci\u00f3n y privilegios de conexi\u00f3n espec\u00edficos para cada uno de estos usuarios se especificar\u00e1 a partir de los siguientes de ficheros que encontramos en el directorio home del usuario, m\u00e1s concretamente en la ruta ~/.ssh/ Los principales ficheros se describen a continuaci\u00f3n. archivo configuraci\u00f3n authorized_keys Este archivo que contiene una lista de claves p\u00fablicas \"autorizadas\" . Cuando un cliente se conecta al servidor el servidor validar\u00e1 su identidad mediante las claves p\u00fablicas presentes en el siguiente archivo. ssh_config Permite sobre-escribir la configuraci\u00f3n general del servidor ssh para cada uno de los usuarios del sistema. Configuraci\u00f3n del demonio sshd \u00b6 Nota En primer lugar y antes de hacer ning\u00fan cambio en el fichero de configuraci\u00f3n, vamos a crear una copia de seguridad del archivo principal sshd\\_config con extensi\u00f3n .back Como podemos observar si visualizamos el archivo, cada una de las l\u00edneas siguen el patr\u00f3n: directiva_valor donde: - directiva es el nombre de la propiedad que se quiere configurar, - y valor ser\u00e1 el valor que se le asigna a esta directiva. Nota Es importante remarcar que no hay un signo = entre la directiva y el valor, tan solo tenemos que dejar un espacio en blanco. En caso contrario, no se asignar\u00e1 el valor de forma correcta, y la directiva tendr\u00e1 un valor nulo . Entre las opciones, podremos comprobar que algunas de ellas son booleanas, en ese caso el campo valor puede contener yes o no , otras ser\u00e1n num\u00e9ricas y otras ser\u00e1n de tipo cadena de caracteres . Directivas de configuraci\u00f3n m\u00e1s importantes del servidor \u00b6 Directiva configuraci\u00f3n puerto Port 22 Indica el puerto de escucha del servidor PermitRootLogin [yes / no] PermitRootLogin yes indica si el usuario root puede conectarse el servidor per medio de ssh. Deber\u00eda establecerse a \"no\", como medida de seguridad PubkeyAuthentification [Yes / no] PubkeyAuthentification yes Indica si est\u00e1 permitida la autenticaci\u00f3n por medio de clave p\u00fablica PasswordAuthentification PasswordAuthentification yes Indica si esta habilitada la autenticaci\u00f3n normal (por contrase\u00f1a, en caso de fallo de las dem\u00e1s) MaxAuthTries number MaxAuthTries 6 M\u00e1ximo n\u00famero de intentos de que dispone el usuario para hacer login AllowUsers [user1] [user2] AllowUsers user1 user2 Lista de usuarios que tienen permiso para acceder al servidor allowAgentForwarding [Yes / no] AllowAgentForwarding yes Permite el reenv\u00edo de credenciales del usuario para la autenticaci\u00f3n por clave p\u00fablica a trav\u00e9s de la conexi\u00f3n ssh establecida Directivas aplicables archivo etc/ssh/sshd_config Actividad 2 \u00b6 Consulta documentaci\u00f3n oficial y responde a las siguientes preguntas: \u00bfCon qu\u00e9 directiva puede especificarse una lista de usuarios que podr\u00e1n conectarse por ssh ? \u00bfCon qu\u00e9 directiva puedes establecer el n\u00famero m\u00e1ximo de usuarios conectados al servidor? Securizaci\u00f3n del servicio y automatizaci\u00f3n de tareas \u00b6 En los siguientes puntos se describen una serie de acciones que nos permitir\u00e1n asegurar las conexiones y, por tanto, la administraci\u00f3n de nuestros servidores remotos. Autentificaci\u00f3n por clave p\u00fablica \u00b6 La autenticaci\u00f3n de clave p\u00fablica mejora considerablemente la seguridad hasta tal punto que, contrase\u00f1as extremadamente largas, no podr\u00edan llegar a ofrecer . Adem\u00e1s, libera los usuarios de recordarlas, o peor a\u00fan, dejarlas anotadas en claro en cualquier lugar. Por otro un otros lado ( no menos importante ), permite la automatizaci\u00f3n de tareas, pues no requiere un proceso interactivo de autenticaci\u00f3n del usuario como es el de hacer que el usuario teclee su contrase\u00f1a. Generaci\u00f3n del par de claves p\u00fablica / privada \u00b6 El primer paso para su configuraci\u00f3n, ser\u00e1 que el cliente ssh (equipo desde el que que queremos establecer la conexi\u00f3n) disponga de un par de claves p\u00fablica / privada de tipo DSA o RSA . Para ello haremos uso de la herramienta ssh-keygen , incluida en el paquete openssh instalado. Ejecutaremos la siguiente orden. $ ssh-keygen Nota Debes tener en cuenta que si las claves p\u00fablicas ya hab\u00edan sido generadas se sobrescribir\u00e1n y dejar\u00e1s de poder autenticarte con la anterior clave Ejemplo Autentificaci\u00f3n Como podemos ver, no especifican ninguna opci\u00f3n, de forma predeterminada nos genera una clave de tipo RSA de 2048 bit , y nos pregunta el lugar donde guardar el par de claves generadas (Por defecto, se guardaran en el directorio home del usuario dentro de la carpeta .ssh ). El campo passphrase mejora el nivel de seguridad. Sin embargo, debemos tener en cuenta que al a\u00f1adirlo se nos pedir\u00e1 en el momento de la autenticaci\u00f3n dificultando la automatizaci\u00f3n de las tareas . Actividad 3 \u00b6 Consulta la siguiente documentaci\u00f3n oficial. \u00bfQu\u00e9 comando utilizaremos si queremos que la clave se cree con el algoritmo DSA?| Copia de la clave p\u00fablica del usuario en el servidor \u00b6 La manera m\u00e1s r\u00e1pida de copiar la clave p\u00fablica al servidor Ubuntu Server remoto es mediante el uso de una utilidad llamada ssh-copy-id . De estar disponible, se trata de un m\u00e9todo altamente recomendado. En caso de que ssh-copy-id no se encuentre disponible en tu m\u00e1quina cliente, puedes hacer la copia manual de la clave. Para usar este m\u00e9todo, simplemente se debe especificar la IP servidor remoto al que te quieres conectar, la cuenta de usuario que utilizar\u00e1s y su contrase\u00f1a ( Deberemos tener acceso SSH por usuario/contrase\u00f1a ) . De esta forma se copiar\u00e1 la clave SSH p\u00fablica, en el archivo ~/.ssh/authorized_keys del usuario con el que nos vamos a conectar a la m\u00e1quina. $ ssh-copy-id username@remote _host Si no se dispone de la herramienta o no tenemos acceso SSH tendremos que hacerlo de forma manual. En primer lugar, copiaremos el contenido del archivo id\\_rsa.pub que corresponde la clave p\u00fablica generada en el punto anterior $ cat ~/.ssh/id\\_rsa.pub Clave A continuaci\u00f3n entraremos en el ordenador remoto utilizando el m\u00e9todo que tengamos disponible y copiaremos la clave p\u00fablica en una nueva l\u00ednea, dentro de archivo ~/.ssh/authorized\\_keys . (Si no existe el directorio y / o el archivo lo crearemos). $ mkdir -p ~/.ssh $ touch ~/.ssh/authorized\\_keys Nota Es importante tener en cuenta que el directorio y los archivos deben pertenecer al usuario y no a root , y que deber\u00edan tener permisos 700 . Configuraci\u00f3n del demonio sshd \u00b6 Por \u00faltimo, tendremos que habilitar este tipo de autenticaci\u00f3n en el servidor, a\u00f1adiendo la siguiente directiva en el archivo etc|/ssh/sshd\\_config . - Habilitar / Deshabilitar el acceso por usuario / contrase\u00f1a PubkeyAuthentication yes Nota En caso de que no puedas autenticarte en el servidor, quiz\u00e1s el agente ssh no haya tomado las nuevas claves generadas. En el cliente, podemos comprobarlo mediante los siguientes comandos: #Comprueba las claves p\u00fablicas de las que tiene constancia el cliente ssh ssh-add -l #Carga la clave privada y la p\u00fablica ssh-add -K ~ /.ssh/id_rsa Restricci\u00f3n de accesos \u00b6 El siguiente paso ser\u00e1 desactivar el acceso inseguro por contrase\u00f1a, para hacerlo, busca la directiva llamada PasswordAuthentication del archivo de configuraci\u00f3n del demonio del servidor y establece el valor a no # Habilitar / Deshabilitar el acceso por usuario / contrase\u00f1a PasswordAuthentication no Por otra parte, y dado que todos los sistemas UNIX y LIKE-UNIX crean por defecto un usuario root , muchos de los ataques que reciba el servidor tratar\u00e1n de hacer uso de este usuario, por lo que es una buena pr\u00e1ctica denegarle el acceso por defecto. # Habilitar / Deshabilitar el usuario root PPermitRootLogin no Por otro lado y para evitar que todos los usuarios de la m\u00e1quina tengan acceso por SSH es posible restringir el acceso para solo unos pocos. Lo podemos hacer mediante la directiva AllowUsers # Habilitar / Deshabilitar el usuario root AllowUsers severo appuser Nota No olvides que para que los cambios surtan efecto debes reiniciar el servicio SSH Copiar archivos/carpetas desde/hacia el host remoto \u00b6 En una consola o terminal utilizaremos el pedido comando (secure copy) de la siguiente forma: # Copiar un elemento de la m\u00e1quina remota llamado *origen* en la m\u00e1quina local. $ scp usuario@maquina:/origen destino # Copiar un elemento local llamado origen a la m\u00e1quina remota. $ scp origen usuario@maquina:/destino Ejemplos \u00b6 $ scp archivo severo @192.168.1.36 :/home/severo/web $ scp severo[ @192.168.1.36](mailto:batoi@192.168.1.36) :/home/severo/web/archivo.html . $ scp severo[ @192.168.1.36](mailto:batoi@192.168.1.36) :/home/severo/web/archivo /var/www/batoi/ html $ scp severo[ @192.168.1.36](mailto:batoi@192.168.1.36) :/home/severo/web/\\* /var/www/batoy/html Podremos utilizar la opci\u00f3n -r por copiar archivos de forma Recursiva (Carpeta y subcarpetas). $ scp -r *carpeta*local severo@192.168.1.36:/var/www/severo/html $ scp -r severo@192.168.1.36:/home/severo /carpeta/local Ejemplo Actividad 4 \u2013 Arquitectura a configurar \u00b6 Lleva a cabo la configuraci\u00f3n arriba indicada para securizar el acceso al servidor ubuntu que utilizaste para llevar a cabo las pr\u00e1cticas anteriores. El m\u00e9todo de autenticaci\u00f3n que vamos a utilizar es el de clave p\u00fablica/privada. Para ello deber\u00e1s llevar a cabo las siguientes acciones: Crea una clave p\u00fablica/privada en el cliente y establ\u00e9cela como clave autorizada para el usuario del servidor con el que quieras llevar a cabo las conexiones. Una vez realizado activa la autenticaci\u00f3n por clave p\u00fablic/privada. Establece las directivas correspondientes en la configuraci\u00f3n del servidor ssh para asegurar la siguiente configuraci\u00f3n: El \u00fanico usuario que podr\u00e1 autenticarse en el servidor ssh es el usuario que hemos habilitado en el paso anterior. Por \u00faltimo, clona el siguiente repositorio en la m\u00e1quina cliente y copia los archivos al document root haciendo uso de la orden scp explicada en el punto 4 . Nota Debes adjuntar capturas de pantalla que permitan comprobar las diferentes configuraciones realizadas, el correcto funcionamiento del servicio ssh, de las web desplegada y de que se han llevado a cabo las acciones indicadas.","title":"Pr\u00e1ctica 11 - Configuraci\u00f3n de un servicio de acceso remoto mediante OpenSSH"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#practica-11-configuracion-de-un-servicio-de-acceso-remoto-mediante-openssh","text":"","title":"Pr\u00e1ctica 11 - Configuraci\u00f3n de un servicio de acceso remoto mediante OpenSSH"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#instalacion-del-servicio","text":"Llevaremos a cabo la instalaci\u00f3n del servicio mediante el gestor de paquetes del sistema operativo. $ apt install openssh-server Una vez instalado, sin necesidad de configurar nada, ya es posible acceder v\u00eda ssh utilizando un cliente GNU/ linux . El comando m\u00e1s com\u00fan para llevar a cabo esta acci\u00f3n es: $ ssh usuario @ip_de_la_maquina A continuaci\u00f3n nos pedir\u00e1 la contrase\u00f1a del usuario entraremos en el sistema. Para gestionar el demonio del sshd utilizaremos systemctl o su correspondiente service $ systemctl [start|stop|restart] ssh $ service ssh [start|stop|restart] Nota Deber\u00e1s tener en cuenta que ser\u00e1 necesario abrir el puerto 22 en el firewall** (si existe) para que nos permita acceder a la m\u00e1quina destino","title":"Instalaci\u00f3n del servicio"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#autenticacion-del-servidor","text":"La primera vez que nos conectemos a un servidor tardar\u00e1 un poco m\u00e1s ya que nos pedir\u00e1 confirmaci\u00f3n (yes / no) para aceptar la conexi\u00f3n remota. De esta forma, en nuestra m\u00e1quina cliente quedar\u00e1 registrada la clave p\u00fablica del servidor y su direcci\u00f3n de red (IP) con el fin de que en las pr\u00f3ximas conexiones podamos asegurar la identidad del servidor al que nos estamos conectando y evitar posibles ataques \u201c man in the middle\u201d Ejemplo Autentificaci\u00f3n Una vez conectados, podremos trabajar en la m\u00e1quina remota como si estuvi\u00e9ramos en la nuestra. Observa el prompt del sistema y ver\u00e1s c\u00f3mo ha cambiado: ahora es el de la m\u00e1quina remota . Todos los comandos , programas y scripts que lancemos despu\u00e9s se ejecutar\u00e1n en la m\u00e1quina a la que nos hayamos conectado, utilizando los recursos del host remoto (CPU, memoria, disco, etc.).","title":"Autenticaci\u00f3n del servidor"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#actividad-1","text":"Instala el servicio openssh en una m\u00e1quina virtual con Ubuntu Server 20.04 y haz una conexi\u00f3n mediante la autenticaci\u00f3n usuario/password . Qu\u00e9 puerto has tenido que abrir en el firewall? \u00bfPara que sirve el \" key fingerprint \" Que aparece en la captura? \u00bfQu\u00e9 se guarda en el archivo /home/xxxx/.ssh/known_hosts del cliente? \u00bfDonde podemos encontrar el archivo principal de configuraci\u00f3n del demonio sshd (sshd_config)? Puedes consultar la documentaci\u00f3n oficial aqu\u00ed Nota Debes adjuntar capturas de pantalla que permitan comprobar la realizaci\u00f3n de la tarea, el funcionamiento del servicio y que permitan verificar las respuestas a todas las preguntas planteadas.","title":"Actividad 1"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#configuracion-del-servicio","text":"En este punto es importante se\u00f1alar que, dada la naturaleza del servicio y, aunque parezca que se trata de una sola entidad, tendremos que configurar de forma independiente el cliente y el servidor. En esta primera actividad nos basaremos en la configuraci\u00f3n del servidor , obviando la del cliente.","title":"Configuraci\u00f3n del servicio"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#estructura-de-carpetas-y-ficheros","text":"Archivos de configuraci\u00f3n del demonio ssh Los archivos m\u00e1s importantes para la configuraci\u00f3n y funcionamiento del servidor openssh se encuentran en la carpeta /etc/ssh y son: archivo configuraci\u00f3n sshd_config El archivo de configuraci\u00f3n para el demonio sshd ssh_host_XXX_key Claves privadas de la m\u00e1quina utilizadas por el demonio sshd seg\u00fan la versi\u00f3n del protocolo utilizada ssh_host_XXX_key.pub Claves p\u00fablicas de la m\u00e1quina utilizadas por el demonio sshd seg\u00fan la versi\u00f3n del protocolo utilizada Archivos de configuraci\u00f3n del usuario de conexi\u00f3n Cuando nos conectemos al servidor SSH, lo haremos con un usuario espec\u00edfico presente en el sistema operativo de la m\u00e1quina remota ( seg\u00fan el ejemplo del punto 2 el usuario ). La configuraci\u00f3n y privilegios de conexi\u00f3n espec\u00edficos para cada uno de estos usuarios se especificar\u00e1 a partir de los siguientes de ficheros que encontramos en el directorio home del usuario, m\u00e1s concretamente en la ruta ~/.ssh/ Los principales ficheros se describen a continuaci\u00f3n. archivo configuraci\u00f3n authorized_keys Este archivo que contiene una lista de claves p\u00fablicas \"autorizadas\" . Cuando un cliente se conecta al servidor el servidor validar\u00e1 su identidad mediante las claves p\u00fablicas presentes en el siguiente archivo. ssh_config Permite sobre-escribir la configuraci\u00f3n general del servidor ssh para cada uno de los usuarios del sistema.","title":"Estructura de carpetas y ficheros"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#configuracion-del-demonio-sshd","text":"Nota En primer lugar y antes de hacer ning\u00fan cambio en el fichero de configuraci\u00f3n, vamos a crear una copia de seguridad del archivo principal sshd\\_config con extensi\u00f3n .back Como podemos observar si visualizamos el archivo, cada una de las l\u00edneas siguen el patr\u00f3n: directiva_valor donde: - directiva es el nombre de la propiedad que se quiere configurar, - y valor ser\u00e1 el valor que se le asigna a esta directiva. Nota Es importante remarcar que no hay un signo = entre la directiva y el valor, tan solo tenemos que dejar un espacio en blanco. En caso contrario, no se asignar\u00e1 el valor de forma correcta, y la directiva tendr\u00e1 un valor nulo . Entre las opciones, podremos comprobar que algunas de ellas son booleanas, en ese caso el campo valor puede contener yes o no , otras ser\u00e1n num\u00e9ricas y otras ser\u00e1n de tipo cadena de caracteres .","title":"Configuraci\u00f3n del demonio sshd"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#actividad-2","text":"Consulta documentaci\u00f3n oficial y responde a las siguientes preguntas: \u00bfCon qu\u00e9 directiva puede especificarse una lista de usuarios que podr\u00e1n conectarse por ssh ? \u00bfCon qu\u00e9 directiva puedes establecer el n\u00famero m\u00e1ximo de usuarios conectados al servidor?","title":"Actividad 2"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#securizacion-del-servicio-y-automatizacion-de-tareas","text":"En los siguientes puntos se describen una serie de acciones que nos permitir\u00e1n asegurar las conexiones y, por tanto, la administraci\u00f3n de nuestros servidores remotos.","title":"Securizaci\u00f3n del servicio y automatizaci\u00f3n de tareas"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#actividad-3","text":"Consulta la siguiente documentaci\u00f3n oficial. \u00bfQu\u00e9 comando utilizaremos si queremos que la clave se cree con el algoritmo DSA?|","title":"Actividad 3"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#restriccion-de-accesos","text":"El siguiente paso ser\u00e1 desactivar el acceso inseguro por contrase\u00f1a, para hacerlo, busca la directiva llamada PasswordAuthentication del archivo de configuraci\u00f3n del demonio del servidor y establece el valor a no # Habilitar / Deshabilitar el acceso por usuario / contrase\u00f1a PasswordAuthentication no Por otra parte, y dado que todos los sistemas UNIX y LIKE-UNIX crean por defecto un usuario root , muchos de los ataques que reciba el servidor tratar\u00e1n de hacer uso de este usuario, por lo que es una buena pr\u00e1ctica denegarle el acceso por defecto. # Habilitar / Deshabilitar el usuario root PPermitRootLogin no Por otro lado y para evitar que todos los usuarios de la m\u00e1quina tengan acceso por SSH es posible restringir el acceso para solo unos pocos. Lo podemos hacer mediante la directiva AllowUsers # Habilitar / Deshabilitar el usuario root AllowUsers severo appuser Nota No olvides que para que los cambios surtan efecto debes reiniciar el servicio SSH","title":"Restricci\u00f3n de accesos"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#copiar-archivoscarpetas-desdehacia-el-host-remoto","text":"En una consola o terminal utilizaremos el pedido comando (secure copy) de la siguiente forma: # Copiar un elemento de la m\u00e1quina remota llamado *origen* en la m\u00e1quina local. $ scp usuario@maquina:/origen destino # Copiar un elemento local llamado origen a la m\u00e1quina remota. $ scp origen usuario@maquina:/destino","title":"Copiar archivos/carpetas desde/hacia el host remoto"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#ejemplos","text":"$ scp archivo severo @192.168.1.36 :/home/severo/web $ scp severo[ @192.168.1.36](mailto:batoi@192.168.1.36) :/home/severo/web/archivo.html . $ scp severo[ @192.168.1.36](mailto:batoi@192.168.1.36) :/home/severo/web/archivo /var/www/batoi/ html $ scp severo[ @192.168.1.36](mailto:batoi@192.168.1.36) :/home/severo/web/\\* /var/www/batoy/html Podremos utilizar la opci\u00f3n -r por copiar archivos de forma Recursiva (Carpeta y subcarpetas). $ scp -r *carpeta*local severo@192.168.1.36:/var/www/severo/html $ scp -r severo@192.168.1.36:/home/severo /carpeta/local Ejemplo","title":"Ejemplos"},{"location":"Practica11_configuracio%CC%81n_servidor_openssh.html#actividad-4-arquitectura-a-configurar","text":"Lleva a cabo la configuraci\u00f3n arriba indicada para securizar el acceso al servidor ubuntu que utilizaste para llevar a cabo las pr\u00e1cticas anteriores. El m\u00e9todo de autenticaci\u00f3n que vamos a utilizar es el de clave p\u00fablica/privada. Para ello deber\u00e1s llevar a cabo las siguientes acciones: Crea una clave p\u00fablica/privada en el cliente y establ\u00e9cela como clave autorizada para el usuario del servidor con el que quieras llevar a cabo las conexiones. Una vez realizado activa la autenticaci\u00f3n por clave p\u00fablic/privada. Establece las directivas correspondientes en la configuraci\u00f3n del servidor ssh para asegurar la siguiente configuraci\u00f3n: El \u00fanico usuario que podr\u00e1 autenticarse en el servidor ssh es el usuario que hemos habilitado en el paso anterior. Por \u00faltimo, clona el siguiente repositorio en la m\u00e1quina cliente y copia los archivos al document root haciendo uso de la orden scp explicada en el punto 4 . Nota Debes adjuntar capturas de pantalla que permitan comprobar las diferentes configuraciones realizadas, el correcto funcionamiento del servicio ssh, de las web desplegada y de que se han llevado a cabo las acciones indicadas.","title":"Actividad 4 \u2013 Arquitectura a configurar"},{"location":"Practica13_CUPS.html","text":"Instalaci\u00f3n y configuraci\u00f3n de CUPS \u00b6 Instalaci\u00f3n \u00b6 Realiza la instalaci\u00f3n de CUPS en Ubuntu siguiendo los siguientes pasos: Ejecute los siguientes comandos: sudo apt update sudo apt install cups Una vez que CUPS est\u00e1 instalado, los siguientes comandos se pueden utilizar para detener, iniciar y habilitar el servicio CUPS para que se inicie autom\u00e1ticamente cuando se inicia el servidor. sudo systemctl stop cups sudo systemctl start cups sudo systemctl enable cups Para verificar que CUPS est\u00e9 instalado y en ejecuci\u00f3n, ejecute los siguientes comandos. sudo systemctl status cups A continuaci\u00f3n, deber\u00eda ver una salida similar a la siguiente: \u25cf cups.service - CUPS Scheduler Loaded : loaded (/lib/systemd/system/cups.service; enabled; vendor preset : enabled) Active : active (running) since Sun 2021-08-15 01:31:30 WAT; 53min ago TriggeredBy : \u25cf cups.socket \u25cf cups.path Docs : man:cupsd(8) Main PID : 971 (cupsd) Status : \"Scheduler is running\u2026\" Tasks : 1 (limit : 18958) Memory : 26.3M Para instalar el cliente de CUPS en la plataforma Linux: $ apt\u2010get install cups\u2010cliente Configuraci\u00f3n \u00b6 Revisa el archivo de configuraci\u00f3n de CUPS para comprobar que todos los param\u00e9tros esten bien configurados, adjunta captura de las comprobaciones m\u00e1s importantes, comentandolas. El archivo de configuraci\u00f3n de CUPS se encuentra en /etc/cups/cupsd.conf Es aconsejable crear una copia de seguridad del archivo de configuraci\u00f3n: sudo cp /etc/cups/cupsd.conf /etc/cups/cupsd.conf.original Luego, ejecute los siguientes comandos para abrir el archivo de configuraci\u00f3n de CUPS. sudo nano /etc/cups/cupsd.conf A continuaci\u00f3n, puede comenzar a configurar los ajustes que se adapten a su entorno. De forma predeterminada, CUPS escucha en el puerto 631. A priori se puede dejar por defecto o cambiar el puerto para a\u00f1adir seguridad a la configuraci\u00f3n. #Listen localhost:631 Port 631 Tambi\u00e9n puede asegurarse de que la navegaci\u00f3n est\u00e9 habilitada para permitir que CUPS haga que las impresoras compartidas est\u00e9n disponibles en la red. Browsing On Establezca la siguiente directiva en dnsd protocolo (que admite Bonjour ), por defecto est\u00e1 habilitado. BrowseLocalProtocols dnssd NOTA Bonjour es un m\u00e9todo para descubrir servicios en una red de \u00e1rea local \u2014LAN, por sus siglas en ingl\u00e9s (Local Area Network)\u2014. Esta tecnolog\u00eda, muy utilizada en Mac OS X, permite a los usuarios establecer una red sin ning\u00fan tipo de configuraci\u00f3n. CUPS tambi\u00e9n restringe el acceso a la interfaz web del servidor de la impresora y a las p\u00e1ginas de administraci\u00f3n mediante las directivas siguientes. Puede configurar permitir antes de denegar para permitir que las ordenadores de la red local accedan a la interfaz web de CUPS. Revisa que la configuraci\u00f3n es correcta. #Restrict access to the server <Location /> Order allow,deny Allow @LOCAL <Location> #Restrict access to the admin pages. <Location /admin> Order allow,deny Allow @LOCAL <Location> NOTA Si prefiere configurar utilizando la interfaz web CUPS, se recomienda utilizar root o un usuario autenticado en el lpadmin grupo. Agrega tu usuario a lpadmin grupo, mediante el comando: sudo usermod -aG lpadmin username Se debe Reiniciar CUPS. sudo systemctl restart cups Administraci\u00f3n Web \u00b6 El demonio de CUPS es una aplicaci\u00f3n de servidor que gestiona peticiones HTTP. Adem\u00e1s de atender las peticiones de impresi\u00f3n recibidas por el protocolo IPP, el planificador tambi\u00e9n act\u00faa como un completo servidor web para ofrecer documentaci\u00f3n, monitorizaci\u00f3n del estado de las colas y trabajos y administraci\u00f3n del sistema de impresi\u00f3n. Por lo tanto se puede acceder por defecto a este servidor web por el puerto 631 . As\u00ed, en la m\u00e1quina local, basta con abrir cualquier navegador indicando la direcci\u00f3n: http : // localhost : 631 Panel de control Web de CUPS Se puede observar en la primera pesta\u00f1a aparecen enlaces para llegar a diferentes fuentes de documentaci\u00f3n para usuarios, administradores y desarrolladores. La secci\u00f3n que lo resume todo es la pesta\u00f1a de Administraci\u00f3n , donde hay enlaces a las otras secciones (impresoras, clases y trabajos de impresi\u00f3n) y que permite realizar las siguientes tareas: Configurar el servidor: hay algunas opciones del servidor que se pueden configurar autom\u00e1ticamente marcando la casilla correspondiente. Ver las impresoras compartidas por otros ordenadores de la red. Compartir las impresoras locales. Permitir la administraci\u00f3n desde ordenadores remotos. Utilizar el sistema de autenticaci\u00f3n Kerberos. Permitir a los usuarios cancelar trabajos de otros usuarios. Configurar en nivel de grabaci\u00f3n de los archivos de registro. Edici\u00f3n directa del archivo de configuraci\u00f3n: para ajustar de manera m\u00e1s detallada y completa las opciones de configuraci\u00f3n se puede acceder a la edici\u00f3n directa de las directivas contenidas en el archivo / etc / cups / cupsd.conf. Una vez hechas las modificaciones, el mismo sistema se encarga de reiniciar el servicio. Visualizar los archivos de registro tanto los de acceso como los de mensajes de error y la lista de p\u00e1ginas impresas. Administrar impresoras: gestionar las impresoras del sistema, buscar autom\u00e1ticamente aquellas que est\u00e9n conectadas o bien darlas de alta manualmente. Administrar clases: gestionar las clases de impresoras o gestionar las existentes. Administrar trabajo de impresi\u00f3n: visualizar los trabajos de impresi\u00f3n ( jobs ), tanto los finalizados como los que est\u00e1n en curso que se pueden gestionar (cancelar, detener, cambiar de cola ...). A\u00f1ade la impresora que uses habitualmente en casa o una impresora virtual PDF, Investiga por Internet como se pueden a\u00f1adir impresoras en CUPS de cualquiera de los dos tipos, desde la Interfaz de gesti\u00f3n Web y desde comandos, adjunta capturas del proceso.","title":"Instalaci\u00f3n y configuraci\u00f3n de CUPS"},{"location":"Practica13_CUPS.html#instalacion-y-configuracion-de-cups","text":"","title":"Instalaci\u00f3n y configuraci\u00f3n de CUPS"},{"location":"Practica13_CUPS.html#instalacion","text":"Realiza la instalaci\u00f3n de CUPS en Ubuntu siguiendo los siguientes pasos: Ejecute los siguientes comandos: sudo apt update sudo apt install cups Una vez que CUPS est\u00e1 instalado, los siguientes comandos se pueden utilizar para detener, iniciar y habilitar el servicio CUPS para que se inicie autom\u00e1ticamente cuando se inicia el servidor. sudo systemctl stop cups sudo systemctl start cups sudo systemctl enable cups Para verificar que CUPS est\u00e9 instalado y en ejecuci\u00f3n, ejecute los siguientes comandos. sudo systemctl status cups A continuaci\u00f3n, deber\u00eda ver una salida similar a la siguiente: \u25cf cups.service - CUPS Scheduler Loaded : loaded (/lib/systemd/system/cups.service; enabled; vendor preset : enabled) Active : active (running) since Sun 2021-08-15 01:31:30 WAT; 53min ago TriggeredBy : \u25cf cups.socket \u25cf cups.path Docs : man:cupsd(8) Main PID : 971 (cupsd) Status : \"Scheduler is running\u2026\" Tasks : 1 (limit : 18958) Memory : 26.3M Para instalar el cliente de CUPS en la plataforma Linux: $ apt\u2010get install cups\u2010cliente","title":"Instalaci\u00f3n"},{"location":"Practica13_CUPS.html#configuracion","text":"Revisa el archivo de configuraci\u00f3n de CUPS para comprobar que todos los param\u00e9tros esten bien configurados, adjunta captura de las comprobaciones m\u00e1s importantes, comentandolas. El archivo de configuraci\u00f3n de CUPS se encuentra en /etc/cups/cupsd.conf Es aconsejable crear una copia de seguridad del archivo de configuraci\u00f3n: sudo cp /etc/cups/cupsd.conf /etc/cups/cupsd.conf.original Luego, ejecute los siguientes comandos para abrir el archivo de configuraci\u00f3n de CUPS. sudo nano /etc/cups/cupsd.conf A continuaci\u00f3n, puede comenzar a configurar los ajustes que se adapten a su entorno. De forma predeterminada, CUPS escucha en el puerto 631. A priori se puede dejar por defecto o cambiar el puerto para a\u00f1adir seguridad a la configuraci\u00f3n. #Listen localhost:631 Port 631 Tambi\u00e9n puede asegurarse de que la navegaci\u00f3n est\u00e9 habilitada para permitir que CUPS haga que las impresoras compartidas est\u00e9n disponibles en la red. Browsing On Establezca la siguiente directiva en dnsd protocolo (que admite Bonjour ), por defecto est\u00e1 habilitado. BrowseLocalProtocols dnssd NOTA Bonjour es un m\u00e9todo para descubrir servicios en una red de \u00e1rea local \u2014LAN, por sus siglas en ingl\u00e9s (Local Area Network)\u2014. Esta tecnolog\u00eda, muy utilizada en Mac OS X, permite a los usuarios establecer una red sin ning\u00fan tipo de configuraci\u00f3n. CUPS tambi\u00e9n restringe el acceso a la interfaz web del servidor de la impresora y a las p\u00e1ginas de administraci\u00f3n mediante las directivas siguientes. Puede configurar permitir antes de denegar para permitir que las ordenadores de la red local accedan a la interfaz web de CUPS. Revisa que la configuraci\u00f3n es correcta. #Restrict access to the server <Location /> Order allow,deny Allow @LOCAL <Location> #Restrict access to the admin pages. <Location /admin> Order allow,deny Allow @LOCAL <Location> NOTA Si prefiere configurar utilizando la interfaz web CUPS, se recomienda utilizar root o un usuario autenticado en el lpadmin grupo. Agrega tu usuario a lpadmin grupo, mediante el comando: sudo usermod -aG lpadmin username Se debe Reiniciar CUPS. sudo systemctl restart cups","title":"Configuraci\u00f3n"},{"location":"Practica13_CUPS.html#administracion-web","text":"El demonio de CUPS es una aplicaci\u00f3n de servidor que gestiona peticiones HTTP. Adem\u00e1s de atender las peticiones de impresi\u00f3n recibidas por el protocolo IPP, el planificador tambi\u00e9n act\u00faa como un completo servidor web para ofrecer documentaci\u00f3n, monitorizaci\u00f3n del estado de las colas y trabajos y administraci\u00f3n del sistema de impresi\u00f3n. Por lo tanto se puede acceder por defecto a este servidor web por el puerto 631 . As\u00ed, en la m\u00e1quina local, basta con abrir cualquier navegador indicando la direcci\u00f3n: http : // localhost : 631 Panel de control Web de CUPS Se puede observar en la primera pesta\u00f1a aparecen enlaces para llegar a diferentes fuentes de documentaci\u00f3n para usuarios, administradores y desarrolladores. La secci\u00f3n que lo resume todo es la pesta\u00f1a de Administraci\u00f3n , donde hay enlaces a las otras secciones (impresoras, clases y trabajos de impresi\u00f3n) y que permite realizar las siguientes tareas: Configurar el servidor: hay algunas opciones del servidor que se pueden configurar autom\u00e1ticamente marcando la casilla correspondiente. Ver las impresoras compartidas por otros ordenadores de la red. Compartir las impresoras locales. Permitir la administraci\u00f3n desde ordenadores remotos. Utilizar el sistema de autenticaci\u00f3n Kerberos. Permitir a los usuarios cancelar trabajos de otros usuarios. Configurar en nivel de grabaci\u00f3n de los archivos de registro. Edici\u00f3n directa del archivo de configuraci\u00f3n: para ajustar de manera m\u00e1s detallada y completa las opciones de configuraci\u00f3n se puede acceder a la edici\u00f3n directa de las directivas contenidas en el archivo / etc / cups / cupsd.conf. Una vez hechas las modificaciones, el mismo sistema se encarga de reiniciar el servicio. Visualizar los archivos de registro tanto los de acceso como los de mensajes de error y la lista de p\u00e1ginas impresas. Administrar impresoras: gestionar las impresoras del sistema, buscar autom\u00e1ticamente aquellas que est\u00e9n conectadas o bien darlas de alta manualmente. Administrar clases: gestionar las clases de impresoras o gestionar las existentes. Administrar trabajo de impresi\u00f3n: visualizar los trabajos de impresi\u00f3n ( jobs ), tanto los finalizados como los que est\u00e1n en curso que se pueden gestionar (cancelar, detener, cambiar de cola ...). A\u00f1ade la impresora que uses habitualmente en casa o una impresora virtual PDF, Investiga por Internet como se pueden a\u00f1adir impresoras en CUPS de cualquiera de los dos tipos, desde la Interfaz de gesti\u00f3n Web y desde comandos, adjunta capturas del proceso.","title":"Administraci\u00f3n Web"},{"location":"Practica14_samba.html","text":"Instalaci\u00f3n y preparaci\u00f3n Servidor Samba \u00b6 Instalaci\u00f3n \u00b6 sudo apt install samba Configuraci\u00f3n \u00b6 Editamos el fichero de configuraci\u00f3n: /etc/samba/smb.conf Al final del archivo de configuraci\u00f3n a\u00f1adiremos una nueva entrada con el directorio a compartir : [ ejercicio1 ] comment = Prueba Ejercicio 1 path = /srv/samba/ejercicio1 browsable = yes guest ok = yes read only = yes create mask = 0777 Creamos el directorio que \u00edbamos a compartir y cambiamos los permisos para que no de conflicto. sudo mkdir \u2013p /srv/samba/ejercicio1 sudo chmod 755 /srv/samba/ejercicio1 Siempre que modifiquemos el fichero de configuraci\u00f3n debemos reiniciar el servicio: sudo systemctl restart smbd Par\u00e1metros B\u00e1sicos: \u00b6 [X]: Nombre del recurso a compartir, normalmente un directorio. Comment: Comentario que describe el directorio que se est\u00e1 compartiendo. Path: Es la carpeta que se quiere compartir. Puede ser cualquier carpeta del servidor, no obstante, por est\u00e1ndar las carpetas compartidas de un servidor suelen encontrarse dentro del directorio /srv. Browsable: Permite navegar por el directorio usando el navegador de directorios. Guest ok: No es necesario introducir contrase\u00f1a (modo invitado). Read only: Indica si los permisos de un cliente son de lectura (yes) o de escritura/lectura (no). Create Mask: Indica los permisos de los ficheros creados por los clientes . Por defecto 0744 (todos los permisos para usuario propietario y solo permiso de lectura para grupo y otros usuarios). Directory Mask : Indica los permisos de los directorios creados. Por defecto 0755 (todos los permisos para usuario propietario y solo permiso de lectura/ejecuci\u00f3n para grupo y otros usuarios). A tener en cuenta El primer bit del \u201c umask \u201d se usa para opciones especiales (stickybit, SGID o SUID), como no vamos a usarlo, debe estar siempre a 0. En el fichero de configuraci\u00f3n de samba tanto los # como el ; indicando comentarios. Es importante comprender que tenemos dos niveles de seguridad. El establecido por el fichero de configuraci\u00f3n samba y los propios permisos del directorio compartido. Acceso desde Windows: \u00b6 Abrimos un explorador de directorios. Seleccionamos Red (Network) Puede que tengamos que habilitar el descubrimiento de redes: Como alternativa, en caso de no descubrir el equipo podemos abrir un explorador de directorio y colocar en la barra de direcciones \\\\IP_Servidor Actividades: Razona todas las respuestas, en caso de que la respuesta sea debido a unos permisos indica que permisos tiene y donde han sido determinados. Sigue todos los pasos del manual (apartado anterior) para conseguir compartir ficheros. Adjunta una captura de la secci\u00f3n del fichero de configuraci\u00f3n de samba donde se muestre la configuraci\u00f3n del recurso compartido. Desde el servidor , crea un fichero hola.txt en la carpeta /srv/samba/ejercicio1. Desde el cliente windows accede al servidor mediante un explorador de directorios e intenta abrir el documento \u00bfExiste alg\u00fan problema para ello? Razona tu respuesta. Seguidamente modifica el fichero e intenta guardarlo. \u00bfQu\u00e9 ocurre? \u00bfPor qu\u00e9? Ahora, desde el cliente Windows, intenta crear un fichero. \u00bfTe deja? \u00bfPuedes leer y escribir en \u00e9l? \u00bfPor qu\u00e9? Desde el servidor, modifica los permisos de /srv/samba/ejercicio1/hola.txt para que tenga los siguientes permisos rwxr\u2014rwx, ahora desde el cliente Windows prueba a modificar el contenido de dicho fichero. \u00bfQu\u00e9 ocurre y por qu\u00e9? Si no te deja escribir y guardar los cambios, indica que deber\u00edas cambiar para que puedas hacerlo. Crea una carpeta en el servidor /srv/samba/ejercicio2. Comparte dicha carpeta, a\u00f1adiendo una nueva entrada en el fichero de configuraci\u00f3n de samba. La carpeta debe ser navegable, se debe poder acceder sin credenciales, debe tener permisos de lectura/escritura y adem\u00e1s los ficheros creados por los clientes podr\u00e1n ser modificados, le\u00eddos y ejecutados por cualquiera. Por otro lado, los directorios creados por los clientes solo podr\u00e1n ser modificados por el usuario propietario, mientras que el resto de usuarios/grupos no tendr\u00e1n ning\u00fan permiso. Muestra la configuraci\u00f3n realizada. Desde un cliente Windows (como usuario propietario) intenta acceder a la carpeta ejercicio2 y crear un documento llamado \u201cmiTesoro.txt\u201d. Acto seguido, vuelve al servidor e intenta modificar el fichero ( SIN SER SUDO ) \u00bfExiste alg\u00fan problema? \u00bfPor qu\u00e9? Ahora desde el cliente (Windows) crea un directorio llamado \u201cMairon\u201d. Vuelve al servidor e intenta crear un fichero \u201cSauron.txt\u201d dentro de Mairon ( SIN SER SUDO ). \u00bfQu\u00e9 ocurre? \u00bfQu\u00e9 permisos tiene la carpeta \u201cMairon\u201d?. Busca en Internet que significa la etiqueta [global] al comienzo del fichero de configuraci\u00f3n de samba /etc/samba/smb.conf","title":"Instalaci\u00f3n y preparaci\u00f3n Servidor Samba"},{"location":"Practica14_samba.html#instalacion-y-preparacion-servidor-samba","text":"","title":"Instalaci\u00f3n y preparaci\u00f3n Servidor Samba"},{"location":"Practica14_samba.html#instalacion","text":"sudo apt install samba","title":"Instalaci\u00f3n"},{"location":"Practica14_samba.html#configuracion","text":"Editamos el fichero de configuraci\u00f3n: /etc/samba/smb.conf Al final del archivo de configuraci\u00f3n a\u00f1adiremos una nueva entrada con el directorio a compartir : [ ejercicio1 ] comment = Prueba Ejercicio 1 path = /srv/samba/ejercicio1 browsable = yes guest ok = yes read only = yes create mask = 0777 Creamos el directorio que \u00edbamos a compartir y cambiamos los permisos para que no de conflicto. sudo mkdir \u2013p /srv/samba/ejercicio1 sudo chmod 755 /srv/samba/ejercicio1 Siempre que modifiquemos el fichero de configuraci\u00f3n debemos reiniciar el servicio: sudo systemctl restart smbd","title":"Configuraci\u00f3n"},{"location":"Practica14_samba.html#parametros-basicos","text":"[X]: Nombre del recurso a compartir, normalmente un directorio. Comment: Comentario que describe el directorio que se est\u00e1 compartiendo. Path: Es la carpeta que se quiere compartir. Puede ser cualquier carpeta del servidor, no obstante, por est\u00e1ndar las carpetas compartidas de un servidor suelen encontrarse dentro del directorio /srv. Browsable: Permite navegar por el directorio usando el navegador de directorios. Guest ok: No es necesario introducir contrase\u00f1a (modo invitado). Read only: Indica si los permisos de un cliente son de lectura (yes) o de escritura/lectura (no). Create Mask: Indica los permisos de los ficheros creados por los clientes . Por defecto 0744 (todos los permisos para usuario propietario y solo permiso de lectura para grupo y otros usuarios). Directory Mask : Indica los permisos de los directorios creados. Por defecto 0755 (todos los permisos para usuario propietario y solo permiso de lectura/ejecuci\u00f3n para grupo y otros usuarios). A tener en cuenta El primer bit del \u201c umask \u201d se usa para opciones especiales (stickybit, SGID o SUID), como no vamos a usarlo, debe estar siempre a 0. En el fichero de configuraci\u00f3n de samba tanto los # como el ; indicando comentarios. Es importante comprender que tenemos dos niveles de seguridad. El establecido por el fichero de configuraci\u00f3n samba y los propios permisos del directorio compartido.","title":"Par\u00e1metros B\u00e1sicos:"},{"location":"Practica14_samba.html#acceso-desde-windows","text":"Abrimos un explorador de directorios. Seleccionamos Red (Network) Puede que tengamos que habilitar el descubrimiento de redes: Como alternativa, en caso de no descubrir el equipo podemos abrir un explorador de directorio y colocar en la barra de direcciones \\\\IP_Servidor Actividades: Razona todas las respuestas, en caso de que la respuesta sea debido a unos permisos indica que permisos tiene y donde han sido determinados. Sigue todos los pasos del manual (apartado anterior) para conseguir compartir ficheros. Adjunta una captura de la secci\u00f3n del fichero de configuraci\u00f3n de samba donde se muestre la configuraci\u00f3n del recurso compartido. Desde el servidor , crea un fichero hola.txt en la carpeta /srv/samba/ejercicio1. Desde el cliente windows accede al servidor mediante un explorador de directorios e intenta abrir el documento \u00bfExiste alg\u00fan problema para ello? Razona tu respuesta. Seguidamente modifica el fichero e intenta guardarlo. \u00bfQu\u00e9 ocurre? \u00bfPor qu\u00e9? Ahora, desde el cliente Windows, intenta crear un fichero. \u00bfTe deja? \u00bfPuedes leer y escribir en \u00e9l? \u00bfPor qu\u00e9? Desde el servidor, modifica los permisos de /srv/samba/ejercicio1/hola.txt para que tenga los siguientes permisos rwxr\u2014rwx, ahora desde el cliente Windows prueba a modificar el contenido de dicho fichero. \u00bfQu\u00e9 ocurre y por qu\u00e9? Si no te deja escribir y guardar los cambios, indica que deber\u00edas cambiar para que puedas hacerlo. Crea una carpeta en el servidor /srv/samba/ejercicio2. Comparte dicha carpeta, a\u00f1adiendo una nueva entrada en el fichero de configuraci\u00f3n de samba. La carpeta debe ser navegable, se debe poder acceder sin credenciales, debe tener permisos de lectura/escritura y adem\u00e1s los ficheros creados por los clientes podr\u00e1n ser modificados, le\u00eddos y ejecutados por cualquiera. Por otro lado, los directorios creados por los clientes solo podr\u00e1n ser modificados por el usuario propietario, mientras que el resto de usuarios/grupos no tendr\u00e1n ning\u00fan permiso. Muestra la configuraci\u00f3n realizada. Desde un cliente Windows (como usuario propietario) intenta acceder a la carpeta ejercicio2 y crear un documento llamado \u201cmiTesoro.txt\u201d. Acto seguido, vuelve al servidor e intenta modificar el fichero ( SIN SER SUDO ) \u00bfExiste alg\u00fan problema? \u00bfPor qu\u00e9? Ahora desde el cliente (Windows) crea un directorio llamado \u201cMairon\u201d. Vuelve al servidor e intenta crear un fichero \u201cSauron.txt\u201d dentro de Mairon ( SIN SER SUDO ). \u00bfQu\u00e9 ocurre? \u00bfQu\u00e9 permisos tiene la carpeta \u201cMairon\u201d?. Busca en Internet que significa la etiqueta [global] al comienzo del fichero de configuraci\u00f3n de samba /etc/samba/smb.conf","title":"Acceso desde Windows:"},{"location":"Practica15_SambaSecUsers.html","text":"Configuraci\u00f3n de Secciones y Usuarios en SAMBA \u00b6 Secciones \u00b6 Dentro del fichero de configuraci\u00f3n encontramos diversas secciones, entre las que destacaremos tres: [global]: Las opciones especificadas aqu\u00ed afectan a cualquier recurso compartido. A tener en cuenta, si una misma opci\u00f3n se declara en la secci\u00f3n global y en otra secci\u00f3n, por ejemplo ejercicio1 , tendr\u00e1 mayor peso la de la secci\u00f3n m\u00e1s espec\u00edfica, es decir ejercicio1 . [homes]: Se permite indicar las opciones para el /home de los usuarios existentes en el servidor. De tal forma que podr\u00edamos acceder a nuestro /home desde cualquier m\u00e1quina del grupo de trabajo de la siguiente forma: \\\\IP_SERVIDOR\\usuario \u2192 (file://IP_SERVIDOR/usuario) [printers]: Informaci\u00f3n del trato para la compartici\u00f3n de impresoras en red. Par\u00e1metros: \u00b6 hosts allow/deny : Permite restringir el acceso por IP: Ejemplo1 Permitir Redes hosts allow = 192.168.2.0/24 192.168.3.0/24 Ejemplo2 Permitir IP espec\u00edfica hosts allow = 192.168.2.5 192.168.3.100 192.168.3.200 Ejemplo1 Permitir acceso a todos los hosts que comiencen por 192.168. hosts allow = 192.168. Ejemplo1 Deniega acceso a todos los hosts que comiencen por 10. hosts deny = 10. Su funcionamiento es de arriba abajo, como las listas de acceso. Es decir, si tenemos: hosts allow = 127.0.0.1 192.168.2.0/24 192.168.3.0/24 hosts deny = 127.0.0.1 192.168.2.0/24 192.168.3.0/24 El que cuenta es el primero que coincida, por tanto s\u00ed permitir\u00eda el acceso. Actividades Secciones SAMBA \u00b6 NOTA: Recuerda reiniciar el servicio de samba tras modificar el fichero smb.conf. Estate atento para eliminar las l\u00edneas comentadas, las cuales comienzan por \u201c#\u201d y \u201c;\u201d Haz que todos los /homes de los usuarios sean navegables, que cualquiera pueda acceder sin credenciales y que solo tengan permisos de lectura. Recuerda que tambi\u00e9n deber\u00e1s tener en cuenta los permisos dentro del servidor Linux. Haz captura de la configuraci\u00f3n realizada en smb.conf y del explorador de Windows accediendo a tu /home de Ubuntu. Cambia en el servidor, en la secci\u00f3n [homes], la opci\u00f3n read only a no. Haz una captura de los permisos de tu carpeta /home. Prueba a crear un fichero desde Windows. \u00bfQu\u00e9 sucede y por qu\u00e9? Indica la configuraci\u00f3n del servicio m\u00e1s adecuada si quisiera permitir \u00fanicamente los equipos de la red 10.0.0.0/8 \u00bfSigues teniendo acceso desde el cliente? \u00bfPor qu\u00e9? Ahora cambia la restricci\u00f3n para permitir acceso \u00fanicamente a los hosts de la red en la que te encuentres. Usuarios \u00b6 El usuario Invitado \u00b6 Cuando accedemos como \u201c invitado \u201d (guest ok) por defecto accedemos como el usuario nobody:nogroup . Esto se puede modificar usando el siguiente par\u00e1metro: force user = javi force group = alumnos De esta forma cuando accedamos al sistema como invitado accederemos como el usuario javi que tiene el grupo principal alumnos. Restricci\u00f3n por usuarios \u00b6 En caso de que no permitamos el acceso de invitados (guest ok = no) el servidor nos solicitar\u00e1 nuestras credenciales: Se puede restringir los usuarios que pueden tener acceso a un recurso: valid users = javi pepe jorge invalid users = root @profesores @root NOTA: El \u201c@\u201d indica que se hace referencia a un grupo. Por tanto ning\u00fan usuario perteneciente al grupo root o de profesores puede acceder. admin users = salva NOTA: Los usuarios dentro de esta lista actuar\u00e1n como root . NOTA: Si un usuario est\u00e1 en el listado de \u201cvalid users\u201d y en el de \u201cinvalid users\u201d se le deniega el acceso. Autentificaci\u00f3n en Samba a trav\u00e9s de usuarios \u00b6 Para autentificarse en samba a trav\u00e9s de usuarios se deben cumplir 2 requisitos: El usuario debe existir en el sistema /etc/passwd sudo useradd -s /bin/true \u201cusuario\u201d NOTA: De esta forma no se crea el /home del usuario y no se permite el acceso al sistema si no es a trav\u00e9s de samba. Es decir, el usuario no se podr\u00eda conectar a trav\u00e9s de ssh o localmente. El usuario debe existir en el servicio de samba ( pbedit -L ). sudo smbpasswd \u2013a \u201cusuario\u201d NOTA: La contrase\u00f1a es recomendable que sea diferente a la usada en el sistema. Listar usuarios dados de alta en SAMBA: pdbedit -L Actividades Usuarios SAMBA \u00b6 Prueba a crear un usuario con smbpasswd sin que \u00e9ste exista en el sistema Linux. \u00bfQu\u00e9 sucede? Adjunta una captura. Crea el usuario \u201cleonardo\u201d en el sistema linux, recuerda que dicho usuario solo debe ser capaz de acceder al sistema a trav\u00e9s de samba. Posteriormente crealo para samba. Visualiza los usuarios de samba y f\u00edjate en el UID asignado al usuario reci\u00e9n creado \u00bftiene el mismo UID que en el sistema Linux (/etc/passwd)? Adjunta capturas de todo el proceso. Cierra la sesi\u00f3n actual en el servidor (exit) e intenta iniciar sesi\u00f3n con el usuario \u201cleonardo\u201d \u00bfQu\u00e9 sucede y por qu\u00e9? Edita en el servidor la secci\u00f3n [homes] con \u201cforce user = root\u201d. Reinicia el servicio. Intenta crear, desde el cliente de Windows, un documento en el escritorio del /home compartido. \u00bfTe permite crearlo? \u00bfPor qu\u00e9? \u00bfQu\u00e9 permisos y usuario propietario tiene el fichero creado? Adjunta capturas a las explicaciones. Cambia la configuraci\u00f3n en el servidor de la carpeta \u201c/home/usuario/ejercicio2\u201d para que no permita el acceso de invitados y solo permita al usuario \u201cleonardo\u201d. Muestra la configuraci\u00f3n. Intenta acceder desde el cliente Windows con las credenciales de tu usuario (en vez de javi usa tu usuario) \u00bfQu\u00e9 sucede? Adjunta capturas de pantalla.","title":"Configuraci\u00f3n de Secciones y Usuarios en SAMBA"},{"location":"Practica15_SambaSecUsers.html#configuracion-de-secciones-y-usuarios-en-samba","text":"","title":"Configuraci\u00f3n de Secciones y Usuarios en SAMBA"},{"location":"Practica15_SambaSecUsers.html#secciones","text":"Dentro del fichero de configuraci\u00f3n encontramos diversas secciones, entre las que destacaremos tres: [global]: Las opciones especificadas aqu\u00ed afectan a cualquier recurso compartido. A tener en cuenta, si una misma opci\u00f3n se declara en la secci\u00f3n global y en otra secci\u00f3n, por ejemplo ejercicio1 , tendr\u00e1 mayor peso la de la secci\u00f3n m\u00e1s espec\u00edfica, es decir ejercicio1 . [homes]: Se permite indicar las opciones para el /home de los usuarios existentes en el servidor. De tal forma que podr\u00edamos acceder a nuestro /home desde cualquier m\u00e1quina del grupo de trabajo de la siguiente forma: \\\\IP_SERVIDOR\\usuario \u2192 (file://IP_SERVIDOR/usuario) [printers]: Informaci\u00f3n del trato para la compartici\u00f3n de impresoras en red.","title":"Secciones"},{"location":"Practica15_SambaSecUsers.html#parametros","text":"hosts allow/deny : Permite restringir el acceso por IP: Ejemplo1 Permitir Redes hosts allow = 192.168.2.0/24 192.168.3.0/24 Ejemplo2 Permitir IP espec\u00edfica hosts allow = 192.168.2.5 192.168.3.100 192.168.3.200 Ejemplo1 Permitir acceso a todos los hosts que comiencen por 192.168. hosts allow = 192.168. Ejemplo1 Deniega acceso a todos los hosts que comiencen por 10. hosts deny = 10. Su funcionamiento es de arriba abajo, como las listas de acceso. Es decir, si tenemos: hosts allow = 127.0.0.1 192.168.2.0/24 192.168.3.0/24 hosts deny = 127.0.0.1 192.168.2.0/24 192.168.3.0/24 El que cuenta es el primero que coincida, por tanto s\u00ed permitir\u00eda el acceso.","title":"Par\u00e1metros:"},{"location":"Practica15_SambaSecUsers.html#actividades-secciones-samba","text":"NOTA: Recuerda reiniciar el servicio de samba tras modificar el fichero smb.conf. Estate atento para eliminar las l\u00edneas comentadas, las cuales comienzan por \u201c#\u201d y \u201c;\u201d Haz que todos los /homes de los usuarios sean navegables, que cualquiera pueda acceder sin credenciales y que solo tengan permisos de lectura. Recuerda que tambi\u00e9n deber\u00e1s tener en cuenta los permisos dentro del servidor Linux. Haz captura de la configuraci\u00f3n realizada en smb.conf y del explorador de Windows accediendo a tu /home de Ubuntu. Cambia en el servidor, en la secci\u00f3n [homes], la opci\u00f3n read only a no. Haz una captura de los permisos de tu carpeta /home. Prueba a crear un fichero desde Windows. \u00bfQu\u00e9 sucede y por qu\u00e9? Indica la configuraci\u00f3n del servicio m\u00e1s adecuada si quisiera permitir \u00fanicamente los equipos de la red 10.0.0.0/8 \u00bfSigues teniendo acceso desde el cliente? \u00bfPor qu\u00e9? Ahora cambia la restricci\u00f3n para permitir acceso \u00fanicamente a los hosts de la red en la que te encuentres.","title":"Actividades Secciones SAMBA"},{"location":"Practica15_SambaSecUsers.html#usuarios","text":"","title":"Usuarios"},{"location":"Practica15_SambaSecUsers.html#el-usuario-invitado","text":"Cuando accedemos como \u201c invitado \u201d (guest ok) por defecto accedemos como el usuario nobody:nogroup . Esto se puede modificar usando el siguiente par\u00e1metro: force user = javi force group = alumnos De esta forma cuando accedamos al sistema como invitado accederemos como el usuario javi que tiene el grupo principal alumnos.","title":"El usuario Invitado"},{"location":"Practica15_SambaSecUsers.html#restriccion-por-usuarios","text":"En caso de que no permitamos el acceso de invitados (guest ok = no) el servidor nos solicitar\u00e1 nuestras credenciales: Se puede restringir los usuarios que pueden tener acceso a un recurso: valid users = javi pepe jorge invalid users = root @profesores @root NOTA: El \u201c@\u201d indica que se hace referencia a un grupo. Por tanto ning\u00fan usuario perteneciente al grupo root o de profesores puede acceder. admin users = salva NOTA: Los usuarios dentro de esta lista actuar\u00e1n como root . NOTA: Si un usuario est\u00e1 en el listado de \u201cvalid users\u201d y en el de \u201cinvalid users\u201d se le deniega el acceso.","title":"Restricci\u00f3n por usuarios"},{"location":"Practica15_SambaSecUsers.html#autentificacion-en-samba-a-traves-de-usuarios","text":"Para autentificarse en samba a trav\u00e9s de usuarios se deben cumplir 2 requisitos: El usuario debe existir en el sistema /etc/passwd sudo useradd -s /bin/true \u201cusuario\u201d NOTA: De esta forma no se crea el /home del usuario y no se permite el acceso al sistema si no es a trav\u00e9s de samba. Es decir, el usuario no se podr\u00eda conectar a trav\u00e9s de ssh o localmente. El usuario debe existir en el servicio de samba ( pbedit -L ). sudo smbpasswd \u2013a \u201cusuario\u201d NOTA: La contrase\u00f1a es recomendable que sea diferente a la usada en el sistema. Listar usuarios dados de alta en SAMBA: pdbedit -L","title":"Autentificaci\u00f3n en Samba a trav\u00e9s de usuarios"},{"location":"Practica15_SambaSecUsers.html#actividades-usuarios-samba","text":"Prueba a crear un usuario con smbpasswd sin que \u00e9ste exista en el sistema Linux. \u00bfQu\u00e9 sucede? Adjunta una captura. Crea el usuario \u201cleonardo\u201d en el sistema linux, recuerda que dicho usuario solo debe ser capaz de acceder al sistema a trav\u00e9s de samba. Posteriormente crealo para samba. Visualiza los usuarios de samba y f\u00edjate en el UID asignado al usuario reci\u00e9n creado \u00bftiene el mismo UID que en el sistema Linux (/etc/passwd)? Adjunta capturas de todo el proceso. Cierra la sesi\u00f3n actual en el servidor (exit) e intenta iniciar sesi\u00f3n con el usuario \u201cleonardo\u201d \u00bfQu\u00e9 sucede y por qu\u00e9? Edita en el servidor la secci\u00f3n [homes] con \u201cforce user = root\u201d. Reinicia el servicio. Intenta crear, desde el cliente de Windows, un documento en el escritorio del /home compartido. \u00bfTe permite crearlo? \u00bfPor qu\u00e9? \u00bfQu\u00e9 permisos y usuario propietario tiene el fichero creado? Adjunta capturas a las explicaciones. Cambia la configuraci\u00f3n en el servidor de la carpeta \u201c/home/usuario/ejercicio2\u201d para que no permita el acceso de invitados y solo permita al usuario \u201cleonardo\u201d. Muestra la configuraci\u00f3n. Intenta acceder desde el cliente Windows con las credenciales de tu usuario (en vez de javi usa tu usuario) \u00bfQu\u00e9 sucede? Adjunta capturas de pantalla.","title":"Actividades Usuarios SAMBA"},{"location":"Practica16_SambaDC.html","text":"SAMBA-DC (Domain Controller). \u00b6 En esta pr\u00e1ctica se realizar\u00e1n los siguientes puntos: La configuraci\u00f3n del Controlador de Dominio en Samba. Se agregar\u00e1n clientes de windows. Configuraci\u00f3n de recursos compartidos. Activaci\u00f3n de RSAT. Configuraci\u00f3n de perfiles m\u00f3viles. Recordatorio Controlador de Dominio (DC). \u00b6 Es un servidor que se ocupa de permitir el acceso a ciertos usuarios a ciertos recursos del dominio. Un dominio es un grupo de recursos (equipos, ficheros, usuarios, impresoras, etc.) dentro de una red. El acceso a dicho dominio o las pol\u00edticas de seguridad de todos esos recursos es administrada por el controlador de dominio. Habitualmente se implementan en Windows Server, aunque tambi\u00e9n se pueden implementar en Linux bajo samba. En una implementaci\u00f3n adecuada, se despliega m\u00e1s de un controlador de dominio a la vez que act\u00faan como uno (cluster) de esta forma se dota al servicio de redundancia y alta disponibilidad, es decir, que si se produce una aver\u00eda en un control de dominio el servicio sigue activo pues hay otro/s controladores activos. Los dominios usan rutas de nombres similares a los DNS, tienen una ruta absoluta FQDN (Full Qualified Domain Name) y una ruta relativa PQDN (Partially Qualified Domain Name). NOTA: Independientemente del sistema operativo usado necesitaremos de otros servicios para complementar, a continuaci\u00f3n se enumeran: LDAP : Ser\u00e1 la base de datos que alberga la informaci\u00f3n de los usuarios. Kerberos : Se encarga de la seguridad a nivel de autentificaci\u00f3n segura de los usuarios. DNS : Habitualmente el acceso al dominio se hace a trav\u00e9s de un nombre de dominio. El servicio DNS permite la resoluci\u00f3n de ese nombre de dominio al direccionamiento IP. NTP : Es el servicio que se encarga de la sincronizaci\u00f3n del reloj de cada m\u00e1quina. Actividades \u00b6 Realiza un snapshot de tu m\u00e1quina virtual. Configura la m\u00e1quina virtual en formato \u201c Nat Network \u201d. Establecemos una configuraci\u00f3n de red para tu servidor. Un dominio de b\u00fasqueda ( Search Domain ) nos va a permitir que si el servidor recibe una b\u00fasqueda de petici\u00f3n de un recurso, por ejemplo \u201cmaquina03\u201d, autom\u00e1ticamente el servidor va intentar buscar por el nombre de dominio completo: \u201cmaquina03.sor.com\u201d. Es decir, intenta resolver una ruta relativa de dominio (PQDN) a una ruta absoluta de dominio (FQDN). Acordaros de aplicar los cambios con netplan apply . Instalar los paquetes \u201c dnsutils \u201d. El paquete dnsutils simplemente son una serie de herramientas que nos ayudar\u00e1n a comprobar que la resoluci\u00f3n del nombre de nuestro dominio es correcta. Es conveniente saber cu\u00e1l es el nombre de nuestra m\u00e1quina: En el fichero \u201c/etc/hosts\u201d es como un servicio DNS local, es decir, tiene una serie de pares nombres/IP que resuelve localmente. Por ejemplo si le hago ping a \u201cprofesor\u201d mi m\u00e1quina sabe resolverlo a la IP 127.0.1.1 que es la IP de loopback. Realiza una copia de seguridad del fichero /etc/hosts . Modifica el fichero original ( /etc/hosts ) para que resuelva el nombre de tu m\u00e1quina y tu FQDN en este caso profesor.sor.local a la IP del servidor 10.0.100.100 en este caso. Comprueba con un ping a los nombres que funciona y te contesta con la IP. Ejemplos: Ping a profesor. Comprobaci\u00f3n `/etc/hosts`. Comprobaci\u00f3n de ping al localhost deber\u00eda contestar 127.0.0.1. Comprobaci\u00f3nes de ping. A continuaci\u00f3n instalamos los paquetes \u201c attr \u201d y \u201c acl \u201d que nos dar\u00e1n m\u00e1s opciones de seguridad y mayor compatibilidad al interconectar con equipos clientes Windows a nuestro dominio. Vamos a aplicar estos paquetes al sistema cuando se arranque . Para ello, hacemos una copia de seguridad del fichero /etc/fstab y posteriormente lo editamos. Importante que el separador en este fichero es el tabulador. Simplemente hay que a\u00f1adir en el ra\u00edz (\u201c/\u201d) las opciones user_xattr,acl,barrier=1,defaults donde antes s\u00f3lo pon\u00eda defaults. Importante no equivocarse y hacerlo en el \u201c/\u201d, no en el /boot ni en la memoria swap . Reiniciar el server (reboot). Ejemplos: attr y acl acl al sector de arranque en /etc/fstab. Ahora vamos a instalar el paquete NTP , ya que es necesario tener sincronizada la hora para servicios del estilo firewall , LDAP , para los registros de los logs, para el servicio activo de Windows, etc. Se puede comprobar que el servicio est\u00e1 activo con \u201csystemctl status ntp\u201d Detenemos y deshabilitamos cualquier servicio que tuvi\u00e9ramos de samba (que no fuera de controlador de dominio) previa a la instalaci\u00f3n. Eliminamos cualquier configuraci\u00f3n previa de samba o de kerberos. Vamos a instalar los siguientes paquetes: Samba \u2192 En el paquete ya viene integrado un m\u00f3dulo de LDAP para almacenar los usuarios. krb5-config \u2192 Es la configuraci\u00f3n de Kerberos que usaremos en samba. Habr\u00e1 que instalarlo m\u00e1s adelante. winbind \u2192 Paquete necesario para que un cliente de Windows se pueda autentificar en nuestro sistema DC en Linux. smbclient \u2192 Instalaremos el cliente samba, simplemente para tener ciertos comandos de consulta, realmente no es necesario para montar el servidor. Durante la instalaci\u00f3n del Kerberos nos pedir\u00e1 3 cosas principalmente: a. El reino (realm): Pondremos el mismo que nuestro dominio. b. La IP del servidor Kerberos c. La IP para la administraci\u00f3n del Kerberos. En este caso nuestro servidor de kerberos va a estar en el propio controlador de dominio que estamos configurando, pero en otra situaci\u00f3n se podr\u00eda tratar de una m\u00e1quina independiente. Comprobamos que el servicio samba-ad-dc funciona y est\u00e1 activo: hora vamos a pasar a configurar el controlador de dominio de samba. Vamos a hacer uso de samba-tool para completar la configuraci\u00f3n: samba-tool domain provision --use-rfc2307 --interactive Dentro de la configuraci\u00f3n coger\u00e1 el reino/dominio de nuestro servidor, por lo que no tenemos que rellenar nada, excepto la parte de DNS forwarder que usaremos la DNS de google (8.8.8.8) . Esto lo hacemos porque nosotros seremos el servidor DNS, pero si no sabemos resolver una p\u00e1gina pasaremos la solicitud de resoluci\u00f3n al servidor DNS forwarder (8.8.8.8). Como contrase\u00f1a de administrador necesita tener una may\u00fascula/min\u00fascula/n\u00famero/longitud de 8 . El usuario por defecto es \u201cadministrator\u201d Si todo ha salido bien, nos habr\u00e1 creado el fichero smb.conf acorde a nuestra configuraci\u00f3n: [global] : Donde se puede observar todos los datos de configuraci\u00f3n del dominio, adem\u00e1s de los roles para los que se ha creado (DC-AD). [netlogon] : Ya ha creado de forma autom\u00e1tica la carpeta para los scripts de inicio de sesi\u00f3n de los clientes. [sysvol] : El sysvol es reponsable de replicar las GPOs (Pol\u00edticas de Grupos) aplicadas en el editor de directivas de grupo, todos los cambios y GPOs nuevos son replicados por alli. Ahora pasamos a instalar Kerberos, antes solo hab\u00edamos asociado la configuraci\u00f3n a samba (reino, dns, password, etc). Para ello instalamos el paquete \u201c krb5-user \u201d. A continuaci\u00f3n copiamos la configuraci\u00f3n de kerberos para samba por la configuraci\u00f3n por defecto de kerberos: cp /var/lib/samba/private/krb5.conf /etc/krb5.conf Detemos system-resolved para que no nos manipule autom\u00e1ticamente el fichero /etc/resolv.conf Finalmente comprobamos que la configuraci\u00f3n de Kerberos est\u00e1 bien: Como ya tenemos configurado el DNS forwarder, volvemos a nuestra configuraci\u00f3n de red y cambiamos el servidor DNS como a nosotros mismos, para resolver las peticiones de nuestro dominio. Acordaros del netplan apply. Finalmente podemos ver el resumen de nuestro dominio: Comprobamos que funciona la resoluci\u00f3n al dominio: Agregar un cliente Windows al dominio de Samba. \u00b6 Crear Usuario en el Controlador de Dominio \u00b6 Lo primero ser\u00e1 tener un usuario v\u00e1lido para acceder al dominio, para ello vamos a nuestro servidor que hace de controlador de dominio y creamos dicho usuario: Redorcatorio Recuerda a la hora de insertar la contrase\u00f1a que debe cumplir con un m\u00ednimo de 8 caracteres, una may\u00fascula, una min\u00fascula y un n\u00famero. Para el usuario \u201cniko\u201d se ha creado la contrase\u00f1a \u201cNiko1234#\u201d NOTA: A diferencia de lo que pasaba en samba, cuando NO era un controlador de dominio, el usuario no es necesario que exista en el sistema y adem\u00e1s los UID no son iguales a los del sistema operativo. A\u00f1adir el Cliente Windows al Dominio Samba. \u00b6 A\u00f1ade al cliente en la misma red interna que el controlador de dominio de SAMBA, en nuestro caso una \u201cNAT Network\u201d . \u00c9sta red se le asignar\u00e1 una IP autom\u00e1tica y una puerta de enlace, pero debemos forzarle que el servidor DNS sea nuestro controlador de dominio. NOTA: En una situaci\u00f3n real, el propio controlador de dominio actuar\u00eda de servidor DHCP, o en el caso de tener un servicio DHCP ya asignar\u00eda el DNS autom\u00e1ticamente del controlador de dominio, por lo que no habr\u00eda que hacer este paso. Configuraci\u00f3n de Propiedades de Red en Windows. Comprobaci\u00f3n conexi\u00f3n con Server. Vamos a introducir el cliente dentro de nuestro dominio: Bot\u00f3n derecho \u2013 Propiedades sobre el icono de \u201cEquipo\u201d . Pinchar en \u201cCambiar Configuraci\u00f3n\u201d . Posteriormente le damos a \u201ccambiar..\u201d y seleccionamos nuestro dominio. Propiedades Equipo. Cambio para sellecionar dominio. NOTA: Es muy importante que accedamos con un usuario con permisos de administrador en el servidor linux, si os acord\u00e1is Kerberos es el servicio que se encarga de la seguridad de nuestro controlador de dominio, y por defecto \u00e9ste crea el usuario \u201cadministrator\u201d . Cambio de usuario a Administrador. Confirmaci\u00f3n cambio Dominio. Finalmente reiniciamos el equipo cliente e intentamos acceder con un usuario del controlador de dominio, como por ejemplo \u201cniko\u201d, fijaros que es un usuario que no existe en el Windows a nivel local, existe en el servidor, por lo que \u201cniko\u201d se podr\u00eda registrar en cualquier equipo asociado al dominio. Comprobaci\u00f3n de Logueo. Compartir recursos en un dominio entre Windows y Servidor Ubuntu. \u00b6 A la hora de compartir recursos es pr\u00e1cticamente igual a cuando se realizaba en Samba sin directorio activo. Crear la carpeta a compartir y darle permisos requeridos. Acceder al fichero de configuraci\u00f3n de samba. Generar un recurso a compartir. Ejemplo recurso compartido. Reiniciar el servicio. Ahora el servicio de samba esta configurado como directorio activo podemos hacer: smbcontrol all reload-config Para que cualquier usuario del dominio pueda administrar un recurso podemos agregarle al recurso el grupo \u201cDomain Users\u201d , se puede comprobar que existe con el siguiente comando dentro de la base de datos de Samba. winbind \u00b6 El problema que tendremos, la primera vez, es que ese grupo no tiene un GID (identificador de grupo) asociado del sistema operativo Ubuntu Server. Para ello vamos a usar \u201cwinbind\u201d para que pueda traducir a partir de un grupo de samba a un grupo del sistema y hacer una equivalencia. Se instalan los paquetes: apt-get install libnss-winbind apt-get install libpam-winbind Se modifica el fichero \u201c/etc/nsswitch.conf\u201d que revisa donde tiene que buscar el registro de usuarios/grupos del sistema. \u201cFiles\u201d ser\u00e1 su primera opci\u00f3n, que ser\u00e1 /etc/passwd y /etc/groups , si no los encuentra ah\u00ed pasa a usar el servicio winbind para hacer la equivalencia con samba AD. Finalmente se puede comprobar que funciona y que cuando le preguntamos al sistema por el grupo del controlador de dominio \u201cDomain Users\u201d el sistema nos indica que es capaz de relacionarlo con un identificador de grupo, en este caso el 100 . En el ejemplo se ve que el usuario del dominio niko pertenece al grupo 100 que es el de domain users. Finalmente se a\u00f1aden todas las carpetas a compartir y sus rutas padres al grupo del dominio: chgrp -R \"Domain Users\" /recursosSOR chmod 2750recursosSOR NOTA: Si se hab\u00eda iniciado sesi\u00f3n con tu usuario de Windows 10 antes de cambiar la configuraci\u00f3n de /etc/nsswitch , cierra sesi\u00f3n y vuelve a acceder. En el cliente Windows 10 que ya est\u00e1 unido al dominio deberemos: Comprobar que navega por Internet. Acceder a una carpeta/directorio y buscar el nombre de tu equipo que est\u00e1 compartiendo el recurso, en este caso es el propio servidor. NOTA: No deber\u00eda pedir credenciales, porque ya hab\u00edamos iniciado sesi\u00f3n como \u201cniko\u201d en este ordenador que pertenece al dominio y a Domain Users. Adem\u00e1s, desde las propiedades de seguridad del cliente Windows podemos cambiar las pol\u00edticas de acceso de esa carpeta compartida (siempre que tengamos permisos en el servidor para ello). Activar RSAT \u00b6 Se debe aplicar a Aplicaciones y Caracter\u00edsticas \u2013 Caracter\u00edsticas Opcionales y se agrega una nueva caracter\u00edstica: Caracter\u00edsticas Opcionales. Agregar una Caracter\u00edstica. Para agregar filtramos por RSAT y activamos: Agregar RSAT. Perfiles M\u00f3viles. \u00b6 Un perfil m\u00f3vil, es aquel donde un usuario se registre en la m\u00e1quina que se registre, si \u00e9sta pertenece al dominio, tendr\u00e1 sus ficheros personales con los que trabaja d\u00eda a d\u00eda. Configuraci\u00f3n de Pol\u00edticas de Cliente \u00b6 Como administradores, si queremos implementar perfiles m\u00f3viles, tenemos dos opciones. Indicar que el perfil de cada usuario debe apuntar al servidor, en nuestro caso el samba ubuntu server . Crear una pol\u00edtica de grupo para que cada usuario que acceda a dicha m\u00e1quina directamente se le genere el perfil adecuado. NOTA: Obviamente, la soluci\u00f3n b) es mucho m\u00e1s escalable y por tanto m\u00e1s adecuada. OPCI\u00d3N 1 \u00b6 Entra al cliente Windows como Administrador ( Administrator ). Por curiosidad, ahora puedes ir a \u201cUsuarios y Equipos de Active Directory\u201d y ver/gestionar los grupos del directorio activo desde el propio Windows. En las propiedades del usuario y luego en su perfil: Usuarios y Equipos. Propiedades niko. OPCI\u00d3N 2 \u00b6 Entra al cliente Windows como Administrador ( Administrator ). Accede a la administraci\u00f3n de directivas de grupo (GPO). Crea una GPO asociado al dominio. Creamos GPO. Editamos la nueva pol\u00edtica creada. Editar nueva pol\u00edtica. Ahora Navegamos por Configuraci\u00f3n del Equipo \u2192 Directivas \u2192 Plantillas Administrativas \u2192 Sistema \u2192 Perfiles de Usuario. Dentro de Perfiles de Usuario seleccionamos la plantilla sobre perfiles m\u00f3viles para todos los usuarios conectados al equipo. Establecer Perfil m\u00f3vil. Ruta para Perfil m\u00f3vil. Una vez modificado la pol\u00edtica, \u00e9sta se actualiza en el servidor (Ubuntu Server) n la ruta Sysvol . Es decir si vamos al fichero de configuraci\u00f3n de Samba, vemos que hay un recurso compartido llamado sysvol . Ruta sysvol. Si investigamos dentro de esa carpeta vemos que hay una secci\u00f3n de Pol\u00edticas que justo se ha creado al mismo momento que hemos aplicado las pol\u00edticas: Confirmaci\u00f3n Ruta. Confirmaci\u00f3n de Recursos \u00b6 Se debe crear la carpeta donde se almacenar\u00e1n los recursos de los usuarios y Configurar acceso a cualquier usuario perteneciente al grupo de administradores del dominio: Posteriormente lo agregamos como un recurso a compartir: Reiniciamos el servicio: smbcontrol all reload-config Desde Windows (que es m\u00e1s visible) gestionamos los permisos de los perfiles de los usuarios, para ello accedemos a \\\\profesor y a las propiedades de \u201cprofiles\u201d: Si queremos agregar alg\u00fan grupo/usuario que no est\u00e9, como podr\u00eda ser Domain Users: Una vez tengamos agregados todos los grupos que queremos , vamos a filtrar e indicar los permisos de cada uno. Opciones de Compartici\u00f3n: Opciones de Seguridad: Acceso desde el usuario \u00b6 Ahora cada vez que nos registremos en cualquier ordenador del dominio, aunque sea la primera vez, ya tendremos configurada una carpeta compartida en nuestro perfil para nosotros solos (y los administradores). Redirecci\u00f3n \u00b6 Entre sistemas Linux s\u00ed se pod\u00eda direccionar directamente el /home de un usuario a una carpeta del servidor [homes] . En el caso de Windows debemos realizar una redirecci\u00f3n. Accedemos como \u201c administrator \u201d. Accede a la administraci\u00f3n de directivas de grupo ( GPO ). Crea una GPO asociado al dominio. Editamos la nueva pol\u00edtica creada. Accedemos a las propiedades de la carpeta que queremos redireccionar: Cerramos sesi\u00f3n y Registramos con otro usuario no administrador. Una vez registrados creamos unos ficheros en el escritorio o carpetas, como si estuvieramos trabajando y cerramos la sesi\u00f3n. Al cerrar la sesi\u00f3n se migran los ficheros al servidor y si nos conect\u00e1ramos a cualquier otra m\u00e1quina tendr\u00edamos nuestro Escritorio y ficheros con nosotros. A tener en cuenta Obviamente en la empresa, en caso de tener un AD con Samba como DC, no har\u00e1 falta configurar cada cliente Windows (crear las pol\u00edticas, etc), si no que usaremos una imagen, creada por ejemplo con clonezilla, y distribuiremos esa imagen con las pol\u00edticas ya configuradas a todas las m\u00e1quinas.","title":"SAMBA-DC (Domain Controller)."},{"location":"Practica16_SambaDC.html#samba-dc-domain-controller","text":"En esta pr\u00e1ctica se realizar\u00e1n los siguientes puntos: La configuraci\u00f3n del Controlador de Dominio en Samba. Se agregar\u00e1n clientes de windows. Configuraci\u00f3n de recursos compartidos. Activaci\u00f3n de RSAT. Configuraci\u00f3n de perfiles m\u00f3viles.","title":"SAMBA-DC (Domain Controller)."},{"location":"Practica16_SambaDC.html#recordatorio-controlador-de-dominio-dc","text":"Es un servidor que se ocupa de permitir el acceso a ciertos usuarios a ciertos recursos del dominio. Un dominio es un grupo de recursos (equipos, ficheros, usuarios, impresoras, etc.) dentro de una red. El acceso a dicho dominio o las pol\u00edticas de seguridad de todos esos recursos es administrada por el controlador de dominio. Habitualmente se implementan en Windows Server, aunque tambi\u00e9n se pueden implementar en Linux bajo samba. En una implementaci\u00f3n adecuada, se despliega m\u00e1s de un controlador de dominio a la vez que act\u00faan como uno (cluster) de esta forma se dota al servicio de redundancia y alta disponibilidad, es decir, que si se produce una aver\u00eda en un control de dominio el servicio sigue activo pues hay otro/s controladores activos. Los dominios usan rutas de nombres similares a los DNS, tienen una ruta absoluta FQDN (Full Qualified Domain Name) y una ruta relativa PQDN (Partially Qualified Domain Name). NOTA: Independientemente del sistema operativo usado necesitaremos de otros servicios para complementar, a continuaci\u00f3n se enumeran: LDAP : Ser\u00e1 la base de datos que alberga la informaci\u00f3n de los usuarios. Kerberos : Se encarga de la seguridad a nivel de autentificaci\u00f3n segura de los usuarios. DNS : Habitualmente el acceso al dominio se hace a trav\u00e9s de un nombre de dominio. El servicio DNS permite la resoluci\u00f3n de ese nombre de dominio al direccionamiento IP. NTP : Es el servicio que se encarga de la sincronizaci\u00f3n del reloj de cada m\u00e1quina.","title":"Recordatorio Controlador de Dominio (DC)."},{"location":"Practica16_SambaDC.html#actividades","text":"Realiza un snapshot de tu m\u00e1quina virtual. Configura la m\u00e1quina virtual en formato \u201c Nat Network \u201d. Establecemos una configuraci\u00f3n de red para tu servidor. Un dominio de b\u00fasqueda ( Search Domain ) nos va a permitir que si el servidor recibe una b\u00fasqueda de petici\u00f3n de un recurso, por ejemplo \u201cmaquina03\u201d, autom\u00e1ticamente el servidor va intentar buscar por el nombre de dominio completo: \u201cmaquina03.sor.com\u201d. Es decir, intenta resolver una ruta relativa de dominio (PQDN) a una ruta absoluta de dominio (FQDN). Acordaros de aplicar los cambios con netplan apply . Instalar los paquetes \u201c dnsutils \u201d. El paquete dnsutils simplemente son una serie de herramientas que nos ayudar\u00e1n a comprobar que la resoluci\u00f3n del nombre de nuestro dominio es correcta. Es conveniente saber cu\u00e1l es el nombre de nuestra m\u00e1quina: En el fichero \u201c/etc/hosts\u201d es como un servicio DNS local, es decir, tiene una serie de pares nombres/IP que resuelve localmente. Por ejemplo si le hago ping a \u201cprofesor\u201d mi m\u00e1quina sabe resolverlo a la IP 127.0.1.1 que es la IP de loopback. Realiza una copia de seguridad del fichero /etc/hosts . Modifica el fichero original ( /etc/hosts ) para que resuelva el nombre de tu m\u00e1quina y tu FQDN en este caso profesor.sor.local a la IP del servidor 10.0.100.100 en este caso. Comprueba con un ping a los nombres que funciona y te contesta con la IP. Ejemplos: Ping a profesor. Comprobaci\u00f3n `/etc/hosts`. Comprobaci\u00f3n de ping al localhost deber\u00eda contestar 127.0.0.1. Comprobaci\u00f3nes de ping. A continuaci\u00f3n instalamos los paquetes \u201c attr \u201d y \u201c acl \u201d que nos dar\u00e1n m\u00e1s opciones de seguridad y mayor compatibilidad al interconectar con equipos clientes Windows a nuestro dominio. Vamos a aplicar estos paquetes al sistema cuando se arranque . Para ello, hacemos una copia de seguridad del fichero /etc/fstab y posteriormente lo editamos. Importante que el separador en este fichero es el tabulador. Simplemente hay que a\u00f1adir en el ra\u00edz (\u201c/\u201d) las opciones user_xattr,acl,barrier=1,defaults donde antes s\u00f3lo pon\u00eda defaults. Importante no equivocarse y hacerlo en el \u201c/\u201d, no en el /boot ni en la memoria swap . Reiniciar el server (reboot). Ejemplos: attr y acl acl al sector de arranque en /etc/fstab. Ahora vamos a instalar el paquete NTP , ya que es necesario tener sincronizada la hora para servicios del estilo firewall , LDAP , para los registros de los logs, para el servicio activo de Windows, etc. Se puede comprobar que el servicio est\u00e1 activo con \u201csystemctl status ntp\u201d Detenemos y deshabilitamos cualquier servicio que tuvi\u00e9ramos de samba (que no fuera de controlador de dominio) previa a la instalaci\u00f3n. Eliminamos cualquier configuraci\u00f3n previa de samba o de kerberos. Vamos a instalar los siguientes paquetes: Samba \u2192 En el paquete ya viene integrado un m\u00f3dulo de LDAP para almacenar los usuarios. krb5-config \u2192 Es la configuraci\u00f3n de Kerberos que usaremos en samba. Habr\u00e1 que instalarlo m\u00e1s adelante. winbind \u2192 Paquete necesario para que un cliente de Windows se pueda autentificar en nuestro sistema DC en Linux. smbclient \u2192 Instalaremos el cliente samba, simplemente para tener ciertos comandos de consulta, realmente no es necesario para montar el servidor. Durante la instalaci\u00f3n del Kerberos nos pedir\u00e1 3 cosas principalmente: a. El reino (realm): Pondremos el mismo que nuestro dominio. b. La IP del servidor Kerberos c. La IP para la administraci\u00f3n del Kerberos. En este caso nuestro servidor de kerberos va a estar en el propio controlador de dominio que estamos configurando, pero en otra situaci\u00f3n se podr\u00eda tratar de una m\u00e1quina independiente. Comprobamos que el servicio samba-ad-dc funciona y est\u00e1 activo: hora vamos a pasar a configurar el controlador de dominio de samba. Vamos a hacer uso de samba-tool para completar la configuraci\u00f3n: samba-tool domain provision --use-rfc2307 --interactive Dentro de la configuraci\u00f3n coger\u00e1 el reino/dominio de nuestro servidor, por lo que no tenemos que rellenar nada, excepto la parte de DNS forwarder que usaremos la DNS de google (8.8.8.8) . Esto lo hacemos porque nosotros seremos el servidor DNS, pero si no sabemos resolver una p\u00e1gina pasaremos la solicitud de resoluci\u00f3n al servidor DNS forwarder (8.8.8.8). Como contrase\u00f1a de administrador necesita tener una may\u00fascula/min\u00fascula/n\u00famero/longitud de 8 . El usuario por defecto es \u201cadministrator\u201d Si todo ha salido bien, nos habr\u00e1 creado el fichero smb.conf acorde a nuestra configuraci\u00f3n: [global] : Donde se puede observar todos los datos de configuraci\u00f3n del dominio, adem\u00e1s de los roles para los que se ha creado (DC-AD). [netlogon] : Ya ha creado de forma autom\u00e1tica la carpeta para los scripts de inicio de sesi\u00f3n de los clientes. [sysvol] : El sysvol es reponsable de replicar las GPOs (Pol\u00edticas de Grupos) aplicadas en el editor de directivas de grupo, todos los cambios y GPOs nuevos son replicados por alli. Ahora pasamos a instalar Kerberos, antes solo hab\u00edamos asociado la configuraci\u00f3n a samba (reino, dns, password, etc). Para ello instalamos el paquete \u201c krb5-user \u201d. A continuaci\u00f3n copiamos la configuraci\u00f3n de kerberos para samba por la configuraci\u00f3n por defecto de kerberos: cp /var/lib/samba/private/krb5.conf /etc/krb5.conf Detemos system-resolved para que no nos manipule autom\u00e1ticamente el fichero /etc/resolv.conf Finalmente comprobamos que la configuraci\u00f3n de Kerberos est\u00e1 bien: Como ya tenemos configurado el DNS forwarder, volvemos a nuestra configuraci\u00f3n de red y cambiamos el servidor DNS como a nosotros mismos, para resolver las peticiones de nuestro dominio. Acordaros del netplan apply. Finalmente podemos ver el resumen de nuestro dominio: Comprobamos que funciona la resoluci\u00f3n al dominio:","title":"Actividades"},{"location":"Practica16_SambaDC.html#agregar-un-cliente-windows-al-dominio-de-samba","text":"","title":"Agregar un cliente Windows al dominio de Samba."},{"location":"Practica16_SambaDC.html#crear-usuario-en-el-controlador-de-dominio","text":"Lo primero ser\u00e1 tener un usuario v\u00e1lido para acceder al dominio, para ello vamos a nuestro servidor que hace de controlador de dominio y creamos dicho usuario: Redorcatorio Recuerda a la hora de insertar la contrase\u00f1a que debe cumplir con un m\u00ednimo de 8 caracteres, una may\u00fascula, una min\u00fascula y un n\u00famero. Para el usuario \u201cniko\u201d se ha creado la contrase\u00f1a \u201cNiko1234#\u201d NOTA: A diferencia de lo que pasaba en samba, cuando NO era un controlador de dominio, el usuario no es necesario que exista en el sistema y adem\u00e1s los UID no son iguales a los del sistema operativo.","title":"Crear Usuario en el Controlador de Dominio"},{"location":"Practica16_SambaDC.html#anadir-el-cliente-windows-al-dominio-samba","text":"A\u00f1ade al cliente en la misma red interna que el controlador de dominio de SAMBA, en nuestro caso una \u201cNAT Network\u201d . \u00c9sta red se le asignar\u00e1 una IP autom\u00e1tica y una puerta de enlace, pero debemos forzarle que el servidor DNS sea nuestro controlador de dominio. NOTA: En una situaci\u00f3n real, el propio controlador de dominio actuar\u00eda de servidor DHCP, o en el caso de tener un servicio DHCP ya asignar\u00eda el DNS autom\u00e1ticamente del controlador de dominio, por lo que no habr\u00eda que hacer este paso. Configuraci\u00f3n de Propiedades de Red en Windows. Comprobaci\u00f3n conexi\u00f3n con Server. Vamos a introducir el cliente dentro de nuestro dominio: Bot\u00f3n derecho \u2013 Propiedades sobre el icono de \u201cEquipo\u201d . Pinchar en \u201cCambiar Configuraci\u00f3n\u201d . Posteriormente le damos a \u201ccambiar..\u201d y seleccionamos nuestro dominio. Propiedades Equipo. Cambio para sellecionar dominio. NOTA: Es muy importante que accedamos con un usuario con permisos de administrador en el servidor linux, si os acord\u00e1is Kerberos es el servicio que se encarga de la seguridad de nuestro controlador de dominio, y por defecto \u00e9ste crea el usuario \u201cadministrator\u201d . Cambio de usuario a Administrador. Confirmaci\u00f3n cambio Dominio. Finalmente reiniciamos el equipo cliente e intentamos acceder con un usuario del controlador de dominio, como por ejemplo \u201cniko\u201d, fijaros que es un usuario que no existe en el Windows a nivel local, existe en el servidor, por lo que \u201cniko\u201d se podr\u00eda registrar en cualquier equipo asociado al dominio. Comprobaci\u00f3n de Logueo.","title":"A\u00f1adir el Cliente Windows al Dominio Samba."},{"location":"Practica16_SambaDC.html#compartir-recursos-en-un-dominio-entre-windows-y-servidor-ubuntu","text":"A la hora de compartir recursos es pr\u00e1cticamente igual a cuando se realizaba en Samba sin directorio activo. Crear la carpeta a compartir y darle permisos requeridos. Acceder al fichero de configuraci\u00f3n de samba. Generar un recurso a compartir. Ejemplo recurso compartido. Reiniciar el servicio. Ahora el servicio de samba esta configurado como directorio activo podemos hacer: smbcontrol all reload-config Para que cualquier usuario del dominio pueda administrar un recurso podemos agregarle al recurso el grupo \u201cDomain Users\u201d , se puede comprobar que existe con el siguiente comando dentro de la base de datos de Samba.","title":"Compartir recursos en un dominio entre Windows y Servidor Ubuntu."},{"location":"Practica16_SambaDC.html#winbind","text":"El problema que tendremos, la primera vez, es que ese grupo no tiene un GID (identificador de grupo) asociado del sistema operativo Ubuntu Server. Para ello vamos a usar \u201cwinbind\u201d para que pueda traducir a partir de un grupo de samba a un grupo del sistema y hacer una equivalencia. Se instalan los paquetes: apt-get install libnss-winbind apt-get install libpam-winbind Se modifica el fichero \u201c/etc/nsswitch.conf\u201d que revisa donde tiene que buscar el registro de usuarios/grupos del sistema. \u201cFiles\u201d ser\u00e1 su primera opci\u00f3n, que ser\u00e1 /etc/passwd y /etc/groups , si no los encuentra ah\u00ed pasa a usar el servicio winbind para hacer la equivalencia con samba AD. Finalmente se puede comprobar que funciona y que cuando le preguntamos al sistema por el grupo del controlador de dominio \u201cDomain Users\u201d el sistema nos indica que es capaz de relacionarlo con un identificador de grupo, en este caso el 100 . En el ejemplo se ve que el usuario del dominio niko pertenece al grupo 100 que es el de domain users. Finalmente se a\u00f1aden todas las carpetas a compartir y sus rutas padres al grupo del dominio: chgrp -R \"Domain Users\" /recursosSOR chmod 2750recursosSOR NOTA: Si se hab\u00eda iniciado sesi\u00f3n con tu usuario de Windows 10 antes de cambiar la configuraci\u00f3n de /etc/nsswitch , cierra sesi\u00f3n y vuelve a acceder. En el cliente Windows 10 que ya est\u00e1 unido al dominio deberemos: Comprobar que navega por Internet. Acceder a una carpeta/directorio y buscar el nombre de tu equipo que est\u00e1 compartiendo el recurso, en este caso es el propio servidor. NOTA: No deber\u00eda pedir credenciales, porque ya hab\u00edamos iniciado sesi\u00f3n como \u201cniko\u201d en este ordenador que pertenece al dominio y a Domain Users. Adem\u00e1s, desde las propiedades de seguridad del cliente Windows podemos cambiar las pol\u00edticas de acceso de esa carpeta compartida (siempre que tengamos permisos en el servidor para ello).","title":"winbind"},{"location":"Practica16_SambaDC.html#activar-rsat","text":"Se debe aplicar a Aplicaciones y Caracter\u00edsticas \u2013 Caracter\u00edsticas Opcionales y se agrega una nueva caracter\u00edstica: Caracter\u00edsticas Opcionales. Agregar una Caracter\u00edstica. Para agregar filtramos por RSAT y activamos: Agregar RSAT.","title":"Activar RSAT"},{"location":"Practica16_SambaDC.html#perfiles-moviles","text":"Un perfil m\u00f3vil, es aquel donde un usuario se registre en la m\u00e1quina que se registre, si \u00e9sta pertenece al dominio, tendr\u00e1 sus ficheros personales con los que trabaja d\u00eda a d\u00eda.","title":"Perfiles M\u00f3viles."},{"location":"Practica16_SambaDC.html#configuracion-de-politicas-de-cliente","text":"Como administradores, si queremos implementar perfiles m\u00f3viles, tenemos dos opciones. Indicar que el perfil de cada usuario debe apuntar al servidor, en nuestro caso el samba ubuntu server . Crear una pol\u00edtica de grupo para que cada usuario que acceda a dicha m\u00e1quina directamente se le genere el perfil adecuado. NOTA: Obviamente, la soluci\u00f3n b) es mucho m\u00e1s escalable y por tanto m\u00e1s adecuada.","title":"Configuraci\u00f3n de Pol\u00edticas de Cliente"},{"location":"Practica16_SambaDC.html#confirmacion-de-recursos","text":"Se debe crear la carpeta donde se almacenar\u00e1n los recursos de los usuarios y Configurar acceso a cualquier usuario perteneciente al grupo de administradores del dominio: Posteriormente lo agregamos como un recurso a compartir: Reiniciamos el servicio: smbcontrol all reload-config Desde Windows (que es m\u00e1s visible) gestionamos los permisos de los perfiles de los usuarios, para ello accedemos a \\\\profesor y a las propiedades de \u201cprofiles\u201d: Si queremos agregar alg\u00fan grupo/usuario que no est\u00e9, como podr\u00eda ser Domain Users: Una vez tengamos agregados todos los grupos que queremos , vamos a filtrar e indicar los permisos de cada uno. Opciones de Compartici\u00f3n: Opciones de Seguridad:","title":"Confirmaci\u00f3n de Recursos"},{"location":"Practica16_SambaDC.html#acceso-desde-el-usuario","text":"Ahora cada vez que nos registremos en cualquier ordenador del dominio, aunque sea la primera vez, ya tendremos configurada una carpeta compartida en nuestro perfil para nosotros solos (y los administradores).","title":"Acceso desde el usuario"},{"location":"Practica16_SambaDC.html#redireccion","text":"Entre sistemas Linux s\u00ed se pod\u00eda direccionar directamente el /home de un usuario a una carpeta del servidor [homes] . En el caso de Windows debemos realizar una redirecci\u00f3n. Accedemos como \u201c administrator \u201d. Accede a la administraci\u00f3n de directivas de grupo ( GPO ). Crea una GPO asociado al dominio. Editamos la nueva pol\u00edtica creada. Accedemos a las propiedades de la carpeta que queremos redireccionar: Cerramos sesi\u00f3n y Registramos con otro usuario no administrador. Una vez registrados creamos unos ficheros en el escritorio o carpetas, como si estuvieramos trabajando y cerramos la sesi\u00f3n. Al cerrar la sesi\u00f3n se migran los ficheros al servidor y si nos conect\u00e1ramos a cualquier otra m\u00e1quina tendr\u00edamos nuestro Escritorio y ficheros con nosotros. A tener en cuenta Obviamente en la empresa, en caso de tener un AD con Samba como DC, no har\u00e1 falta configurar cada cliente Windows (crear las pol\u00edticas, etc), si no que usaremos una imagen, creada por ejemplo con clonezilla, y distribuiremos esa imagen con las pol\u00edticas ya configuradas a todas las m\u00e1quinas.","title":"Redirecci\u00f3n"},{"location":"ProgramacionAula.html","text":"TABLAS UUDD \u00b6 UD1 SHELLSCRIPTING \u00b6 .heatMap td { text-align: left; } .heatMap td:nth-child(1) { background: lightblue; } .heatMap td:nth-child(3) { background: lightblue; } table caption { padding: 10px; background: #85ABB8; border-style: solid; border-width: 2px; border-color: #060606; font-weight: bold; } TABLA RESUMEN DE UNIDAD Unidad Did\u00e1ctica UD1.- ShellScripting. Realizaci\u00f3n de Guiones en Sistemas Operativos Libres. Horas 12 Horas Resultados de Aprendizaje RA7. Utiliza lenguajes de guiones en sistemas operativos, describiendo su aplicaci\u00f3n y administrando servicios del sistema operativo. Preconocimiento Funcionamiento del terminal de Linux/GNU. Aplicaci\u00f3n de comandos. Utilizaci\u00f3n de editores. Conocimiento de permisos de archivos. Objetivos Operativos Competencias Personales y Sociales. Aprendizajes de car\u00e1cter transversal Crear y ejecutar guiones en el terminal de bash de Linux/GNU. Conocer y utilizar variables, par\u00e1metros y operadores. Optimizar el c\u00f3digo de los scripts mediante tuberias y redirecciones. Dominar el control de flujo mediante estructuras alternativas e iterativas. Gestionar y/o realizar el mantenimiento de los recursos de su \u00e1rea (programando y verificando su cumplimiento), en funci\u00f3n de las cargas de trabajo y el plan de mantenimiento (14). Mantener el esp\u00edritu de innovaci\u00f3n y actualizaci\u00f3n en el \u00e1mbito de su trabajo para adaptarse a los cambios tecnol\u00f3gicos y organizativos de su entorno profesional. (16) Contenidos conceptuales Contenidos procedimentales Actividades de ense\u00f1anza y aprendizaje Actividades de ense\u00f1anza y aprendizaje Criterios de Evaluaci\u00f3n Instrumentos de Evaluaci\u00f3n Actividades de refuerzo Actividades de profundizaci\u00f3n","title":"TABLAS UUDD"},{"location":"ProgramacionAula.html#tablas-uudd","text":"","title":"TABLAS UUDD"},{"location":"ProgramacionAula.html#ud1-shellscripting","text":".heatMap td { text-align: left; } .heatMap td:nth-child(1) { background: lightblue; } .heatMap td:nth-child(3) { background: lightblue; } table caption { padding: 10px; background: #85ABB8; border-style: solid; border-width: 2px; border-color: #060606; font-weight: bold; } TABLA RESUMEN DE UNIDAD Unidad Did\u00e1ctica UD1.- ShellScripting. Realizaci\u00f3n de Guiones en Sistemas Operativos Libres. Horas 12 Horas Resultados de Aprendizaje RA7. Utiliza lenguajes de guiones en sistemas operativos, describiendo su aplicaci\u00f3n y administrando servicios del sistema operativo. Preconocimiento Funcionamiento del terminal de Linux/GNU. Aplicaci\u00f3n de comandos. Utilizaci\u00f3n de editores. Conocimiento de permisos de archivos. Objetivos Operativos Competencias Personales y Sociales. Aprendizajes de car\u00e1cter transversal Crear y ejecutar guiones en el terminal de bash de Linux/GNU. Conocer y utilizar variables, par\u00e1metros y operadores. Optimizar el c\u00f3digo de los scripts mediante tuberias y redirecciones. Dominar el control de flujo mediante estructuras alternativas e iterativas. Gestionar y/o realizar el mantenimiento de los recursos de su \u00e1rea (programando y verificando su cumplimiento), en funci\u00f3n de las cargas de trabajo y el plan de mantenimiento (14). Mantener el esp\u00edritu de innovaci\u00f3n y actualizaci\u00f3n en el \u00e1mbito de su trabajo para adaptarse a los cambios tecnol\u00f3gicos y organizativos de su entorno profesional. (16) Contenidos conceptuales Contenidos procedimentales Actividades de ense\u00f1anza y aprendizaje Actividades de ense\u00f1anza y aprendizaje Criterios de Evaluaci\u00f3n Instrumentos de Evaluaci\u00f3n Actividades de refuerzo Actividades de profundizaci\u00f3n","title":"UD1 SHELLSCRIPTING"},{"location":"phpLDAPadmin.html","text":"C\u00f3mo instalar phpLDAPadmin \u00b6 En primer lugar se necesita instalar Apache: sudo apt-get install apache2 Ahora podemos instalar la herramienta de administraci\u00f3n basada en web con el comando: sudo apt-get install phpldapadmin -y Abra el archivo de configuraci\u00f3n phpLDAPadmin con el comando: sudo nano /etc/phpldapadmin/config.php Edite las siguientes l\u00edneas (aseg\u00farese de cambiar el dominio para que coincida con el suyo y la direcci\u00f3n IP para que coincida con su servidor de alojamiento): $servers->setValue('server','name','My LDAP Server'); $servers->setValue('server','host','192.168.5.X'); $servers->;setValue('server','base',array('dc=pandora,dc=ldap')); $servers->setValue('login','auth_type','session'); $servers->setValue('login','bind_id','cn=admin,dc=pandora,dc=ldap'); $servers->setValue('auto_number','min',array('uidNumber'=>10000,'gidNumber'=>10000)); Deshabilite el sitio predeterminado de Apache con el comando: sudo a2dissite 000-default.conf Reinicie Apache con el comando: sudo systemctl restart apache2 C\u00f3mo acceder a phpLDAPadmin \u00b6 Con todo resuelto, abra un navegador web y ap\u00fantelo a http: // SERVIDOR / phpldapadmin (donde SERVER es la direcci\u00f3n IP de su servidor de alojamiento). Su nombre de usuario predeterminado (en el formulario cn = admin, dc = pandora, dc = ldap ) se completar\u00e1 autom\u00e1ticamente. Escriba la contrase\u00f1a de administrador que cre\u00f3 y haga clic en Autenticar. Deber\u00eda encontrarse en la p\u00e1gina principal de phpLDAPadmin, listo para trabajar: Para la advertencia, simplemente puede reemplazar las llaves ( ) con corchetes ( ) en la l\u00ednea afectada, 1614.\\ Deprecated: Array and string offset access syntax with curly braces is deprecated in /usr/share/phpldapadmin/lib/functions.php on line 1614 {}``[] Haga clic en iniciar sesi\u00f3n para iniciar sesi\u00f3n en su interfaz de usuario web phpLDAPadmin. Como ya definimos el DN de enlace de administrador, simplemente ingrese la contrase\u00f1a e inicie sesi\u00f3n; Tras la autenticaci\u00f3n exitosa, se accede en el panel de phpLDAPadmin. Ahora puede administrar su servidor LDAP con una interfaz web. Crear usuario y grupo LDAP en phpLDAPadmin \u00b6 Como ejemplo, aprenderemos c\u00f3mo crear un usuario LDAP y su grupo usando phpLDAPadmin. Crear grupo posixGroup \u00b6 Para crear un grupo dentro de otro Haga clic en ou=grupos . Luego haga clic en Create new entry here o haga clic en Create a child entry . A continuaci\u00f3n, haga clic en la Generic: Posix Group plantilla para crear un grupo de usuarios LDAP. Ingrese el nombre del grupo, que en este caso lo configuramos para que sea el mismo que el uid del usuario que vamos a crear. Si desea que otros usuarios formen parte del grupo, seleccione sus nombres de usuario. Haga clic Create Object una vez hecho y confirme los cambios. Crear usuario posixAccount \u00b6 Una vez que haya creado un grupo de usuarios, proceda a crear la cuenta de usuario. Haga clic en ou=grupos y de manera similar, tiene dos opciones, hacer clic Create new entry here o hacer clic Create a child entry . Seleccione la Generic: User Account plantilla para crear el objeto de usuario. Generar hash de contrase\u00f1a de usuario; slappasswd Nueva contrase\u00f1a : contrase\u00f1a Vuelva a ingresar la nueva contrase\u00f1a : contrase\u00f1a { SSHA } vrJOf + / AFD9pdGKo / azGavDfbZ8OGJX1 Si necesita verificar si la contrase\u00f1a coincide con el hash pegado, haga clic en verificar contrase\u00f1a . Cuando establezca la contrase\u00f1a, seleccione ssha y pegue el hash anterior como contrase\u00f1a. Complete los detalles del usuario de manera apropiada como se muestra en la captura de pantalla a continuaci\u00f3n; Una vez hecho esto, haga clic Create Object y confirme los cambios. Tenga en cuenta que para poder tener bash entre las opciones de shell, edite la plantilla de creaci\u00f3n posixAccount y agregue la opci\u00f3n bash ejecutando el comando; sed -i '/<value id=\"\\/bin\\/tsh\">\\/bin\\/tsh<\\/value>/a \\\\t<value id=\"/bin/bash\">\\/bin\\/bash<\\/value>' /etc/phpldapadmin/templates/creation/posixAccount.xml Note Si tiene la informaci\u00f3n del usuario en un archivo LDIF, puede importar este archivo haciendo clic en importar en la barra de men\u00fa superior del panel izquierdo. Para confirmar la creaci\u00f3n del usuario en el backend del servidor OpenLDAP puede utilizar el comnado ldapsearch","title":"phpLDAPadmin"},{"location":"phpLDAPadmin.html#como-instalar-phpldapadmin","text":"En primer lugar se necesita instalar Apache: sudo apt-get install apache2 Ahora podemos instalar la herramienta de administraci\u00f3n basada en web con el comando: sudo apt-get install phpldapadmin -y Abra el archivo de configuraci\u00f3n phpLDAPadmin con el comando: sudo nano /etc/phpldapadmin/config.php Edite las siguientes l\u00edneas (aseg\u00farese de cambiar el dominio para que coincida con el suyo y la direcci\u00f3n IP para que coincida con su servidor de alojamiento): $servers->setValue('server','name','My LDAP Server'); $servers->setValue('server','host','192.168.5.X'); $servers->;setValue('server','base',array('dc=pandora,dc=ldap')); $servers->setValue('login','auth_type','session'); $servers->setValue('login','bind_id','cn=admin,dc=pandora,dc=ldap'); $servers->setValue('auto_number','min',array('uidNumber'=>10000,'gidNumber'=>10000)); Deshabilite el sitio predeterminado de Apache con el comando: sudo a2dissite 000-default.conf Reinicie Apache con el comando: sudo systemctl restart apache2","title":"C\u00f3mo instalar phpLDAPadmin"},{"location":"phpLDAPadmin.html#como-acceder-a-phpldapadmin","text":"Con todo resuelto, abra un navegador web y ap\u00fantelo a http: // SERVIDOR / phpldapadmin (donde SERVER es la direcci\u00f3n IP de su servidor de alojamiento). Su nombre de usuario predeterminado (en el formulario cn = admin, dc = pandora, dc = ldap ) se completar\u00e1 autom\u00e1ticamente. Escriba la contrase\u00f1a de administrador que cre\u00f3 y haga clic en Autenticar. Deber\u00eda encontrarse en la p\u00e1gina principal de phpLDAPadmin, listo para trabajar: Para la advertencia, simplemente puede reemplazar las llaves ( ) con corchetes ( ) en la l\u00ednea afectada, 1614.\\ Deprecated: Array and string offset access syntax with curly braces is deprecated in /usr/share/phpldapadmin/lib/functions.php on line 1614 {}``[] Haga clic en iniciar sesi\u00f3n para iniciar sesi\u00f3n en su interfaz de usuario web phpLDAPadmin. Como ya definimos el DN de enlace de administrador, simplemente ingrese la contrase\u00f1a e inicie sesi\u00f3n; Tras la autenticaci\u00f3n exitosa, se accede en el panel de phpLDAPadmin. Ahora puede administrar su servidor LDAP con una interfaz web.","title":"C\u00f3mo acceder a phpLDAPadmin"},{"location":"phpLDAPadmin.html#crear-usuario-y-grupo-ldap-en-phpldapadmin","text":"Como ejemplo, aprenderemos c\u00f3mo crear un usuario LDAP y su grupo usando phpLDAPadmin.","title":"Crear usuario y grupo LDAP en phpLDAPadmin"},{"location":"planning.html","text":"Planificaci\u00f3n ASO (120h) \u00b6 1.- ShellScripting (10h) \u00b6 APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 1.1 ShellScripting, creaci\u00f3n scripts, variables, par\u00e1metros, operadores. Iniciales 4h 1.2 ShellScripting, Redirecciones, tuberias. Desarrollo 3h 1.3 Control de flujo en Shell, vectores. Refuerzo y ampliaci\u00f3n 3h 2.- Programaci\u00f3n de Scripts (10h) \u00b6 APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 2.1 PowerShell, creaci\u00f3n scripts, variables, par\u00e1metros, operadores. Iniciales 3h 2.2 PowerShell, Control de flujo, y vectores. Desarrollo 3h 2.3 Python, creaci\u00f3n scripts, automatizaci\u00f3n Redes. Refuerzo y ampliaci\u00f3n 4h 3.- Servicios de Directorio Libres: LDAP (12h) \u00b6 APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 3.1 Servicios Directorio, LDAP, Autentificaci\u00f3n usuarios (PAM, NSS). Iniciales 4h 3.2 LDAP, m\u00f3delo informaci\u00f3n, Esquema. Desarrollo 4h 3.3 LDAP, Configuraci\u00f3n, herramientas de gesti\u00f3n. Refuerzo y ampliaci\u00f3n 4h 4.- Servicios de Directorio Propietarios: Active Directory (16h) \u00b6 APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 4.1 Active Directory, configuraci\u00f3n b\u00e1sica Windos Server. Iniciales 5h 4.2 Active Directory, Instalaci\u00f3n AD, Creaci\u00f3n estructura empresa. Desarrollo 5h 4.3 AD, Permisos, directivas de grupo, perfiles y relaciones de confianza. Ampliaci\u00f3n 6h 5.- Integraci\u00f3n de Sistemas Libre: NFS (12h) \u00b6 APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 6.1 Escenarios heterog\u00e9neos, Protocolos para redes heterog\u00e9neas, servicios de compartici\u00f3n de recursos. Iniciales 2h 5.1 NFS, Instalaci\u00f3n, Permisos en NFS. Iniciales 2h 5.2 NFS, Montaje autom\u00e1tico de un cliente NFS, configuraci\u00f3n de ficheros. Desarrollo 4h 5.3 NextCloud, Instalaci\u00f3n, configuraci\u00f3n de ficheros y permisos de usuario. Ampliaci\u00f3n 3h 6.- Integraci\u00f3n de Sistemas Propietarios: SAMBA (10h) \u00b6 APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 6.1 Escenarios heterog\u00e9neos, Protocolos para redes heterog\u00e9neas, servicios de compartici\u00f3n de recursos. Iniciales 2h 6.2 SAMBA, fichero configuraci\u00f3n, Creaci\u00f3n directorio compartido, Integraci\u00f3n de permisos. Desarrollo 4h 6.3 SAMBA, Adminitraci\u00f3n de servicios con RSAT, perfiles de ususario y carpetas personales, cuotas. Ampliaci\u00f3n 3h 7.- Administraci\u00f3n de procesos del Sistema (14h) \u00b6 APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 7.1 Procesos. Tipos. Estados. Estructura. Trancisiones, Hilos. Iniciales 2h 7.2 Planificador, Tipos de algoritmos de planificaci\u00f3n, Sincronizaci\u00f3n e interrupciones entre procesos. Desarrollo I 2h 7.3 Gesti\u00f3n de procesos con Shell, Powershell y Python. Desarrollo II 6h 7.4 Secuencia de arranque del sistema. Demonios y servicios, systemd . Ampliaci\u00f3n 4h 8.- Informaci\u00f3n del sistema operativo (14h) \u00b6 APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 8.1 Estructura directorios. B\u00fasqueda de informaci\u00f3n del sistema. \u00d3rdenes. Herramientas gr\u00e1ficas. Iniciales 2h 8.2 VFS, DFS, Herramientas gr\u00e1ficas Rendimiento. Estad\u00edsticas. Desarrollo I 4h 8.3 Planificaci\u00f3n de Tareas, Programacor de atreas, crontab . Desarrollo II 4h 8.4 Servicio Monitorizaci\u00f3n, Nagios, PRTG, OpenNMS. Ampliaci\u00f3n 4h 9.- Servicios de acceso y administraci\u00f3n remota (14h) \u00b6 APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 9.1 Escritorio Remoto RDP, xRDP y RemoteAPP Iniciales y Desarrollo I 4h 9.2 Acceso remoto en modo texto SSH . Desarrollo II 4h 9.3 Herramientas gr\u00e1ficas externas, RealVNC, TeamViewer y AnyDesk. Desarrollo III 4h 9.4 Apache Guacamole. Ampliaci\u00f3n 2h 10.- Administraci\u00f3n de Servidores de Impresi\u00f3n (8h) \u00b6 APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 10.1 Sistemas de Impresi\u00f3n, Puertos y protocolos de impresi\u00f3n Iniciales 2h 10.2 \u00d3rdenes para la gesti\u00f3n de impresoras y trabajos. Desarrollo I 2h 10.3 Servidor de impresi\u00f3n en GNU/Linux, CUPS . Desarrollo II 2h 10.4 Administraci\u00f3n de los Servicios de Impresi\u00f3n en Windows Server. Desarrollo II 2h","title":"Planificaci\u00f3n ASO (120h)"},{"location":"planning.html#planificacion-aso-120h","text":"","title":"Planificaci\u00f3n ASO (120h)"},{"location":"planning.html#1-shellscripting-10h","text":"APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 1.1 ShellScripting, creaci\u00f3n scripts, variables, par\u00e1metros, operadores. Iniciales 4h 1.2 ShellScripting, Redirecciones, tuberias. Desarrollo 3h 1.3 Control de flujo en Shell, vectores. Refuerzo y ampliaci\u00f3n 3h","title":"1.- ShellScripting (10h)"},{"location":"planning.html#2-programacion-de-scripts-10h","text":"APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 2.1 PowerShell, creaci\u00f3n scripts, variables, par\u00e1metros, operadores. Iniciales 3h 2.2 PowerShell, Control de flujo, y vectores. Desarrollo 3h 2.3 Python, creaci\u00f3n scripts, automatizaci\u00f3n Redes. Refuerzo y ampliaci\u00f3n 4h","title":"2.- Programaci\u00f3n de Scripts (10h)"},{"location":"planning.html#3-servicios-de-directorio-libres-ldap-12h","text":"APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 3.1 Servicios Directorio, LDAP, Autentificaci\u00f3n usuarios (PAM, NSS). Iniciales 4h 3.2 LDAP, m\u00f3delo informaci\u00f3n, Esquema. Desarrollo 4h 3.3 LDAP, Configuraci\u00f3n, herramientas de gesti\u00f3n. Refuerzo y ampliaci\u00f3n 4h","title":"3.- Servicios de Directorio Libres: LDAP (12h)"},{"location":"planning.html#4-servicios-de-directorio-propietarios-active-directory-16h","text":"APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 4.1 Active Directory, configuraci\u00f3n b\u00e1sica Windos Server. Iniciales 5h 4.2 Active Directory, Instalaci\u00f3n AD, Creaci\u00f3n estructura empresa. Desarrollo 5h 4.3 AD, Permisos, directivas de grupo, perfiles y relaciones de confianza. Ampliaci\u00f3n 6h","title":"4.- Servicios de Directorio Propietarios: Active Directory (16h)"},{"location":"planning.html#5-integracion-de-sistemas-libre-nfs-12h","text":"APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 6.1 Escenarios heterog\u00e9neos, Protocolos para redes heterog\u00e9neas, servicios de compartici\u00f3n de recursos. Iniciales 2h 5.1 NFS, Instalaci\u00f3n, Permisos en NFS. Iniciales 2h 5.2 NFS, Montaje autom\u00e1tico de un cliente NFS, configuraci\u00f3n de ficheros. Desarrollo 4h 5.3 NextCloud, Instalaci\u00f3n, configuraci\u00f3n de ficheros y permisos de usuario. Ampliaci\u00f3n 3h","title":"5.- Integraci\u00f3n de Sistemas Libre: NFS (12h)"},{"location":"planning.html#6-integracion-de-sistemas-propietarios-samba-10h","text":"APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 6.1 Escenarios heterog\u00e9neos, Protocolos para redes heterog\u00e9neas, servicios de compartici\u00f3n de recursos. Iniciales 2h 6.2 SAMBA, fichero configuraci\u00f3n, Creaci\u00f3n directorio compartido, Integraci\u00f3n de permisos. Desarrollo 4h 6.3 SAMBA, Adminitraci\u00f3n de servicios con RSAT, perfiles de ususario y carpetas personales, cuotas. Ampliaci\u00f3n 3h","title":"6.- Integraci\u00f3n de Sistemas Propietarios: SAMBA (10h)"},{"location":"planning.html#7-administracion-de-procesos-del-sistema-14h","text":"APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 7.1 Procesos. Tipos. Estados. Estructura. Trancisiones, Hilos. Iniciales 2h 7.2 Planificador, Tipos de algoritmos de planificaci\u00f3n, Sincronizaci\u00f3n e interrupciones entre procesos. Desarrollo I 2h 7.3 Gesti\u00f3n de procesos con Shell, Powershell y Python. Desarrollo II 6h 7.4 Secuencia de arranque del sistema. Demonios y servicios, systemd . Ampliaci\u00f3n 4h","title":"7.- Administraci\u00f3n de procesos del Sistema (14h)"},{"location":"planning.html#8-informacion-del-sistema-operativo-14h","text":"APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 8.1 Estructura directorios. B\u00fasqueda de informaci\u00f3n del sistema. \u00d3rdenes. Herramientas gr\u00e1ficas. Iniciales 2h 8.2 VFS, DFS, Herramientas gr\u00e1ficas Rendimiento. Estad\u00edsticas. Desarrollo I 4h 8.3 Planificaci\u00f3n de Tareas, Programacor de atreas, crontab . Desarrollo II 4h 8.4 Servicio Monitorizaci\u00f3n, Nagios, PRTG, OpenNMS. Ampliaci\u00f3n 4h","title":"8.- Informaci\u00f3n del sistema operativo (14h)"},{"location":"planning.html#9-servicios-de-acceso-y-administracion-remota-14h","text":"APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 9.1 Escritorio Remoto RDP, xRDP y RemoteAPP Iniciales y Desarrollo I 4h 9.2 Acceso remoto en modo texto SSH . Desarrollo II 4h 9.3 Herramientas gr\u00e1ficas externas, RealVNC, TeamViewer y AnyDesk. Desarrollo III 4h 9.4 Apache Guacamole. Ampliaci\u00f3n 2h","title":"9.- Servicios de acceso y administraci\u00f3n remota (14h)"},{"location":"planning.html#10-administracion-de-servidores-de-impresion-8h","text":"APARTADO DESCRIPCI\u00d3N TIPO ACTIVIDAD TIEMPO 10.1 Sistemas de Impresi\u00f3n, Puertos y protocolos de impresi\u00f3n Iniciales 2h 10.2 \u00d3rdenes para la gesti\u00f3n de impresoras y trabajos. Desarrollo I 2h 10.3 Servidor de impresi\u00f3n en GNU/Linux, CUPS . Desarrollo II 2h 10.4 Administraci\u00f3n de los Servicios de Impresi\u00f3n en Windows Server. Desarrollo II 2h","title":"10.- Administraci\u00f3n de Servidores de Impresi\u00f3n (8h)"},{"location":"01_ShellScripting/index.html","text":"Programaci\u00f3n de Aula \u00b6 Esta unidad cubre el Resultado de aprendizaje 7 (RA7) seg\u00fan el Real Decreto 1629/2009, de 30 de octubre , el cual es: Utiliza lenguajes de guiones en sistemas operativos, describiendo su aplicaci\u00f3n y administrando servicios del sistema operativo. Los criterios de evaluaci\u00f3n asociados son: ol.criterio { list-style-type: none; } a. Se han utilizado y combinado las estructuras del lenguaje para crear guiones. b. Se han utilizado herramientas para depurar errores sint\u00e1cticos y de ejecuci\u00f3n. g. Se han implantado guiones en sistemas libres y propietario. h. Se han consultado y utilizado librer\u00edas de funciones. i. Se han documentado los guiones creados. A continuaci\u00f3n se muestra un resumen de la Unidad Did\u00e1ctica: .heatMap td { text-align: left; padding-left: 10px; } table caption { padding: 10px; background: #0077b6; border-style: solid; border-width: 2px; border-color: #060606; font-weight: bold; } RESUMEN UNIDAD DID\u00c1CTICA Unidad Did\u00e1ctica UD1.- ShellScripting. Realizaci\u00f3n de Guiones en Sistemas Operativos Libres. Horas 6 Sesiones - 12 Horas Resultados de Aprendizaje RA7. Utiliza lenguajes de guiones en sistemas operativos, describiendo su aplicaci\u00f3n y administrando servicios del sistema operativo. Preconocimiento Funcionamiento del terminal de Linux/GNU. Aplicaci\u00f3n de comandos. Utilizaci\u00f3n de editores. Conocimiento de permisos de archivos. Objetivos Operativos Competencias Personales y Sociales. Transversales Administraci\u00f3n de terminal de Linux/GNU. Conocer comandos b\u00e1sicos y avanzados en Shell. Optimizar el c\u00f3digo de los scripts mediante tuber\u00edas y redirecciones. 14 . Gestionar y/o realizar el mantenimiento de los recursos de su \u00e1rea (programando y verificando su cumplimiento), en funci\u00f3n de las cargas de trabajo y el plan de mantenimiento. 16 . Mantener el esp\u00edritu de innovaci\u00f3n y actualizaci\u00f3n en el \u00e1mbito de su trabajo para adaptarse a los cambios tecnol\u00f3gicos y organizativos de su entorno profesional. Contenidos conceptuales Introducci\u00f3n Linux. Creaci\u00f3n ShellScripts. Depuraci\u00f3n. Argumentos, variables, operadores; Entrada y Salida. Control de Flujo. Estructuras condicionales e iterativas. Funciones y vectores. Instrumentos Evaluaci\u00f3n \u2192 Contenidos procedimentales Actividades INICIALES (Ense\u00f1anza/Aprendizaje). Criterios Evaluaci\u00f3n Instrumento Calificaci\u00f3n Actividades desde la 101 a la 104 . Basadas en Scripts de nivel bajo, en concreto, sobre el desarrollo de: Creaci\u00f3n primeros scripts de nivel bajo Depuraci\u00f3n de scripts. CE7b. Se han utilizado herramientas para depurar errores sint\u00e1cticos y de ejecuci\u00f3n. CE7g. Se han implantado guiones en sistemas libres y propietarios. CE7i. Se han documentado los guiones creados. R\u00fabrica. Actividades DESARROLLO (Ense\u00f1anza/Aprendizaje). Criterios Evaluaci\u00f3n Instrumento Calificaci\u00f3n Actividades desde la 105 a la 107 . Interacci\u00f3n con usuario, utilizaci\u00f3n de variables, par\u00e1metros y operadores. Actividades desde la 108 a la 110 . Control de Flujo. Estructuras condicionales e iterativas. Actividades desde la 111 a la 114 . Vectores y funciones. CE7a. Se han utilizado y combinado las estructuras del lenguaje crear guiones. CE7g. Se han implantado guiones en sistemas libres y propietario. CE7h. Se han consultado y utilizado librer\u00edas de funciones. CE7i. Se han documentado los guiones creados. R\u00fabrica. Actividades Refuerzo. Criterios Evaluaci\u00f3n Instrumento Calificaci\u00f3n Actividades desde la 115 a la 118 . Variables, par\u00e1metros, comprobaciones, estructuras condicionales e iterativas. CE7a. Se han utilizado y combinado las estructuras del lenguaje crear guiones. CE7g. Se han implantado guiones en sistemas libres y propietario. CE7i. Se han documentado los guiones creados. R\u00fabrica. Actividades Ampliaci\u00f3n. Criterios Evaluaci\u00f3n Instrumento Calificaci\u00f3n Actividades desde la 119 a la 121 . Vectores, funciones, estructuras condicionales e iterativas. CE7a. Se han utilizado y combinado las estructuras del lenguaje crear guiones. CE7g. Se han implantado guiones en sistemas libres y propietario. CE7h. Se han consultado y utilizado librer\u00edas de funciones. CE7i. Se han documentado los guiones creados. R\u00fabrica. Prueba espec\u00edfica de evaluaci\u00f3n. Detalle de la programaci\u00f3n de Aula: Sesi\u00f3n. Fecha Contenido Recurso Did\u00e1ctico 1 07/09/22 Introducci\u00f3n ShellScripting, Creaci\u00f3n ShellScript, Argumentos, Variables. Introducci\u00f3n ShellScripting 2 09/09/22 Sintaxis, Interacci\u00f3n con el usuario, Operadores, redirecciones y tuberias. Sintaxis ShellScripting 3 12/09/22 Control de Flujo. Estructuras condicionales e iterativas. Control de Flujo. 4 14/09/22 Vectores y funciones Vectores y Funciones. 5 16/09/22 Refuerzo y Ampliaci\u00f3n Refuerzo y Ampliaci\u00f3n. 6 19/09/22 Prueba Espec\u00edfica Prueba Espec\u00edfica.","title":"Programaci\u00f3n de Aula"},{"location":"01_ShellScripting/index.html#programacion-de-aula","text":"Esta unidad cubre el Resultado de aprendizaje 7 (RA7) seg\u00fan el Real Decreto 1629/2009, de 30 de octubre , el cual es: Utiliza lenguajes de guiones en sistemas operativos, describiendo su aplicaci\u00f3n y administrando servicios del sistema operativo. Los criterios de evaluaci\u00f3n asociados son: ol.criterio { list-style-type: none; } a. Se han utilizado y combinado las estructuras del lenguaje para crear guiones. b. Se han utilizado herramientas para depurar errores sint\u00e1cticos y de ejecuci\u00f3n. g. Se han implantado guiones en sistemas libres y propietario. h. Se han consultado y utilizado librer\u00edas de funciones. i. Se han documentado los guiones creados. A continuaci\u00f3n se muestra un resumen de la Unidad Did\u00e1ctica: .heatMap td { text-align: left; padding-left: 10px; } table caption { padding: 10px; background: #0077b6; border-style: solid; border-width: 2px; border-color: #060606; font-weight: bold; } RESUMEN UNIDAD DID\u00c1CTICA Unidad Did\u00e1ctica UD1.- ShellScripting. Realizaci\u00f3n de Guiones en Sistemas Operativos Libres. Horas 6 Sesiones - 12 Horas Resultados de Aprendizaje RA7. Utiliza lenguajes de guiones en sistemas operativos, describiendo su aplicaci\u00f3n y administrando servicios del sistema operativo. Preconocimiento Funcionamiento del terminal de Linux/GNU. Aplicaci\u00f3n de comandos. Utilizaci\u00f3n de editores. Conocimiento de permisos de archivos. Objetivos Operativos Competencias Personales y Sociales. Transversales Administraci\u00f3n de terminal de Linux/GNU. Conocer comandos b\u00e1sicos y avanzados en Shell. Optimizar el c\u00f3digo de los scripts mediante tuber\u00edas y redirecciones. 14 . Gestionar y/o realizar el mantenimiento de los recursos de su \u00e1rea (programando y verificando su cumplimiento), en funci\u00f3n de las cargas de trabajo y el plan de mantenimiento. 16 . Mantener el esp\u00edritu de innovaci\u00f3n y actualizaci\u00f3n en el \u00e1mbito de su trabajo para adaptarse a los cambios tecnol\u00f3gicos y organizativos de su entorno profesional. Contenidos conceptuales Introducci\u00f3n Linux. Creaci\u00f3n ShellScripts. Depuraci\u00f3n. Argumentos, variables, operadores; Entrada y Salida. Control de Flujo. Estructuras condicionales e iterativas. Funciones y vectores. Instrumentos Evaluaci\u00f3n \u2192 Contenidos procedimentales Actividades INICIALES (Ense\u00f1anza/Aprendizaje). Criterios Evaluaci\u00f3n Instrumento Calificaci\u00f3n Actividades desde la 101 a la 104 . Basadas en Scripts de nivel bajo, en concreto, sobre el desarrollo de: Creaci\u00f3n primeros scripts de nivel bajo Depuraci\u00f3n de scripts. CE7b. Se han utilizado herramientas para depurar errores sint\u00e1cticos y de ejecuci\u00f3n. CE7g. Se han implantado guiones en sistemas libres y propietarios. CE7i. Se han documentado los guiones creados. R\u00fabrica. Actividades DESARROLLO (Ense\u00f1anza/Aprendizaje). Criterios Evaluaci\u00f3n Instrumento Calificaci\u00f3n Actividades desde la 105 a la 107 . Interacci\u00f3n con usuario, utilizaci\u00f3n de variables, par\u00e1metros y operadores. Actividades desde la 108 a la 110 . Control de Flujo. Estructuras condicionales e iterativas. Actividades desde la 111 a la 114 . Vectores y funciones. CE7a. Se han utilizado y combinado las estructuras del lenguaje crear guiones. CE7g. Se han implantado guiones en sistemas libres y propietario. CE7h. Se han consultado y utilizado librer\u00edas de funciones. CE7i. Se han documentado los guiones creados. R\u00fabrica. Actividades Refuerzo. Criterios Evaluaci\u00f3n Instrumento Calificaci\u00f3n Actividades desde la 115 a la 118 . Variables, par\u00e1metros, comprobaciones, estructuras condicionales e iterativas. CE7a. Se han utilizado y combinado las estructuras del lenguaje crear guiones. CE7g. Se han implantado guiones en sistemas libres y propietario. CE7i. Se han documentado los guiones creados. R\u00fabrica. Actividades Ampliaci\u00f3n. Criterios Evaluaci\u00f3n Instrumento Calificaci\u00f3n Actividades desde la 119 a la 121 . Vectores, funciones, estructuras condicionales e iterativas. CE7a. Se han utilizado y combinado las estructuras del lenguaje crear guiones. CE7g. Se han implantado guiones en sistemas libres y propietario. CE7h. Se han consultado y utilizado librer\u00edas de funciones. CE7i. Se han documentado los guiones creados. R\u00fabrica. Prueba espec\u00edfica de evaluaci\u00f3n. Detalle de la programaci\u00f3n de Aula: Sesi\u00f3n. Fecha Contenido Recurso Did\u00e1ctico 1 07/09/22 Introducci\u00f3n ShellScripting, Creaci\u00f3n ShellScript, Argumentos, Variables. Introducci\u00f3n ShellScripting 2 09/09/22 Sintaxis, Interacci\u00f3n con el usuario, Operadores, redirecciones y tuberias. Sintaxis ShellScripting 3 12/09/22 Control de Flujo. Estructuras condicionales e iterativas. Control de Flujo. 4 14/09/22 Vectores y funciones Vectores y Funciones. 5 16/09/22 Refuerzo y Ampliaci\u00f3n Refuerzo y Ampliaci\u00f3n. 6 19/09/22 Prueba Espec\u00edfica Prueba Espec\u00edfica.","title":"Programaci\u00f3n de Aula"},{"location":"01_ShellScripting/011_ShellScript_Intro.html","text":"Introducci\u00f3n \u00b6 Para administrar sistemas operativos es crucial manejar y dominar las interfaces (terminales) disponibles que nos permiten gestionarlos, entre dichas interfaces destacan los siguientes tipos: De l\u00edneas texto ( CLI , Command-Line Interface, interfaz de l\u00ednea de comandos), Gr\u00e1ficos ( GUI , Graphical User Interface, interfaz gr\u00e1fica de usuario), De lenguaje natural ( NUI , Natural User Interface, interfaz natural de usuario, ejemplo SIRI en IOS). Este tema se centra en Sistemas basados en c\u00f3digo libre del tipo UNIX, debido a su amplio despliegue en empresas para implementar servicios, m\u00e1s en concreto de distribuciones Linux/GNU . El CLI de las distribuciones de Linux/GNU es conocido como Shell o terminal, con esta interfaz es posible crear cualquier comando que el usuario necesite, incluso para las tareas m\u00e1s espec\u00edficas, debido a estar directamente conectado al Kernel a diferencia de las aplicaciones como se puede observar en la siguiente figura . Estructura de Linux NOTA Por lo tanto, es buena pr\u00e1ctica que el administrador del sistemas tenga conocimientos en el manejo y gesti\u00f3n del terminal Shell, as\u00ed como en la programaci\u00f3n de scripts. Shell \u00b6 En inform\u00e1tica, el shell o int\u00e9rprete de comandos , es el programa inform\u00e1tico que permite a los usuarios interactuar con el sistema, procesando las \u00f3rdenes que se le indican; adem\u00e1s provee una interfaz de usuario para acceder a los servicios del sistema operativo. Los comandos ejecutables desde el shell pueden clasificarse en internos (corresponden en realidad a \u00f3rdenes interpretadas por el propio shell) y externos (corresponden a ficheros ejecutables externos al shell, conocidos como guiones o scripts). IMPORTANTE: Linux dispone de varios Shell diferentes csh , bash , sh , ksh , zsh , etc... A destacar: sh (Bourne Shell) : este shell fue usado desde las primeras versiones de Unix (Unix Versi\u00f3n 7). Recibe ese nombre por su desarrollador, Stephen Bourne , de los Laboratorios Bell de AT&T . bash : fue desarrollado para ser un superconjunto de la funcionalidad del Bourne Shell, siendo el int\u00e9rprete de comandos asignado por defecto a los usuarios en las distribuciones de Linux, por lo que es el shell empleado en la mayor\u00eda de las consolas de comandos de Linux. Se caracteriza por una gran funcionalidad adicional a la del Bourne Shell. Para intentar homogeneizar esta diversidad de shells, el IEEE defini\u00f3 un est\u00e1ndar de \u00abint\u00e9rprete de comandos\u00bb bajo la especificaci\u00f3n POSIX 1003.2 (tambi\u00e9n recogida como ISO 9945.2 ). La creaci\u00f3n de dicho est\u00e1ndar se bas\u00f3 en la sintaxis que presentaban m\u00faltiples shells de la familia Bourne shell. bash respeta completamente el est\u00e1ndar POSIX, sobre el que a\u00f1ade un n\u00famero considerable de extensiones (estructura select, arrays, mayor n\u00famero de operadores,\u2026). En este tema utilizaremos el Shell de bash . Formato comandos \u00b6 En general, el formato de las \u00f3rdenes de GNU/Linux es el siguiente: Comando , que indica la acci\u00f3n que se va a ejecutar. Modificadores , que cambian el comportamiento est\u00e1ndar del comando para adaptarlo a las necesidades. Argumentos , elementos necesarios para realizar la acci\u00f3n del comando. Warning Un dato a tener en cuenta cuando se trabaja con un terminal, es que GNU/Linux distingue entre may\u00fasculas y nim\u00fasculas, es decir, la ejecuci\u00f3n de comandos en el CLI de Linux es CASE SENSITIVE . Principales comandos \u00b6 Comando Acci\u00f3n Comando Acci\u00f3n ls muestra el contenido de una carpeta uname muestra informaci\u00f3n del sistema df muestra estado del disco cd cambiar de directorio fsck comprueba integridad de discos mkdir crear directorios mount monta particiones y vol\u00famenes shutdown apaga el equipo ( restart o reboot ) unmount desmonta particiones y vol\u00famenes clear limpia la pantalla fdisk administra particiones date/cal muestra hora/calendario del sistema echo imprime por pantalla who muestra quien est\u00e1 conectado Shell Script en GNU/Linux \u00b6 Un Shell script (gui\u00f3n) es un archivo de texto que contiene una serie de comandos que, ordenados de forma espec\u00edfica, realizan la tarea para la que fueron dise\u00f1ados, es decir, es un programa escrito de comandos Shell para ser ejecutados de forma secuencial. De esta forma se pueden automatizar tareas repetitivas ahorrando tiempo al administrador. Un programa escrito en shell se denomina shellscript, programa shell o simplemente un shell. Estructura general \u00b6 En su forma m\u00e1s b\u00e1sica, un shell-script puede ser un simple fichero de texto que contenga uno o varios comandos. Para ayudar a la identificaci\u00f3n del contenido a partir del nombre del archivo, es habitual que los shell scripts tengan la extensi\u00f3n \u00ab.sh\u00bb, Se seguir\u00e1 este criterio pero hay que tener en cuenta que es informativo y opcional. #!/bin/bash #********************************* #Este es mi primer script #********************************* echo Hola Mundo #Esto es un comentario, soy muy \u00fatil. Creaci\u00f3n Shell scripts \u00b6 Para crear un script utilizaremos cualquiera de los editores de texto plano como vi , vim , nano . Despu\u00e9s de crear el archivo hay que dotarlo de permisos de lectura y ejecuci\u00f3n. chmod ugo=rx script.sh Para ejecutar el archivo: (ubicados en la carpeta que contiene el archivo), se pueden utilizar el siguiente archivo: ./script.sh Adem\u00e1s se puede utilizar otro m\u00e9todo que consiste en definir la carpeta dentro de la variable de entorno PATH (editando el fichero .bashrc .) Una vez realizado ya se podr\u00eda ejecutar directamente el fichero con el nombre del script. mkdir /home/administrador/scripts PATH=$PATH:/home/administrador/scripts export PATH NOTA La primera forma ejecutar\u00e1 el contenido del shell script en un subshell o hilo del terminal original. El programa se ejecuta hasta que se terminan las \u00f3rdenes del archivo, se recibe una se\u00f1al de finalizaci\u00f3n, se encuentra un error sint\u00e1ctico o se llega a una orden exit . Cuando el programa termina, el subshell muere y el terminal original toma el control del sistema. Esto no ocurre si se usa la opci\u00f3n de PATH , la cual ejecuta el contenido del shell script en el mismo terminal donde fue invocado. El primer Shellscript \u00b6 Crea un ejemplo llamado listar.sh , se aconseja ejecutar los siguientes comandos de forma secuencial. cd ~ mkdir scripts cd scripts touch listar.sh nano listar.sh Genera, guarda y prueba el siguiente c\u00f3digo. #! /bin/bash clear ls -la echo \u201cListado realizado el \u201c$(date) Comentarios \u00b6 Para realizar un comentario se usa el car\u00e1cter # Cuando el terminal encuentra una l\u00ednea que comienza con este car\u00e1cter, ignora todo lo que existe desde \u00e9l hasta el final de l\u00ednea. A esta regla existe una excepci\u00f3n: #!/bin/bash Info Es el \"Shebang\" Indica el terminal que ser\u00e1 utilizado por el shell script, no un comentario. Esta l\u00ednea debe ser la primera del fichero que, a\u00fan siendo opcional, indica el tipo de lenguaje en el que ha sido escrito el programa. Si la versi\u00f3n de GNU/Linux dispone de el terminal especificado en esta l\u00ednea, ejecutar\u00e1 el c\u00f3digo con \u00e9l, si no es as\u00ed, utilizar\u00e1 el que por defecto tenga asignado el usuario que lo ejecuta. Depuraci\u00f3n \u00b6 Esta tarea no es sencilla en ShellScripting, aun as\u00ed se recomienda los siguientes m\u00e9todos de depuraci\u00f3n, apoyados en los siguientes argumentos a la hora de ejecutar el script: -x \u2192 Expande cada orden simple, e imprime por pantalla la orden con sus argumentos, y a continuaci\u00f3n su salida. -v \u2192 Imprime en pantalla cada elemento completo del script (estructura de control, \u2026) y a continuaci\u00f3n su salida. Adem\u00e1s en el propio Script se pueden utilizar los siguientes comandos: Comando Acci\u00f3n set -x set \u2013xv Activa las trazas/verbose. Se debe ubicar justo antes del trozo del script que se desea depurar. set +x set +xv Desactiva las trazas/verbose. Ubicarlo justo despu\u00e9s del trozo del script que se desea depurar. Actividades \u00b6 Note Escribe el c\u00f3digo de los scripts en ShellScript que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle. Crea un shell script que muestre por pantalla el mensaje \u201c \u00a1Hola Mundo! \u201d. Realiza un script que guarde en un fichero el listado de archivos y directorios de la carpeta etc , a posteriori que imprima por pantalla dicho listado. Modifica el script anterior para que adem\u00e1s muestre por pantalla el n\u00famero de l\u00edneas del archivo y el n\u00famero de palabras. Depura los ejercicios anteriores utilizando los argumentos -x y -v .","title":"1.1- Introducci\u00f3n"},{"location":"01_ShellScripting/011_ShellScript_Intro.html#introduccion","text":"Para administrar sistemas operativos es crucial manejar y dominar las interfaces (terminales) disponibles que nos permiten gestionarlos, entre dichas interfaces destacan los siguientes tipos: De l\u00edneas texto ( CLI , Command-Line Interface, interfaz de l\u00ednea de comandos), Gr\u00e1ficos ( GUI , Graphical User Interface, interfaz gr\u00e1fica de usuario), De lenguaje natural ( NUI , Natural User Interface, interfaz natural de usuario, ejemplo SIRI en IOS). Este tema se centra en Sistemas basados en c\u00f3digo libre del tipo UNIX, debido a su amplio despliegue en empresas para implementar servicios, m\u00e1s en concreto de distribuciones Linux/GNU . El CLI de las distribuciones de Linux/GNU es conocido como Shell o terminal, con esta interfaz es posible crear cualquier comando que el usuario necesite, incluso para las tareas m\u00e1s espec\u00edficas, debido a estar directamente conectado al Kernel a diferencia de las aplicaciones como se puede observar en la siguiente figura . Estructura de Linux NOTA Por lo tanto, es buena pr\u00e1ctica que el administrador del sistemas tenga conocimientos en el manejo y gesti\u00f3n del terminal Shell, as\u00ed como en la programaci\u00f3n de scripts.","title":"Introducci\u00f3n"},{"location":"01_ShellScripting/011_ShellScript_Intro.html#shell","text":"En inform\u00e1tica, el shell o int\u00e9rprete de comandos , es el programa inform\u00e1tico que permite a los usuarios interactuar con el sistema, procesando las \u00f3rdenes que se le indican; adem\u00e1s provee una interfaz de usuario para acceder a los servicios del sistema operativo. Los comandos ejecutables desde el shell pueden clasificarse en internos (corresponden en realidad a \u00f3rdenes interpretadas por el propio shell) y externos (corresponden a ficheros ejecutables externos al shell, conocidos como guiones o scripts). IMPORTANTE: Linux dispone de varios Shell diferentes csh , bash , sh , ksh , zsh , etc... A destacar: sh (Bourne Shell) : este shell fue usado desde las primeras versiones de Unix (Unix Versi\u00f3n 7). Recibe ese nombre por su desarrollador, Stephen Bourne , de los Laboratorios Bell de AT&T . bash : fue desarrollado para ser un superconjunto de la funcionalidad del Bourne Shell, siendo el int\u00e9rprete de comandos asignado por defecto a los usuarios en las distribuciones de Linux, por lo que es el shell empleado en la mayor\u00eda de las consolas de comandos de Linux. Se caracteriza por una gran funcionalidad adicional a la del Bourne Shell. Para intentar homogeneizar esta diversidad de shells, el IEEE defini\u00f3 un est\u00e1ndar de \u00abint\u00e9rprete de comandos\u00bb bajo la especificaci\u00f3n POSIX 1003.2 (tambi\u00e9n recogida como ISO 9945.2 ). La creaci\u00f3n de dicho est\u00e1ndar se bas\u00f3 en la sintaxis que presentaban m\u00faltiples shells de la familia Bourne shell. bash respeta completamente el est\u00e1ndar POSIX, sobre el que a\u00f1ade un n\u00famero considerable de extensiones (estructura select, arrays, mayor n\u00famero de operadores,\u2026). En este tema utilizaremos el Shell de bash .","title":"Shell"},{"location":"01_ShellScripting/011_ShellScript_Intro.html#formato-comandos","text":"En general, el formato de las \u00f3rdenes de GNU/Linux es el siguiente: Comando , que indica la acci\u00f3n que se va a ejecutar. Modificadores , que cambian el comportamiento est\u00e1ndar del comando para adaptarlo a las necesidades. Argumentos , elementos necesarios para realizar la acci\u00f3n del comando. Warning Un dato a tener en cuenta cuando se trabaja con un terminal, es que GNU/Linux distingue entre may\u00fasculas y nim\u00fasculas, es decir, la ejecuci\u00f3n de comandos en el CLI de Linux es CASE SENSITIVE .","title":"Formato comandos"},{"location":"01_ShellScripting/011_ShellScript_Intro.html#principales-comandos","text":"Comando Acci\u00f3n Comando Acci\u00f3n ls muestra el contenido de una carpeta uname muestra informaci\u00f3n del sistema df muestra estado del disco cd cambiar de directorio fsck comprueba integridad de discos mkdir crear directorios mount monta particiones y vol\u00famenes shutdown apaga el equipo ( restart o reboot ) unmount desmonta particiones y vol\u00famenes clear limpia la pantalla fdisk administra particiones date/cal muestra hora/calendario del sistema echo imprime por pantalla who muestra quien est\u00e1 conectado","title":"Principales comandos"},{"location":"01_ShellScripting/011_ShellScript_Intro.html#shell-script-en-gnulinux","text":"Un Shell script (gui\u00f3n) es un archivo de texto que contiene una serie de comandos que, ordenados de forma espec\u00edfica, realizan la tarea para la que fueron dise\u00f1ados, es decir, es un programa escrito de comandos Shell para ser ejecutados de forma secuencial. De esta forma se pueden automatizar tareas repetitivas ahorrando tiempo al administrador. Un programa escrito en shell se denomina shellscript, programa shell o simplemente un shell.","title":"Shell Script en GNU/Linux"},{"location":"01_ShellScripting/011_ShellScript_Intro.html#estructura-general","text":"En su forma m\u00e1s b\u00e1sica, un shell-script puede ser un simple fichero de texto que contenga uno o varios comandos. Para ayudar a la identificaci\u00f3n del contenido a partir del nombre del archivo, es habitual que los shell scripts tengan la extensi\u00f3n \u00ab.sh\u00bb, Se seguir\u00e1 este criterio pero hay que tener en cuenta que es informativo y opcional. #!/bin/bash #********************************* #Este es mi primer script #********************************* echo Hola Mundo #Esto es un comentario, soy muy \u00fatil.","title":"Estructura general"},{"location":"01_ShellScripting/011_ShellScript_Intro.html#creacion-shell-scripts","text":"Para crear un script utilizaremos cualquiera de los editores de texto plano como vi , vim , nano . Despu\u00e9s de crear el archivo hay que dotarlo de permisos de lectura y ejecuci\u00f3n. chmod ugo=rx script.sh Para ejecutar el archivo: (ubicados en la carpeta que contiene el archivo), se pueden utilizar el siguiente archivo: ./script.sh Adem\u00e1s se puede utilizar otro m\u00e9todo que consiste en definir la carpeta dentro de la variable de entorno PATH (editando el fichero .bashrc .) Una vez realizado ya se podr\u00eda ejecutar directamente el fichero con el nombre del script. mkdir /home/administrador/scripts PATH=$PATH:/home/administrador/scripts export PATH NOTA La primera forma ejecutar\u00e1 el contenido del shell script en un subshell o hilo del terminal original. El programa se ejecuta hasta que se terminan las \u00f3rdenes del archivo, se recibe una se\u00f1al de finalizaci\u00f3n, se encuentra un error sint\u00e1ctico o se llega a una orden exit . Cuando el programa termina, el subshell muere y el terminal original toma el control del sistema. Esto no ocurre si se usa la opci\u00f3n de PATH , la cual ejecuta el contenido del shell script en el mismo terminal donde fue invocado.","title":"Creaci\u00f3n Shell scripts"},{"location":"01_ShellScripting/011_ShellScript_Intro.html#el-primer-shellscript","text":"Crea un ejemplo llamado listar.sh , se aconseja ejecutar los siguientes comandos de forma secuencial. cd ~ mkdir scripts cd scripts touch listar.sh nano listar.sh Genera, guarda y prueba el siguiente c\u00f3digo. #! /bin/bash clear ls -la echo \u201cListado realizado el \u201c$(date)","title":"El primer Shellscript"},{"location":"01_ShellScripting/011_ShellScript_Intro.html#comentarios","text":"Para realizar un comentario se usa el car\u00e1cter # Cuando el terminal encuentra una l\u00ednea que comienza con este car\u00e1cter, ignora todo lo que existe desde \u00e9l hasta el final de l\u00ednea. A esta regla existe una excepci\u00f3n: #!/bin/bash Info Es el \"Shebang\" Indica el terminal que ser\u00e1 utilizado por el shell script, no un comentario. Esta l\u00ednea debe ser la primera del fichero que, a\u00fan siendo opcional, indica el tipo de lenguaje en el que ha sido escrito el programa. Si la versi\u00f3n de GNU/Linux dispone de el terminal especificado en esta l\u00ednea, ejecutar\u00e1 el c\u00f3digo con \u00e9l, si no es as\u00ed, utilizar\u00e1 el que por defecto tenga asignado el usuario que lo ejecuta.","title":"Comentarios"},{"location":"01_ShellScripting/011_ShellScript_Intro.html#depuracion","text":"Esta tarea no es sencilla en ShellScripting, aun as\u00ed se recomienda los siguientes m\u00e9todos de depuraci\u00f3n, apoyados en los siguientes argumentos a la hora de ejecutar el script: -x \u2192 Expande cada orden simple, e imprime por pantalla la orden con sus argumentos, y a continuaci\u00f3n su salida. -v \u2192 Imprime en pantalla cada elemento completo del script (estructura de control, \u2026) y a continuaci\u00f3n su salida. Adem\u00e1s en el propio Script se pueden utilizar los siguientes comandos: Comando Acci\u00f3n set -x set \u2013xv Activa las trazas/verbose. Se debe ubicar justo antes del trozo del script que se desea depurar. set +x set +xv Desactiva las trazas/verbose. Ubicarlo justo despu\u00e9s del trozo del script que se desea depurar.","title":"Depuraci\u00f3n"},{"location":"01_ShellScripting/011_ShellScript_Intro.html#actividades","text":"Note Escribe el c\u00f3digo de los scripts en ShellScript que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle. Crea un shell script que muestre por pantalla el mensaje \u201c \u00a1Hola Mundo! \u201d. Realiza un script que guarde en un fichero el listado de archivos y directorios de la carpeta etc , a posteriori que imprima por pantalla dicho listado. Modifica el script anterior para que adem\u00e1s muestre por pantalla el n\u00famero de l\u00edneas del archivo y el n\u00famero de palabras. Depura los ejercicios anteriores utilizando los argumentos -x y -v .","title":"Actividades"},{"location":"01_ShellScripting/011_ShellScripting_Total.html","text":"Shell Scripting \u00b6 Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 3 sesiones (2h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Utiliza lenguajes de guiones en sistemas operativos, describiendo su aplicaci\u00f3n y administrando servicios del sistema operativo. Se han utilizado y combinado las estructuras del lenguaje para crear guiones. Se han utilizado herramientas para depurar errores sint\u00e1cticos y de ejecuci\u00f3n. Se han interpretado guiones de configuraci\u00f3n del sistema operativo. Se han realizado cambios y adaptaciones de guiones del sistema. Se han creado y probado guiones de administraci\u00f3n de servicios. Se han creado y probado guiones de automatizaci\u00f3n de tareas. Se han implantado guiones en sistemas libres . Se han consultado y utilizado librer\u00edas de funciones. Se han documentado los guiones creados. Introducci\u00f3n Linux \u00b6 Breve Historia \u00b6 1969 La empresa AT&T desarrolla el sistema operativo UNIX y vendido posteriormente a Novell. 1983 Richard Stallman comienza el proyecto GNU (GNU is Not Unix) para crear un SO tipo UNIX pero de software libre. Software libre: Aquel software, que una vez adquirido (no tiene porque ser gratuito), puede ser usado, copiado, modificado y redistribuido, con cambios o mejoras. 1985 Microsoft publica Windows, un sistema operativo con interfaz gr\u00e1fica de usuario (GUI) para su sistema operativo MS-DOS. 1991 Linus Torvald comienza a programar el sistema operativo Linux (Linus + UNIX). El c\u00f3digo era totalmente nuevo, pero emulaba el funcionamiento del sistema operativo MINIX (Tanenbaum), con estructura de micronucleo. 1992 Se juntan el proyecto Linux y GNU \u2192 GNU/Linux. 2001 Se lanza el primer sistema operativo MAC (MAC OS X) con interfaz de escritorio. MAC est\u00e1 basado en UNIX. Principales Actores \u00b6 Principales Actores en la creaci\u00f3n de GNU/Linux Caracter\u00edsticas \u00b6 Software Libre \u2192 Cualquiera puede usarlo o descargarlo. Licencias GPL (General Public License) de GNU. La Licencia P\u00fablica General de GNU o m\u00e1s conocida por su nombre en ingl\u00e9s GNU General Public License es una licencia de derecho de autor ampliamente usada en el mundo del software libre y c\u00f3digo abierto, \u200b y garantiza a los usuarios finales la libertad de usar, estudiar, compartir y modificar el software. C\u00f3digo Abierto \u2192 Cualquiera puede ver y modificar el c\u00f3digo. En la siguiente tabla se muestra algunas de las principales caracter\u00edsticas. Tabla con algunas caracter\u00edsticas de Linux Distribuciones \u00b6 Gratuitas: Ubuntu, CentOS, Mint, Fedora, Knoppix, OpenSUSE. En el caso de Ubuntu sacan distribuciones LTS que tienen mayor tiempo de actualizaciones. Las versiones indican el a\u00f1o y el mes en que se saca dicha versi\u00f3n. Por ejemplo 17.04 (A\u00f1o 2017, Abril). Pago: RedHat o SUSE. Se paga por el soporte, no por el software en s\u00ed. Las distribuciones de pago tambi\u00e9n suelen tener sus versiones gratuitas. Principales distribuciones \u00b6 Algunas Distribuciones de Linux Shell \u00b6 En inform\u00e1tica, el shell o int\u00e9rprete de \u00f3rdenes o int\u00e9rprete de comandos es el programa inform\u00e1tico que provee una interfaz de usuario para acceder a los servicios del sistema operativo. Dependiendo del tipo de interfaz que empleen, los shells pueden ser: De l\u00edneas texto ( CLI , Command-Line Interface, interfaz de l\u00ednea de comandos), Gr\u00e1ficos ( GUI , Graphical User Interface, interfaz gr\u00e1fica de usuario), De lenguaje natural ( NUI , Natural User Interface, interfaz natural de usuario). En un terminal (Shell) es posible crear cualquier comando que el usuario necesite, incluso para las tareas m\u00e1s espec\u00edficas. Debido a estar directamente conectado al Kernel a diferencia de las aplicaciones como se puede observar en la siguiente figura. Estructura de Linux Tip Es buena pr\u00e1ctica que el administrador del sistema tenga conocimientos en el manejo del terminal as\u00ed como en la programaci\u00f3n de scripts. Info Linux dispone de varios Shell diferentes csh , bash , sh , ksh , zsh , etc... En este tema utilizaremos el Shell bash . Formato comandos \u00b6 En general, el formato de las \u00f3rdenes de GNU/Linux es el siguiente: Comando , que indica la acci\u00f3n que se va a ejecutar. Modificadores , que cambian el comportamiento est\u00e1ndar del comando para adaptarlo a las necesidades. Argumentos , elementos necesarios para realizar la acci\u00f3n del comando. Warning Un dato a tener en cuenta cuando se trabaja con un terminal, es que GNU/Linux distingue entre may\u00fasculas y nim\u00fasculas, es decir, la ejecuci\u00f3n de comandos en el CLI de Linux es CASE SENSITIVE . Principales comandos \u00b6 Comando Acci\u00f3n Comando Acci\u00f3n ls muestra el contenido de una carpeta uname muestra informaci\u00f3n del sistema df muestra estado del disco cd cambiar de directorio fsck comprueba integridad de discos mkdir crear directorios mount monta particiones y vol\u00famenes shutdown apaga el equipo ( restart o reboot ) unmount desmonta particiones y vol\u00famenes clear limpia la pantalla fdisk administra particiones date/cal muestra hora/calendario del sistema echo imprime por pantalla who muestra quien est\u00e1 conectado Shell Script en GNU/Linux \u00b6 Un Shell script (gui\u00f3n) es un archivo de texto que contiene una serie de comandos que, ordenados de forma espec\u00edfica, realizan la tarea para la que fueron dise\u00f1ados, es decir, es un programa escrito de comandos Shell para ser ejecutados de forma secuencial. De esta forma se pueden automatizar tareas repetitivas ahorrando tiempo al administrador. Un programa escrito en shell se denomina shellscript, programa shell o simplemente un shell. Creaci\u00f3n Shell scripts \u00b6 Para crear un script utilizaremos cualquiera de los editores de texto plano como vi , vim , nano . Despu\u00e9s de crear el archivo hay que dotarlo de permisos de lectura y ejecuci\u00f3n. chmod ugo=rx script.sh Para ejecutar el archivo: ubicados en la carpeta que contiene el archivo, se pueden utilizar tres formas: Se teclea el nombre del archivo en el terminal precedido del comando sh sh script.sh Precedido de un punto . . script.sh ./ script.sh Definir la carpeta dentro de la variable de entorno PATH (tambi\u00e9n editando el fichero .bashrc ). Una vez realizado ya se podr\u00eda ejecutar directamente el fichero con el nombre del script. mkdir /home/administrador/scripts PATH=$PATH:/home/administrador/scripts export PATH Info Cualquiera de estas dos primeras formas ejecutar\u00e1 el contenido del shell script en un subshell o hilo del terminal original. El programa se ejecuta hasta que se terminan las \u00f3rdenes del archivo, se recibe una se\u00f1al de finalizaci\u00f3n, se encuentra un error sint\u00e1ctico o se llega a una orden exit . Cuando el programa termina, el subshell muere y el terminal original toma el control del sistema. Esto no ocurre si se usa la opci\u00f3n de PATH , la cual ejecuta el contenido del shell script en el mismo terminal donde fue invocado. El primer Shellscript \u00b6 Crea un ejemplo llamado listar.sh cd ~ mkdir scripts cd scripts touch listar.sh nano listar.sh Genera, guarda y prueba el siguiente c\u00f3digo. #! /bin/bash clear ls -la echo \u201cListado realizado el \u201c$(date) Comentarios \u00b6 Para realizar un comentario se usa el car\u00e1cter # Cuando el terminal encuentra una l\u00ednea que comienza con este car\u00e1cter, ignora todo lo que existe desde \u00e9l hasta el final de l\u00ednea. A esta regla existe una excepci\u00f3n: #!/bin/bash Info Indica el terminal que ser\u00e1 utilizado por el shell script, no un comentario. Esta l\u00ednea debe ser la primera del fichero que, a\u00fan siendo opcional, indica el tipo de lenguaje en el que ha sido escrito el programa. Si la versi\u00f3n de GNU/Linux dispone de el terminal especificado en esta l\u00ednea, ejecutar\u00e1 el c\u00f3digo con \u00e9l, si no es as\u00ed, utilizar\u00e1 el que por defecto tenga asignado el usuario que lo ejecuta. Argumentos o Par\u00e1metros \u00b6 Son especificaciones que se le hacen al programa al momento de llamarlo para obtener un efecto diferente. Introducen un valor, cadena o variable dentro del script. Utilizaci\u00f3n de par\u00e1metros: S\u00edmbolo Funci\u00f3n $1 representa el 1\u00ba par\u00e1metro pasado al script $2 representa el 2\u00ba par\u00e1metro $3 representa el 3\u00ba par\u00e1metro (podemos usar hasta $9) $* representa todos los par\u00e1metros separados por espacio $# representa el n\u00famero de par\u00e1metros que se han pasado $0 representa el par\u00e1metro 0, es decir, el nombre del script o el nombre de la funci\u00f3n Ejemplo: #!/bin/bash echo \u2018El primer par\u00e1metro que se ha pasado es \u2018 $1 echo \u2018El tercer par\u00e1metro que se ha pasado es \u2018 $3 echo \u2018El conjunto de todos los par\u00e1metros : \u2018 $* echo \u2018Me has pasado un total de \u2018 $# \u2018 par\u00e1metros\u2019\u201d echo \u2018El par\u00e1metro 0 es : \u2018 $0 #Fin del script ./script.sh Caballo Perro 675 Nueva El primer par\u00e1metro que se ha pasado es Caballo El tercer par\u00e1metro que se ha pasado es 675 El conjunto de todos los par\u00e1metros : Caballo Perro 675 Nueva Me has pasado un total de 4 par\u00e1metros El par\u00e1metro 0 es : ./script.sh Info Argumento especial $? Contiene el valor que devuelve la ejecuci\u00f3n de un comando. Puede tener dos valores: cero si se ha ejecutado bien y se interpreta como verdadero, o distinto de cero si se ha ejecutado mal y se interpreta como falso. 0 -> Si el \u00faltimo comando se ejecut\u00f3 con \u00e9xito !0 -> Si el \u00faltimo comando no de ejecut\u00f3 con \u00e9xito Variables \u00b6 Es un par\u00e1metro que cambia su valor durante la ejecuci\u00f3n del programa Se da un nombre para identificarla y recuperarla, antecedido por el car\u00e1cter $ Info En shellscript no se declaran y no importa el tipo . El nombre de la variable puede estar compuesto por letras y n\u00fameros y por el car\u00e1cter subrayado \u201c _ \u201d. Ejemplo: #! /bin/bash #********************************* #Este es mi segundo script #********************************* MIVARIABLE=\u2018Administraci\u00f3n de Sistemas Operativos ASO\u2019 echo $MIVARIABLE Warning Deben empezar por letra o \u201c _ \u201d En ning\u00fan caso pueden empezar por un n\u00famero, ya que esa nomenclatura est\u00e1 reservada a los par\u00e1metros. El contenido de estas variables ser\u00e1 siempre tomado como si fuesen cadenas alfanum\u00e9ricas, es decir, ser\u00e1n tratadas como cadenas de texto. Por lo tanto se necesitan operandos o comandos espec\u00edficos para realizar operaciones con valores num\u00e9ricos de las variables. Explicado en el apartado de Operadores Aritm\u00e9ticos . Variables de entorno \u00b6 Cada terminal durante su ejecuci\u00f3n tiene acceso a dos \u00e1mbitos de memoria: Datos Locales Una variable declarada en un terminal solo ser\u00e1 accesible desde el terminal en el que declara. Datos Global Engloban a todos los terminales que se est\u00e9n ejecutando. Son las denominadas Variables de Entorno . Ejemplo de principales variables de entorno: Variable Funci\u00f3n $BASH Ruta del programa Bash $HOME Ruta completa del home del usuario $PATH Lista los directorios de donde busca los programas $RANDOM Devuelve un valor num\u00e9rico aleatorio Entrada y salida del Shell Script \u00b6 Para poder interactuar con un programa de terminal es necesario disponer de un mecanismo de entrada de datos. Para dinamizar el resultado de los shell scripts y un dispositivo de salida que mantenga informado al usuario en todo momento de los que est\u00e1 ocurriendo. Para la entrada de datos se utiliza el comando read y para la salida el comando echo . echo \u00b6 Su tarea es la de mostrar informaci\u00f3n con mensajes de texto lanzados por pantalla Modificador Funci\u00f3n -e para usar las opciones hay utilizar el modificador \\c Sirve para eliminar el salto de l\u00ednea natural del comando echo . \\n nueva l\u00ednea. \\t tabulador horizontal. \\v tabulador vertical. Info Si se antepone el s\u00edmbolo del d\u00f3lar delante de una variable, mostrar\u00e1 su contenido Si es necesario mostrar frases con espacios, debe situarse entre comillas Warning La orden echo permite expandir variables siempre que se usen las comillas dobles. Ejemplo: #!/bin/bash NOMBRE=Javi echo \u201chola $NOMBRE\u201d El texto mostrado por pantalla ser\u00e1: hola javi read \u00b6 Esta herramienta asigna el texto que el usuario ha escrito en el terminal y a una o m\u00e1s variables. Lo que hace read es detener la ejecuci\u00f3n del shell script y pasa el testigo al usuario. Hasta que \u00e9ste no introduzca los datos, la ejecuci\u00f3n del programa no avanzar\u00e1. Ejemplo: #!/bin/bash echo \u201cIntroduce tu nombre : \u201d read NOMBRE echo \u201cHola $NOMBRE\u201d Info Cuando se utiliza read con varios nombres de variables, el primer campo tecleado por el usuario se asigna a la primera variable, el segundo campo a la segunda y as\u00ed sucesivamente Ejemplo: #!/bin/bash read -p \u201cIntroduce tres n\u00fameros (separados por un espacio) : \u201d num1 num2 num3 echo \u201cLos n\u00famero introducidos son $num1, $num2 y $num3\u201d Info En este ejemplo se ha usado el modificador -p el cual permite imprimir un mensaje antes de la recogida de los datos, prescindiendo de primer comando echo del ejemplo anterior. Operadores en shell script \u00b6 Todas las variables creadas en un terminal se tratan como cadenas de texto, incluso si su contenido es s\u00f3lo num\u00e9rico. Este es el motivo por el cual si lanzamos el siguiente c\u00f3digo, no se obtendr\u00e1 el resultado esperado: #!/bin/bash var1=15 var2=5 echo \u201c$var1+$var2\u201d Warning La salida de este programa no ser\u00e1 un n\u00famero 20 , sino la cadena de caracteres 15+5 . Esto es as\u00ed porque la suma de cadenas de texto, son esas cadenas de texto unidas de forma consecutiva. Existen tres tipos de operadores seg\u00fan el trabajo que realicen: aritm\u00e9ticos, relacionales y l\u00f3gicos aritm\u00e9ticos \u00b6 Los operadores aritm\u00e9ticos realizan operaciones matem\u00e1ticas, como sumas o restas con operandos. \"Manipulan\" datos num\u00e9ricos, tanto enteros como reales. S\u00edmbolo Funci\u00f3n + suma - resta * multiplicaci\u00f3n / divisi\u00f3n % modulo (resto) = asignaci\u00f3n Ejemplo: #!/bin/bash #********************************* #Esto es mi tercer script #********************************* NUMERO=4 let SUMA=NUMERO+3 echo $SUMA NUMERO=5 let SUMA=NUMERO+5 echo $SUMA NUMERO=10 let SUMA=NUMERO-10 relacionales \u00b6 Este tipo de operadores tan s\u00f3lo devuelven dos posibles valores; verdadero o falso . Existen subtipos seg\u00fan se comparen cadenas o n\u00fameros. 1. Operadores relacionales para n\u00fameros Operador Acci\u00f3n -eq Comprueba si dos n\u00fameros son iguales. -ne Detecta si dos n\u00fameros son diferentes. -gt Revisa si la izquierda es mayor que derecha. -lt Verifica si la izquierda es menor que derecha. -ge Coteja si la izquierda es mayor o igual que derecha. -le Constata si la izquierda es menor o igual que derecha. 2. Operadores relacionales para cadenas de texto o de cuerda Operador Acci\u00f3n -z Comprueba si la longitud de la cadena es cero. -n Eval\u00faa si la longitud de la cadena no es cero. = Verifica si las cadenas son iguales. != Coteja si las cadenas son diferentes. cadena Revisa si la cadena es nula. 3. Operadores relacionales para archivos y directorios Operador Acci\u00f3n -a Comprueba si existe el archivo. -r Eval\u00faa si la longitud de la cadena no es cero. -w Confirma si existe el archivo y tiene permisos de escritura. -x Constata si existe el archivo y tiene permisos de ejecuci\u00f3n. -f Escruta si existe y es un fichero regular. -d Escruta si existe y es un fichero regular. -h Coteja si existe y es un enlace. -s Revisa si existe el archivo y su tama\u00f1o es mayor a cero. l\u00f3gicos \u00b6 Se utilizan para evaluar condiciones, no elementos. Comprueba el resultado de dos operandos y devuelve verdadero o falso en funci\u00f3n del valor que arrojen los operandos. Los tipos son: Operador Acci\u00f3n && AND , devuelve verdadero si todas condiciones que eval\u00faa son verdaderas. Se puede representar: -a o && . || OR , da como resultado verdadero si alguna de las condiciones que eval\u00faa es verdadera. Se representar: -o o || . ! negaci\u00f3n , invierte el significado del operando. de verdadero a falso, y viceversa. Con ! o not . Info Para realizar c\u00e1lculos aritm\u00e9ticos es necesario utilizar expresiones como expr , let o los expansores . expr \u00b6 Este comando toma los argumentos dados como expresiones num\u00e9ricas, los eval\u00faa e imprime el resultado. Cada t\u00e9rmino de la expresi\u00f3n debe ir separado por espacios en blanco. Soporta diferentes operaciones: sumar, restar, multiplicar y dividir enteros utilizando los operadores aritm\u00e9ticos para el c\u00e1lculo del m\u00f3dulo. Tip MEJOR NO UTILIZAR Desafortunadamente, expr es dif\u00edcil de utilizar debido a las colisiones entre su sintaxis y la propia del terminal. Puesto que * es el s\u00edmbolo comod\u00edn, deber\u00e1 ir precedido por una barra invertida para que el terminal lo interprete literalmente como un asterisco. Adem\u00e1s, es muy inc\u00f3modo de trabajar ya que los espacios entre los elementos de una expresi\u00f3n son cr\u00edticos. Ejemplo: #!/bin/bash var=5 resultado=`expr $1 + $var + 1 echo $resultado` let \u00b6 Facilita la sintaxis de estas operaciones aritm\u00e9ticas reduci\u00e9ndolas a la m\u00ednima expresi\u00f3n. No es necesario incluir el s\u00edmbolo del d\u00f3lar que precede a las variables. Se configura como un comando m\u00e1s c\u00f3modo de ejecutar. Ejemplo: #!/bin/bash var=5 let resultado=$1+var+1 echo $resultado expansores \u00b6 Para las operaciones aritm\u00e9ticas se utilizan los dobles par\u00e9ntesis. Realizan la operaci\u00f3n contenida dentro de ellos lanzando la ejecuci\u00f3n fuera de ellos una vez resuelta. Ejemplo: #!/bin/bash var=5 echo $(($1+$var+1)) echo $(($1 + $var + 1)) Tip Consejo de uso , ya que es mucho m\u00e1s intuitivo que las anteriores expresiones. Redirecciones \u00b6 Una redirecci\u00f3n consiste en trasladar la informaci\u00f3n de un fichero de dispositivo a otro. Para ello se utilizan los siguientes s\u00edmbolos: S\u00edmbolo Acci\u00f3n < redirecciona la entrada desde el fichero stdin (entrada est\u00e1ndar) > env\u00eda la salida de stdout (salida est\u00e1ndar) a un fichero especificado >> a\u00f1ade la salida de stdout (salida est\u00e1ndar) a un fichero especificado 2> env\u00eda la salida de stderr (error est\u00e1ndar) a un fichero especificado * Ejemplo: sh script.sh 2>/dev/null Info El objetivo de la expresi\u00f3n anterior puede ser utilizada en la administraci\u00f3n de sistemas para descartar el error est\u00e1ndar de un proceso, de esta forma no aparecer\u00e1n los mensajes de error por el terminal; es muy utilizado . Tuber\u00edas \u00b6 Forma pr\u00e1ctica de redireccionar la salida est\u00e1ndar de un programa hacia la entrada est\u00e1ndar de otro. Esto se logra usando el s\u00edmbolo | (pipeline). Ejemplo: $ cat archivo.txt | wc Info El comando anterior utiliza tuberias para redireccionar la salida est\u00e1ndar del comando cat y pasarla como entrada est\u00e1ndar del comando wc para contar las l\u00edneas y palabras de un archivo. alias \u00b6 Alias es un comando que se ejecuta desde un terminal que permite configurar v\u00ednculos entre varios comandos. Cada usuario puede asignar una palabra f\u00e1cil de recordar a uno o m\u00e1s comandos que, por lo general, pueden ser m\u00e1s complicados de recordar. Ejemplo: alias listado=\u2019ls -lia>\u2019 Sistema de notaci\u00f3n \u00b6 Antes de lanzarse a escribir una sola l\u00ednea de c\u00f3digo es necesario pensar en la resoluci\u00f3n del problema tal y como se ha indicado. La creaci\u00f3n de una soluci\u00f3n a un problema siguiendo un conjunto de instrucciones se denomina algoritmo. Es necesario invertir el tiempo suficiente para construir ese algoritmo ya que esa ser\u00e1 la soluci\u00f3n que se debe implementar en c\u00f3digo. Existen varios sistemas de representaci\u00f3n para describir esos algoritmos; pseudoc\u00f3digo , la descripci\u00f3n narrada o diagramas Nassi-Shneiderman , pero en este manual se ha optado por los diagramas de flujo ya que resultan m\u00e1s intuitivos. Diagramas de flujo \u00b6 Los diagramas de flujo o flujogramas son la representaci\u00f3n gr\u00e1fica de la soluci\u00f3n algor\u00edtmica de un problema. Para dise\u00f1arlos se emplean figuras normalizadas que representan una acci\u00f3n dentro del procedimiento. Cada una de estas figuras representa un paso a seguir dentro del algoritmo. Note Para su construcci\u00f3n se han de respetar las siguientes reglas: Tiene un elemento de inicio en la parte superior y uno final en la parte inferior. Se escribe de arriba hacia abajo y de izquierda a derecha. Siempre se usan flechas verticales u horizontales, jam\u00e1s curvas u oblicuas Se debe evitar cruce de flujos. En cada paso expresar una acci\u00f3n concreta. En lo sucesivo se ilustrar\u00e1n las diferentes estructuras de control a trav\u00e9s de esta t\u00e9cnica la cual facilita su comprensi\u00f3n. En la siguiente figura se puede observar simbolog\u00eda para dise\u00f1ar diagramas de flujo. Simbolog\u00eda diagramas. Control de flujo \u00b6 Controlar el flujo es determinar el orden en el que se ejecutar\u00e1n las instrucciones en un programa. Si no existiese las estructuras de control del flujo, todo el c\u00f3digo se ejecutar\u00edan de forma secuencial, es decir, empezar\u00edan por la primera instrucci\u00f3n y se ejecutar\u00edan una a una hasta llegar a la \u00faltima. Este modo de ejecuci\u00f3n esta realizado por estructuras secuenciales . Ejemplo: Estructura secuencial. Warning La estructura secuencial no es v\u00e1lida para solucionar la mayor\u00eda de los problemas que se plantean. Para ello es necesario la elecci\u00f3n de un c\u00f3digo u otro en funci\u00f3n de ciertas condiciones, formado otro tipo de estrcuturas que son conocidas como estructuras condicionales ; entre las cuales podemos destacar: Estructuras Alternativas , seg\u00fan si se cumple la condici\u00f3n o no, se realizar\u00e1 una tarea u otra. Ejemplo de utilizaci\u00f3n con la sentencia: if . Estructuras Iterativas , cuando necesario ejecutar algunas instrucciones repetidas veces. Ejemplo de utilizaci\u00f3n con la sentencia: for . Estructuras condicionales \u00b6 Las estructuras de selecci\u00f3n permiten ejecutar diferentes instrucciones dependiendo del valor de una variable o expresi\u00f3n. Tambi\u00e9n se les llama ramificaciones, estructuras de decisi\u00f3n o alternativas. Cuando se usan, no todas las instrucciones del programa se ejecutan, solo las especificadas para el valor de la variable durante esa ejecuci\u00f3n. Las estructuras de selecci\u00f3n m\u00e1s comunes son las que proporcionan ramificaciones dobles ( if ) y m\u00faltiples ( elif y case ). Estructura alternativa doble: if \u00b6 La forma general de la orden if es: if [ expresi\u00f3n ] then realizar este c\u00f3digo si expresi\u00f3n es verdadera fi Estructura alternativa simple. Ejemplo: if [ $# -eq 1 ] then VAR=$1 fi Info El c\u00f3digo anterior comprueba se ha pasado alg\u00fan argumento ,es decir, si han pasado un par\u00e1metro. En caso afirmativo, asigna el contenido de ese par\u00e1metro a la variable VAR. Warning Hay que recordar siempre cerrar esta estructura para indicarle al terminal donde termina, en este caso, se cierra con la palabra reservada fi . Estructura alternativa multiple if then else \u00b6 En este caso se contempla tambi\u00e9n la posibilidad de ejecutar alguna acci\u00f3n si no se cumple la expresi\u00f3n. La forma general del if then else es: if [ expresi\u00f3n ] then realizar si expresi\u00f3n es verdadera else realizar si expresi\u00f3n es falsa fi Estructura alternativa doble. Ejemplo: if [ $a -gt $b ] then echo \"$a es mayor que $b\" else echo \"$a es menor que $b\" fi La estructura if then elif else \u00b6 Permite una segunda evaluaci\u00f3n para ejecutar c\u00f3digo a trav\u00e9s de la estructura elif . Es posible colocar tantos elif como condiciones se requiera evaluar. La forma general del if then elif else es: if [ exp1 ] then realizar si exp1 es verdadera elif [ exp2 ] then realizar si exp1 es falsa, pero es verdadera exp2 elif [ exp3 ] then realizar si exp1 y exp2 son falsas, pero es verdadera exp3 else realizar si todas las expresiones son falsas fi Ejemplo: if [ $a -gt $b ] then echo \"$a es mayor que $b\" elif [ $a -eq $b ] then echo \"$a es igual que $b\" else echo \"$a es menor que $b\" fi Info Este ejemplo ampl\u00eda el anterior comprobando si, adem\u00e1s, los valores de a y b son iguales. Warning El \u00faltimo caso se realiza con la sentencia else . La estructura case \u00b6 La estructura case permite realizar varias acciones en funci\u00f3n del valor de una variable. La limitaci\u00f3n que tan s\u00f3lo se comprueba si es igual a ese valor. La forma general del case es: case VARIABLE in valor1) Se ejecuta si VARIABLE tiene el valor1 ;; valor2) Se ejecuta si VARIABLE tiene el valor2 ;; *) Se ejecuta por defecto ;; esac Estructura Alternativa Multiple. Estructuras de iteraci\u00f3n \u00b6 Son operaciones que se deben ejecutar un n\u00famero repetido de veces para resolver un problema. El conjunto de instrucciones que se ejecuta dentro de esta estructura, se denomina ciclo, bucle o lazo. Iteraci\u00f3n es cada una de las pasadas o ejecuciones de todas las instrucciones contenidas en el bucle. Estas repeticiones de c\u00f3digo van a depender de la evaluaci\u00f3n de una condici\u00f3n o del valor de una variable. Es posible repetir un c\u00f3digo hasta que se cumpla o deje de cumplir una condici\u00f3n pero tambi\u00e9n se posible la repetici\u00f3n tantas veces como indique una variable. Warning Hay que tener mucho cuidado a la hora de dise\u00f1ar estas estructuras y no caer en el error de construir bucles infinitos , es decir, estructuras que nunca dejar\u00e1n de ejecutarse ya que no tienen condici\u00f3n de salida o, si la tienen, \u00e9sta nunca se va a cumplir. Para utilizar esta estructura en algoritmos, se usan: Contador: es una variable cuyo valor se incrementa o decrementa en una cantidad constante cada vez que se produce un determinado suceso o acci\u00f3n. Los contadores se utilizan con la finalidad de contar sucesos o acciones internas de un bucle. Info La inicializaci\u00f3n consiste en asignarle al contador un valor. Se situar\u00e1 antes y fuera del bucle. Acumulador o Totalizador es una variable que suma sobre s\u00ed misma un conjunto de valores para de esta manera tener el total de todos ellos en una sola variable. Info La diferencia entre un contador y un acumulador es que mientras el primero va aumentando de uno en uno, el acumulador va aumentando en una cantidad variable. Banderas , conocidas tambi\u00e9n como interruptores, switch, flags o conmutadores. Son variables que pueden tomar solamente dos valores durante la ejecuci\u00f3n del programa, los cuales pueden ser cero o uno, o bien los valores booleanos verdadero o falso. Info Se les suele llamar interruptores porque cuando toman un valor est\u00e1n simulando un interruptor abierto/cerrado o encendido/apagado. Estructura Iterativa. Las estructuras while y until \u00b6 Estas estructuras van a repetir el c\u00f3digo que contienen mientras la expresi\u00f3n evaluada sea verdadera. El funcionamiento es l\u00f3gico: Eval\u00faa la condici\u00f3n, si es falsa, no realiza ninguna acci\u00f3n y continua con el siguiente c\u00f3digo del programa. Si es verdadera entra en el bucle y ejecuta el c\u00f3digo que contiene. Al finalizar la ejecuci\u00f3n, al iterar, vuelve a evaluar la condici\u00f3n y vuelve a repetir la operaci\u00f3n anterior. Warning Al construir una estructura while es preciso asegurarse que en alg\u00fan momento de su ejecuci\u00f3n la condici\u00f3n dejar\u00e1 de cumplirse y se romper\u00e1 el ciclo, si no, \u00e9ste ser\u00e1 infinito, a menos que el usuario o el sistema interrumpa su ejecuci\u00f3n. WHILE while [ expresi\u00f3n ] do c\u00f3digo se repite MIENTRAS la expresi\u00f3n sea verdadera done UNTIL until [ expresi\u00f3n ] do c\u00f3digo se repite HASTA que la expresi\u00f3n sea verdadera done Info La diferencia es que un until se ejecuta como m\u00ednimo una vez, ya que ejecuta el c\u00f3digo y luego comprueba, mientras que el while es posible que nunca se ejecute, ya que es posible que la condici\u00f3n de entrada nunca se cumpla. Ejemplo: while [ expresi\u00f3n ] #! /bin/bash read -p \u201cEscribe un n\u00famero : \u201c num i=1 while [ $i -le 10 ] do let res=num*i echo \u201c$i x $num = $res\u201d let i=i+1 done Info Este c\u00f3digo imprime por pantalla la tabla de multiplicar del n\u00famero que el usuario ha especificado. Las l\u00edneas contenidas entre do y done se ejecutar\u00e1n mientras i sea menor o igual a diez. Al final de cada iteraci\u00f3n el valor de i se incrementa en uno (es un contador) por lo que en diez iteraciones la condici\u00f3n dejar\u00e1 de cumplirse y el bucle se romper\u00e1. La estructuras for \u00b6 Esta estructura permite repetir c\u00f3digo por cada elemento de un conjunto determinado. No necesita condici\u00f3n de salida ya que al finalizar los elementos del conjunto acabar\u00e1 con su ejecuci\u00f3n. la forma general es: for variable in conjunto do estas l\u00edneas se repiten una vez por cada elemento del conjunto variable toma los valores del conjunto, uno en cada iteraci\u00f3n done * Ejemplo: #! /bin/bash read -p \u201cEscribe la direcci\u00f3n de una carpeta : \u201c car for i in $(ls $car) do if [ -f $i ] then echo \u201c$i es un archivo de tipo regular\u201d elif [ -d $i ] then echo \u201c$i es un archivo de tipo directorio\u201d else echo \u201c$i es otro tipo de archivo o no existe\u201d fi done Info Este ejemplo se van a mostrar los nombres de los ficheros que contiene un directorio y dir\u00e1 si es un directorio o un fichero. Romper un bucle de forma deliberada \u00b6 No s\u00f3lo es posible terminar un bucle cuando se cumpla una condici\u00f3n o cuando se terminen los elementos de un conjunto, shell script proporciona dos formas de alterar el funcionamiento de la estructura en un bucle y romperla en funci\u00f3n de las necesidades del programa: break rompe el bucle que lo contiene y contin\u00faa la ejecuci\u00f3n del script. continue rompe la iteraci\u00f3n que lo contiene, pero mantiene el bucle, que continuar\u00e1 con la siguiente iteraci\u00f3n hasta que termine su ejecuci\u00f3n. exit detiene la ejecuci\u00f3n del script. Este comando no es exclusivo de las estructuras iterativas, pero cobra especial sentido en este \u00e1mbito. Vectores en shell script \u00b6 Un vector es una estructura de datos que permite almacenar una colecci\u00f3n de elementos. Por el hecho de tratarse de una estructura de datos es posible realizar operaciones sobre \u00e9l como buscar, eliminar y agregar elementos a su estructura. Los elementos se encuentran ordenados en funci\u00f3n de como han sido introducidos en la estructura. Para acceder a cada elemento ser\u00e1 necesario especificar la posici\u00f3n que ocupan dentro de ella, teniendo presente que la numeraci\u00f3n de los vectores comienza desde cero, no desde uno. Info Un buen ejemplo de uso ser\u00eda, por ejemplo, para recoger el listado de archivos que hay en una carpeta. Esquema de un vector de doce elementos. Para definir un vector disponemos de dos formas: Impl\u00edcita: hace referencia a que el vector ha sido declarado y al mismo tiempo se han inicializado sus valores. Expl\u00edcitamente: cuando el vector no requiere que se inicialice mientras se declara, es decir, pueden ser inicializados con posterioridad. Para declarar un vector hay que utilizar la siguiente estructura: declare -a meses=(\"enero\" \"febrero\" \"marzo\") Tambi\u00e9n es posible utilizar alguna expresi\u00f3n para completar un vector, como con el operador rango ... declare -a letras=( {N..Z} {s..z} ) echo ${letras[*]} Info Esto crear\u00e1 un vector con el siguiente contenido y lo mostrar\u00e1 por pantalla as\u00ed: N O P Q R S T U V W X Y Z s t u v w x y z Para a\u00f1adir un elemento a la estructura se debe indicar el \u00edndice o posici\u00f3n que ocupar\u00e1 el nuevo dato. Si el \u00edndice es mayor que la \u00faltima posici\u00f3n de la estructura, se escribir\u00e1 al final de la misma. Si se usa un \u00edndice que ya contiene un dato, \u00e9ste ser\u00e1 sobrescrito. meses[3]=\"abril\" Para mostrar el contenido del vector: echo ${meses[*]} Info Mostrar\u00e1: enero febrero marzo abril Es buena idea conocer el n\u00famero de elementos que contiene un vector para poder introducir datos de forma correcta y no sobrescribir por accidente alg\u00fan valor ya almacenado. As\u00ed es posible utilizar: Comando Acci\u00f3n ${meses[*]} Muestra todos los valores del vector ${!meses[*]} Muestra todos los \u00edndices del vector ${#meses[*]} Devuelve el n\u00famero de valores del vector ${#meses[0]} Imprime la longitud del primer dato del vector Para recorrer los valores que contiene esta estructura se puede utilizar un bucle for for item in ${meses[*]} do echo $item done * Tambi\u00e9n se puede utilizar sus \u00edndices para mostrar los datos contenidos. for index in ${!meses[*]} do echo ${meses[$index]} done Es una estructura muy \u00fatil en la que se puede guardar cualquier tipo de informaci\u00f3n, como por ejemplo los ficheros que contiene una carpeta: i=0; for fichero in $(ls -a) do ficheros[$i]=$fichero; let i=i+1; done Funciones en shell script \u00b6 Una funci\u00f3n es un conjunto de l\u00edneas de c\u00f3digo que se identifican a trav\u00e9s de un identificador y que se ejecutan al invocar ese identificador. Se podr\u00eda definir como un shell script dentro de un shell script. Sirve para organizarlo en unidades l\u00f3gicas m\u00e1s peque\u00f1as de manera que sea m\u00e1s f\u00e1cil mantenerlo. Las funciones aceptan par\u00e1metros, de id\u00e9ntica manera que los shell script, por lo que su uso tambi\u00e9n es muy intuitivo. La estructura de una funci\u00f3n queda definida de la siguiente manera: function nombre_funci\u00f3n(){ c\u00f3digo que se ejecutar\u00e1 al llamar a la funci\u00f3n } Info source Para incluir el c\u00f3digo de un fichero en otro tan s\u00f3lo ser\u00e1 necesario utilizar la palabra source seguida de la ruta de ese fichero. * * Tambi\u00e9n es posible usar el punto para poder cargarlo: source funciones.sh o ./funciones.sh Las funciones suelen declararse al inicio del documento y luego utilizadas a lo largo del programa. Uno de los objetivos es optimizar el c\u00f3digo, mediante el \"aprovechamiento\" de c\u00f3digo. Cuando un conjunto de l\u00edneas de c\u00f3digo se repiten, es posible agruparlas bajo un nombre y utilizar ese nombre en lugar de repetir este c\u00f3digo. Ejemplo: #! /bin/bash function imprimir_tabla(){ echo \u201cTabla del n\u00famero $1\u201d for i in 1 2 3 4 5 6 7 8 9 10 do let res=$1*i echo \u201c$i x $1 = $res\u201d done } read -p \u201cEscribe un n\u00famero : \u201c num imprimir_tabla $num imprimir_tabla 5 } En este ejemplo se ha construido una funci\u00f3n para imprimir la tabla de multiplicar de un n\u00famero pasado como par\u00e1metro. En la siguiente l\u00ednea le pedimos al programa que imprima la tabla del n\u00famero cinco. No se ha necesitado escribir el c\u00f3digo que imprime la su tabla de multiplicar de nuevo, ya que con invocar el nombre de la funci\u00f3n el programa ya sabe que c\u00f3digo debe ejecutar. Warning N\u00f3tese que el valor de $1 no se pasa como par\u00e1metro del shell script, si no como par\u00e1metro a la funci\u00f3n imprimir_tabla tras haberlo preguntado al usuario. Hay que tener en cuenta que las variables que se declaran dentro de una funci\u00f3n existen \u00fanicamente dentro de ella. Si es preciso utilizar una variable fuera de una funci\u00f3n se puede usar return , que devuelve un valor fuera de ella, o usar la palabra reservada GLOBAL Es preferible utilizar el primer m\u00e9todo para que devuelva un valor que ser\u00e1 recogido en otra variable fuera de la funci\u00f3n que lo origin\u00f3. Actividades \u00b6 Note Escribe el c\u00f3digo de los scripts en ShellScript que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle. Actividades iniciales \u00b6 Crea un shell script que muestre por pantalla el mensaje \u201c \u00a1Hola Mundo! \u201d. Realiza un shell script que admita un \u00fanico par\u00e1metro correspondiente al nombre de un fichero de texto. Mostrar\u00e1 por pantalla el n\u00famero de l\u00edneas del mismo utilizando el comando wc . Crea un shell script que muestre por pantalla el resultado de de las siguientes operaciones. Debes tener en cuenta que a, b y c son variables enteras que son preguntadas al usuario al iniciar el script. a%b a/c 2 * b + 3 * (a-c) a * (b/c) (a*c)%b Actividades de desarrollo UD1_01 \u00b6 Modifica el shell script realizado en el ejercicio 102 para comprobar si el fichero existe. En tal caso debe contar el n\u00famero de l\u00edneas del mismo a trav\u00e9s del comando wc y mostrar un mensaje indicando dicho n\u00famero. Si el fichero no existe, debe mostrar un mensaje de error y salir. Crea un shell script que al ejecutarlo muestre por pantalla uno de estos mensajes \u201cBuenos d\u00edas\u201d , \u201cBuenas tardes\u201d o \u201cBuenas noches\u201d , en funci\u00f3n de la hora que sea en el sistema (de 8:00 de la ma\u00f1ana a 15:00 ser\u00e1 ma\u00f1ana, de 15:00 a 20:00 ser\u00e1 tarde y el resto ser\u00e1 noche). Para obtener la hora del sistema utiliza el comando date. Construye un programa denominado AGENDA que permita mediante un men\u00fa, el mantenimiento de un peque\u00f1o archivo lista.txt con el nombre, direcci\u00f3n y tel\u00e9fono de varias personas. Debes incluir estas opciones al programa: A\u00f1adir (a\u00f1adir un registro) Buscar (buscar entradas por nombre, direcci\u00f3n o tel\u00e9fono) Listar (visualizar todo el archivo). Ordenar (ordenar los registros alfab\u00e9ticamente). Borrar (borrar el archivo). Crea un shell script que sume los n\u00fameros del 1 al 1000 mediante una estructura for , while y until . Actividades de desarrollo UD1_02 \u00b6 Construye los siguientes dos shell script utilizando estructuras iterativas: el primero ej108A.sh , que pida un n\u00famero e indique si se trata de un n\u00famero par y si es n\u00famero primo. el tercero ej108B.sh , que muestre las 10 primeras tablas de multiplicar por pantalla. Existir\u00e1 un tiempo de espera de dos segundos entre tabla (usa el comando sleep para ello). Crea un shell script para jugar a \u201cDoble o Nada\u201d. Consistir\u00e1 en adivinar un n\u00famero entre 1 y 10 (este n\u00famero ser\u00e1 generado al azar por el ordenador, para ello debes utilizar la funci\u00f3n $RANDOM de la siguiente manera numero=$RANDOM % 10 ). * A\u00f1ade al juego las siguientes caracter\u00edsticas: El jugador apuesta una cantidad de un valor inicial de 100 puntos. Si sale cara obtiene el doble de la cantidad apostada. Si sale cruz pierde todo lo apostado. El shell script debe llevar la cuenta de las tiradas y de la cantidad ganada. Al final de la partida mostrar\u00e1 un informe por pantalla a modo de resumen. Modificar el shell script anterior para que permita ir jugando hasta que el jugador decida abandonar el juego (para ello deber\u00e1 pulsar la tecla \u201cx\u201d del teclado), o no tenga m\u00e1s dinero que apostar. Tampoco podr\u00e1 apostar m\u00e1s dinero del que dispone en su \u201ccartera virtual\u201d. Actividades de desarrollo UD1_03 \u00b6 Realiza un script que permita crear un informe de las IP libres en la red en la que se encuentra el equipo. Debe contener las siguientes opciones: El informe contendr\u00e1 un listado de todas las IP de la red a la que pertenece el equipo indicando si est\u00e1 libe o no (usa el comando ping). En el informe debe aparecer el tipo de red (rango CIDR) en el que est\u00e1 inmerso el ordenador con el nombre de la red , su broadcast y su m\u00e1scara de subred . Esta informaci\u00f3n la pod\u00e9is obtener desde el comando ifconfig. Note Para facilitar los c\u00e1lculos asumimos que el equipo donde se ejecuta el script se encuentra en una \u00fanica red, es decir, solo posee una tarjeta de red. Crea un script que rellene un vector con cien valores aleatorios y muestre en pantalla en una sola l\u00ednea los valores generados.","title":"Shell Scripting"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#shell-scripting","text":"Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 3 sesiones (2h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Utiliza lenguajes de guiones en sistemas operativos, describiendo su aplicaci\u00f3n y administrando servicios del sistema operativo. Se han utilizado y combinado las estructuras del lenguaje para crear guiones. Se han utilizado herramientas para depurar errores sint\u00e1cticos y de ejecuci\u00f3n. Se han interpretado guiones de configuraci\u00f3n del sistema operativo. Se han realizado cambios y adaptaciones de guiones del sistema. Se han creado y probado guiones de administraci\u00f3n de servicios. Se han creado y probado guiones de automatizaci\u00f3n de tareas. Se han implantado guiones en sistemas libres . Se han consultado y utilizado librer\u00edas de funciones. Se han documentado los guiones creados.","title":"Shell Scripting"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#introduccion-linux","text":"","title":"Introducci\u00f3n Linux"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#breve-historia","text":"1969 La empresa AT&T desarrolla el sistema operativo UNIX y vendido posteriormente a Novell. 1983 Richard Stallman comienza el proyecto GNU (GNU is Not Unix) para crear un SO tipo UNIX pero de software libre. Software libre: Aquel software, que una vez adquirido (no tiene porque ser gratuito), puede ser usado, copiado, modificado y redistribuido, con cambios o mejoras. 1985 Microsoft publica Windows, un sistema operativo con interfaz gr\u00e1fica de usuario (GUI) para su sistema operativo MS-DOS. 1991 Linus Torvald comienza a programar el sistema operativo Linux (Linus + UNIX). El c\u00f3digo era totalmente nuevo, pero emulaba el funcionamiento del sistema operativo MINIX (Tanenbaum), con estructura de micronucleo. 1992 Se juntan el proyecto Linux y GNU \u2192 GNU/Linux. 2001 Se lanza el primer sistema operativo MAC (MAC OS X) con interfaz de escritorio. MAC est\u00e1 basado en UNIX.","title":"Breve Historia"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#principales-actores","text":"Principales Actores en la creaci\u00f3n de GNU/Linux","title":"Principales Actores"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#caracteristicas","text":"Software Libre \u2192 Cualquiera puede usarlo o descargarlo. Licencias GPL (General Public License) de GNU. La Licencia P\u00fablica General de GNU o m\u00e1s conocida por su nombre en ingl\u00e9s GNU General Public License es una licencia de derecho de autor ampliamente usada en el mundo del software libre y c\u00f3digo abierto, \u200b y garantiza a los usuarios finales la libertad de usar, estudiar, compartir y modificar el software. C\u00f3digo Abierto \u2192 Cualquiera puede ver y modificar el c\u00f3digo. En la siguiente tabla se muestra algunas de las principales caracter\u00edsticas. Tabla con algunas caracter\u00edsticas de Linux","title":"Caracter\u00edsticas"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#distribuciones","text":"Gratuitas: Ubuntu, CentOS, Mint, Fedora, Knoppix, OpenSUSE. En el caso de Ubuntu sacan distribuciones LTS que tienen mayor tiempo de actualizaciones. Las versiones indican el a\u00f1o y el mes en que se saca dicha versi\u00f3n. Por ejemplo 17.04 (A\u00f1o 2017, Abril). Pago: RedHat o SUSE. Se paga por el soporte, no por el software en s\u00ed. Las distribuciones de pago tambi\u00e9n suelen tener sus versiones gratuitas.","title":"Distribuciones"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#principales-distribuciones","text":"Algunas Distribuciones de Linux","title":"Principales distribuciones"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#shell","text":"En inform\u00e1tica, el shell o int\u00e9rprete de \u00f3rdenes o int\u00e9rprete de comandos es el programa inform\u00e1tico que provee una interfaz de usuario para acceder a los servicios del sistema operativo. Dependiendo del tipo de interfaz que empleen, los shells pueden ser: De l\u00edneas texto ( CLI , Command-Line Interface, interfaz de l\u00ednea de comandos), Gr\u00e1ficos ( GUI , Graphical User Interface, interfaz gr\u00e1fica de usuario), De lenguaje natural ( NUI , Natural User Interface, interfaz natural de usuario). En un terminal (Shell) es posible crear cualquier comando que el usuario necesite, incluso para las tareas m\u00e1s espec\u00edficas. Debido a estar directamente conectado al Kernel a diferencia de las aplicaciones como se puede observar en la siguiente figura. Estructura de Linux Tip Es buena pr\u00e1ctica que el administrador del sistema tenga conocimientos en el manejo del terminal as\u00ed como en la programaci\u00f3n de scripts. Info Linux dispone de varios Shell diferentes csh , bash , sh , ksh , zsh , etc... En este tema utilizaremos el Shell bash .","title":"Shell"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#formato-comandos","text":"En general, el formato de las \u00f3rdenes de GNU/Linux es el siguiente: Comando , que indica la acci\u00f3n que se va a ejecutar. Modificadores , que cambian el comportamiento est\u00e1ndar del comando para adaptarlo a las necesidades. Argumentos , elementos necesarios para realizar la acci\u00f3n del comando. Warning Un dato a tener en cuenta cuando se trabaja con un terminal, es que GNU/Linux distingue entre may\u00fasculas y nim\u00fasculas, es decir, la ejecuci\u00f3n de comandos en el CLI de Linux es CASE SENSITIVE .","title":"Formato comandos"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#principales-comandos","text":"Comando Acci\u00f3n Comando Acci\u00f3n ls muestra el contenido de una carpeta uname muestra informaci\u00f3n del sistema df muestra estado del disco cd cambiar de directorio fsck comprueba integridad de discos mkdir crear directorios mount monta particiones y vol\u00famenes shutdown apaga el equipo ( restart o reboot ) unmount desmonta particiones y vol\u00famenes clear limpia la pantalla fdisk administra particiones date/cal muestra hora/calendario del sistema echo imprime por pantalla who muestra quien est\u00e1 conectado","title":"Principales comandos"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#shell-script-en-gnulinux","text":"Un Shell script (gui\u00f3n) es un archivo de texto que contiene una serie de comandos que, ordenados de forma espec\u00edfica, realizan la tarea para la que fueron dise\u00f1ados, es decir, es un programa escrito de comandos Shell para ser ejecutados de forma secuencial. De esta forma se pueden automatizar tareas repetitivas ahorrando tiempo al administrador. Un programa escrito en shell se denomina shellscript, programa shell o simplemente un shell.","title":"Shell Script en GNU/Linux"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#creacion-shell-scripts","text":"Para crear un script utilizaremos cualquiera de los editores de texto plano como vi , vim , nano . Despu\u00e9s de crear el archivo hay que dotarlo de permisos de lectura y ejecuci\u00f3n. chmod ugo=rx script.sh Para ejecutar el archivo: ubicados en la carpeta que contiene el archivo, se pueden utilizar tres formas: Se teclea el nombre del archivo en el terminal precedido del comando sh sh script.sh Precedido de un punto . . script.sh ./ script.sh Definir la carpeta dentro de la variable de entorno PATH (tambi\u00e9n editando el fichero .bashrc ). Una vez realizado ya se podr\u00eda ejecutar directamente el fichero con el nombre del script. mkdir /home/administrador/scripts PATH=$PATH:/home/administrador/scripts export PATH Info Cualquiera de estas dos primeras formas ejecutar\u00e1 el contenido del shell script en un subshell o hilo del terminal original. El programa se ejecuta hasta que se terminan las \u00f3rdenes del archivo, se recibe una se\u00f1al de finalizaci\u00f3n, se encuentra un error sint\u00e1ctico o se llega a una orden exit . Cuando el programa termina, el subshell muere y el terminal original toma el control del sistema. Esto no ocurre si se usa la opci\u00f3n de PATH , la cual ejecuta el contenido del shell script en el mismo terminal donde fue invocado.","title":"Creaci\u00f3n Shell scripts"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#el-primer-shellscript","text":"Crea un ejemplo llamado listar.sh cd ~ mkdir scripts cd scripts touch listar.sh nano listar.sh Genera, guarda y prueba el siguiente c\u00f3digo. #! /bin/bash clear ls -la echo \u201cListado realizado el \u201c$(date)","title":"El primer Shellscript"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#comentarios","text":"Para realizar un comentario se usa el car\u00e1cter # Cuando el terminal encuentra una l\u00ednea que comienza con este car\u00e1cter, ignora todo lo que existe desde \u00e9l hasta el final de l\u00ednea. A esta regla existe una excepci\u00f3n: #!/bin/bash Info Indica el terminal que ser\u00e1 utilizado por el shell script, no un comentario. Esta l\u00ednea debe ser la primera del fichero que, a\u00fan siendo opcional, indica el tipo de lenguaje en el que ha sido escrito el programa. Si la versi\u00f3n de GNU/Linux dispone de el terminal especificado en esta l\u00ednea, ejecutar\u00e1 el c\u00f3digo con \u00e9l, si no es as\u00ed, utilizar\u00e1 el que por defecto tenga asignado el usuario que lo ejecuta.","title":"Comentarios"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#argumentos-o-parametros","text":"Son especificaciones que se le hacen al programa al momento de llamarlo para obtener un efecto diferente. Introducen un valor, cadena o variable dentro del script. Utilizaci\u00f3n de par\u00e1metros: S\u00edmbolo Funci\u00f3n $1 representa el 1\u00ba par\u00e1metro pasado al script $2 representa el 2\u00ba par\u00e1metro $3 representa el 3\u00ba par\u00e1metro (podemos usar hasta $9) $* representa todos los par\u00e1metros separados por espacio $# representa el n\u00famero de par\u00e1metros que se han pasado $0 representa el par\u00e1metro 0, es decir, el nombre del script o el nombre de la funci\u00f3n Ejemplo: #!/bin/bash echo \u2018El primer par\u00e1metro que se ha pasado es \u2018 $1 echo \u2018El tercer par\u00e1metro que se ha pasado es \u2018 $3 echo \u2018El conjunto de todos los par\u00e1metros : \u2018 $* echo \u2018Me has pasado un total de \u2018 $# \u2018 par\u00e1metros\u2019\u201d echo \u2018El par\u00e1metro 0 es : \u2018 $0 #Fin del script ./script.sh Caballo Perro 675 Nueva El primer par\u00e1metro que se ha pasado es Caballo El tercer par\u00e1metro que se ha pasado es 675 El conjunto de todos los par\u00e1metros : Caballo Perro 675 Nueva Me has pasado un total de 4 par\u00e1metros El par\u00e1metro 0 es : ./script.sh Info Argumento especial $? Contiene el valor que devuelve la ejecuci\u00f3n de un comando. Puede tener dos valores: cero si se ha ejecutado bien y se interpreta como verdadero, o distinto de cero si se ha ejecutado mal y se interpreta como falso. 0 -> Si el \u00faltimo comando se ejecut\u00f3 con \u00e9xito !0 -> Si el \u00faltimo comando no de ejecut\u00f3 con \u00e9xito","title":"Argumentos o Par\u00e1metros"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#variables","text":"Es un par\u00e1metro que cambia su valor durante la ejecuci\u00f3n del programa Se da un nombre para identificarla y recuperarla, antecedido por el car\u00e1cter $ Info En shellscript no se declaran y no importa el tipo . El nombre de la variable puede estar compuesto por letras y n\u00fameros y por el car\u00e1cter subrayado \u201c _ \u201d. Ejemplo: #! /bin/bash #********************************* #Este es mi segundo script #********************************* MIVARIABLE=\u2018Administraci\u00f3n de Sistemas Operativos ASO\u2019 echo $MIVARIABLE Warning Deben empezar por letra o \u201c _ \u201d En ning\u00fan caso pueden empezar por un n\u00famero, ya que esa nomenclatura est\u00e1 reservada a los par\u00e1metros. El contenido de estas variables ser\u00e1 siempre tomado como si fuesen cadenas alfanum\u00e9ricas, es decir, ser\u00e1n tratadas como cadenas de texto. Por lo tanto se necesitan operandos o comandos espec\u00edficos para realizar operaciones con valores num\u00e9ricos de las variables. Explicado en el apartado de Operadores Aritm\u00e9ticos .","title":"Variables"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#variables-de-entorno","text":"Cada terminal durante su ejecuci\u00f3n tiene acceso a dos \u00e1mbitos de memoria: Datos Locales Una variable declarada en un terminal solo ser\u00e1 accesible desde el terminal en el que declara. Datos Global Engloban a todos los terminales que se est\u00e9n ejecutando. Son las denominadas Variables de Entorno . Ejemplo de principales variables de entorno: Variable Funci\u00f3n $BASH Ruta del programa Bash $HOME Ruta completa del home del usuario $PATH Lista los directorios de donde busca los programas $RANDOM Devuelve un valor num\u00e9rico aleatorio","title":"Variables de entorno"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#entrada-y-salida-del-shell-script","text":"Para poder interactuar con un programa de terminal es necesario disponer de un mecanismo de entrada de datos. Para dinamizar el resultado de los shell scripts y un dispositivo de salida que mantenga informado al usuario en todo momento de los que est\u00e1 ocurriendo. Para la entrada de datos se utiliza el comando read y para la salida el comando echo .","title":"Entrada y salida del Shell Script"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#operadores-en-shell-script","text":"Todas las variables creadas en un terminal se tratan como cadenas de texto, incluso si su contenido es s\u00f3lo num\u00e9rico. Este es el motivo por el cual si lanzamos el siguiente c\u00f3digo, no se obtendr\u00e1 el resultado esperado: #!/bin/bash var1=15 var2=5 echo \u201c$var1+$var2\u201d Warning La salida de este programa no ser\u00e1 un n\u00famero 20 , sino la cadena de caracteres 15+5 . Esto es as\u00ed porque la suma de cadenas de texto, son esas cadenas de texto unidas de forma consecutiva. Existen tres tipos de operadores seg\u00fan el trabajo que realicen: aritm\u00e9ticos, relacionales y l\u00f3gicos","title":"Operadores en shell script"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#redirecciones","text":"Una redirecci\u00f3n consiste en trasladar la informaci\u00f3n de un fichero de dispositivo a otro. Para ello se utilizan los siguientes s\u00edmbolos: S\u00edmbolo Acci\u00f3n < redirecciona la entrada desde el fichero stdin (entrada est\u00e1ndar) > env\u00eda la salida de stdout (salida est\u00e1ndar) a un fichero especificado >> a\u00f1ade la salida de stdout (salida est\u00e1ndar) a un fichero especificado 2> env\u00eda la salida de stderr (error est\u00e1ndar) a un fichero especificado * Ejemplo: sh script.sh 2>/dev/null Info El objetivo de la expresi\u00f3n anterior puede ser utilizada en la administraci\u00f3n de sistemas para descartar el error est\u00e1ndar de un proceso, de esta forma no aparecer\u00e1n los mensajes de error por el terminal; es muy utilizado .","title":"Redirecciones"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#tuberias","text":"Forma pr\u00e1ctica de redireccionar la salida est\u00e1ndar de un programa hacia la entrada est\u00e1ndar de otro. Esto se logra usando el s\u00edmbolo | (pipeline). Ejemplo: $ cat archivo.txt | wc Info El comando anterior utiliza tuberias para redireccionar la salida est\u00e1ndar del comando cat y pasarla como entrada est\u00e1ndar del comando wc para contar las l\u00edneas y palabras de un archivo.","title":"Tuber\u00edas"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#alias","text":"Alias es un comando que se ejecuta desde un terminal que permite configurar v\u00ednculos entre varios comandos. Cada usuario puede asignar una palabra f\u00e1cil de recordar a uno o m\u00e1s comandos que, por lo general, pueden ser m\u00e1s complicados de recordar. Ejemplo: alias listado=\u2019ls -lia>\u2019","title":"alias"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#sistema-de-notacion","text":"Antes de lanzarse a escribir una sola l\u00ednea de c\u00f3digo es necesario pensar en la resoluci\u00f3n del problema tal y como se ha indicado. La creaci\u00f3n de una soluci\u00f3n a un problema siguiendo un conjunto de instrucciones se denomina algoritmo. Es necesario invertir el tiempo suficiente para construir ese algoritmo ya que esa ser\u00e1 la soluci\u00f3n que se debe implementar en c\u00f3digo. Existen varios sistemas de representaci\u00f3n para describir esos algoritmos; pseudoc\u00f3digo , la descripci\u00f3n narrada o diagramas Nassi-Shneiderman , pero en este manual se ha optado por los diagramas de flujo ya que resultan m\u00e1s intuitivos.","title":"Sistema de notaci\u00f3n"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#diagramas-de-flujo","text":"Los diagramas de flujo o flujogramas son la representaci\u00f3n gr\u00e1fica de la soluci\u00f3n algor\u00edtmica de un problema. Para dise\u00f1arlos se emplean figuras normalizadas que representan una acci\u00f3n dentro del procedimiento. Cada una de estas figuras representa un paso a seguir dentro del algoritmo. Note Para su construcci\u00f3n se han de respetar las siguientes reglas: Tiene un elemento de inicio en la parte superior y uno final en la parte inferior. Se escribe de arriba hacia abajo y de izquierda a derecha. Siempre se usan flechas verticales u horizontales, jam\u00e1s curvas u oblicuas Se debe evitar cruce de flujos. En cada paso expresar una acci\u00f3n concreta. En lo sucesivo se ilustrar\u00e1n las diferentes estructuras de control a trav\u00e9s de esta t\u00e9cnica la cual facilita su comprensi\u00f3n. En la siguiente figura se puede observar simbolog\u00eda para dise\u00f1ar diagramas de flujo. Simbolog\u00eda diagramas.","title":"Diagramas de flujo"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#control-de-flujo","text":"Controlar el flujo es determinar el orden en el que se ejecutar\u00e1n las instrucciones en un programa. Si no existiese las estructuras de control del flujo, todo el c\u00f3digo se ejecutar\u00edan de forma secuencial, es decir, empezar\u00edan por la primera instrucci\u00f3n y se ejecutar\u00edan una a una hasta llegar a la \u00faltima. Este modo de ejecuci\u00f3n esta realizado por estructuras secuenciales . Ejemplo: Estructura secuencial. Warning La estructura secuencial no es v\u00e1lida para solucionar la mayor\u00eda de los problemas que se plantean. Para ello es necesario la elecci\u00f3n de un c\u00f3digo u otro en funci\u00f3n de ciertas condiciones, formado otro tipo de estrcuturas que son conocidas como estructuras condicionales ; entre las cuales podemos destacar: Estructuras Alternativas , seg\u00fan si se cumple la condici\u00f3n o no, se realizar\u00e1 una tarea u otra. Ejemplo de utilizaci\u00f3n con la sentencia: if . Estructuras Iterativas , cuando necesario ejecutar algunas instrucciones repetidas veces. Ejemplo de utilizaci\u00f3n con la sentencia: for .","title":"Control de flujo"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#estructuras-condicionales","text":"Las estructuras de selecci\u00f3n permiten ejecutar diferentes instrucciones dependiendo del valor de una variable o expresi\u00f3n. Tambi\u00e9n se les llama ramificaciones, estructuras de decisi\u00f3n o alternativas. Cuando se usan, no todas las instrucciones del programa se ejecutan, solo las especificadas para el valor de la variable durante esa ejecuci\u00f3n. Las estructuras de selecci\u00f3n m\u00e1s comunes son las que proporcionan ramificaciones dobles ( if ) y m\u00faltiples ( elif y case ).","title":"Estructuras condicionales"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#estructuras-de-iteracion","text":"Son operaciones que se deben ejecutar un n\u00famero repetido de veces para resolver un problema. El conjunto de instrucciones que se ejecuta dentro de esta estructura, se denomina ciclo, bucle o lazo. Iteraci\u00f3n es cada una de las pasadas o ejecuciones de todas las instrucciones contenidas en el bucle. Estas repeticiones de c\u00f3digo van a depender de la evaluaci\u00f3n de una condici\u00f3n o del valor de una variable. Es posible repetir un c\u00f3digo hasta que se cumpla o deje de cumplir una condici\u00f3n pero tambi\u00e9n se posible la repetici\u00f3n tantas veces como indique una variable. Warning Hay que tener mucho cuidado a la hora de dise\u00f1ar estas estructuras y no caer en el error de construir bucles infinitos , es decir, estructuras que nunca dejar\u00e1n de ejecutarse ya que no tienen condici\u00f3n de salida o, si la tienen, \u00e9sta nunca se va a cumplir. Para utilizar esta estructura en algoritmos, se usan: Contador: es una variable cuyo valor se incrementa o decrementa en una cantidad constante cada vez que se produce un determinado suceso o acci\u00f3n. Los contadores se utilizan con la finalidad de contar sucesos o acciones internas de un bucle. Info La inicializaci\u00f3n consiste en asignarle al contador un valor. Se situar\u00e1 antes y fuera del bucle. Acumulador o Totalizador es una variable que suma sobre s\u00ed misma un conjunto de valores para de esta manera tener el total de todos ellos en una sola variable. Info La diferencia entre un contador y un acumulador es que mientras el primero va aumentando de uno en uno, el acumulador va aumentando en una cantidad variable. Banderas , conocidas tambi\u00e9n como interruptores, switch, flags o conmutadores. Son variables que pueden tomar solamente dos valores durante la ejecuci\u00f3n del programa, los cuales pueden ser cero o uno, o bien los valores booleanos verdadero o falso. Info Se les suele llamar interruptores porque cuando toman un valor est\u00e1n simulando un interruptor abierto/cerrado o encendido/apagado. Estructura Iterativa.","title":"Estructuras de iteraci\u00f3n"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#vectores-en-shell-script","text":"Un vector es una estructura de datos que permite almacenar una colecci\u00f3n de elementos. Por el hecho de tratarse de una estructura de datos es posible realizar operaciones sobre \u00e9l como buscar, eliminar y agregar elementos a su estructura. Los elementos se encuentran ordenados en funci\u00f3n de como han sido introducidos en la estructura. Para acceder a cada elemento ser\u00e1 necesario especificar la posici\u00f3n que ocupan dentro de ella, teniendo presente que la numeraci\u00f3n de los vectores comienza desde cero, no desde uno. Info Un buen ejemplo de uso ser\u00eda, por ejemplo, para recoger el listado de archivos que hay en una carpeta. Esquema de un vector de doce elementos. Para definir un vector disponemos de dos formas: Impl\u00edcita: hace referencia a que el vector ha sido declarado y al mismo tiempo se han inicializado sus valores. Expl\u00edcitamente: cuando el vector no requiere que se inicialice mientras se declara, es decir, pueden ser inicializados con posterioridad. Para declarar un vector hay que utilizar la siguiente estructura: declare -a meses=(\"enero\" \"febrero\" \"marzo\") Tambi\u00e9n es posible utilizar alguna expresi\u00f3n para completar un vector, como con el operador rango ... declare -a letras=( {N..Z} {s..z} ) echo ${letras[*]} Info Esto crear\u00e1 un vector con el siguiente contenido y lo mostrar\u00e1 por pantalla as\u00ed: N O P Q R S T U V W X Y Z s t u v w x y z Para a\u00f1adir un elemento a la estructura se debe indicar el \u00edndice o posici\u00f3n que ocupar\u00e1 el nuevo dato. Si el \u00edndice es mayor que la \u00faltima posici\u00f3n de la estructura, se escribir\u00e1 al final de la misma. Si se usa un \u00edndice que ya contiene un dato, \u00e9ste ser\u00e1 sobrescrito. meses[3]=\"abril\" Para mostrar el contenido del vector: echo ${meses[*]} Info Mostrar\u00e1: enero febrero marzo abril Es buena idea conocer el n\u00famero de elementos que contiene un vector para poder introducir datos de forma correcta y no sobrescribir por accidente alg\u00fan valor ya almacenado. As\u00ed es posible utilizar: Comando Acci\u00f3n ${meses[*]} Muestra todos los valores del vector ${!meses[*]} Muestra todos los \u00edndices del vector ${#meses[*]} Devuelve el n\u00famero de valores del vector ${#meses[0]} Imprime la longitud del primer dato del vector Para recorrer los valores que contiene esta estructura se puede utilizar un bucle for for item in ${meses[*]} do echo $item done * Tambi\u00e9n se puede utilizar sus \u00edndices para mostrar los datos contenidos. for index in ${!meses[*]} do echo ${meses[$index]} done Es una estructura muy \u00fatil en la que se puede guardar cualquier tipo de informaci\u00f3n, como por ejemplo los ficheros que contiene una carpeta: i=0; for fichero in $(ls -a) do ficheros[$i]=$fichero; let i=i+1; done","title":"Vectores en shell script"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#funciones-en-shell-script","text":"Una funci\u00f3n es un conjunto de l\u00edneas de c\u00f3digo que se identifican a trav\u00e9s de un identificador y que se ejecutan al invocar ese identificador. Se podr\u00eda definir como un shell script dentro de un shell script. Sirve para organizarlo en unidades l\u00f3gicas m\u00e1s peque\u00f1as de manera que sea m\u00e1s f\u00e1cil mantenerlo. Las funciones aceptan par\u00e1metros, de id\u00e9ntica manera que los shell script, por lo que su uso tambi\u00e9n es muy intuitivo. La estructura de una funci\u00f3n queda definida de la siguiente manera: function nombre_funci\u00f3n(){ c\u00f3digo que se ejecutar\u00e1 al llamar a la funci\u00f3n } Info source Para incluir el c\u00f3digo de un fichero en otro tan s\u00f3lo ser\u00e1 necesario utilizar la palabra source seguida de la ruta de ese fichero. * * Tambi\u00e9n es posible usar el punto para poder cargarlo: source funciones.sh o ./funciones.sh Las funciones suelen declararse al inicio del documento y luego utilizadas a lo largo del programa. Uno de los objetivos es optimizar el c\u00f3digo, mediante el \"aprovechamiento\" de c\u00f3digo. Cuando un conjunto de l\u00edneas de c\u00f3digo se repiten, es posible agruparlas bajo un nombre y utilizar ese nombre en lugar de repetir este c\u00f3digo. Ejemplo: #! /bin/bash function imprimir_tabla(){ echo \u201cTabla del n\u00famero $1\u201d for i in 1 2 3 4 5 6 7 8 9 10 do let res=$1*i echo \u201c$i x $1 = $res\u201d done } read -p \u201cEscribe un n\u00famero : \u201c num imprimir_tabla $num imprimir_tabla 5 } En este ejemplo se ha construido una funci\u00f3n para imprimir la tabla de multiplicar de un n\u00famero pasado como par\u00e1metro. En la siguiente l\u00ednea le pedimos al programa que imprima la tabla del n\u00famero cinco. No se ha necesitado escribir el c\u00f3digo que imprime la su tabla de multiplicar de nuevo, ya que con invocar el nombre de la funci\u00f3n el programa ya sabe que c\u00f3digo debe ejecutar. Warning N\u00f3tese que el valor de $1 no se pasa como par\u00e1metro del shell script, si no como par\u00e1metro a la funci\u00f3n imprimir_tabla tras haberlo preguntado al usuario. Hay que tener en cuenta que las variables que se declaran dentro de una funci\u00f3n existen \u00fanicamente dentro de ella. Si es preciso utilizar una variable fuera de una funci\u00f3n se puede usar return , que devuelve un valor fuera de ella, o usar la palabra reservada GLOBAL Es preferible utilizar el primer m\u00e9todo para que devuelva un valor que ser\u00e1 recogido en otra variable fuera de la funci\u00f3n que lo origin\u00f3.","title":"Funciones en shell script"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#actividades","text":"Note Escribe el c\u00f3digo de los scripts en ShellScript que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle.","title":"Actividades"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#actividades-iniciales","text":"Crea un shell script que muestre por pantalla el mensaje \u201c \u00a1Hola Mundo! \u201d. Realiza un shell script que admita un \u00fanico par\u00e1metro correspondiente al nombre de un fichero de texto. Mostrar\u00e1 por pantalla el n\u00famero de l\u00edneas del mismo utilizando el comando wc . Crea un shell script que muestre por pantalla el resultado de de las siguientes operaciones. Debes tener en cuenta que a, b y c son variables enteras que son preguntadas al usuario al iniciar el script. a%b a/c 2 * b + 3 * (a-c) a * (b/c) (a*c)%b","title":"Actividades iniciales"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#actividades-de-desarrollo-ud1_01","text":"Modifica el shell script realizado en el ejercicio 102 para comprobar si el fichero existe. En tal caso debe contar el n\u00famero de l\u00edneas del mismo a trav\u00e9s del comando wc y mostrar un mensaje indicando dicho n\u00famero. Si el fichero no existe, debe mostrar un mensaje de error y salir. Crea un shell script que al ejecutarlo muestre por pantalla uno de estos mensajes \u201cBuenos d\u00edas\u201d , \u201cBuenas tardes\u201d o \u201cBuenas noches\u201d , en funci\u00f3n de la hora que sea en el sistema (de 8:00 de la ma\u00f1ana a 15:00 ser\u00e1 ma\u00f1ana, de 15:00 a 20:00 ser\u00e1 tarde y el resto ser\u00e1 noche). Para obtener la hora del sistema utiliza el comando date. Construye un programa denominado AGENDA que permita mediante un men\u00fa, el mantenimiento de un peque\u00f1o archivo lista.txt con el nombre, direcci\u00f3n y tel\u00e9fono de varias personas. Debes incluir estas opciones al programa: A\u00f1adir (a\u00f1adir un registro) Buscar (buscar entradas por nombre, direcci\u00f3n o tel\u00e9fono) Listar (visualizar todo el archivo). Ordenar (ordenar los registros alfab\u00e9ticamente). Borrar (borrar el archivo). Crea un shell script que sume los n\u00fameros del 1 al 1000 mediante una estructura for , while y until .","title":"Actividades de desarrollo UD1_01"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#actividades-de-desarrollo-ud1_02","text":"Construye los siguientes dos shell script utilizando estructuras iterativas: el primero ej108A.sh , que pida un n\u00famero e indique si se trata de un n\u00famero par y si es n\u00famero primo. el tercero ej108B.sh , que muestre las 10 primeras tablas de multiplicar por pantalla. Existir\u00e1 un tiempo de espera de dos segundos entre tabla (usa el comando sleep para ello). Crea un shell script para jugar a \u201cDoble o Nada\u201d. Consistir\u00e1 en adivinar un n\u00famero entre 1 y 10 (este n\u00famero ser\u00e1 generado al azar por el ordenador, para ello debes utilizar la funci\u00f3n $RANDOM de la siguiente manera numero=$RANDOM % 10 ). * A\u00f1ade al juego las siguientes caracter\u00edsticas: El jugador apuesta una cantidad de un valor inicial de 100 puntos. Si sale cara obtiene el doble de la cantidad apostada. Si sale cruz pierde todo lo apostado. El shell script debe llevar la cuenta de las tiradas y de la cantidad ganada. Al final de la partida mostrar\u00e1 un informe por pantalla a modo de resumen. Modificar el shell script anterior para que permita ir jugando hasta que el jugador decida abandonar el juego (para ello deber\u00e1 pulsar la tecla \u201cx\u201d del teclado), o no tenga m\u00e1s dinero que apostar. Tampoco podr\u00e1 apostar m\u00e1s dinero del que dispone en su \u201ccartera virtual\u201d.","title":"Actividades de desarrollo UD1_02"},{"location":"01_ShellScripting/011_ShellScripting_Total.html#actividades-de-desarrollo-ud1_03","text":"Realiza un script que permita crear un informe de las IP libres en la red en la que se encuentra el equipo. Debe contener las siguientes opciones: El informe contendr\u00e1 un listado de todas las IP de la red a la que pertenece el equipo indicando si est\u00e1 libe o no (usa el comando ping). En el informe debe aparecer el tipo de red (rango CIDR) en el que est\u00e1 inmerso el ordenador con el nombre de la red , su broadcast y su m\u00e1scara de subred . Esta informaci\u00f3n la pod\u00e9is obtener desde el comando ifconfig. Note Para facilitar los c\u00e1lculos asumimos que el equipo donde se ejecuta el script se encuentra en una \u00fanica red, es decir, solo posee una tarjeta de red. Crea un script que rellene un vector con cien valores aleatorios y muestre en pantalla en una sola l\u00ednea los valores generados.","title":"Actividades de desarrollo UD1_03"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html","text":"Sintaxis \u00b6 Argumentos o Par\u00e1metros \u00b6 Son especificaciones que se le hacen al programa al momento de llamarlo para obtener un efecto diferente. Introducen un valor, cadena o variable dentro del script. Utilizaci\u00f3n de par\u00e1metros: S\u00edmbolo Funci\u00f3n $1 representa el 1\u00ba par\u00e1metro pasado al script $2 representa el 2\u00ba par\u00e1metro $3 representa el 3\u00ba par\u00e1metro (podemos usar hasta $9) $* representa todos los par\u00e1metros separados por espacio $# representa el n\u00famero de par\u00e1metros que se han pasado $0 representa el par\u00e1metro 0, es decir, el nombre del script o el nombre de la funci\u00f3n Ejemplo: #!/bin/bash echo \u2018El primer par\u00e1metro que se ha pasado es \u2018 $1 echo \u2018El tercer par\u00e1metro que se ha pasado es \u2018 $3 echo \u2018El conjunto de todos los par\u00e1metros : \u2018 $* echo \u2018Me has pasado un total de \u2018 $# \u2018 par\u00e1metros\u2019\u201d echo \u2018El par\u00e1metro 0 es : \u2018 $0 #Fin del script ./script.sh Caballo Perro 675 Nueva El primer par\u00e1metro que se ha pasado es Caballo El tercer par\u00e1metro que se ha pasado es 675 El conjunto de todos los par\u00e1metros : Caballo Perro 675 Nueva Me has pasado un total de 4 par\u00e1metros El par\u00e1metro 0 es : ./script.sh Info Argumento especial $? Contiene el valor que devuelve la ejecuci\u00f3n de un comando. Puede tener dos valores: cero si se ha ejecutado bien y se interpreta como verdadero, o distinto de cero si se ha ejecutado mal y se interpreta como falso. 0 -> Si el \u00faltimo comando se ejecut\u00f3 con \u00e9xito !0 -> Si el \u00faltimo comando no de ejecut\u00f3 con \u00e9xito Variables \u00b6 Es un par\u00e1metro que cambia su valor durante la ejecuci\u00f3n del programa Se da un nombre para identificarla y recuperarla, antecedido por el car\u00e1cter $ Info En shellscript no se declaran y no importa el tipo . El nombre de la variable puede estar compuesto por letras y n\u00fameros y por el car\u00e1cter subrayado \u201c _ \u201d. Ejemplo: #! /bin/bash #********************************* #Este es mi segundo script #********************************* MIVARIABLE=\u2018Administraci\u00f3n de Sistemas Operativos ASO\u2019 echo $MIVARIABLE Warning Deben empezar por letra o \u201c _ \u201d En ning\u00fan caso pueden empezar por un n\u00famero, ya que esa nomenclatura est\u00e1 reservada a los par\u00e1metros. El contenido de estas variables ser\u00e1 siempre tomado como si fuesen cadenas alfanum\u00e9ricas, es decir, ser\u00e1n tratadas como cadenas de texto. Por lo tanto se necesitan operandos o comandos espec\u00edficos para realizar operaciones con valores num\u00e9ricos de las variables. Explicado en el apartado de Operadores Aritm\u00e9ticos . Variables de entorno \u00b6 Cada terminal durante su ejecuci\u00f3n tiene acceso a dos \u00e1mbitos de memoria: Datos Locales Una variable declarada en un terminal solo ser\u00e1 accesible desde el terminal en el que declara. Datos Global Engloban a todos los terminales que se est\u00e9n ejecutando. Son las denominadas Variables de Entorno . Ejemplo de principales variables de entorno: Variable Funci\u00f3n $BASH Ruta del programa Bash $HOME Ruta completa del home del usuario $PATH Lista los directorios de donde busca los programas $RANDOM Devuelve un valor num\u00e9rico aleatorio Entrada y salida del Shell Script \u00b6 Para poder interactuar con un programa de terminal es necesario disponer de un mecanismo de entrada de datos. Para dinamizar el resultado de los shell scripts y un dispositivo de salida que mantenga informado al usuario en todo momento de los que est\u00e1 ocurriendo. Para la entrada de datos se utiliza el comando read y para la salida el comando echo . echo \u00b6 Su tarea es la de mostrar informaci\u00f3n con mensajes de texto lanzados por pantalla Modificador Funci\u00f3n -e para usar las opciones hay utilizar el modificador \\c Sirve para eliminar el salto de l\u00ednea natural del comando echo . \\n nueva l\u00ednea. \\t tabulador horizontal. \\v tabulador vertical. Info Si se antepone el s\u00edmbolo del d\u00f3lar delante de una variable, mostrar\u00e1 su contenido Si es necesario mostrar frases con espacios, debe situarse entre comillas Warning La orden echo permite expandir variables siempre que se usen las comillas dobles. Ejemplo: #!/bin/bash NOMBRE=Javi echo \u201chola $NOMBRE\u201d El texto mostrado por pantalla ser\u00e1: hola javi read \u00b6 Esta herramienta asigna el texto que el usuario ha escrito en el terminal y a una o m\u00e1s variables. Lo que hace read es detener la ejecuci\u00f3n del shell script y pasa el testigo al usuario. Hasta que \u00e9ste no introduzca los datos, la ejecuci\u00f3n del programa no avanzar\u00e1. Ejemplo: #!/bin/bash echo \u201cIntroduce tu nombre : \u201d read NOMBRE echo \u201cHola $NOMBRE\u201d Info Cuando se utiliza read con varios nombres de variables, el primer campo tecleado por el usuario se asigna a la primera variable, el segundo campo a la segunda y as\u00ed sucesivamente Ejemplo: #!/bin/bash read -p \u201cIntroduce tres n\u00fameros (separados por un espacio) : \u201d num1 num2 num3 echo \u201cLos n\u00famero introducidos son $num1, $num2 y $num3\u201d Info En este ejemplo se ha usado el modificador -p el cual permite imprimir un mensaje antes de la recogida de los datos, prescindiendo de primer comando echo del ejemplo anterior. Operadores en shell script \u00b6 Todas las variables creadas en un terminal se tratan como cadenas de texto, incluso si su contenido es s\u00f3lo num\u00e9rico. Este es el motivo por el cual si lanzamos el siguiente c\u00f3digo, no se obtendr\u00e1 el resultado esperado: #!/bin/bash var1=15 var2=5 echo \u201c$var1+$var2\u201d Warning La salida de este programa no ser\u00e1 un n\u00famero 20 , sino la cadena de caracteres 15+5 . Esto es as\u00ed porque la suma de cadenas de texto, son esas cadenas de texto unidas de forma consecutiva. Existen tres tipos de operadores seg\u00fan el trabajo que realicen: aritm\u00e9ticos, relacionales y l\u00f3gicos aritm\u00e9ticos \u00b6 Los operadores aritm\u00e9ticos realizan operaciones matem\u00e1ticas, como sumas o restas con operandos. \"Manipulan\" datos num\u00e9ricos, tanto enteros como reales. S\u00edmbolo Funci\u00f3n + suma - resta * multiplicaci\u00f3n / divisi\u00f3n % modulo (resto) = asignaci\u00f3n Ejemplo: #!/bin/bash #********************************* #Esto es mi tercer script #********************************* NUMERO=4 let SUMA=NUMERO+3 echo $SUMA NUMERO=5 let SUMA=NUMERO+5 echo $SUMA NUMERO=10 let SUMA=NUMERO-10 relacionales \u00b6 Este tipo de operadores tan s\u00f3lo devuelven dos posibles valores; verdadero o falso . Existen subtipos seg\u00fan se comparen cadenas o n\u00fameros. 1. Operadores relacionales para n\u00fameros Operador Acci\u00f3n -eq Comprueba si dos n\u00fameros son iguales. -ne Detecta si dos n\u00fameros son diferentes. -gt Revisa si la izquierda es mayor que derecha. -lt Verifica si la izquierda es menor que derecha. -ge Coteja si la izquierda es mayor o igual que derecha. -le Constata si la izquierda es menor o igual que derecha. 2. Operadores relacionales para cadenas de texto o de cuerda Operador Acci\u00f3n -z Comprueba si la longitud de la cadena es cero. -n Eval\u00faa si la longitud de la cadena no es cero. = Verifica si las cadenas son iguales. != Coteja si las cadenas son diferentes. cadena Revisa si la cadena es nula. 3. Operadores relacionales para archivos y directorios Operador Acci\u00f3n -a Comprueba si existe el archivo. -r Eval\u00faa si la longitud de la cadena no es cero. -w Confirma si existe el archivo y tiene permisos de escritura. -x Constata si existe el archivo y tiene permisos de ejecuci\u00f3n. -f Escruta si existe y es un fichero regular. -d Escruta si existe y es un fichero regular. -h Coteja si existe y es un enlace. -s Revisa si existe el archivo y su tama\u00f1o es mayor a cero. l\u00f3gicos \u00b6 Se utilizan para evaluar condiciones, no elementos. Comprueba el resultado de dos operandos y devuelve verdadero o falso en funci\u00f3n del valor que arrojen los operandos. Los tipos son: Operador Acci\u00f3n && AND , devuelve verdadero si todas condiciones que eval\u00faa son verdaderas. Se puede representar: -a o && . || OR , da como resultado verdadero si alguna de las condiciones que eval\u00faa es verdadera. Se representar: -o o || . ! negaci\u00f3n , invierte el significado del operando. de verdadero a falso, y viceversa. Con ! o not . Info Para realizar c\u00e1lculos aritm\u00e9ticos es necesario utilizar expresiones como expr , let o los expansores . expr \u00b6 Este comando toma los argumentos dados como expresiones num\u00e9ricas, los eval\u00faa e imprime el resultado. Cada t\u00e9rmino de la expresi\u00f3n debe ir separado por espacios en blanco. Soporta diferentes operaciones: sumar, restar, multiplicar y dividir enteros utilizando los operadores aritm\u00e9ticos para el c\u00e1lculo del m\u00f3dulo. Tip MEJOR NO UTILIZAR Desafortunadamente, expr es dif\u00edcil de utilizar debido a las colisiones entre su sintaxis y la propia del terminal. Puesto que * es el s\u00edmbolo comod\u00edn, deber\u00e1 ir precedido por una barra invertida para que el terminal lo interprete literalmente como un asterisco. Adem\u00e1s, es muy inc\u00f3modo de trabajar ya que los espacios entre los elementos de una expresi\u00f3n son cr\u00edticos. Ejemplo: #!/bin/bash var=5 resultado=`expr $1 + $var + 1 echo $resultado` let \u00b6 Facilita la sintaxis de estas operaciones aritm\u00e9ticas reduci\u00e9ndolas a la m\u00ednima expresi\u00f3n. No es necesario incluir el s\u00edmbolo del d\u00f3lar que precede a las variables. Se configura como un comando m\u00e1s c\u00f3modo de ejecutar. Ejemplo: #!/bin/bash var=5 let resultado=$1+var+1 echo $resultado expansores \u00b6 Para las operaciones aritm\u00e9ticas se utilizan los dobles par\u00e9ntesis. Realizan la operaci\u00f3n contenida dentro de ellos lanzando la ejecuci\u00f3n fuera de ellos una vez resuelta. Ejemplo: #!/bin/bash var=5 echo $(($1+$var+1)) echo $(($1 + $var + 1)) Tip Consejo de uso , ya que es mucho m\u00e1s intuitivo que las anteriores expresiones. Redirecciones \u00b6 Una redirecci\u00f3n consiste en trasladar la informaci\u00f3n de un fichero de dispositivo a otro. Para ello se utilizan los siguientes s\u00edmbolos: S\u00edmbolo Acci\u00f3n < redirecciona la entrada desde el fichero stdin (entrada est\u00e1ndar) > env\u00eda la salida de stdout (salida est\u00e1ndar) a un fichero especificado >> a\u00f1ade la salida de stdout (salida est\u00e1ndar) a un fichero especificado 2> env\u00eda la salida de stderr (error est\u00e1ndar) a un fichero especificado * Ejemplo: sh script.sh 2>/dev/null Info El objetivo de la expresi\u00f3n anterior puede ser utilizada en la administraci\u00f3n de sistemas para descartar el error est\u00e1ndar de un proceso, de esta forma no aparecer\u00e1n los mensajes de error por el terminal; es muy utilizado . Tuber\u00edas \u00b6 Forma pr\u00e1ctica de redireccionar la salida est\u00e1ndar de un programa hacia la entrada est\u00e1ndar de otro. Esto se logra usando el s\u00edmbolo | (pipeline). Ejemplo: $ cat archivo.txt | wc Info El comando anterior utiliza tuberias para redireccionar la salida est\u00e1ndar del comando cat y pasarla como entrada est\u00e1ndar del comando wc para contar las l\u00edneas y palabras de un archivo. alias \u00b6 Alias es un comando que se ejecuta desde un terminal que permite configurar v\u00ednculos entre varios comandos. Cada usuario puede asignar una palabra f\u00e1cil de recordar a uno o m\u00e1s comandos que, por lo general, pueden ser m\u00e1s complicados de recordar. Ejemplo: alias listado=\u2019ls -lia>\u2019 Actividades \u00b6 Note Escribe el c\u00f3digo de los scripts en ShellScript que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle. Crea un shell script que muestre por pantalla el resultado de de las siguientes operaciones. Debes tener en cuenta que a, b y c son variables enteras que son preguntadas al usuario al iniciar el script. a%b a/c 2 * b + 3 * (a-c) a * (b/c) (a*c)%b Realiza un script que muestre por pantalla los par\u00e1metros introducidos separados por espacio, el n\u00famero de par\u00e1metros que se han pasado, y el nombre del script. Dise\u00f1a un script en Shell que pida al usuario dos n\u00fameros, los guarde en dos variables y los muestre por pantalla. Genera un script que muestre los usuarios conectados en el sistema operativo, comprobando que son usuarios dados de alta en el mismo.","title":"1.2- Sintaxis"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#sintaxis","text":"","title":"Sintaxis"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#argumentos-o-parametros","text":"Son especificaciones que se le hacen al programa al momento de llamarlo para obtener un efecto diferente. Introducen un valor, cadena o variable dentro del script. Utilizaci\u00f3n de par\u00e1metros: S\u00edmbolo Funci\u00f3n $1 representa el 1\u00ba par\u00e1metro pasado al script $2 representa el 2\u00ba par\u00e1metro $3 representa el 3\u00ba par\u00e1metro (podemos usar hasta $9) $* representa todos los par\u00e1metros separados por espacio $# representa el n\u00famero de par\u00e1metros que se han pasado $0 representa el par\u00e1metro 0, es decir, el nombre del script o el nombre de la funci\u00f3n Ejemplo: #!/bin/bash echo \u2018El primer par\u00e1metro que se ha pasado es \u2018 $1 echo \u2018El tercer par\u00e1metro que se ha pasado es \u2018 $3 echo \u2018El conjunto de todos los par\u00e1metros : \u2018 $* echo \u2018Me has pasado un total de \u2018 $# \u2018 par\u00e1metros\u2019\u201d echo \u2018El par\u00e1metro 0 es : \u2018 $0 #Fin del script ./script.sh Caballo Perro 675 Nueva El primer par\u00e1metro que se ha pasado es Caballo El tercer par\u00e1metro que se ha pasado es 675 El conjunto de todos los par\u00e1metros : Caballo Perro 675 Nueva Me has pasado un total de 4 par\u00e1metros El par\u00e1metro 0 es : ./script.sh Info Argumento especial $? Contiene el valor que devuelve la ejecuci\u00f3n de un comando. Puede tener dos valores: cero si se ha ejecutado bien y se interpreta como verdadero, o distinto de cero si se ha ejecutado mal y se interpreta como falso. 0 -> Si el \u00faltimo comando se ejecut\u00f3 con \u00e9xito !0 -> Si el \u00faltimo comando no de ejecut\u00f3 con \u00e9xito","title":"Argumentos o Par\u00e1metros"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#variables","text":"Es un par\u00e1metro que cambia su valor durante la ejecuci\u00f3n del programa Se da un nombre para identificarla y recuperarla, antecedido por el car\u00e1cter $ Info En shellscript no se declaran y no importa el tipo . El nombre de la variable puede estar compuesto por letras y n\u00fameros y por el car\u00e1cter subrayado \u201c _ \u201d. Ejemplo: #! /bin/bash #********************************* #Este es mi segundo script #********************************* MIVARIABLE=\u2018Administraci\u00f3n de Sistemas Operativos ASO\u2019 echo $MIVARIABLE Warning Deben empezar por letra o \u201c _ \u201d En ning\u00fan caso pueden empezar por un n\u00famero, ya que esa nomenclatura est\u00e1 reservada a los par\u00e1metros. El contenido de estas variables ser\u00e1 siempre tomado como si fuesen cadenas alfanum\u00e9ricas, es decir, ser\u00e1n tratadas como cadenas de texto. Por lo tanto se necesitan operandos o comandos espec\u00edficos para realizar operaciones con valores num\u00e9ricos de las variables. Explicado en el apartado de Operadores Aritm\u00e9ticos .","title":"Variables"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#variables-de-entorno","text":"Cada terminal durante su ejecuci\u00f3n tiene acceso a dos \u00e1mbitos de memoria: Datos Locales Una variable declarada en un terminal solo ser\u00e1 accesible desde el terminal en el que declara. Datos Global Engloban a todos los terminales que se est\u00e9n ejecutando. Son las denominadas Variables de Entorno . Ejemplo de principales variables de entorno: Variable Funci\u00f3n $BASH Ruta del programa Bash $HOME Ruta completa del home del usuario $PATH Lista los directorios de donde busca los programas $RANDOM Devuelve un valor num\u00e9rico aleatorio","title":"Variables de entorno"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#entrada-y-salida-del-shell-script","text":"Para poder interactuar con un programa de terminal es necesario disponer de un mecanismo de entrada de datos. Para dinamizar el resultado de los shell scripts y un dispositivo de salida que mantenga informado al usuario en todo momento de los que est\u00e1 ocurriendo. Para la entrada de datos se utiliza el comando read y para la salida el comando echo .","title":"Entrada y salida del Shell Script"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#echo","text":"Su tarea es la de mostrar informaci\u00f3n con mensajes de texto lanzados por pantalla Modificador Funci\u00f3n -e para usar las opciones hay utilizar el modificador \\c Sirve para eliminar el salto de l\u00ednea natural del comando echo . \\n nueva l\u00ednea. \\t tabulador horizontal. \\v tabulador vertical. Info Si se antepone el s\u00edmbolo del d\u00f3lar delante de una variable, mostrar\u00e1 su contenido Si es necesario mostrar frases con espacios, debe situarse entre comillas Warning La orden echo permite expandir variables siempre que se usen las comillas dobles. Ejemplo: #!/bin/bash NOMBRE=Javi echo \u201chola $NOMBRE\u201d El texto mostrado por pantalla ser\u00e1: hola javi","title":"echo"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#read","text":"Esta herramienta asigna el texto que el usuario ha escrito en el terminal y a una o m\u00e1s variables. Lo que hace read es detener la ejecuci\u00f3n del shell script y pasa el testigo al usuario. Hasta que \u00e9ste no introduzca los datos, la ejecuci\u00f3n del programa no avanzar\u00e1. Ejemplo: #!/bin/bash echo \u201cIntroduce tu nombre : \u201d read NOMBRE echo \u201cHola $NOMBRE\u201d Info Cuando se utiliza read con varios nombres de variables, el primer campo tecleado por el usuario se asigna a la primera variable, el segundo campo a la segunda y as\u00ed sucesivamente Ejemplo: #!/bin/bash read -p \u201cIntroduce tres n\u00fameros (separados por un espacio) : \u201d num1 num2 num3 echo \u201cLos n\u00famero introducidos son $num1, $num2 y $num3\u201d Info En este ejemplo se ha usado el modificador -p el cual permite imprimir un mensaje antes de la recogida de los datos, prescindiendo de primer comando echo del ejemplo anterior.","title":"read"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#operadores-en-shell-script","text":"Todas las variables creadas en un terminal se tratan como cadenas de texto, incluso si su contenido es s\u00f3lo num\u00e9rico. Este es el motivo por el cual si lanzamos el siguiente c\u00f3digo, no se obtendr\u00e1 el resultado esperado: #!/bin/bash var1=15 var2=5 echo \u201c$var1+$var2\u201d Warning La salida de este programa no ser\u00e1 un n\u00famero 20 , sino la cadena de caracteres 15+5 . Esto es as\u00ed porque la suma de cadenas de texto, son esas cadenas de texto unidas de forma consecutiva. Existen tres tipos de operadores seg\u00fan el trabajo que realicen: aritm\u00e9ticos, relacionales y l\u00f3gicos","title":"Operadores en shell script"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#aritmeticos","text":"Los operadores aritm\u00e9ticos realizan operaciones matem\u00e1ticas, como sumas o restas con operandos. \"Manipulan\" datos num\u00e9ricos, tanto enteros como reales. S\u00edmbolo Funci\u00f3n + suma - resta * multiplicaci\u00f3n / divisi\u00f3n % modulo (resto) = asignaci\u00f3n Ejemplo: #!/bin/bash #********************************* #Esto es mi tercer script #********************************* NUMERO=4 let SUMA=NUMERO+3 echo $SUMA NUMERO=5 let SUMA=NUMERO+5 echo $SUMA NUMERO=10 let SUMA=NUMERO-10","title":"aritm\u00e9ticos"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#relacionales","text":"Este tipo de operadores tan s\u00f3lo devuelven dos posibles valores; verdadero o falso . Existen subtipos seg\u00fan se comparen cadenas o n\u00fameros. 1. Operadores relacionales para n\u00fameros Operador Acci\u00f3n -eq Comprueba si dos n\u00fameros son iguales. -ne Detecta si dos n\u00fameros son diferentes. -gt Revisa si la izquierda es mayor que derecha. -lt Verifica si la izquierda es menor que derecha. -ge Coteja si la izquierda es mayor o igual que derecha. -le Constata si la izquierda es menor o igual que derecha. 2. Operadores relacionales para cadenas de texto o de cuerda Operador Acci\u00f3n -z Comprueba si la longitud de la cadena es cero. -n Eval\u00faa si la longitud de la cadena no es cero. = Verifica si las cadenas son iguales. != Coteja si las cadenas son diferentes. cadena Revisa si la cadena es nula. 3. Operadores relacionales para archivos y directorios Operador Acci\u00f3n -a Comprueba si existe el archivo. -r Eval\u00faa si la longitud de la cadena no es cero. -w Confirma si existe el archivo y tiene permisos de escritura. -x Constata si existe el archivo y tiene permisos de ejecuci\u00f3n. -f Escruta si existe y es un fichero regular. -d Escruta si existe y es un fichero regular. -h Coteja si existe y es un enlace. -s Revisa si existe el archivo y su tama\u00f1o es mayor a cero.","title":"relacionales"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#logicos","text":"Se utilizan para evaluar condiciones, no elementos. Comprueba el resultado de dos operandos y devuelve verdadero o falso en funci\u00f3n del valor que arrojen los operandos. Los tipos son: Operador Acci\u00f3n && AND , devuelve verdadero si todas condiciones que eval\u00faa son verdaderas. Se puede representar: -a o && . || OR , da como resultado verdadero si alguna de las condiciones que eval\u00faa es verdadera. Se representar: -o o || . ! negaci\u00f3n , invierte el significado del operando. de verdadero a falso, y viceversa. Con ! o not . Info Para realizar c\u00e1lculos aritm\u00e9ticos es necesario utilizar expresiones como expr , let o los expansores .","title":"l\u00f3gicos"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#expr","text":"Este comando toma los argumentos dados como expresiones num\u00e9ricas, los eval\u00faa e imprime el resultado. Cada t\u00e9rmino de la expresi\u00f3n debe ir separado por espacios en blanco. Soporta diferentes operaciones: sumar, restar, multiplicar y dividir enteros utilizando los operadores aritm\u00e9ticos para el c\u00e1lculo del m\u00f3dulo. Tip MEJOR NO UTILIZAR Desafortunadamente, expr es dif\u00edcil de utilizar debido a las colisiones entre su sintaxis y la propia del terminal. Puesto que * es el s\u00edmbolo comod\u00edn, deber\u00e1 ir precedido por una barra invertida para que el terminal lo interprete literalmente como un asterisco. Adem\u00e1s, es muy inc\u00f3modo de trabajar ya que los espacios entre los elementos de una expresi\u00f3n son cr\u00edticos. Ejemplo: #!/bin/bash var=5 resultado=`expr $1 + $var + 1 echo $resultado`","title":"expr"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#let","text":"Facilita la sintaxis de estas operaciones aritm\u00e9ticas reduci\u00e9ndolas a la m\u00ednima expresi\u00f3n. No es necesario incluir el s\u00edmbolo del d\u00f3lar que precede a las variables. Se configura como un comando m\u00e1s c\u00f3modo de ejecutar. Ejemplo: #!/bin/bash var=5 let resultado=$1+var+1 echo $resultado","title":"let"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#expansores","text":"Para las operaciones aritm\u00e9ticas se utilizan los dobles par\u00e9ntesis. Realizan la operaci\u00f3n contenida dentro de ellos lanzando la ejecuci\u00f3n fuera de ellos una vez resuelta. Ejemplo: #!/bin/bash var=5 echo $(($1+$var+1)) echo $(($1 + $var + 1)) Tip Consejo de uso , ya que es mucho m\u00e1s intuitivo que las anteriores expresiones.","title":"expansores"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#redirecciones","text":"Una redirecci\u00f3n consiste en trasladar la informaci\u00f3n de un fichero de dispositivo a otro. Para ello se utilizan los siguientes s\u00edmbolos: S\u00edmbolo Acci\u00f3n < redirecciona la entrada desde el fichero stdin (entrada est\u00e1ndar) > env\u00eda la salida de stdout (salida est\u00e1ndar) a un fichero especificado >> a\u00f1ade la salida de stdout (salida est\u00e1ndar) a un fichero especificado 2> env\u00eda la salida de stderr (error est\u00e1ndar) a un fichero especificado * Ejemplo: sh script.sh 2>/dev/null Info El objetivo de la expresi\u00f3n anterior puede ser utilizada en la administraci\u00f3n de sistemas para descartar el error est\u00e1ndar de un proceso, de esta forma no aparecer\u00e1n los mensajes de error por el terminal; es muy utilizado .","title":"Redirecciones"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#tuberias","text":"Forma pr\u00e1ctica de redireccionar la salida est\u00e1ndar de un programa hacia la entrada est\u00e1ndar de otro. Esto se logra usando el s\u00edmbolo | (pipeline). Ejemplo: $ cat archivo.txt | wc Info El comando anterior utiliza tuberias para redireccionar la salida est\u00e1ndar del comando cat y pasarla como entrada est\u00e1ndar del comando wc para contar las l\u00edneas y palabras de un archivo.","title":"Tuber\u00edas"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#alias","text":"Alias es un comando que se ejecuta desde un terminal que permite configurar v\u00ednculos entre varios comandos. Cada usuario puede asignar una palabra f\u00e1cil de recordar a uno o m\u00e1s comandos que, por lo general, pueden ser m\u00e1s complicados de recordar. Ejemplo: alias listado=\u2019ls -lia>\u2019","title":"alias"},{"location":"01_ShellScripting/012_ShelScript_Sintaxis.html#actividades","text":"Note Escribe el c\u00f3digo de los scripts en ShellScript que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle. Crea un shell script que muestre por pantalla el resultado de de las siguientes operaciones. Debes tener en cuenta que a, b y c son variables enteras que son preguntadas al usuario al iniciar el script. a%b a/c 2 * b + 3 * (a-c) a * (b/c) (a*c)%b Realiza un script que muestre por pantalla los par\u00e1metros introducidos separados por espacio, el n\u00famero de par\u00e1metros que se han pasado, y el nombre del script. Dise\u00f1a un script en Shell que pida al usuario dos n\u00fameros, los guarde en dos variables y los muestre por pantalla. Genera un script que muestre los usuarios conectados en el sistema operativo, comprobando que son usuarios dados de alta en el mismo.","title":"Actividades"},{"location":"01_ShellScripting/013_ShellScript_ControlFlujo.html","text":"Control de Flujo \u00b6 Sistema de notaci\u00f3n \u00b6 Antes de lanzarse a escribir una sola l\u00ednea de c\u00f3digo es necesario pensar en la resoluci\u00f3n del problema tal y como se ha indicado. La creaci\u00f3n de una soluci\u00f3n a un problema siguiendo un conjunto de instrucciones se denomina algoritmo. Es necesario invertir el tiempo suficiente para construir ese algoritmo ya que esa ser\u00e1 la soluci\u00f3n que se debe implementar en c\u00f3digo. Existen varios sistemas de representaci\u00f3n para describir esos algoritmos; pseudoc\u00f3digo , la descripci\u00f3n narrada o diagramas Nassi-Shneiderman , pero en este manual se ha optado por los diagramas de flujo ya que resultan m\u00e1s intuitivos. Diagramas de flujo \u00b6 Los diagramas de flujo o flujogramas son la representaci\u00f3n gr\u00e1fica de la soluci\u00f3n algor\u00edtmica de un problema. Para dise\u00f1arlos se emplean figuras normalizadas que representan una acci\u00f3n dentro del procedimiento. Cada una de estas figuras representa un paso a seguir dentro del algoritmo. Note Para su construcci\u00f3n se han de respetar las siguientes reglas: Tiene un elemento de inicio en la parte superior y uno final en la parte inferior. Se escribe de arriba hacia abajo y de izquierda a derecha. Siempre se usan flechas verticales u horizontales, jam\u00e1s curvas u oblicuas Se debe evitar cruce de flujos. En cada paso expresar una acci\u00f3n concreta. En lo sucesivo se ilustrar\u00e1n las diferentes estructuras de control a trav\u00e9s de esta t\u00e9cnica la cual facilita su comprensi\u00f3n. En la siguiente figura se puede observar simbolog\u00eda para dise\u00f1ar diagramas de flujo. Simbolog\u00eda diagramas. Estructuras \u00b6 Controlar el flujo es determinar el orden en el que se ejecutar\u00e1n las instrucciones en un programa. Si no existiese las estructuras de control del flujo, todo el c\u00f3digo se ejecutar\u00edan de forma secuencial, es decir, empezar\u00edan por la primera instrucci\u00f3n y se ejecutar\u00edan una a una hasta llegar a la \u00faltima. Este modo de ejecuci\u00f3n esta realizado por estructuras secuenciales . Ejemplo: Estructura secuencial. Warning La estructura secuencial no es v\u00e1lida para solucionar la mayor\u00eda de los problemas que se plantean. Para ello es necesario la elecci\u00f3n de un c\u00f3digo u otro en funci\u00f3n de ciertas condiciones, formado otro tipo de estrcuturas que son conocidas como estructuras condicionales ; entre las cuales podemos destacar: Estructuras Alternativas , seg\u00fan si se cumple la condici\u00f3n o no, se realizar\u00e1 una tarea u otra. Ejemplo de utilizaci\u00f3n con la sentencia: if . Estructuras Iterativas , cuando necesario ejecutar algunas instrucciones repetidas veces. Ejemplo de utilizaci\u00f3n con la sentencia: for . Estructuras condicionales \u00b6 Las estructuras de selecci\u00f3n permiten ejecutar diferentes instrucciones dependiendo del valor de una variable o expresi\u00f3n. Tambi\u00e9n se les llama ramificaciones, estructuras de decisi\u00f3n o alternativas. Cuando se usan, no todas las instrucciones del programa se ejecutan, solo las especificadas para el valor de la variable durante esa ejecuci\u00f3n. Las estructuras de selecci\u00f3n m\u00e1s comunes son las que proporcionan ramificaciones dobles ( if ) y m\u00faltiples ( elif y case ). Estructura alternativa doble: if \u00b6 La forma general de la orden if es: if [ expresi\u00f3n ] then realizar este c\u00f3digo si expresi\u00f3n es verdadera fi Estructura alternativa simple. Ejemplo: if [ $# -eq 1 ] then VAR=$1 fi Info El c\u00f3digo anterior comprueba se ha pasado alg\u00fan argumento ,es decir, si han pasado un par\u00e1metro. En caso afirmativo, asigna el contenido de ese par\u00e1metro a la variable VAR. Warning Hay que recordar siempre cerrar esta estructura para indicarle al terminal donde termina, en este caso, se cierra con la palabra reservada fi . Estructura alternativa multiple if then else \u00b6 En este caso se contempla tambi\u00e9n la posibilidad de ejecutar alguna acci\u00f3n si no se cumple la expresi\u00f3n. La forma general del if then else es: if [ expresi\u00f3n ] then realizar si expresi\u00f3n es verdadera else realizar si expresi\u00f3n es falsa fi Estructura alternativa doble. Ejemplo: if [ $a -gt $b ] then echo \"$a es mayor que $b\" else echo \"$a es menor que $b\" fi La estructura if then elif else \u00b6 Permite una segunda evaluaci\u00f3n para ejecutar c\u00f3digo a trav\u00e9s de la estructura elif . Es posible colocar tantos elif como condiciones se requiera evaluar. La forma general del if then elif else es: if [ exp1 ] then realizar si exp1 es verdadera elif [ exp2 ] then realizar si exp1 es falsa, pero es verdadera exp2 elif [ exp3 ] then realizar si exp1 y exp2 son falsas, pero es verdadera exp3 else realizar si todas las expresiones son falsas fi Ejemplo: if [ $a -gt $b ] then echo \"$a es mayor que $b\" elif [ $a -eq $b ] then echo \"$a es igual que $b\" else echo \"$a es menor que $b\" fi Info Este ejemplo ampl\u00eda el anterior comprobando si, adem\u00e1s, los valores de a y b son iguales. Warning El \u00faltimo caso se realiza con la sentencia else . La estructura case \u00b6 La estructura case permite realizar varias acciones en funci\u00f3n del valor de una variable. La limitaci\u00f3n que tan s\u00f3lo se comprueba si es igual a ese valor. La forma general del case es: case VARIABLE in valor1) Se ejecuta si VARIABLE tiene el valor1 ;; valor2) Se ejecuta si VARIABLE tiene el valor2 ;; *) Se ejecuta por defecto ;; esac Estructura Alternativa Multiple. Estructuras de iteraci\u00f3n \u00b6 Son operaciones que se deben ejecutar un n\u00famero repetido de veces para resolver un problema. El conjunto de instrucciones que se ejecuta dentro de esta estructura, se denomina ciclo, bucle o lazo. Iteraci\u00f3n es cada una de las pasadas o ejecuciones de todas las instrucciones contenidas en el bucle. Estas repeticiones de c\u00f3digo van a depender de la evaluaci\u00f3n de una condici\u00f3n o del valor de una variable. Es posible repetir un c\u00f3digo hasta que se cumpla o deje de cumplir una condici\u00f3n pero tambi\u00e9n se posible la repetici\u00f3n tantas veces como indique una variable. Warning Hay que tener mucho cuidado a la hora de dise\u00f1ar estas estructuras y no caer en el error de construir bucles infinitos , es decir, estructuras que nunca dejar\u00e1n de ejecutarse ya que no tienen condici\u00f3n de salida o, si la tienen, \u00e9sta nunca se va a cumplir. Para utilizar esta estructura en algoritmos, se usan: Contador: es una variable cuyo valor se incrementa o decrementa en una cantidad constante cada vez que se produce un determinado suceso o acci\u00f3n. Los contadores se utilizan con la finalidad de contar sucesos o acciones internas de un bucle. Info La inicializaci\u00f3n consiste en asignarle al contador un valor. Se situar\u00e1 antes y fuera del bucle. Acumulador o Totalizador es una variable que suma sobre s\u00ed misma un conjunto de valores para de esta manera tener el total de todos ellos en una sola variable. Info La diferencia entre un contador y un acumulador es que mientras el primero va aumentando de uno en uno, el acumulador va aumentando en una cantidad variable. Banderas , conocidas tambi\u00e9n como interruptores, switch, flags o conmutadores. Son variables que pueden tomar solamente dos valores durante la ejecuci\u00f3n del programa, los cuales pueden ser cero o uno, o bien los valores booleanos verdadero o falso. Info Se les suele llamar interruptores porque cuando toman un valor est\u00e1n simulando un interruptor abierto/cerrado o encendido/apagado. Estructura Iterativa. Las estructuras while y until \u00b6 Estas estructuras van a repetir el c\u00f3digo que contienen mientras la expresi\u00f3n evaluada sea verdadera. El funcionamiento es l\u00f3gico: Eval\u00faa la condici\u00f3n, si es falsa, no realiza ninguna acci\u00f3n y continua con el siguiente c\u00f3digo del programa. Si es verdadera entra en el bucle y ejecuta el c\u00f3digo que contiene. Al finalizar la ejecuci\u00f3n, al iterar, vuelve a evaluar la condici\u00f3n y vuelve a repetir la operaci\u00f3n anterior. Warning Al construir una estructura while es preciso asegurarse que en alg\u00fan momento de su ejecuci\u00f3n la condici\u00f3n dejar\u00e1 de cumplirse y se romper\u00e1 el ciclo, si no, \u00e9ste ser\u00e1 infinito, a menos que el usuario o el sistema interrumpa su ejecuci\u00f3n. WHILE while [ expresi\u00f3n ] do c\u00f3digo se repite MIENTRAS la expresi\u00f3n sea verdadera done UNTIL until [ expresi\u00f3n ] do c\u00f3digo se repite HASTA que la expresi\u00f3n sea verdadera done Info La diferencia es que un until se ejecuta como m\u00ednimo una vez, ya que ejecuta el c\u00f3digo y luego comprueba, mientras que el while es posible que nunca se ejecute, ya que es posible que la condici\u00f3n de entrada nunca se cumpla. Ejemplo: while [ expresi\u00f3n ] #! /bin/bash read -p \u201cEscribe un n\u00famero : \u201c num i=1 while [ $i -le 10 ] do let res=num*i echo \u201c$i x $num = $res\u201d let i=i+1 done Info Este c\u00f3digo imprime por pantalla la tabla de multiplicar del n\u00famero que el usuario ha especificado. Las l\u00edneas contenidas entre do y done se ejecutar\u00e1n mientras i sea menor o igual a diez. Al final de cada iteraci\u00f3n el valor de i se incrementa en uno (es un contador) por lo que en diez iteraciones la condici\u00f3n dejar\u00e1 de cumplirse y el bucle se romper\u00e1. La estructuras for \u00b6 Esta estructura permite repetir c\u00f3digo por cada elemento de un conjunto determinado. No necesita condici\u00f3n de salida ya que al finalizar los elementos del conjunto acabar\u00e1 con su ejecuci\u00f3n. la forma general es: for variable in conjunto do estas l\u00edneas se repiten una vez por cada elemento del conjunto variable toma los valores del conjunto, uno en cada iteraci\u00f3n done * Ejemplo: #! /bin/bash read -p \u201cEscribe la direcci\u00f3n de una carpeta : \u201c car for i in $(ls $car) do if [ -f $i ] then echo \u201c$i es un archivo de tipo regular\u201d elif [ -d $i ] then echo \u201c$i es un archivo de tipo directorio\u201d else echo \u201c$i es otro tipo de archivo o no existe\u201d fi done Info Este ejemplo se van a mostrar los nombres de los ficheros que contiene un directorio y dir\u00e1 si es un directorio o un fichero. Romper un bucle de forma deliberada \u00b6 No s\u00f3lo es posible terminar un bucle cuando se cumpla una condici\u00f3n o cuando se terminen los elementos de un conjunto, shell script proporciona dos formas de alterar el funcionamiento de la estructura en un bucle y romperla en funci\u00f3n de las necesidades del programa: break rompe el bucle que lo contiene y contin\u00faa la ejecuci\u00f3n del script. continue rompe la iteraci\u00f3n que lo contiene, pero mantiene el bucle, que continuar\u00e1 con la siguiente iteraci\u00f3n hasta que termine su ejecuci\u00f3n. exit detiene la ejecuci\u00f3n del script. Este comando no es exclusivo de las estructuras iterativas, pero cobra especial sentido en este \u00e1mbito. Actividades \u00b6 Note Escribe el c\u00f3digo de los scripts en ShellScript que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle. Crea un shell script que al ejecutarlo muestre por pantalla uno de estos mensajes \u201cBuenos d\u00edas\u201d , \u201cBuenas tardes\u201d o \u201cBuenas noches\u201d , en funci\u00f3n de la hora que sea en el sistema (de 8:00 de la ma\u00f1ana a 15:00 ser\u00e1 ma\u00f1ana, de 15:00 a 20:00 ser\u00e1 tarde y el resto ser\u00e1 noche). Para obtener la hora del sistema utiliza el comando date. Construye un programa denominado AGENDA que permita mediante un men\u00fa, el mantenimiento de un peque\u00f1o archivo lista.txt con el nombre, direcci\u00f3n y tel\u00e9fono de varias personas. Debes incluir estas opciones al programa: A\u00f1adir (a\u00f1adir un registro) Buscar (buscar entradas por nombre, direcci\u00f3n o tel\u00e9fono) Listar (visualizar todo el archivo). Ordenar (ordenar los registros alfab\u00e9ticamente). Borrar (borrar el archivo). Crea un shell script que sume los n\u00fameros del 1 al 1000 mediante una estructura for , while y until .","title":"1.3- Control de flujo"},{"location":"01_ShellScripting/013_ShellScript_ControlFlujo.html#control-de-flujo","text":"","title":"Control de Flujo"},{"location":"01_ShellScripting/013_ShellScript_ControlFlujo.html#sistema-de-notacion","text":"Antes de lanzarse a escribir una sola l\u00ednea de c\u00f3digo es necesario pensar en la resoluci\u00f3n del problema tal y como se ha indicado. La creaci\u00f3n de una soluci\u00f3n a un problema siguiendo un conjunto de instrucciones se denomina algoritmo. Es necesario invertir el tiempo suficiente para construir ese algoritmo ya que esa ser\u00e1 la soluci\u00f3n que se debe implementar en c\u00f3digo. Existen varios sistemas de representaci\u00f3n para describir esos algoritmos; pseudoc\u00f3digo , la descripci\u00f3n narrada o diagramas Nassi-Shneiderman , pero en este manual se ha optado por los diagramas de flujo ya que resultan m\u00e1s intuitivos.","title":"Sistema de notaci\u00f3n"},{"location":"01_ShellScripting/013_ShellScript_ControlFlujo.html#diagramas-de-flujo","text":"Los diagramas de flujo o flujogramas son la representaci\u00f3n gr\u00e1fica de la soluci\u00f3n algor\u00edtmica de un problema. Para dise\u00f1arlos se emplean figuras normalizadas que representan una acci\u00f3n dentro del procedimiento. Cada una de estas figuras representa un paso a seguir dentro del algoritmo. Note Para su construcci\u00f3n se han de respetar las siguientes reglas: Tiene un elemento de inicio en la parte superior y uno final en la parte inferior. Se escribe de arriba hacia abajo y de izquierda a derecha. Siempre se usan flechas verticales u horizontales, jam\u00e1s curvas u oblicuas Se debe evitar cruce de flujos. En cada paso expresar una acci\u00f3n concreta. En lo sucesivo se ilustrar\u00e1n las diferentes estructuras de control a trav\u00e9s de esta t\u00e9cnica la cual facilita su comprensi\u00f3n. En la siguiente figura se puede observar simbolog\u00eda para dise\u00f1ar diagramas de flujo. Simbolog\u00eda diagramas.","title":"Diagramas de flujo"},{"location":"01_ShellScripting/013_ShellScript_ControlFlujo.html#estructuras","text":"Controlar el flujo es determinar el orden en el que se ejecutar\u00e1n las instrucciones en un programa. Si no existiese las estructuras de control del flujo, todo el c\u00f3digo se ejecutar\u00edan de forma secuencial, es decir, empezar\u00edan por la primera instrucci\u00f3n y se ejecutar\u00edan una a una hasta llegar a la \u00faltima. Este modo de ejecuci\u00f3n esta realizado por estructuras secuenciales . Ejemplo: Estructura secuencial. Warning La estructura secuencial no es v\u00e1lida para solucionar la mayor\u00eda de los problemas que se plantean. Para ello es necesario la elecci\u00f3n de un c\u00f3digo u otro en funci\u00f3n de ciertas condiciones, formado otro tipo de estrcuturas que son conocidas como estructuras condicionales ; entre las cuales podemos destacar: Estructuras Alternativas , seg\u00fan si se cumple la condici\u00f3n o no, se realizar\u00e1 una tarea u otra. Ejemplo de utilizaci\u00f3n con la sentencia: if . Estructuras Iterativas , cuando necesario ejecutar algunas instrucciones repetidas veces. Ejemplo de utilizaci\u00f3n con la sentencia: for .","title":"Estructuras"},{"location":"01_ShellScripting/013_ShellScript_ControlFlujo.html#estructuras-condicionales","text":"Las estructuras de selecci\u00f3n permiten ejecutar diferentes instrucciones dependiendo del valor de una variable o expresi\u00f3n. Tambi\u00e9n se les llama ramificaciones, estructuras de decisi\u00f3n o alternativas. Cuando se usan, no todas las instrucciones del programa se ejecutan, solo las especificadas para el valor de la variable durante esa ejecuci\u00f3n. Las estructuras de selecci\u00f3n m\u00e1s comunes son las que proporcionan ramificaciones dobles ( if ) y m\u00faltiples ( elif y case ).","title":"Estructuras condicionales"},{"location":"01_ShellScripting/013_ShellScript_ControlFlujo.html#estructuras-de-iteracion","text":"Son operaciones que se deben ejecutar un n\u00famero repetido de veces para resolver un problema. El conjunto de instrucciones que se ejecuta dentro de esta estructura, se denomina ciclo, bucle o lazo. Iteraci\u00f3n es cada una de las pasadas o ejecuciones de todas las instrucciones contenidas en el bucle. Estas repeticiones de c\u00f3digo van a depender de la evaluaci\u00f3n de una condici\u00f3n o del valor de una variable. Es posible repetir un c\u00f3digo hasta que se cumpla o deje de cumplir una condici\u00f3n pero tambi\u00e9n se posible la repetici\u00f3n tantas veces como indique una variable. Warning Hay que tener mucho cuidado a la hora de dise\u00f1ar estas estructuras y no caer en el error de construir bucles infinitos , es decir, estructuras que nunca dejar\u00e1n de ejecutarse ya que no tienen condici\u00f3n de salida o, si la tienen, \u00e9sta nunca se va a cumplir. Para utilizar esta estructura en algoritmos, se usan: Contador: es una variable cuyo valor se incrementa o decrementa en una cantidad constante cada vez que se produce un determinado suceso o acci\u00f3n. Los contadores se utilizan con la finalidad de contar sucesos o acciones internas de un bucle. Info La inicializaci\u00f3n consiste en asignarle al contador un valor. Se situar\u00e1 antes y fuera del bucle. Acumulador o Totalizador es una variable que suma sobre s\u00ed misma un conjunto de valores para de esta manera tener el total de todos ellos en una sola variable. Info La diferencia entre un contador y un acumulador es que mientras el primero va aumentando de uno en uno, el acumulador va aumentando en una cantidad variable. Banderas , conocidas tambi\u00e9n como interruptores, switch, flags o conmutadores. Son variables que pueden tomar solamente dos valores durante la ejecuci\u00f3n del programa, los cuales pueden ser cero o uno, o bien los valores booleanos verdadero o falso. Info Se les suele llamar interruptores porque cuando toman un valor est\u00e1n simulando un interruptor abierto/cerrado o encendido/apagado. Estructura Iterativa.","title":"Estructuras de iteraci\u00f3n"},{"location":"01_ShellScripting/013_ShellScript_ControlFlujo.html#actividades","text":"Note Escribe el c\u00f3digo de los scripts en ShellScript que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle. Crea un shell script que al ejecutarlo muestre por pantalla uno de estos mensajes \u201cBuenos d\u00edas\u201d , \u201cBuenas tardes\u201d o \u201cBuenas noches\u201d , en funci\u00f3n de la hora que sea en el sistema (de 8:00 de la ma\u00f1ana a 15:00 ser\u00e1 ma\u00f1ana, de 15:00 a 20:00 ser\u00e1 tarde y el resto ser\u00e1 noche). Para obtener la hora del sistema utiliza el comando date. Construye un programa denominado AGENDA que permita mediante un men\u00fa, el mantenimiento de un peque\u00f1o archivo lista.txt con el nombre, direcci\u00f3n y tel\u00e9fono de varias personas. Debes incluir estas opciones al programa: A\u00f1adir (a\u00f1adir un registro) Buscar (buscar entradas por nombre, direcci\u00f3n o tel\u00e9fono) Listar (visualizar todo el archivo). Ordenar (ordenar los registros alfab\u00e9ticamente). Borrar (borrar el archivo). Crea un shell script que sume los n\u00fameros del 1 al 1000 mediante una estructura for , while y until .","title":"Actividades"},{"location":"01_ShellScripting/014_ShellScript_VectoresFunciones.html","text":"Vectores y Funciones \u00b6 Vectores en shell script \u00b6 Un vector es una estructura de datos que permite almacenar una colecci\u00f3n de elementos. Por el hecho de tratarse de una estructura de datos es posible realizar operaciones sobre \u00e9l como buscar, eliminar y agregar elementos a su estructura. Los elementos se encuentran ordenados en funci\u00f3n de como han sido introducidos en la estructura. Para acceder a cada elemento ser\u00e1 necesario especificar la posici\u00f3n que ocupan dentro de ella, teniendo presente que la numeraci\u00f3n de los vectores comienza desde cero, no desde uno. Info Un buen ejemplo de uso ser\u00eda, por ejemplo, para recoger el listado de archivos que hay en una carpeta. Esquema de un vector de doce elementos. Para definir un vector disponemos de dos formas: Impl\u00edcita: hace referencia a que el vector ha sido declarado y al mismo tiempo se han inicializado sus valores. Expl\u00edcitamente: cuando el vector no requiere que se inicialice mientras se declara, es decir, pueden ser inicializados con posterioridad. Para declarar un vector hay que utilizar la siguiente estructura: declare -a meses=(\"enero\" \"febrero\" \"marzo\") Tambi\u00e9n es posible utilizar alguna expresi\u00f3n para completar un vector, como con el operador rango ... declare -a letras=( {N..Z} {s..z} ) echo ${letras[*]} Info Esto crear\u00e1 un vector con el siguiente contenido y lo mostrar\u00e1 por pantalla as\u00ed: N O P Q R S T U V W X Y Z s t u v w x y z Para a\u00f1adir un elemento a la estructura se debe indicar el \u00edndice o posici\u00f3n que ocupar\u00e1 el nuevo dato. Si el \u00edndice es mayor que la \u00faltima posici\u00f3n de la estructura, se escribir\u00e1 al final de la misma. Si se usa un \u00edndice que ya contiene un dato, \u00e9ste ser\u00e1 sobrescrito. meses[3]=\"abril\" Para mostrar el contenido del vector: echo ${meses[*]} Info Mostrar\u00e1: enero febrero marzo abril Es buena idea conocer el n\u00famero de elementos que contiene un vector para poder introducir datos de forma correcta y no sobrescribir por accidente alg\u00fan valor ya almacenado. As\u00ed es posible utilizar: Comando Acci\u00f3n ${meses[*]} Muestra todos los valores del vector ${!meses[*]} Muestra todos los \u00edndices del vector ${#meses[*]} Devuelve el n\u00famero de valores del vector ${#meses[0]} Imprime la longitud del primer dato del vector Para recorrer los valores que contiene esta estructura se puede utilizar un bucle for for item in ${meses[*]} do echo $item done * Tambi\u00e9n se puede utilizar sus \u00edndices para mostrar los datos contenidos. for index in ${!meses[*]} do echo ${meses[$index]} done Es una estructura muy \u00fatil en la que se puede guardar cualquier tipo de informaci\u00f3n, como por ejemplo los ficheros que contiene una carpeta: i=0; for fichero in $(ls -a) do ficheros[$i]=$fichero; let i=i+1; done Funciones en shell script \u00b6 Una funci\u00f3n es un conjunto de l\u00edneas de c\u00f3digo que se identifican a trav\u00e9s de un identificador y que se ejecutan al invocar ese identificador. Se podr\u00eda definir como un shell script dentro de un shell script. Sirve para organizarlo en unidades l\u00f3gicas m\u00e1s peque\u00f1as de manera que sea m\u00e1s f\u00e1cil mantenerlo. Las funciones aceptan par\u00e1metros, de id\u00e9ntica manera que los shell script, por lo que su uso tambi\u00e9n es muy intuitivo. La estructura de una funci\u00f3n queda definida de la siguiente manera: function nombre_funci\u00f3n(){ c\u00f3digo que se ejecutar\u00e1 al llamar a la funci\u00f3n } Info source Para incluir el c\u00f3digo de un fichero en otro tan s\u00f3lo ser\u00e1 necesario utilizar la palabra source seguida de la ruta de ese fichero. * * Tambi\u00e9n es posible usar el punto para poder cargarlo: source funciones.sh o ./funciones.sh Las funciones suelen declararse al inicio del documento y luego utilizadas a lo largo del programa. Uno de los objetivos es optimizar el c\u00f3digo, mediante el \"aprovechamiento\" de c\u00f3digo. Cuando un conjunto de l\u00edneas de c\u00f3digo se repiten, es posible agruparlas bajo un nombre y utilizar ese nombre en lugar de repetir este c\u00f3digo. Ejemplo: #! /bin/bash function imprimir_tabla(){ echo \u201cTabla del n\u00famero $1\u201d for i in 1 2 3 4 5 6 7 8 9 10 do let res=$1*i echo \u201c$i x $1 = $res\u201d done } read -p \u201cEscribe un n\u00famero : \u201c num imprimir_tabla $num imprimir_tabla 5 } En este ejemplo se ha construido una funci\u00f3n para imprimir la tabla de multiplicar de un n\u00famero pasado como par\u00e1metro. En la siguiente l\u00ednea le pedimos al programa que imprima la tabla del n\u00famero cinco. No se ha necesitado escribir el c\u00f3digo que imprime la su tabla de multiplicar de nuevo, ya que con invocar el nombre de la funci\u00f3n el programa ya sabe que c\u00f3digo debe ejecutar. Warning N\u00f3tese que el valor de $1 no se pasa como par\u00e1metro del shell script, si no como par\u00e1metro a la funci\u00f3n imprimir_tabla tras haberlo preguntado al usuario. Hay que tener en cuenta que las variables que se declaran dentro de una funci\u00f3n existen \u00fanicamente dentro de ella. Si es preciso utilizar una variable fuera de una funci\u00f3n se puede usar return , que devuelve un valor fuera de ella, o usar la palabra reservada GLOBAL Es preferible utilizar el primer m\u00e9todo para que devuelva un valor que ser\u00e1 recogido en otra variable fuera de la funci\u00f3n que lo origin\u00f3. Actividades \u00b6 Note Escribe el c\u00f3digo de los scripts en ShellScript que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle. Realiza un script utilizando funciones que permita crear un informe de las IP libres en la red en la que se encuentra el equipo. Debe contener las siguientes opciones: El informe contendr\u00e1 un listado de todas las IP de la red a la que pertenece el equipo indicando si est\u00e1 libe o no (usa el comando ping). En el informe debe aparecer el tipo de red (rango CIDR) en el que est\u00e1 inmerso el ordenador con el nombre de la red , su broadcast y su m\u00e1scara de subred . Esta informaci\u00f3n la pod\u00e9is obtener desde el comando ifconfig. Note Para facilitar los c\u00e1lculos asumimos que el equipo donde se ejecuta el script se encuentra en una \u00fanica red, es decir, solo posee una tarjeta de red. Crea un script que rellene un vector con cien valores aleatorios y muestre en pantalla en una sola l\u00ednea los valores generados. Genera un script que rellene un vector con diez n\u00fameros pedidos al usuario y que los muestre por pantalla de la siguiente forma: en orden inverso a como han sido introducidos los valores los valores ordenados de menor a mayor en una sola l\u00ednea los valores ordenados de mayor a menor en una sola l\u00ednea la suma total de sus valores cantidad de valores pares que contiene el vector la suma total de n\u00fameros impares la media aritm\u00e9tica de los valores que contiene el vector Crea un script que muestre las opciones del ejercicio anterior con select. El usuario introducir\u00e1 los valores del vector al iniciar el script. Cuando termine aparecer\u00e1 el men\u00fa de selecci\u00f3n (deber\u00e1s a\u00f1adir la opci\u00f3n para salir del script). Adem\u00e1s deber\u00e1s crear una funci\u00f3n para cada opci\u00f3n del men\u00fa y llamarla en cada una de las opciones del select.","title":"1.4- Vectores y funciones"},{"location":"01_ShellScripting/014_ShellScript_VectoresFunciones.html#vectores-y-funciones","text":"","title":"Vectores y Funciones"},{"location":"01_ShellScripting/014_ShellScript_VectoresFunciones.html#vectores-en-shell-script","text":"Un vector es una estructura de datos que permite almacenar una colecci\u00f3n de elementos. Por el hecho de tratarse de una estructura de datos es posible realizar operaciones sobre \u00e9l como buscar, eliminar y agregar elementos a su estructura. Los elementos se encuentran ordenados en funci\u00f3n de como han sido introducidos en la estructura. Para acceder a cada elemento ser\u00e1 necesario especificar la posici\u00f3n que ocupan dentro de ella, teniendo presente que la numeraci\u00f3n de los vectores comienza desde cero, no desde uno. Info Un buen ejemplo de uso ser\u00eda, por ejemplo, para recoger el listado de archivos que hay en una carpeta. Esquema de un vector de doce elementos. Para definir un vector disponemos de dos formas: Impl\u00edcita: hace referencia a que el vector ha sido declarado y al mismo tiempo se han inicializado sus valores. Expl\u00edcitamente: cuando el vector no requiere que se inicialice mientras se declara, es decir, pueden ser inicializados con posterioridad. Para declarar un vector hay que utilizar la siguiente estructura: declare -a meses=(\"enero\" \"febrero\" \"marzo\") Tambi\u00e9n es posible utilizar alguna expresi\u00f3n para completar un vector, como con el operador rango ... declare -a letras=( {N..Z} {s..z} ) echo ${letras[*]} Info Esto crear\u00e1 un vector con el siguiente contenido y lo mostrar\u00e1 por pantalla as\u00ed: N O P Q R S T U V W X Y Z s t u v w x y z Para a\u00f1adir un elemento a la estructura se debe indicar el \u00edndice o posici\u00f3n que ocupar\u00e1 el nuevo dato. Si el \u00edndice es mayor que la \u00faltima posici\u00f3n de la estructura, se escribir\u00e1 al final de la misma. Si se usa un \u00edndice que ya contiene un dato, \u00e9ste ser\u00e1 sobrescrito. meses[3]=\"abril\" Para mostrar el contenido del vector: echo ${meses[*]} Info Mostrar\u00e1: enero febrero marzo abril Es buena idea conocer el n\u00famero de elementos que contiene un vector para poder introducir datos de forma correcta y no sobrescribir por accidente alg\u00fan valor ya almacenado. As\u00ed es posible utilizar: Comando Acci\u00f3n ${meses[*]} Muestra todos los valores del vector ${!meses[*]} Muestra todos los \u00edndices del vector ${#meses[*]} Devuelve el n\u00famero de valores del vector ${#meses[0]} Imprime la longitud del primer dato del vector Para recorrer los valores que contiene esta estructura se puede utilizar un bucle for for item in ${meses[*]} do echo $item done * Tambi\u00e9n se puede utilizar sus \u00edndices para mostrar los datos contenidos. for index in ${!meses[*]} do echo ${meses[$index]} done Es una estructura muy \u00fatil en la que se puede guardar cualquier tipo de informaci\u00f3n, como por ejemplo los ficheros que contiene una carpeta: i=0; for fichero in $(ls -a) do ficheros[$i]=$fichero; let i=i+1; done","title":"Vectores en shell script"},{"location":"01_ShellScripting/014_ShellScript_VectoresFunciones.html#funciones-en-shell-script","text":"Una funci\u00f3n es un conjunto de l\u00edneas de c\u00f3digo que se identifican a trav\u00e9s de un identificador y que se ejecutan al invocar ese identificador. Se podr\u00eda definir como un shell script dentro de un shell script. Sirve para organizarlo en unidades l\u00f3gicas m\u00e1s peque\u00f1as de manera que sea m\u00e1s f\u00e1cil mantenerlo. Las funciones aceptan par\u00e1metros, de id\u00e9ntica manera que los shell script, por lo que su uso tambi\u00e9n es muy intuitivo. La estructura de una funci\u00f3n queda definida de la siguiente manera: function nombre_funci\u00f3n(){ c\u00f3digo que se ejecutar\u00e1 al llamar a la funci\u00f3n } Info source Para incluir el c\u00f3digo de un fichero en otro tan s\u00f3lo ser\u00e1 necesario utilizar la palabra source seguida de la ruta de ese fichero. * * Tambi\u00e9n es posible usar el punto para poder cargarlo: source funciones.sh o ./funciones.sh Las funciones suelen declararse al inicio del documento y luego utilizadas a lo largo del programa. Uno de los objetivos es optimizar el c\u00f3digo, mediante el \"aprovechamiento\" de c\u00f3digo. Cuando un conjunto de l\u00edneas de c\u00f3digo se repiten, es posible agruparlas bajo un nombre y utilizar ese nombre en lugar de repetir este c\u00f3digo. Ejemplo: #! /bin/bash function imprimir_tabla(){ echo \u201cTabla del n\u00famero $1\u201d for i in 1 2 3 4 5 6 7 8 9 10 do let res=$1*i echo \u201c$i x $1 = $res\u201d done } read -p \u201cEscribe un n\u00famero : \u201c num imprimir_tabla $num imprimir_tabla 5 } En este ejemplo se ha construido una funci\u00f3n para imprimir la tabla de multiplicar de un n\u00famero pasado como par\u00e1metro. En la siguiente l\u00ednea le pedimos al programa que imprima la tabla del n\u00famero cinco. No se ha necesitado escribir el c\u00f3digo que imprime la su tabla de multiplicar de nuevo, ya que con invocar el nombre de la funci\u00f3n el programa ya sabe que c\u00f3digo debe ejecutar. Warning N\u00f3tese que el valor de $1 no se pasa como par\u00e1metro del shell script, si no como par\u00e1metro a la funci\u00f3n imprimir_tabla tras haberlo preguntado al usuario. Hay que tener en cuenta que las variables que se declaran dentro de una funci\u00f3n existen \u00fanicamente dentro de ella. Si es preciso utilizar una variable fuera de una funci\u00f3n se puede usar return , que devuelve un valor fuera de ella, o usar la palabra reservada GLOBAL Es preferible utilizar el primer m\u00e9todo para que devuelva un valor que ser\u00e1 recogido en otra variable fuera de la funci\u00f3n que lo origin\u00f3.","title":"Funciones en shell script"},{"location":"01_ShellScripting/014_ShellScript_VectoresFunciones.html#actividades","text":"Note Escribe el c\u00f3digo de los scripts en ShellScript que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle. Realiza un script utilizando funciones que permita crear un informe de las IP libres en la red en la que se encuentra el equipo. Debe contener las siguientes opciones: El informe contendr\u00e1 un listado de todas las IP de la red a la que pertenece el equipo indicando si est\u00e1 libe o no (usa el comando ping). En el informe debe aparecer el tipo de red (rango CIDR) en el que est\u00e1 inmerso el ordenador con el nombre de la red , su broadcast y su m\u00e1scara de subred . Esta informaci\u00f3n la pod\u00e9is obtener desde el comando ifconfig. Note Para facilitar los c\u00e1lculos asumimos que el equipo donde se ejecuta el script se encuentra en una \u00fanica red, es decir, solo posee una tarjeta de red. Crea un script que rellene un vector con cien valores aleatorios y muestre en pantalla en una sola l\u00ednea los valores generados. Genera un script que rellene un vector con diez n\u00fameros pedidos al usuario y que los muestre por pantalla de la siguiente forma: en orden inverso a como han sido introducidos los valores los valores ordenados de menor a mayor en una sola l\u00ednea los valores ordenados de mayor a menor en una sola l\u00ednea la suma total de sus valores cantidad de valores pares que contiene el vector la suma total de n\u00fameros impares la media aritm\u00e9tica de los valores que contiene el vector Crea un script que muestre las opciones del ejercicio anterior con select. El usuario introducir\u00e1 los valores del vector al iniciar el script. Cuando termine aparecer\u00e1 el men\u00fa de selecci\u00f3n (deber\u00e1s a\u00f1adir la opci\u00f3n para salir del script). Adem\u00e1s deber\u00e1s crear una funci\u00f3n para cada opci\u00f3n del men\u00fa y llamarla en cada una de las opciones del select.","title":"Actividades"},{"location":"01_ShellScripting/015_ShellScript_RefuerzoAmpliacion.html","text":"Refuerzo y Ampliaci\u00f3n \u00b6 En esta sesi\u00f3n se trabajan actividades para reforzar los contenidos estudiados en esta unidad, y actividades de ampliaci\u00f3n para profundizar en dichos contenidos. Actividades \u00b6 Note Escribe el c\u00f3digo de los scripts en ShellScript que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle. Refuerzo \u00b6 Realiza un shell script que admita un \u00fanico par\u00e1metro correspondiente al nombre de un fichero de texto. Mostrar\u00e1 por pantalla el n\u00famero de l\u00edneas del mismo utilizando el comando wc . Modifica el shell script realizado en el ejercicio anterior para comprobar si el fichero existe. Si el fichero no existe, debe mostrar un mensaje de error y salir. Construye los siguientes dos shell script utilizando estructuras iterativas: el primero ej108A.sh , que pida un n\u00famero e indique si se trata de un n\u00famero par y si es n\u00famero primo. el tercero ej108B.sh , que muestre las 10 primeras tablas de multiplicar por pantalla. Existir\u00e1 un tiempo de espera de dos segundos entre tabla (usa el comando sleep para ello). Genera un script que muestre la tabla de multiplicar de un n\u00famero introducido por pantalla por el usuario. Ampliaci\u00f3n \u00b6 Escribe un shell script que genere dos vectores de quince elementos cada uno y los rellene con n\u00famero aleatorios comprendidos entre 0 y 100. Despu\u00e9s sume esas dos estructuras y muestre los tres vectores por pantalla. Para ello crea las funciones imprimir_array(array_a_imprimir) y sumar_array(array1, array2). Realiza un script que permita crear un informe de las IP libres en la red en la que se encuentra el equipo. Debe contener las siguientes opciones: El informe contendr\u00e1 un listado de todas las IP de la red a la que pertenece el equipo indicando si est\u00e1 libe o no (usa el comando ping). En el informe debe aparecer el tipo de red (rango CIDR) en el que est\u00e1 inmerso el ordenador con el nombre de la red , su broadcast y su m\u00e1scara de subred . Esta informaci\u00f3n la pod\u00e9is obtener desde el comando ifconfig. Note Para facilitar los c\u00e1lculos asumimos que el equipo donde se ejecuta el script se encuentra en una \u00fanica red, es decir, solo posee una tarjeta de red. Crea un shell script que funcione de manera similar a la papelera de reciclaje. El manejo de los ficheros se debe realizar a trav\u00e9s de vectores. El programa debe mostrar el siguiente men\u00fa e implementar sus operaciones que ser\u00e1n implementadas a trav\u00e9s de funciones: eliminar archivo . Esta operaci\u00f3n recibe la ruta completa de un archivo y lo mueve al directorio /home/tu_usuario/recycled. Si no existe dicho directorio, el programa ha de crearlo. restaurar archivo . Esta operaci\u00f3n recibe el nombre de un archivo y lo mueve, desde la papelera de reciclaje, al directorio en el que estuviera anteriormente. El proceso de eliminaci\u00f3n, debe haber almacenado, por tanto dicho directorio en un fichero de texto. restaurar toda la papelera. Esta operaci\u00f3n es similar a la anterior, pero se efect\u00faa sobre todos los ficheros de la papelera. vaciar la papelera . Esta opci\u00f3n vac\u00eda el contenido de la papelera. Ninguno de los archivos ser\u00e1 recuperable. mostrar la papelera . Esta opci\u00f3n muestra el contenido de la papelera. salir . Sale del programa.","title":"1.5- Refuerzo y ampliaci\u00f3n"},{"location":"01_ShellScripting/015_ShellScript_RefuerzoAmpliacion.html#refuerzo-y-ampliacion","text":"En esta sesi\u00f3n se trabajan actividades para reforzar los contenidos estudiados en esta unidad, y actividades de ampliaci\u00f3n para profundizar en dichos contenidos.","title":"Refuerzo y Ampliaci\u00f3n"},{"location":"01_ShellScripting/015_ShellScript_RefuerzoAmpliacion.html#actividades","text":"Note Escribe el c\u00f3digo de los scripts en ShellScript que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle.","title":"Actividades"},{"location":"01_ShellScripting/015_ShellScript_RefuerzoAmpliacion.html#refuerzo","text":"Realiza un shell script que admita un \u00fanico par\u00e1metro correspondiente al nombre de un fichero de texto. Mostrar\u00e1 por pantalla el n\u00famero de l\u00edneas del mismo utilizando el comando wc . Modifica el shell script realizado en el ejercicio anterior para comprobar si el fichero existe. Si el fichero no existe, debe mostrar un mensaje de error y salir. Construye los siguientes dos shell script utilizando estructuras iterativas: el primero ej108A.sh , que pida un n\u00famero e indique si se trata de un n\u00famero par y si es n\u00famero primo. el tercero ej108B.sh , que muestre las 10 primeras tablas de multiplicar por pantalla. Existir\u00e1 un tiempo de espera de dos segundos entre tabla (usa el comando sleep para ello). Genera un script que muestre la tabla de multiplicar de un n\u00famero introducido por pantalla por el usuario.","title":"Refuerzo"},{"location":"01_ShellScripting/015_ShellScript_RefuerzoAmpliacion.html#ampliacion","text":"Escribe un shell script que genere dos vectores de quince elementos cada uno y los rellene con n\u00famero aleatorios comprendidos entre 0 y 100. Despu\u00e9s sume esas dos estructuras y muestre los tres vectores por pantalla. Para ello crea las funciones imprimir_array(array_a_imprimir) y sumar_array(array1, array2). Realiza un script que permita crear un informe de las IP libres en la red en la que se encuentra el equipo. Debe contener las siguientes opciones: El informe contendr\u00e1 un listado de todas las IP de la red a la que pertenece el equipo indicando si est\u00e1 libe o no (usa el comando ping). En el informe debe aparecer el tipo de red (rango CIDR) en el que est\u00e1 inmerso el ordenador con el nombre de la red , su broadcast y su m\u00e1scara de subred . Esta informaci\u00f3n la pod\u00e9is obtener desde el comando ifconfig. Note Para facilitar los c\u00e1lculos asumimos que el equipo donde se ejecuta el script se encuentra en una \u00fanica red, es decir, solo posee una tarjeta de red. Crea un shell script que funcione de manera similar a la papelera de reciclaje. El manejo de los ficheros se debe realizar a trav\u00e9s de vectores. El programa debe mostrar el siguiente men\u00fa e implementar sus operaciones que ser\u00e1n implementadas a trav\u00e9s de funciones: eliminar archivo . Esta operaci\u00f3n recibe la ruta completa de un archivo y lo mueve al directorio /home/tu_usuario/recycled. Si no existe dicho directorio, el programa ha de crearlo. restaurar archivo . Esta operaci\u00f3n recibe el nombre de un archivo y lo mueve, desde la papelera de reciclaje, al directorio en el que estuviera anteriormente. El proceso de eliminaci\u00f3n, debe haber almacenado, por tanto dicho directorio en un fichero de texto. restaurar toda la papelera. Esta operaci\u00f3n es similar a la anterior, pero se efect\u00faa sobre todos los ficheros de la papelera. vaciar la papelera . Esta opci\u00f3n vac\u00eda el contenido de la papelera. Ninguno de los archivos ser\u00e1 recuperable. mostrar la papelera . Esta opci\u00f3n muestra el contenido de la papelera. salir . Sale del programa.","title":"Ampliaci\u00f3n"},{"location":"01_ShellScripting/016_ShellScript_PruebaEspecifica.html","text":"Prueba Espec\u00edfica \u00b6 Esta prueba consta de dos partes: Una primera parte con preguntas tipo test , con car\u00e1cter te\u00f3rico, con un peso del 40% en el total de la prueba. La segunda parte consta de ejercicios pr\u00e1cticos basados en los realizados durante la Unidad Did\u00e1ctica, con un valor del 60% del total. Test: \u00b6 En shell Script para poder interactuar con un programa de terminal es necesario disponer de un mecanismo de entrada y salida de datos, en este sentido se utilizan los siguientes comandos: listen/echo listen/write read/echo read/write \u00bfQu\u00e9 es un Script? Es un archivo de texto que contiene una serie de comandos que, ordenados de forma espec\u00edfica, realizan la tarea para la que fueron dise\u00f1ados. Conjunto de especificaciones que se le hacen al programa al momento de llamarlo para obtener un efecto diferente. Es un par\u00e1metro que cambia su valor durante la ejecuci\u00f3n del programa. Ninguna de las anteriores. El comando echo... Su tarea es la de mostrar informaci\u00f3n con mensajes de texto lanzados por pantalla. Esta herramienta asigna el texto que el usuario ha escrito en el terminal y a una o m\u00e1s variables. Este comando toma los argumentos dados como expresiones num\u00e9ricas, los eval\u00faa e imprime el resultado. Ninguna de las anteriores. Una Tuber\u00eda ... Una Redirecci\u00f3n consiste en trasladar la informaci\u00f3n de un fichero de dispositivo a otro. Es la forma pr\u00e1ctica de redireccionar la salida est\u00e1ndar de un programa hacia la entrada est\u00e1ndar de otro. Es un comando que se ejecuta desde un terminal que permite configurar v\u00ednculos entre varios comandos. Ninguna de las anteriores. Los scripts de Shell son uno de los tipos de programas m\u00e1s habituales en todos los sistemas LINUX/GNU. #!/bin/bash en la primera l\u00ednea del shell script indica: Cambia el directorio a /bin/bash. Indica que se debe usar la shell bash para ejecutar el script. Ejecuta el comando /bin/bash y presenta el resultado en pantalla. Es un comentario que no indica nada. \u00bfQu\u00e9 es una variable? Es un archivo de texto que contiene una serie de comandos que, ordenados de forma espec\u00edfica, realizan la tarea para la que fueron dise\u00f1ados. Conjunto de especificaciones que se le hacen al programa al momento de llamarlo para obtener un efecto diferente. Es un par\u00e1metro que cambia su valor durante la ejecuci\u00f3n del programa. Ninguna de las anteriores. Una Redirecci\u00f3n ... Una Redirecci\u00f3n consiste en trasladar la informaci\u00f3n de un fichero de dispositivo a otro. Es la forma pr\u00e1ctica de redireccionar la salida est\u00e1ndar de un programa hacia la entrada est\u00e1ndar de otro. Es un comando que se ejecuta desde un terminal que permite configurar v\u00ednculos entre varios comandos. Ninguna de las anteriores. \u00bfQu\u00e9 es un Argumento o par\u00e1metro? Es un archivo de texto que contiene una serie de comandos que, ordenados de forma espec\u00edfica, realizan la tarea para la que fueron dise\u00f1ados. Conjunto de especificaciones que se le hacen al programa al momento de llamarlo para obtener un efecto diferente. Es un par\u00e1metro que cambia su valor durante la ejecuci\u00f3n del programa. Ninguna de las anteriores. El comando read... Su tarea es la de mostrar informaci\u00f3n con mensajes de texto lanzados por pantalla. Esta herramienta asigna el texto que el usuario ha escrito en el terminal y a una o m\u00e1s variables. Este comando toma los argumentos dados como expresiones num\u00e9ricas, los eval\u00faa e imprime el resultado. Ninguna de las anteriores. El comando expr... Su tarea es la de mostrar informaci\u00f3n con mensajes de texto lanzados por pantalla. Esta herramienta asigna el texto que el usuario ha escrito en el terminal y a una o m\u00e1s variables. Este comando toma los argumentos dados como expresiones num\u00e9ricas, los eval\u00faa e imprime el resultado. Ninguna de las anteriores. \u00bfQu\u00e9 hace el siguiente script adjunto? Muestra por pantalla 10 Muestra por pantalla 7+3 Muestra por pantalla 73 Ninguna de las anteriores. #! /bin/bash num1=7 num2=3 let resultado=num1+num2 echo \"$resultado\" \u00bfQu\u00e9 hace el siguiente script adjunto? Muestra por pantalla la tabla de multiplicar del n\u00famero introducido por el usuario. Muestra por pantalla la tabla de multiplicar de la variable num. Muestra por pantalla la tabla de multiplicar de la variable i. a y b son verdaderas. #! /bin/bash read -p \u201cEscribe un n\u00famero : \u201c num i=1 while [ $i -le 10 ] do let res=num*i echo \u201c$i x $num = $res\u201d let i=i+1 done Diagramas de Flujo ... Son operaciones que se deben ejecutar un n\u00famero repetido de veces para resolver un problema. Es la representaci\u00f3n gr\u00e1fica de la soluci\u00f3n algor\u00edtmica de un problema. Permiten ejecutar diferentes instrucciones dependiendo del valor de una variable o expresi\u00f3n. Es determinar el orden en el que se ejecutar\u00e1n las instrucciones en un programa \u00bfQu\u00e9 hace el siguiente script adjunto? Muestra por pantalla 10 Muestra por pantalla 7+3 Muestra por pantalla 73 Ninguna de las anteriores. #! /bin/bash num1=7 num2=3 let resultado=num1+num2 echo \"$num1\" + \"$num2\" Diagramas de Flujo ... Es la representaci\u00f3n gr\u00e1fica de la soluci\u00f3n algor\u00edtmica de un problema. Permiten ejecutar diferentes instrucciones dependiendo del valor de una variable o expresi\u00f3n. Son operaciones que se deben ejecutar un n\u00famero repetido de veces para resolver un problema. Es determinar el orden en el que se ejecutar\u00e1n las instrucciones en un programa Estructuras condicionales ... Es la representaci\u00f3n gr\u00e1fica de la soluci\u00f3n algor\u00edtmica de un problema. Permiten ejecutar diferentes instrucciones dependiendo del valor de una variable o expresi\u00f3n. Son operaciones que se deben ejecutar un n\u00famero repetido de veces para resolver un problema. Es determinar el orden en el que se ejecutar\u00e1n las instrucciones en un programa \u00bfQu\u00e9 hace el siguiente script adjunto? Muestra por pantalla la tabla de multiplicar el par\u00e1metro 1 introducido al ejecutar el script. Muestra por pantalla la tabla de multiplicar del argumento $1. Muestra por pantalla la tabla de multiplicar de la variable i. a y b son verdaderas. #! /bin/bash echo \u201cTabla del n\u00famero $1\u201d for i in 1 2 3 4 5 6 7 8 9 10 do let res=$1*i echo \u201c$i x $1 = $res\u201d done \u00bfQu\u00e9 hace el siguiente script adjunto? Muestra por pantalla 10 Muestra por pantalla 7+3 Muestra por pantalla 73 Ninguna de las anteriores. #! /bin/bash num1=7 num2=3 let resultado=num1+num2 echo \"$num1+$num2\" Estructuras iterativas ... Es la representaci\u00f3n gr\u00e1fica de la soluci\u00f3n algor\u00edtmica de un problema. Permiten ejecutar diferentes instrucciones dependiendo del valor de una variable o expresi\u00f3n. Son operaciones que se deben ejecutar un n\u00famero repetido de veces para resolver un problema. Es determinar el orden en el que se ejecutar\u00e1n las instrucciones en un programa. \u00bfQu\u00e9 hace el siguiente script adjunto? Muestra por pantalla 10 Muestra por pantalla 7+3 Muestra por pantalla 73 Ninguna de las anteriores. #! /bin/bash num1=7 num2=3 let resultado=num1+num2 echo \"$num1\"\"$num2\" Pr\u00e1ctica \u00b6 Escribe tres shell script utilizando estructuras alternativas: El primero ej1A.sh, que pida al usuario tres n\u00fameros y los muestre ordenados de mayor a menor. Se deber\u00e1 comprobar que los datos facilitados por el usuario son v\u00e1lidos. El segundo ej1B.sh, que a partir de una fecha introducida por teclado con el formato D\u00cdA, MES, A\u00d1O, se obtenga la fecha del d\u00eda siguiente. El tercero ej1C.sh, que acepte una calificaci\u00f3n num\u00e9rica y visualice la correspondiente en letra: Escribe un shell script que genere dos vectores de quince elementos cada uno y los rellene con n\u00famero aleatorios comprendidos entre 0 y 100. Despu\u00e9s sume esas dos estructuras y muestre los tres vectores por pantalla. Para ello crea las funciones imprimir_array(array_a_imprimir) y sumar_array(array1, array2) .","title":"1.6- Prueba Espec\u00edfica"},{"location":"01_ShellScripting/016_ShellScript_PruebaEspecifica.html#prueba-especifica","text":"Esta prueba consta de dos partes: Una primera parte con preguntas tipo test , con car\u00e1cter te\u00f3rico, con un peso del 40% en el total de la prueba. La segunda parte consta de ejercicios pr\u00e1cticos basados en los realizados durante la Unidad Did\u00e1ctica, con un valor del 60% del total.","title":"Prueba Espec\u00edfica"},{"location":"01_ShellScripting/016_ShellScript_PruebaEspecifica.html#test","text":"En shell Script para poder interactuar con un programa de terminal es necesario disponer de un mecanismo de entrada y salida de datos, en este sentido se utilizan los siguientes comandos: listen/echo listen/write read/echo read/write \u00bfQu\u00e9 es un Script? Es un archivo de texto que contiene una serie de comandos que, ordenados de forma espec\u00edfica, realizan la tarea para la que fueron dise\u00f1ados. Conjunto de especificaciones que se le hacen al programa al momento de llamarlo para obtener un efecto diferente. Es un par\u00e1metro que cambia su valor durante la ejecuci\u00f3n del programa. Ninguna de las anteriores. El comando echo... Su tarea es la de mostrar informaci\u00f3n con mensajes de texto lanzados por pantalla. Esta herramienta asigna el texto que el usuario ha escrito en el terminal y a una o m\u00e1s variables. Este comando toma los argumentos dados como expresiones num\u00e9ricas, los eval\u00faa e imprime el resultado. Ninguna de las anteriores. Una Tuber\u00eda ... Una Redirecci\u00f3n consiste en trasladar la informaci\u00f3n de un fichero de dispositivo a otro. Es la forma pr\u00e1ctica de redireccionar la salida est\u00e1ndar de un programa hacia la entrada est\u00e1ndar de otro. Es un comando que se ejecuta desde un terminal que permite configurar v\u00ednculos entre varios comandos. Ninguna de las anteriores. Los scripts de Shell son uno de los tipos de programas m\u00e1s habituales en todos los sistemas LINUX/GNU. #!/bin/bash en la primera l\u00ednea del shell script indica: Cambia el directorio a /bin/bash. Indica que se debe usar la shell bash para ejecutar el script. Ejecuta el comando /bin/bash y presenta el resultado en pantalla. Es un comentario que no indica nada. \u00bfQu\u00e9 es una variable? Es un archivo de texto que contiene una serie de comandos que, ordenados de forma espec\u00edfica, realizan la tarea para la que fueron dise\u00f1ados. Conjunto de especificaciones que se le hacen al programa al momento de llamarlo para obtener un efecto diferente. Es un par\u00e1metro que cambia su valor durante la ejecuci\u00f3n del programa. Ninguna de las anteriores. Una Redirecci\u00f3n ... Una Redirecci\u00f3n consiste en trasladar la informaci\u00f3n de un fichero de dispositivo a otro. Es la forma pr\u00e1ctica de redireccionar la salida est\u00e1ndar de un programa hacia la entrada est\u00e1ndar de otro. Es un comando que se ejecuta desde un terminal que permite configurar v\u00ednculos entre varios comandos. Ninguna de las anteriores. \u00bfQu\u00e9 es un Argumento o par\u00e1metro? Es un archivo de texto que contiene una serie de comandos que, ordenados de forma espec\u00edfica, realizan la tarea para la que fueron dise\u00f1ados. Conjunto de especificaciones que se le hacen al programa al momento de llamarlo para obtener un efecto diferente. Es un par\u00e1metro que cambia su valor durante la ejecuci\u00f3n del programa. Ninguna de las anteriores. El comando read... Su tarea es la de mostrar informaci\u00f3n con mensajes de texto lanzados por pantalla. Esta herramienta asigna el texto que el usuario ha escrito en el terminal y a una o m\u00e1s variables. Este comando toma los argumentos dados como expresiones num\u00e9ricas, los eval\u00faa e imprime el resultado. Ninguna de las anteriores. El comando expr... Su tarea es la de mostrar informaci\u00f3n con mensajes de texto lanzados por pantalla. Esta herramienta asigna el texto que el usuario ha escrito en el terminal y a una o m\u00e1s variables. Este comando toma los argumentos dados como expresiones num\u00e9ricas, los eval\u00faa e imprime el resultado. Ninguna de las anteriores. \u00bfQu\u00e9 hace el siguiente script adjunto? Muestra por pantalla 10 Muestra por pantalla 7+3 Muestra por pantalla 73 Ninguna de las anteriores. #! /bin/bash num1=7 num2=3 let resultado=num1+num2 echo \"$resultado\" \u00bfQu\u00e9 hace el siguiente script adjunto? Muestra por pantalla la tabla de multiplicar del n\u00famero introducido por el usuario. Muestra por pantalla la tabla de multiplicar de la variable num. Muestra por pantalla la tabla de multiplicar de la variable i. a y b son verdaderas. #! /bin/bash read -p \u201cEscribe un n\u00famero : \u201c num i=1 while [ $i -le 10 ] do let res=num*i echo \u201c$i x $num = $res\u201d let i=i+1 done Diagramas de Flujo ... Son operaciones que se deben ejecutar un n\u00famero repetido de veces para resolver un problema. Es la representaci\u00f3n gr\u00e1fica de la soluci\u00f3n algor\u00edtmica de un problema. Permiten ejecutar diferentes instrucciones dependiendo del valor de una variable o expresi\u00f3n. Es determinar el orden en el que se ejecutar\u00e1n las instrucciones en un programa \u00bfQu\u00e9 hace el siguiente script adjunto? Muestra por pantalla 10 Muestra por pantalla 7+3 Muestra por pantalla 73 Ninguna de las anteriores. #! /bin/bash num1=7 num2=3 let resultado=num1+num2 echo \"$num1\" + \"$num2\" Diagramas de Flujo ... Es la representaci\u00f3n gr\u00e1fica de la soluci\u00f3n algor\u00edtmica de un problema. Permiten ejecutar diferentes instrucciones dependiendo del valor de una variable o expresi\u00f3n. Son operaciones que se deben ejecutar un n\u00famero repetido de veces para resolver un problema. Es determinar el orden en el que se ejecutar\u00e1n las instrucciones en un programa Estructuras condicionales ... Es la representaci\u00f3n gr\u00e1fica de la soluci\u00f3n algor\u00edtmica de un problema. Permiten ejecutar diferentes instrucciones dependiendo del valor de una variable o expresi\u00f3n. Son operaciones que se deben ejecutar un n\u00famero repetido de veces para resolver un problema. Es determinar el orden en el que se ejecutar\u00e1n las instrucciones en un programa \u00bfQu\u00e9 hace el siguiente script adjunto? Muestra por pantalla la tabla de multiplicar el par\u00e1metro 1 introducido al ejecutar el script. Muestra por pantalla la tabla de multiplicar del argumento $1. Muestra por pantalla la tabla de multiplicar de la variable i. a y b son verdaderas. #! /bin/bash echo \u201cTabla del n\u00famero $1\u201d for i in 1 2 3 4 5 6 7 8 9 10 do let res=$1*i echo \u201c$i x $1 = $res\u201d done \u00bfQu\u00e9 hace el siguiente script adjunto? Muestra por pantalla 10 Muestra por pantalla 7+3 Muestra por pantalla 73 Ninguna de las anteriores. #! /bin/bash num1=7 num2=3 let resultado=num1+num2 echo \"$num1+$num2\" Estructuras iterativas ... Es la representaci\u00f3n gr\u00e1fica de la soluci\u00f3n algor\u00edtmica de un problema. Permiten ejecutar diferentes instrucciones dependiendo del valor de una variable o expresi\u00f3n. Son operaciones que se deben ejecutar un n\u00famero repetido de veces para resolver un problema. Es determinar el orden en el que se ejecutar\u00e1n las instrucciones en un programa. \u00bfQu\u00e9 hace el siguiente script adjunto? Muestra por pantalla 10 Muestra por pantalla 7+3 Muestra por pantalla 73 Ninguna de las anteriores. #! /bin/bash num1=7 num2=3 let resultado=num1+num2 echo \"$num1\"\"$num2\"","title":"Test:"},{"location":"01_ShellScripting/016_ShellScript_PruebaEspecifica.html#practica","text":"Escribe tres shell script utilizando estructuras alternativas: El primero ej1A.sh, que pida al usuario tres n\u00fameros y los muestre ordenados de mayor a menor. Se deber\u00e1 comprobar que los datos facilitados por el usuario son v\u00e1lidos. El segundo ej1B.sh, que a partir de una fecha introducida por teclado con el formato D\u00cdA, MES, A\u00d1O, se obtenga la fecha del d\u00eda siguiente. El tercero ej1C.sh, que acepte una calificaci\u00f3n num\u00e9rica y visualice la correspondiente en letra: Escribe un shell script que genere dos vectores de quince elementos cada uno y los rellene con n\u00famero aleatorios comprendidos entre 0 y 100. Despu\u00e9s sume esas dos estructuras y muestre los tres vectores por pantalla. Para ello crea las funciones imprimir_array(array_a_imprimir) y sumar_array(array1, array2) .","title":"Pr\u00e1ctica"},{"location":"02_PowerShell/012_PowerShell.html","text":"Power Shell \u00b6 Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 3 sesiones (2h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Utiliza lenguajes de guiones en sistemas operativos, describiendo su aplicaci\u00f3n y administrando servicios del sistema operativo. Se han utilizado y combinado las estructuras del lenguaje para crear guiones. Se han utilizado herramientas para depurar errores sint\u00e1cticos y de ejecuci\u00f3n. Se han interpretado guiones de configuraci\u00f3n del sistema operativo. Se han realizado cambios y adaptaciones de guiones del sistema. Se han creado y probado guiones de administraci\u00f3n de servicios. Se han creado y probado guiones de automatizaci\u00f3n de tareas. Se han implantado guiones en sistemas propietarios . Se han consultado y utilizado librer\u00edas de funciones. Se han documentado los guiones creados. Introducci\u00f3n \u00b6 Los sistemas operativos basados en Microsoft Windows cuentan con la herramienta PowerShell , que surgi\u00f3 ante las carencias que presenta el viejo terminal basado en MS-DOS . PowerShell es una interfaz de consola (CLI) con posibilidad de escritura y uni\u00f3n de comandos por medio de instrucciones (scripts). Esta interfaz de consola est\u00e1 dise\u00f1ada para su uso por parte de administradores de sistemas , con el prop\u00f3sito de automatizar tareas o realizarlas de forma m\u00e1s controlada. En abril de 2006 Microsoft lanz\u00f3 una nueva interfaz CLI, con una sintaxis moderna que comparte similitudes con el lenguaje Perl. Perl es un lenguaje de programaci\u00f3n dise\u00f1ado por Larry Wall en 1987. Perl toma caracter\u00edsticas del lenguaje C, del lenguaje interpretado bourne shell, AWK, sed, Lisp y, en un grado inferior, de muchos otros lenguajes de programaci\u00f3n. Se trata de una interfaz gratuita, y que antes de Microsoft Windows 7 no se inclu\u00eda con el sistema operativo. En la actualidad, est\u00e1 incluida en todos los sistemas operativos de Microsoft, aunque requiere la presencia de .NET framework del que hereda sus caracter\u00edsticas orientadas a objetos. En agosto de 2016, Microsoft public\u00f3 su c\u00f3digo en GitHub para que pueda portarse a otros sistemas como GNU/Linux y MAC OSX. Los comandos incluidas en PowerShell reciben el nombre de cmdlets (command-let) y posee conjuntos espec\u00edficos para trabajar con Active Directory, Exchange , entre otros roles de servidor. Info cmdlets Existen cientos de cdmlet en la versi\u00f3n 5.1 de PowerShell. Es posible consultar la ayuda de cada uno de ellos en la p\u00e1gina oficial de Microsoft. Otra ventaja de PowerShell es que se dispone de la mayor\u00eda de comandos que del CLI tradicional de Microsoft. De ese modo, es posible ejecutar el comando dir en lugar del Get-ChildItem , cmdlet que realiza la misma tarea. En realidad lo que est\u00e1 usando es un alias del segundo para lanzar el primero. Dispone de autocompletado de comandos y par\u00e1metros que facilitar\u00e1 las tareas de creaci\u00f3n de scripts. Basta con comenzar a escribir un cmdlet y pulsarla tecla Tab. Si utilizamos PowerShell ISE al escribir aparecer\u00e1 una ventana con todos los cmdlets que coincidan con el texto escrito, incluso puede aparecer un recuadro con ayuda sobre su sintaxis. Para aceptar la sugerencia se pulsar la tecla Intro . Note Los nombres de todos los cmdlets est\u00e1n formados por un verbo, un gui\u00f3n y un nombre en singular. Habitualmente, se escribe con may\u00fasculas la primera letra de cada palabra, pero no se trata m\u00e1s que de una norma de estilo, porque PowerShell no distingue entre may\u00fasculas y min\u00fasculas. Primer Script \u00b6 Al igual que ocurre en GNU/Linux un script de PowerShell no es m\u00e1s que un archivo de texto plano que contiene una secuencia de comando y de cmdlets para realizar una tarea. La diferencia con ellos es que aqu\u00ed ser\u00e1 necesario dotarlos de una extensi\u00f3n; ps1 . Example Write-Host \"Hola!. Esto es mi primer script en PowerShell\" Write-Host \"Y esto es una segunda l\u00ednea\" A continuaci\u00f3n, se guarda el script desde el men\u00fa Acci\u00f3n \u2192 Guardar Como\u2026 asign\u00e1ndole un nombre. Para ejecutarlo tan s\u00f3lo es necesario escribir su nombre en el terminal de PowerShell anteponiendo un punto y una barra. Example ./Script.ps1 Aunque tambi\u00e9n es posible ejecutar el script desde la herramienta gr\u00e1fica pulsando la tecla F5 , ejecutar una parte de \u00e9l con F8 o detener la ejecuci\u00f3n con Ctrl+Intro . PowerShell ISE \u00b6 PowerShell viene acompa\u00f1ado de una herramienta gr\u00e1fica que facilita la administraci\u00f3n de todos los scripts. Se denomina Microsoft PowerShell ISE (Integrated Scripting Environment) , y se accede a trav\u00e9s de: Administrador del servidor \u2192 Herramientas \u2192 Windows PowerShell ISE . El uso de esta herramienta gr\u00e1fica va a facilitar la creaci\u00f3n de los scripts de forma significativa. Es pr\u00e1ctico comenzar con esta ayuda ya que la sintaxis de los cmdlets, aunque sea l\u00f3gica y sencilla, tambi\u00e9n lo es amplia y desconocida. Interfaz de la herramienta Windows PowerShell ISE Info Uno de los aspectos m\u00e1s interesantes que posee esta aplicaci\u00f3n es la barra de informaci\u00f3n que muestra un listado de todos los cmdlets de esta herramienta. Permite filtrarlos por funci\u00f3n y consultar la ayuda de cada uno de ellos. Tambi\u00e9n posee un formulario destinado a generar el c\u00f3digo de un cmdlet de forma autom\u00e1tica. Example Creaci\u00f3n de un comando que realice una copia de seguridad de los scripts de trabajo en una memoria externa. Es necesario el uso de Copy-Item para ello, pero no se conoce su sintaxis. Si escribimos este cmdlet en el recuadro Nombre y se pulsa sobre Mostrar Ayuda , aparecer\u00e1 un formulario con sus opciones. Tras completar las necesarias y pulsando el bot\u00f3n Insertar situado en la parte inferior, el c\u00f3digo completo ser\u00e1 escrito la parte destinada al terminal. Creaci\u00f3n autom\u00e1tica de scripts en Windows PowerShell ISE. Comentarios \u00b6 Note Los comentarios en PowerShell se realizan precediendo a la l\u00ednea con el car\u00e1cter # si se trata de una sola l\u00ednea y <# y #> si es multil\u00ednea. Par\u00e1metros en PowerShell \u00b6 Como ocurr\u00eda en GNU/Linux, los par\u00e1metros que reciba el script se deben recoger de forma interna en una variable para poder operar con ellos. Example param ([string]$nombre) Write-Host \"Hola!. Esto es mi primer script en PowerShell\" Write-Host \"Y esto es una segunda l\u00ednea\" Write-Host \"Hola de nuevo, tu nombre es $nombre\" Note El script anterior esperar\u00e1 un par\u00e1metro de tipo string que ser\u00e1 contenido en la variable nombre. En la cuarta l\u00ednea mostrar\u00e1 el contenido de la variable por pantalla. Para poder ejecutar este script, ser\u00e1 necesario acompa\u00f1arlo de un par\u00e1metro del siguiente modo. ./Script.ps1 \u201cF\u00ba Javier Hern\u00e1ndez Ill\u00e1n\u201d Para entender por completo el ejemplo anterior, ser\u00e1 necesario ver como PowerShell maneja las variables . Variables \u00b6 Para definir una variable en PowerShell s\u00f3lo tenemos que nombrarla utilizando para ello cualquier combinaci\u00f3n de caracteres, ya sean n\u00fameros, letras o s\u00edmbolos. Es posible utilizar espacios en el nombre, aunque en este caso el nombre debe ir rodeado por s\u00edmbolos de llaves {} . Al contrario que ocurre en shellscript, PowerShell es fuertemente tipado , lo que significa que las variables no son tratadas como cadenas de texto, sino que hay que especificar el tipo de dato que se guardar\u00e1 en ella. Para definir variables es posible utilizar el m\u00e9todo expl\u00edcito (adem\u00e1s con New-Variable y sus opciones), pero tambi\u00e9n se puede utilizar el m\u00e9todo impl\u00edcito anteponiendo el s\u00edmbolo $ delante del nombre. Info Get-Variable En cualquier momento puedes obtener una lista completa de las variables que se hayan definido hasta ese momento. Para lograrlo, basta con utilizar Get- Variable. Implicita \u00b6 Tipo Descripci\u00f3n [string] Cadena de caracteres Unicode [char] Un s\u00f3lo car\u00e1cter Unicode de 16 bits [byte] Un s\u00f3lo car\u00e1cter Unicode de 8 bits [int] Entero con signo de 32 bits [float] N\u00famero con coma flotante de 32 bits [double] N\u00famero con coma flotante de 64 bits [datetime] Fecha y Hora [bool] Valor l\u00f3gico booleano Example $numero = 9.99 $Final_2021 = 30 ${Mi variable} = \u201cContiene espacios en el nombre\u201d En la forma implicita el shell establece el tipo de dato de la variable en funci\u00f3n del dato que se le asigne en su creaci\u00f3n. En el ejemplo anterior $numero es de forma autom\u00e1tica de tipo [double] , ya que al crearla se ha inicializado con un n\u00famero con decimales. Por contra la variable $Final_2021 es de tipo [int] ya que se ha guardado un n\u00famero entero en ella. Info GetType Para poder obtener el tipo de dato de una variable hay que usar el m\u00e9todo GetType().Name sobre cualquier variable: Write-Host $feo.GetType().Name. Tip Una variable cuya definici\u00f3n de tipo se ha realizado de forma impl\u00edcita, podr\u00e1 cambiar el tipo de dato almacenado durante la ejecuci\u00f3n del programa sin experimentar ning\u00fan tipo de error. Esta pr\u00e1ctica aunque c\u00f3moda no es muy recomendable . Explicita \u00b6 Es buena idea tomar el control del tipado de las variables y asignarlo en funci\u00f3n de las necesidades del programa. De esta forma se ahorrar\u00e1n futuras conversiones de datos y posibles p\u00e9rdidas de informaci\u00f3n. Para ello se usa la forma expl\u00edcita de crear variables y junto con su creaci\u00f3n se define el tipo de dato que va a contener. Example [ float ] $numero = 9.99 [int] $Final_2021 = 30 [string] ${Mi variable} = \u201cContiene espacios en el nombre\u201d Al contrario que en el caso anterior, cuando el dato asignado no coincida con el tipo esperado, pueden ocurrir dos cosas: que las caracter\u00edsticas del dato se modifiquen para amoldarse al tipo de variable, lo que puede traducirse en la p\u00e9rdida de datos y un mal funcionamiento del script, o que se producir\u00e1 un error si esa conversi\u00f3n no es posible y se detenga el script. Interacci\u00f3n con el usuario \u00b6 PowerShell posee dos cmdlets para realizar estas tareas. El primero de ellos es Write-Host y tiene un comportamiento similar al echo en GNU/Linux. El segundo comando para interactuar con el usuario es Read-Host el cual permite imprimir un mensaje por el terminal y recoger aquello que el usuario ha escrito. Funciona de forma muy parecida al comando read en el terminal de GNU/Linux. [ string ] $feo = Read-Host \u201c\u00bfCu\u00e1l es el nombre del marine de Doom?\u201d Write-Host \u201cNo se sabe, pero lo has intentado con $feo\u201d Note Este script detendr\u00e1 su ejecuci\u00f3n en la l\u00ednea donde aparece Read-Host , esperar\u00e1 a que el usuario conteste a la pregunta y seguir\u00e1 con la ejecuci\u00f3n, del mismo modo que ocurre con shellscript. Operadores \u00b6 Aritm\u00e9ticos \u00b6 Las operaciones aritm\u00e9ticas en PowerShell son m\u00e1s intuitivas que en shellscript. Son las mismas que en el caso anterior: + , - , * , / y % . Su uso es m\u00e1s sencillo puesto que es el propio terminal en que realiza los c\u00e1lculos aritm\u00e9ticos y no a trav\u00e9s de un comando. [ int ] $a=10 [float] $b=20 [int] $res=$a+$b Write-Host $res Write-Host $a+$b Write-Host \"$a x $b = \" ($a*$b) Tambi\u00e9n se dispone de expansores de terminal como en GNU/Linux. Note N\u00f3tese que en la \u00faltima l\u00ednea aparece directamente el producto $a*$b ya que al rodear la operaci\u00f3n con par\u00e9ntesis, se convierte en un expansor, realiza la operaci\u00f3n en su interior y env\u00eda el resultado fuera. Existen variantes que simplifican el uso de algunos operadores. Operador Uso Equivalencia += $contador += 5 $contador = $contador+5 -= $contador -= 5 $contador = $contador-5 *= $contador *= 5 $contador = $contador*5 /= $contador /= 5 $contador = $contador/5 Adem\u00e1s de estos operadores existen dos espec\u00edficos para el incremento ( ++ ) y decremento ( -- ) de una unidad, ideal para el uso de variables como contadores. L\u00f3gicos \u00b6 Operador Descripci\u00f3n -and Devuelve verdadero si las dos expresiones son verdaderas. -or Devuelve verdadero si una de las dos expresiones o las dos son verdaderas. -xor Devuelve verdadero si tan s\u00f3lo una de las expresiones es verdadera. -not o ! Devuelve verdadero cuando la expresi\u00f3n da el valor falso. Example Write-Host ((6 -ge 4) -and (7 -le 7)) Write-Host ((10 -gt 1) -or (2 -lt 2)) Write-Host ((1 -gt 0) -xor (4 -le 1)) Write-Host ( -not (12 -lt 10)) Write-Host (!(12 -lt 10)) Note En el ejemplo anterior si se ejecuta el script en un terminal PowerShell, todos los resultados ser\u00e1n verdaderos. Como en todos los lenguajes de programaci\u00f3n fuertemente tipados, existen operadores l\u00f3gicos para comprobar el tipo de dato de una variable, que resultan muy \u00fatiles para la interacci\u00f3n con los usuarios. Operador Acci\u00f3n Ejemplo -is Devuelve verdadero si es del tipo indicado. \u201cJavi\u201d -is [string] es verdadero -isnot Devuelve falso si es del tipo indicado. \u201cJavi\u201d -isnot [string] es falso -as Convierte tipos de datos compatibles. $valor = 19.90 ; Write-Host ($valor -as [int]) Comparaci\u00f3n \u00b6 los operadores tipo l\u00f3gicos devuelven tan s\u00f3lo un valor booleano que puede tener dos valores; verdadero o falso . Operador Acci\u00f3n Ejemplo -eq Comprueba si son iguales. 5 -eq 3 es falso -ieq Iguales. En cadenas no es casesensitive. \u201cJavi\u201d -ieq \u201cjavi\u201d es verdadero -ceq Iguales. En cadenas es casesensitive. \u201cJavi\u201d -ceq \u201cjavi\u201d es falso -ne Verifica si son diferentes. 5 -ne 3 es verdadero -lt Coteja si la izquierda es menor que derecha. 5 -lt 3 es falso -le Constata si la izquierda es menor o igual que derecha. 5 -le 3 es falso -gt Examina si la izquierda en mayor que la derecha. 5 -gt 3 es verdadero -ge Revisa si la izquierda en mayor o igual que la derecha. 5 -ge 3 es verdadero PowerShell a\u00f1ade operadores de comparaci\u00f3n que aportan un nivel de complejidad mayor. Operador Acci\u00f3n Ejemplo -like Eval\u00faa un patr\u00f3n \u201ces como\u201d. \u201cPerro\u201d -like \u201cPe*\u201d es verdadero -notlike Eval\u00faa un patr\u00f3n \u201cno es como\u201d. \u201cPerro\u201d -notlike \u201cPe*\u201d es falso -contains Contiene un valor. 1,2,3 -contains 2 es verdadero -notcontains No contiene un valor. 1,2,3 -notcontains 2 es falso Control del flujo en PowerShell \u00b6 En esta parte se indicar\u00e1 tan s\u00f3lo la sintaxis de las estructuras alternativas e iterativas, ya que los conceptos te\u00f3ricos ya se han abordado en el apartado de Shellscript. Alternativa Simple \u00b6 if ( condici\u00f3n ){ ejecutar este c\u00f3digo si la condici\u00f3n es verdadera } Alternativa doble \u00b6 if ( condici\u00f3n ) { ejecutar este c\u00f3digo si la condici\u00f3n es verdadera } else { ejecutar este c\u00f3digo si la condici\u00f3n es falsa } Alternativa m\u00faltiple \u00b6 if ( condici\u00f3n1 ) { ejecutar este c\u00f3digo si la condici\u00f3n1 es verdadera } elseif ( condici\u00f3n2 ) { ejecutar este c\u00f3digo si la condici\u00f3n2 es verdadera } else { ejecutar este c\u00f3digo si todas las condiciones son falsas } El equivalente a case en GNU/Linux \u00b6 switch ($valor){ opci\u00f3n1 { c\u00f3digo a ejecutar si opci\u00f3n1 coincide con $valor } opci\u00f3n2 { c\u00f3digo a ejecutar si opci\u00f3n2 coincide con $valor } opci\u00f3nN { c\u00f3digo a ejecutar si opci\u00f3nN coincide con $valor } default { c\u00f3digo a ejecutar si ninguna de las opciones coincide } } Example $saludo = Read-Host \"Escribe un saludo\" switch ($saludo){ \"Buenos d\u00edas\" { Write-Host \"Saludaste en Castellano\" } \"Bon dia\" { Write-Host \"Saludaste en Catal\u00e1n\" } \"Bo dias\" { Write-Host \"Saludaste en Gallego\" } \"Egun on\" { Write-Host \"Saludaste en Euskera\" } \"Good morning\" { Write-Host \"Saludaste en Ingl\u00e9s\" } \"Bonjour\" { Write-Host \"Saludaste en Franc\u00e9s\" } \"Buon Giorno\" { Write-Host \"Saludaste en Italiano\" } \"Bom d\u00eda\" { Write-Host \"Saludaste en Portugu\u00e9s\" } \"Guten Tag\" { Write-Host \"Saludaste en Alem\u00e1n\" } {$_ -is [string]} { Write Host \"La variable que has pasado es una cadena\" } default { \"Eso no parece un saludo\" } } Note Existe la posibilidad de colocar operadores l\u00f3gicos como opciones de un switch , si estos operadores l\u00f3gicos devuelven un valor verdadero, se ejecutar\u00e1 esa parte del c\u00f3digo, si se eval\u00faa a falso, no realizar\u00e1 esa parte del c\u00f3digo. El car\u00e1cter $_ hace referencia a la variable $saludo, de ese modo es posible realizar operaciones l\u00f3gicas con el valor pasado. Adem\u00e1s de todo esto, switch posee una serie de opciones que no est\u00e1n presentes en GNU/Linux, aunque es posible realizarlas de otra manera. Operador Descripci\u00f3n -wildcard S\u00f3lo aplicable a [string] . Indica si cumple un patr\u00f3n determinado. -exact S\u00f3lo aplicable a [string] . Debe coincidir exactamente con alguno de los patrones. -casesensitive S\u00f3lo aplicable a [string] . Debe coincidir en may\u00fasculas y min\u00fasculas. -file La entrada es un archivo. Se evaluar\u00e1 cada l\u00ednea del archivo. -regex S\u00f3lo aplicable a [string] . Permite usar expresiones regulares en la comparaci\u00f3n. Example -regex $target = 'https://bing.com' switch -Regex ($target){ '^ftp\\://.*$' { \"$_ is an ftp address\"; Break } '^\\w+@\\w+\\.com|edu|org$' { \"$_ is an email address\"; Break } '^(http[s]?)\\://.*$' { \"$_ is a web address that uses $($matches[1])\"; Break } } Example -wildcard switch -wildcard ( Read-Host \"Escribe u n\u00famero de tel\u00e9fono\" ){ \"8*\" { Write-Host \"Es un tel\u00e9fono fijo : $_\"; break } \"9*\" { Write-Host \"Es un tel\u00e9fono fijo : $_\"; break } \"6*\" { Write-Host \"Es un tel\u00e9fono m\u00f3vil : $_\"; break } default { \"$_ no parece un tel\u00e9fono\" } } El comando break que aparece al final de cada opci\u00f3n indica que si encuentra una coincidencia no siga buscando m\u00e1s y rompa el switch, ahorr\u00e1ndose as\u00ed el resto de comprobaciones. Estructuras iterativas \u00b6 while \u00b6 A diferencia de lo que ocurr\u00eda en GNU/Linux, en PowerShell existen diferencias entre las estructuras while, do while y do until . En este caso, la \u00fanica de las tres que evaluar\u00e1 la condici\u00f3n al inicio del bloque de c\u00f3digo ser\u00e1 la primera. El resto comprueba la condici\u00f3n al final del bloque ejecutando como m\u00ednimo una vez el c\u00f3digo que contiene. while ( condici\u00f3n ){ bloque de c\u00f3digo a ejecutar mientras condici\u00f3n sea verdadera } do { bloque de c\u00f3digo a ejecutar mientras condici\u00f3n sea verdadera } while ( condici\u00f3n ) Existe una variante de esta estructura que se crea sustituyendo el while por un until . Esto cambia el sentido de la condici\u00f3n y es este caso el bloque se repite hasta que la condici\u00f3n se cumpla. Esta estructura no es muy utilizada, pero siempre es bueno contar con herramientas extra. for \u00b6 Tambi\u00e9n la estructura for es sensiblemente diferente que en shellscript. Esta estructura en PowerShell tiene m\u00e1s que ver con los lenguajes de programaci\u00f3n y se utiliza cuando el programador sabe el n\u00famero de iteraciones que hay que realizar para solucionar un problema. for ( inicializaci\u00f3n; condici\u00f3n; incremento ){ bloque de c\u00f3digo a ejecutar mientras condici\u00f3n sea verdadera } Por ejemplo, la creaci\u00f3n de la tabla de multiplicar de un n\u00famero especificado por el usuario. Para resolver este problema s\u00ed se conoce el n\u00famero de iteraciones necesarias, concretamente diez. Example $numero = Read-Host \"Dame un n\u00famero\" Write-Host \"Esta es la tabla del $num\" for ( $i=0; $i -lt 11; $i++){ Write-Host \" $i x $numero = \"($i*$numero) } foreach \u00b6 La estructura foreach en PowerShell es el equivalente a for en shellscript. Est\u00e1 pensada para recorrer un conjunto de valores y ejecutar el bloque de c\u00f3digo una vez por cada elemento del conjunto. foreach ( elemento in conjunto ){ bloque de c\u00f3digo a ejecutar por cada elemento del conjunto } Al igual que ocurre en GNU/Linux, el conjunto puede serlo de cualquier tipo de objetos, incluso los ficheros de una carpeta. En el siguiente ejemplo se buscan los ficheros que en su nombre contengan la cadena de texto que el usuario ha especificado: Example $ruta = \"C:\\Users\\Administrador\\Desktop\" $busca = Read-Host \"Escribe el texto a buscar\" foreach ($archivo in Get-ChildItem $ruta){ if ($archivo.Name.IndexOf($busca) -ge 0){ Write-Host $archivo.Name } } Note Las opciones que ofrece PowerShell en cuanto a estructuras de control parece una oferta m\u00e1s completa que la de shellscript, aunque para las tareas que se van a realizar en este m\u00f3dulo, ambos sistemas poseen herramientas suficientes. Vectores \u00b6 PowerShell considera como un vector a toda colecci\u00f3n de objetos, sea cual sea su tipo. Los elementos que lo conforman pueden estar separados por comas, estar expresados por el operador de rango .. o ser el resultado de alguna expresi\u00f3n que devuelva una colecci\u00f3n, como as\u00ed lo hacen muchos cmdlets. Example $Vacia = @{} $Enteros = 1,2,3,4,5 $Texto = \u201cLunes\u201d,\u201cMartes\u201d,\u201dMi\u00e9rcoles\u201d, \u201cJueves\u201d,\u201dViernes\u201d $EnterosRango = 1..10 De esta forma se han definido cuatro vectores; el segundo contendr\u00e1 enteros y el tercero cadenas de caracteres. La \u00faltima l\u00ednea asigna los valores desde el 1 al 10 utilizando el operador rango .. . Note El operador de rango representa una secuencia de enteros, con los l\u00edmites superior e inferior separados por dos puntos decimales. Permite expresar el rango en orden ascendente o descendente, as\u00ed como tambi\u00e9n que los l\u00edmites inferior o superior sean establecidos por medio de variables que contengan enteros. Un vector tambi\u00e9n puede definirse como el resultado de una expresi\u00f3n. Example $EnterosFor = @(For($i;$i < 5;$i++){$i}) $Comando = Get-Process | Sort-Object ProcessName En la primera l\u00ednea $enteros ser\u00e1 completado a trav\u00e9s del resultado de una estructura iterativa, mientras que la segunda contendr\u00e1 el resultado del cmdlet indicado. Adem\u00e1s de todas estas formas de declaraci\u00f3n, tambi\u00e9n se puede realizar a trav\u00e9s del cmdlet New-Variable Example New-Variable -Name Enteros -Value 1,2,3,4,5 -Force New-Variable -Name Texto -Value \"Lunes\",\"Martes\",\"Mi\u00e9rcoles\",\"Jueves\",\"Viernes\" \u2013Force New-Variable -Name EnterosRango -Value (1..5) -Force New-Variable -Name EnterosFor -value (. {For($i=1;$i -lt 5;$i++){$i}}) -Force Note El atributo -Force sobrescribe la variable si esta ya existe, de ese modo no saltar\u00e1 ning\u00fan error a la hora de definir estas variables. Para obtener el n\u00famero de elementos de un vector se utiliza el m\u00e9todo Length, si se aplica a un elemento del vector, devolver\u00e1 el tama\u00f1o de este elemento, no del vector completo. Example $Texto.Length # mostrar\u00e1 5 por pantalla $Texto[2].Length # mostrar\u00e1 9, las letras de \u201cMi\u00e9rcoles\u201d Para a\u00f1adir elementos al final de un vector se utiliza el operador += . Example $Enteros += 6 $Texto += \u201cS\u00e1bado\u201d, \u201cDomingo\u201d Note La primera l\u00ednea a\u00f1ade el entero 6 al vector $Enteros , mientras que en la segunda se a\u00f1aden los elementos \u201cS\u00e1bado\u201d y \u201cDomingo\u201d al vector $Texto . Para eliminar un elemento de un vector PowerShell no ofrece un sistema parecido al de a\u00f1adir valores, sino que tendr\u00e1 que reescribirse el vector de nuevo sin los valores no deseados. Funciones \u00b6 Tambi\u00e9n en PowerShell es posible utilizar funciones a trav\u00e9s de la siguiente estructura: Function <NOMBRE> { Param (<Parametro>,<Parametro>,...) Comandos PowerShell } Warning El paso de par\u00e1metros a una funci\u00f3n se realiza de id\u00e9ntica forma que en shell script. La principal diferencia entre las funciones usadas en shell script es que ahora es preferible declarar y tipar antes de iniciar con el c\u00f3digo de la funci\u00f3n. Example Function Get-Sumar { param ([integer] $a, [integer] $b) $sumar = $a + $b Write-Host \u201cLa suma es $sumar\u201d } Note Si se ejecuta la siguiente instrucci\u00f3n: Get-Sumar 2 8 La salida del terminal ser\u00e1 La suma es 10 . Si se necesita que las funciones est\u00e9n disponibles durante la sesi\u00f3n del usuario o si es necesario enlazarlas desde otro script, se deber\u00e1 utilizar la notaci\u00f3n de punto, del mismo modo que ocurr\u00eda en shell script. Actividades PowerShell \u00b6 Note Escribe el c\u00f3digo de los scripts en PowerShell que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle. Actividades Iniciales PowerShell \u00b6 Genera un Script que muestre los procesos del sistema ordenados por el id . Muestra los servicios cuyo nombre empiece por la letra n , utilizando la creaci\u00f3n de un script. Crea un script que si no se le pasa ning\u00fan argumento nos lo diga. Actividades de desarrollo UD1_04 \u00b6 Dise\u00f1a un script PowerShell que pida al usuario dos n\u00famero (comprobando que sean n\u00fameros) y muestre por pantalla el mayor de ellos o si son iguales. Crea un script PowerShell que al ejecutarlo muestre por pantalla uno de estos mensajes \u201cBuenos d\u00edas\u201d , \u201cBuenas tardes\u201d o \u201cBuenas noches\u201d , en funci\u00f3n de la hora que sea en el sistema (de 8:00 de la ma\u00f1ana a 15:00 ser\u00e1 ma\u00f1ana, de 15:00 a 20:00 ser\u00e1 tarde y el resto ser\u00e1 noche). Usa el cmdlet Get-Date . Construye tres script PowerShell utilizando estructuras iterativas: el primero ej118A.ps1 , que imprima la tabla de multiplicar de un n\u00famero preguntado al usuario. Este n\u00famero debe ser entero positivo. el segundo ej118B.ps1 , que pida un n\u00famero e indique si se trata de un n\u00famero par y si es n\u00famero primo. el tercero ej118C.ps1 , que muestre las diez primeras tablas de multiplicar por pantalla. Hay un tiempo de espera de un segundo entre ellas. Utiliza las estructuras while, do while, for y foreach y el cmdlet Start-Sleep. Dise\u00f1a un script PowerShell que lea un vector con 365 temperaturas y calcule la media y cuantos d\u00edas han estado por encima y cuantos por debajo de ella. Rellena el vector con valores aleatorios entre -5 y 35, para ello usa Get-Random. Actividades de desarrollo UD1_05 \u00b6 Crea un script PowerShell que rellene un vector con diez n\u00fameros de forma aleatoria y que los muestre por pantalla de la siguiente forma: en orden inverso a como han sido introducidos los valores. los valores ordenados de menor a mayor en una sola l\u00ednea. los valores ordenados de mayor a menor en una sola l\u00ednea la suma total de sus valores. cantidad de valores pares que contiene el vector. la suma total de n\u00fameros impares. la media aritm\u00e9tica de los valores que contiene el vector. Crea un script PowerShell para que haga una copias de seguridad de todos los archivos del directorio de trabajo del usuario actual. Deber\u00e1 realizar las siguientes acciones: comprobar\u00e1 si el archivo ya existe en la copia de seguridad, si es as\u00ed comprobar\u00e1 cual de los dos es m\u00e1s reciente y que tama\u00f1o tienen. Si es m\u00e1s reciente o posee un tama\u00f1o mayor, lo copiar\u00e1. En cualquier otro caso, no lo copia. llevar\u00e1 un registro de todos los archivos copiados cada vez que se ejecute mediante un archivo de bit\u00e1cora. Guarda este fichero el directorio que contiene el script. Crea una funci\u00f3n para cada tarea realizada en este script. Dise\u00f1a un script PowerShell que muestre un men\u00fa al usuario con cuatro operaciones disponibles: Crear directorio, Eliminar directorio, Mostrar directorio, Informe de directorio, Copia de directorio y Salir . Una vez elegida una opci\u00f3n correcta, el programa debe solicitar un nombre de directorio y hacer la operaci\u00f3n seleccionada. Tras esto debe mostrar un mensaje con el resultado de la operaci\u00f3n. Crea una funci\u00f3n para cada una de estas opciones. Si se elige la opci\u00f3n Informe de directorio , mostrar\u00e1 por pantalla el n\u00famero de ficheros que contiene, cuantos son carpetas, cuantos directorios y el tama\u00f1o total de ellos. Si la carpeta no existe, mostrar\u00e1 un error. Si elige la opci\u00f3n Copia de directorio , preguntar\u00e1 la carpeta de destino y mostrar\u00e1 fichero a fichero la copia. Realiza un script PowerShell que permita crear un informe de las IP libres en la red en la que se encuentra el equipo. Debe contener las siguientes opciones: el informe contendr\u00e1 un listado de todas las IP de la red a la que pertenece el equipo indicando si est\u00e1 libre o no (usa el comando ping). en el informe debe aparecer el tipo de red (A, B o C) en el que est\u00e1 inmerso el ordenador con el nombre de la red, su broadcast y su m\u00e1scara de subred.","title":"2.1- PowerShell"},{"location":"02_PowerShell/012_PowerShell.html#power-shell","text":"Duraci\u00f3n y criterios de evaluaci\u00f3n Duraci\u00f3n estimada: 3 sesiones (2h por sesi\u00f3n) Resultado de aprendizaje y Criterios de evaluaci\u00f3n: Utiliza lenguajes de guiones en sistemas operativos, describiendo su aplicaci\u00f3n y administrando servicios del sistema operativo. Se han utilizado y combinado las estructuras del lenguaje para crear guiones. Se han utilizado herramientas para depurar errores sint\u00e1cticos y de ejecuci\u00f3n. Se han interpretado guiones de configuraci\u00f3n del sistema operativo. Se han realizado cambios y adaptaciones de guiones del sistema. Se han creado y probado guiones de administraci\u00f3n de servicios. Se han creado y probado guiones de automatizaci\u00f3n de tareas. Se han implantado guiones en sistemas propietarios . Se han consultado y utilizado librer\u00edas de funciones. Se han documentado los guiones creados.","title":"Power Shell"},{"location":"02_PowerShell/012_PowerShell.html#introduccion","text":"Los sistemas operativos basados en Microsoft Windows cuentan con la herramienta PowerShell , que surgi\u00f3 ante las carencias que presenta el viejo terminal basado en MS-DOS . PowerShell es una interfaz de consola (CLI) con posibilidad de escritura y uni\u00f3n de comandos por medio de instrucciones (scripts). Esta interfaz de consola est\u00e1 dise\u00f1ada para su uso por parte de administradores de sistemas , con el prop\u00f3sito de automatizar tareas o realizarlas de forma m\u00e1s controlada. En abril de 2006 Microsoft lanz\u00f3 una nueva interfaz CLI, con una sintaxis moderna que comparte similitudes con el lenguaje Perl. Perl es un lenguaje de programaci\u00f3n dise\u00f1ado por Larry Wall en 1987. Perl toma caracter\u00edsticas del lenguaje C, del lenguaje interpretado bourne shell, AWK, sed, Lisp y, en un grado inferior, de muchos otros lenguajes de programaci\u00f3n. Se trata de una interfaz gratuita, y que antes de Microsoft Windows 7 no se inclu\u00eda con el sistema operativo. En la actualidad, est\u00e1 incluida en todos los sistemas operativos de Microsoft, aunque requiere la presencia de .NET framework del que hereda sus caracter\u00edsticas orientadas a objetos. En agosto de 2016, Microsoft public\u00f3 su c\u00f3digo en GitHub para que pueda portarse a otros sistemas como GNU/Linux y MAC OSX. Los comandos incluidas en PowerShell reciben el nombre de cmdlets (command-let) y posee conjuntos espec\u00edficos para trabajar con Active Directory, Exchange , entre otros roles de servidor. Info cmdlets Existen cientos de cdmlet en la versi\u00f3n 5.1 de PowerShell. Es posible consultar la ayuda de cada uno de ellos en la p\u00e1gina oficial de Microsoft. Otra ventaja de PowerShell es que se dispone de la mayor\u00eda de comandos que del CLI tradicional de Microsoft. De ese modo, es posible ejecutar el comando dir en lugar del Get-ChildItem , cmdlet que realiza la misma tarea. En realidad lo que est\u00e1 usando es un alias del segundo para lanzar el primero. Dispone de autocompletado de comandos y par\u00e1metros que facilitar\u00e1 las tareas de creaci\u00f3n de scripts. Basta con comenzar a escribir un cmdlet y pulsarla tecla Tab. Si utilizamos PowerShell ISE al escribir aparecer\u00e1 una ventana con todos los cmdlets que coincidan con el texto escrito, incluso puede aparecer un recuadro con ayuda sobre su sintaxis. Para aceptar la sugerencia se pulsar la tecla Intro . Note Los nombres de todos los cmdlets est\u00e1n formados por un verbo, un gui\u00f3n y un nombre en singular. Habitualmente, se escribe con may\u00fasculas la primera letra de cada palabra, pero no se trata m\u00e1s que de una norma de estilo, porque PowerShell no distingue entre may\u00fasculas y min\u00fasculas.","title":"Introducci\u00f3n"},{"location":"02_PowerShell/012_PowerShell.html#primer-script","text":"Al igual que ocurre en GNU/Linux un script de PowerShell no es m\u00e1s que un archivo de texto plano que contiene una secuencia de comando y de cmdlets para realizar una tarea. La diferencia con ellos es que aqu\u00ed ser\u00e1 necesario dotarlos de una extensi\u00f3n; ps1 . Example Write-Host \"Hola!. Esto es mi primer script en PowerShell\" Write-Host \"Y esto es una segunda l\u00ednea\" A continuaci\u00f3n, se guarda el script desde el men\u00fa Acci\u00f3n \u2192 Guardar Como\u2026 asign\u00e1ndole un nombre. Para ejecutarlo tan s\u00f3lo es necesario escribir su nombre en el terminal de PowerShell anteponiendo un punto y una barra. Example ./Script.ps1 Aunque tambi\u00e9n es posible ejecutar el script desde la herramienta gr\u00e1fica pulsando la tecla F5 , ejecutar una parte de \u00e9l con F8 o detener la ejecuci\u00f3n con Ctrl+Intro .","title":"Primer Script"},{"location":"02_PowerShell/012_PowerShell.html#powershell-ise","text":"PowerShell viene acompa\u00f1ado de una herramienta gr\u00e1fica que facilita la administraci\u00f3n de todos los scripts. Se denomina Microsoft PowerShell ISE (Integrated Scripting Environment) , y se accede a trav\u00e9s de: Administrador del servidor \u2192 Herramientas \u2192 Windows PowerShell ISE . El uso de esta herramienta gr\u00e1fica va a facilitar la creaci\u00f3n de los scripts de forma significativa. Es pr\u00e1ctico comenzar con esta ayuda ya que la sintaxis de los cmdlets, aunque sea l\u00f3gica y sencilla, tambi\u00e9n lo es amplia y desconocida. Interfaz de la herramienta Windows PowerShell ISE Info Uno de los aspectos m\u00e1s interesantes que posee esta aplicaci\u00f3n es la barra de informaci\u00f3n que muestra un listado de todos los cmdlets de esta herramienta. Permite filtrarlos por funci\u00f3n y consultar la ayuda de cada uno de ellos. Tambi\u00e9n posee un formulario destinado a generar el c\u00f3digo de un cmdlet de forma autom\u00e1tica. Example Creaci\u00f3n de un comando que realice una copia de seguridad de los scripts de trabajo en una memoria externa. Es necesario el uso de Copy-Item para ello, pero no se conoce su sintaxis. Si escribimos este cmdlet en el recuadro Nombre y se pulsa sobre Mostrar Ayuda , aparecer\u00e1 un formulario con sus opciones. Tras completar las necesarias y pulsando el bot\u00f3n Insertar situado en la parte inferior, el c\u00f3digo completo ser\u00e1 escrito la parte destinada al terminal. Creaci\u00f3n autom\u00e1tica de scripts en Windows PowerShell ISE.","title":"PowerShell ISE"},{"location":"02_PowerShell/012_PowerShell.html#comentarios","text":"Note Los comentarios en PowerShell se realizan precediendo a la l\u00ednea con el car\u00e1cter # si se trata de una sola l\u00ednea y <# y #> si es multil\u00ednea.","title":"Comentarios"},{"location":"02_PowerShell/012_PowerShell.html#parametros-en-powershell","text":"Como ocurr\u00eda en GNU/Linux, los par\u00e1metros que reciba el script se deben recoger de forma interna en una variable para poder operar con ellos. Example param ([string]$nombre) Write-Host \"Hola!. Esto es mi primer script en PowerShell\" Write-Host \"Y esto es una segunda l\u00ednea\" Write-Host \"Hola de nuevo, tu nombre es $nombre\" Note El script anterior esperar\u00e1 un par\u00e1metro de tipo string que ser\u00e1 contenido en la variable nombre. En la cuarta l\u00ednea mostrar\u00e1 el contenido de la variable por pantalla. Para poder ejecutar este script, ser\u00e1 necesario acompa\u00f1arlo de un par\u00e1metro del siguiente modo. ./Script.ps1 \u201cF\u00ba Javier Hern\u00e1ndez Ill\u00e1n\u201d Para entender por completo el ejemplo anterior, ser\u00e1 necesario ver como PowerShell maneja las variables .","title":"Par\u00e1metros en PowerShell"},{"location":"02_PowerShell/012_PowerShell.html#variables","text":"Para definir una variable en PowerShell s\u00f3lo tenemos que nombrarla utilizando para ello cualquier combinaci\u00f3n de caracteres, ya sean n\u00fameros, letras o s\u00edmbolos. Es posible utilizar espacios en el nombre, aunque en este caso el nombre debe ir rodeado por s\u00edmbolos de llaves {} . Al contrario que ocurre en shellscript, PowerShell es fuertemente tipado , lo que significa que las variables no son tratadas como cadenas de texto, sino que hay que especificar el tipo de dato que se guardar\u00e1 en ella. Para definir variables es posible utilizar el m\u00e9todo expl\u00edcito (adem\u00e1s con New-Variable y sus opciones), pero tambi\u00e9n se puede utilizar el m\u00e9todo impl\u00edcito anteponiendo el s\u00edmbolo $ delante del nombre. Info Get-Variable En cualquier momento puedes obtener una lista completa de las variables que se hayan definido hasta ese momento. Para lograrlo, basta con utilizar Get- Variable.","title":"Variables"},{"location":"02_PowerShell/012_PowerShell.html#implicita","text":"Tipo Descripci\u00f3n [string] Cadena de caracteres Unicode [char] Un s\u00f3lo car\u00e1cter Unicode de 16 bits [byte] Un s\u00f3lo car\u00e1cter Unicode de 8 bits [int] Entero con signo de 32 bits [float] N\u00famero con coma flotante de 32 bits [double] N\u00famero con coma flotante de 64 bits [datetime] Fecha y Hora [bool] Valor l\u00f3gico booleano Example $numero = 9.99 $Final_2021 = 30 ${Mi variable} = \u201cContiene espacios en el nombre\u201d En la forma implicita el shell establece el tipo de dato de la variable en funci\u00f3n del dato que se le asigne en su creaci\u00f3n. En el ejemplo anterior $numero es de forma autom\u00e1tica de tipo [double] , ya que al crearla se ha inicializado con un n\u00famero con decimales. Por contra la variable $Final_2021 es de tipo [int] ya que se ha guardado un n\u00famero entero en ella. Info GetType Para poder obtener el tipo de dato de una variable hay que usar el m\u00e9todo GetType().Name sobre cualquier variable: Write-Host $feo.GetType().Name. Tip Una variable cuya definici\u00f3n de tipo se ha realizado de forma impl\u00edcita, podr\u00e1 cambiar el tipo de dato almacenado durante la ejecuci\u00f3n del programa sin experimentar ning\u00fan tipo de error. Esta pr\u00e1ctica aunque c\u00f3moda no es muy recomendable .","title":"Implicita"},{"location":"02_PowerShell/012_PowerShell.html#explicita","text":"Es buena idea tomar el control del tipado de las variables y asignarlo en funci\u00f3n de las necesidades del programa. De esta forma se ahorrar\u00e1n futuras conversiones de datos y posibles p\u00e9rdidas de informaci\u00f3n. Para ello se usa la forma expl\u00edcita de crear variables y junto con su creaci\u00f3n se define el tipo de dato que va a contener. Example [ float ] $numero = 9.99 [int] $Final_2021 = 30 [string] ${Mi variable} = \u201cContiene espacios en el nombre\u201d Al contrario que en el caso anterior, cuando el dato asignado no coincida con el tipo esperado, pueden ocurrir dos cosas: que las caracter\u00edsticas del dato se modifiquen para amoldarse al tipo de variable, lo que puede traducirse en la p\u00e9rdida de datos y un mal funcionamiento del script, o que se producir\u00e1 un error si esa conversi\u00f3n no es posible y se detenga el script.","title":"Explicita"},{"location":"02_PowerShell/012_PowerShell.html#interaccion-con-el-usuario","text":"PowerShell posee dos cmdlets para realizar estas tareas. El primero de ellos es Write-Host y tiene un comportamiento similar al echo en GNU/Linux. El segundo comando para interactuar con el usuario es Read-Host el cual permite imprimir un mensaje por el terminal y recoger aquello que el usuario ha escrito. Funciona de forma muy parecida al comando read en el terminal de GNU/Linux. [ string ] $feo = Read-Host \u201c\u00bfCu\u00e1l es el nombre del marine de Doom?\u201d Write-Host \u201cNo se sabe, pero lo has intentado con $feo\u201d Note Este script detendr\u00e1 su ejecuci\u00f3n en la l\u00ednea donde aparece Read-Host , esperar\u00e1 a que el usuario conteste a la pregunta y seguir\u00e1 con la ejecuci\u00f3n, del mismo modo que ocurre con shellscript.","title":"Interacci\u00f3n con el usuario"},{"location":"02_PowerShell/012_PowerShell.html#operadores","text":"","title":"Operadores"},{"location":"02_PowerShell/012_PowerShell.html#aritmeticos","text":"Las operaciones aritm\u00e9ticas en PowerShell son m\u00e1s intuitivas que en shellscript. Son las mismas que en el caso anterior: + , - , * , / y % . Su uso es m\u00e1s sencillo puesto que es el propio terminal en que realiza los c\u00e1lculos aritm\u00e9ticos y no a trav\u00e9s de un comando. [ int ] $a=10 [float] $b=20 [int] $res=$a+$b Write-Host $res Write-Host $a+$b Write-Host \"$a x $b = \" ($a*$b) Tambi\u00e9n se dispone de expansores de terminal como en GNU/Linux. Note N\u00f3tese que en la \u00faltima l\u00ednea aparece directamente el producto $a*$b ya que al rodear la operaci\u00f3n con par\u00e9ntesis, se convierte en un expansor, realiza la operaci\u00f3n en su interior y env\u00eda el resultado fuera. Existen variantes que simplifican el uso de algunos operadores. Operador Uso Equivalencia += $contador += 5 $contador = $contador+5 -= $contador -= 5 $contador = $contador-5 *= $contador *= 5 $contador = $contador*5 /= $contador /= 5 $contador = $contador/5 Adem\u00e1s de estos operadores existen dos espec\u00edficos para el incremento ( ++ ) y decremento ( -- ) de una unidad, ideal para el uso de variables como contadores.","title":"Aritm\u00e9ticos"},{"location":"02_PowerShell/012_PowerShell.html#logicos","text":"Operador Descripci\u00f3n -and Devuelve verdadero si las dos expresiones son verdaderas. -or Devuelve verdadero si una de las dos expresiones o las dos son verdaderas. -xor Devuelve verdadero si tan s\u00f3lo una de las expresiones es verdadera. -not o ! Devuelve verdadero cuando la expresi\u00f3n da el valor falso. Example Write-Host ((6 -ge 4) -and (7 -le 7)) Write-Host ((10 -gt 1) -or (2 -lt 2)) Write-Host ((1 -gt 0) -xor (4 -le 1)) Write-Host ( -not (12 -lt 10)) Write-Host (!(12 -lt 10)) Note En el ejemplo anterior si se ejecuta el script en un terminal PowerShell, todos los resultados ser\u00e1n verdaderos. Como en todos los lenguajes de programaci\u00f3n fuertemente tipados, existen operadores l\u00f3gicos para comprobar el tipo de dato de una variable, que resultan muy \u00fatiles para la interacci\u00f3n con los usuarios. Operador Acci\u00f3n Ejemplo -is Devuelve verdadero si es del tipo indicado. \u201cJavi\u201d -is [string] es verdadero -isnot Devuelve falso si es del tipo indicado. \u201cJavi\u201d -isnot [string] es falso -as Convierte tipos de datos compatibles. $valor = 19.90 ; Write-Host ($valor -as [int])","title":"L\u00f3gicos"},{"location":"02_PowerShell/012_PowerShell.html#comparacion","text":"los operadores tipo l\u00f3gicos devuelven tan s\u00f3lo un valor booleano que puede tener dos valores; verdadero o falso . Operador Acci\u00f3n Ejemplo -eq Comprueba si son iguales. 5 -eq 3 es falso -ieq Iguales. En cadenas no es casesensitive. \u201cJavi\u201d -ieq \u201cjavi\u201d es verdadero -ceq Iguales. En cadenas es casesensitive. \u201cJavi\u201d -ceq \u201cjavi\u201d es falso -ne Verifica si son diferentes. 5 -ne 3 es verdadero -lt Coteja si la izquierda es menor que derecha. 5 -lt 3 es falso -le Constata si la izquierda es menor o igual que derecha. 5 -le 3 es falso -gt Examina si la izquierda en mayor que la derecha. 5 -gt 3 es verdadero -ge Revisa si la izquierda en mayor o igual que la derecha. 5 -ge 3 es verdadero PowerShell a\u00f1ade operadores de comparaci\u00f3n que aportan un nivel de complejidad mayor. Operador Acci\u00f3n Ejemplo -like Eval\u00faa un patr\u00f3n \u201ces como\u201d. \u201cPerro\u201d -like \u201cPe*\u201d es verdadero -notlike Eval\u00faa un patr\u00f3n \u201cno es como\u201d. \u201cPerro\u201d -notlike \u201cPe*\u201d es falso -contains Contiene un valor. 1,2,3 -contains 2 es verdadero -notcontains No contiene un valor. 1,2,3 -notcontains 2 es falso","title":"Comparaci\u00f3n"},{"location":"02_PowerShell/012_PowerShell.html#control-del-flujo-en-powershell","text":"En esta parte se indicar\u00e1 tan s\u00f3lo la sintaxis de las estructuras alternativas e iterativas, ya que los conceptos te\u00f3ricos ya se han abordado en el apartado de Shellscript.","title":"Control del flujo en PowerShell"},{"location":"02_PowerShell/012_PowerShell.html#alternativa-simple","text":"if ( condici\u00f3n ){ ejecutar este c\u00f3digo si la condici\u00f3n es verdadera }","title":"Alternativa Simple"},{"location":"02_PowerShell/012_PowerShell.html#alternativa-doble","text":"if ( condici\u00f3n ) { ejecutar este c\u00f3digo si la condici\u00f3n es verdadera } else { ejecutar este c\u00f3digo si la condici\u00f3n es falsa }","title":"Alternativa doble"},{"location":"02_PowerShell/012_PowerShell.html#alternativa-multiple","text":"if ( condici\u00f3n1 ) { ejecutar este c\u00f3digo si la condici\u00f3n1 es verdadera } elseif ( condici\u00f3n2 ) { ejecutar este c\u00f3digo si la condici\u00f3n2 es verdadera } else { ejecutar este c\u00f3digo si todas las condiciones son falsas }","title":"Alternativa m\u00faltiple"},{"location":"02_PowerShell/012_PowerShell.html#el-equivalente-a-case-en-gnulinux","text":"switch ($valor){ opci\u00f3n1 { c\u00f3digo a ejecutar si opci\u00f3n1 coincide con $valor } opci\u00f3n2 { c\u00f3digo a ejecutar si opci\u00f3n2 coincide con $valor } opci\u00f3nN { c\u00f3digo a ejecutar si opci\u00f3nN coincide con $valor } default { c\u00f3digo a ejecutar si ninguna de las opciones coincide } } Example $saludo = Read-Host \"Escribe un saludo\" switch ($saludo){ \"Buenos d\u00edas\" { Write-Host \"Saludaste en Castellano\" } \"Bon dia\" { Write-Host \"Saludaste en Catal\u00e1n\" } \"Bo dias\" { Write-Host \"Saludaste en Gallego\" } \"Egun on\" { Write-Host \"Saludaste en Euskera\" } \"Good morning\" { Write-Host \"Saludaste en Ingl\u00e9s\" } \"Bonjour\" { Write-Host \"Saludaste en Franc\u00e9s\" } \"Buon Giorno\" { Write-Host \"Saludaste en Italiano\" } \"Bom d\u00eda\" { Write-Host \"Saludaste en Portugu\u00e9s\" } \"Guten Tag\" { Write-Host \"Saludaste en Alem\u00e1n\" } {$_ -is [string]} { Write Host \"La variable que has pasado es una cadena\" } default { \"Eso no parece un saludo\" } } Note Existe la posibilidad de colocar operadores l\u00f3gicos como opciones de un switch , si estos operadores l\u00f3gicos devuelven un valor verdadero, se ejecutar\u00e1 esa parte del c\u00f3digo, si se eval\u00faa a falso, no realizar\u00e1 esa parte del c\u00f3digo. El car\u00e1cter $_ hace referencia a la variable $saludo, de ese modo es posible realizar operaciones l\u00f3gicas con el valor pasado. Adem\u00e1s de todo esto, switch posee una serie de opciones que no est\u00e1n presentes en GNU/Linux, aunque es posible realizarlas de otra manera. Operador Descripci\u00f3n -wildcard S\u00f3lo aplicable a [string] . Indica si cumple un patr\u00f3n determinado. -exact S\u00f3lo aplicable a [string] . Debe coincidir exactamente con alguno de los patrones. -casesensitive S\u00f3lo aplicable a [string] . Debe coincidir en may\u00fasculas y min\u00fasculas. -file La entrada es un archivo. Se evaluar\u00e1 cada l\u00ednea del archivo. -regex S\u00f3lo aplicable a [string] . Permite usar expresiones regulares en la comparaci\u00f3n. Example -regex $target = 'https://bing.com' switch -Regex ($target){ '^ftp\\://.*$' { \"$_ is an ftp address\"; Break } '^\\w+@\\w+\\.com|edu|org$' { \"$_ is an email address\"; Break } '^(http[s]?)\\://.*$' { \"$_ is a web address that uses $($matches[1])\"; Break } } Example -wildcard switch -wildcard ( Read-Host \"Escribe u n\u00famero de tel\u00e9fono\" ){ \"8*\" { Write-Host \"Es un tel\u00e9fono fijo : $_\"; break } \"9*\" { Write-Host \"Es un tel\u00e9fono fijo : $_\"; break } \"6*\" { Write-Host \"Es un tel\u00e9fono m\u00f3vil : $_\"; break } default { \"$_ no parece un tel\u00e9fono\" } } El comando break que aparece al final de cada opci\u00f3n indica que si encuentra una coincidencia no siga buscando m\u00e1s y rompa el switch, ahorr\u00e1ndose as\u00ed el resto de comprobaciones.","title":"El equivalente a case en GNU/Linux"},{"location":"02_PowerShell/012_PowerShell.html#estructuras-iterativas","text":"","title":"Estructuras iterativas"},{"location":"02_PowerShell/012_PowerShell.html#vectores","text":"PowerShell considera como un vector a toda colecci\u00f3n de objetos, sea cual sea su tipo. Los elementos que lo conforman pueden estar separados por comas, estar expresados por el operador de rango .. o ser el resultado de alguna expresi\u00f3n que devuelva una colecci\u00f3n, como as\u00ed lo hacen muchos cmdlets. Example $Vacia = @{} $Enteros = 1,2,3,4,5 $Texto = \u201cLunes\u201d,\u201cMartes\u201d,\u201dMi\u00e9rcoles\u201d, \u201cJueves\u201d,\u201dViernes\u201d $EnterosRango = 1..10 De esta forma se han definido cuatro vectores; el segundo contendr\u00e1 enteros y el tercero cadenas de caracteres. La \u00faltima l\u00ednea asigna los valores desde el 1 al 10 utilizando el operador rango .. . Note El operador de rango representa una secuencia de enteros, con los l\u00edmites superior e inferior separados por dos puntos decimales. Permite expresar el rango en orden ascendente o descendente, as\u00ed como tambi\u00e9n que los l\u00edmites inferior o superior sean establecidos por medio de variables que contengan enteros. Un vector tambi\u00e9n puede definirse como el resultado de una expresi\u00f3n. Example $EnterosFor = @(For($i;$i < 5;$i++){$i}) $Comando = Get-Process | Sort-Object ProcessName En la primera l\u00ednea $enteros ser\u00e1 completado a trav\u00e9s del resultado de una estructura iterativa, mientras que la segunda contendr\u00e1 el resultado del cmdlet indicado. Adem\u00e1s de todas estas formas de declaraci\u00f3n, tambi\u00e9n se puede realizar a trav\u00e9s del cmdlet New-Variable Example New-Variable -Name Enteros -Value 1,2,3,4,5 -Force New-Variable -Name Texto -Value \"Lunes\",\"Martes\",\"Mi\u00e9rcoles\",\"Jueves\",\"Viernes\" \u2013Force New-Variable -Name EnterosRango -Value (1..5) -Force New-Variable -Name EnterosFor -value (. {For($i=1;$i -lt 5;$i++){$i}}) -Force Note El atributo -Force sobrescribe la variable si esta ya existe, de ese modo no saltar\u00e1 ning\u00fan error a la hora de definir estas variables. Para obtener el n\u00famero de elementos de un vector se utiliza el m\u00e9todo Length, si se aplica a un elemento del vector, devolver\u00e1 el tama\u00f1o de este elemento, no del vector completo. Example $Texto.Length # mostrar\u00e1 5 por pantalla $Texto[2].Length # mostrar\u00e1 9, las letras de \u201cMi\u00e9rcoles\u201d Para a\u00f1adir elementos al final de un vector se utiliza el operador += . Example $Enteros += 6 $Texto += \u201cS\u00e1bado\u201d, \u201cDomingo\u201d Note La primera l\u00ednea a\u00f1ade el entero 6 al vector $Enteros , mientras que en la segunda se a\u00f1aden los elementos \u201cS\u00e1bado\u201d y \u201cDomingo\u201d al vector $Texto . Para eliminar un elemento de un vector PowerShell no ofrece un sistema parecido al de a\u00f1adir valores, sino que tendr\u00e1 que reescribirse el vector de nuevo sin los valores no deseados.","title":"Vectores"},{"location":"02_PowerShell/012_PowerShell.html#funciones","text":"Tambi\u00e9n en PowerShell es posible utilizar funciones a trav\u00e9s de la siguiente estructura: Function <NOMBRE> { Param (<Parametro>,<Parametro>,...) Comandos PowerShell } Warning El paso de par\u00e1metros a una funci\u00f3n se realiza de id\u00e9ntica forma que en shell script. La principal diferencia entre las funciones usadas en shell script es que ahora es preferible declarar y tipar antes de iniciar con el c\u00f3digo de la funci\u00f3n. Example Function Get-Sumar { param ([integer] $a, [integer] $b) $sumar = $a + $b Write-Host \u201cLa suma es $sumar\u201d } Note Si se ejecuta la siguiente instrucci\u00f3n: Get-Sumar 2 8 La salida del terminal ser\u00e1 La suma es 10 . Si se necesita que las funciones est\u00e9n disponibles durante la sesi\u00f3n del usuario o si es necesario enlazarlas desde otro script, se deber\u00e1 utilizar la notaci\u00f3n de punto, del mismo modo que ocurr\u00eda en shell script.","title":"Funciones"},{"location":"02_PowerShell/012_PowerShell.html#actividades-powershell","text":"Note Escribe el c\u00f3digo de los scripts en PowerShell que se detallan en cada ejercicio. Deber\u00e1s crear un fichero de texto para cada ejercicio con el siguiente nombre: ejXXX.sh, donde las X representan el n\u00famero de ejercicio. Una vez terminada la pr\u00e1ctica, comprime todos estos ficheros en uno y s\u00fabelos al Moodle.","title":"Actividades PowerShell"},{"location":"02_PowerShell/012_PowerShell.html#actividades-iniciales-powershell","text":"Genera un Script que muestre los procesos del sistema ordenados por el id . Muestra los servicios cuyo nombre empiece por la letra n , utilizando la creaci\u00f3n de un script. Crea un script que si no se le pasa ning\u00fan argumento nos lo diga.","title":"Actividades Iniciales PowerShell"},{"location":"02_PowerShell/012_PowerShell.html#actividades-de-desarrollo-ud1_04","text":"Dise\u00f1a un script PowerShell que pida al usuario dos n\u00famero (comprobando que sean n\u00fameros) y muestre por pantalla el mayor de ellos o si son iguales. Crea un script PowerShell que al ejecutarlo muestre por pantalla uno de estos mensajes \u201cBuenos d\u00edas\u201d , \u201cBuenas tardes\u201d o \u201cBuenas noches\u201d , en funci\u00f3n de la hora que sea en el sistema (de 8:00 de la ma\u00f1ana a 15:00 ser\u00e1 ma\u00f1ana, de 15:00 a 20:00 ser\u00e1 tarde y el resto ser\u00e1 noche). Usa el cmdlet Get-Date . Construye tres script PowerShell utilizando estructuras iterativas: el primero ej118A.ps1 , que imprima la tabla de multiplicar de un n\u00famero preguntado al usuario. Este n\u00famero debe ser entero positivo. el segundo ej118B.ps1 , que pida un n\u00famero e indique si se trata de un n\u00famero par y si es n\u00famero primo. el tercero ej118C.ps1 , que muestre las diez primeras tablas de multiplicar por pantalla. Hay un tiempo de espera de un segundo entre ellas. Utiliza las estructuras while, do while, for y foreach y el cmdlet Start-Sleep. Dise\u00f1a un script PowerShell que lea un vector con 365 temperaturas y calcule la media y cuantos d\u00edas han estado por encima y cuantos por debajo de ella. Rellena el vector con valores aleatorios entre -5 y 35, para ello usa Get-Random.","title":"Actividades de desarrollo UD1_04"},{"location":"02_PowerShell/012_PowerShell.html#actividades-de-desarrollo-ud1_05","text":"Crea un script PowerShell que rellene un vector con diez n\u00fameros de forma aleatoria y que los muestre por pantalla de la siguiente forma: en orden inverso a como han sido introducidos los valores. los valores ordenados de menor a mayor en una sola l\u00ednea. los valores ordenados de mayor a menor en una sola l\u00ednea la suma total de sus valores. cantidad de valores pares que contiene el vector. la suma total de n\u00fameros impares. la media aritm\u00e9tica de los valores que contiene el vector. Crea un script PowerShell para que haga una copias de seguridad de todos los archivos del directorio de trabajo del usuario actual. Deber\u00e1 realizar las siguientes acciones: comprobar\u00e1 si el archivo ya existe en la copia de seguridad, si es as\u00ed comprobar\u00e1 cual de los dos es m\u00e1s reciente y que tama\u00f1o tienen. Si es m\u00e1s reciente o posee un tama\u00f1o mayor, lo copiar\u00e1. En cualquier otro caso, no lo copia. llevar\u00e1 un registro de todos los archivos copiados cada vez que se ejecute mediante un archivo de bit\u00e1cora. Guarda este fichero el directorio que contiene el script. Crea una funci\u00f3n para cada tarea realizada en este script. Dise\u00f1a un script PowerShell que muestre un men\u00fa al usuario con cuatro operaciones disponibles: Crear directorio, Eliminar directorio, Mostrar directorio, Informe de directorio, Copia de directorio y Salir . Una vez elegida una opci\u00f3n correcta, el programa debe solicitar un nombre de directorio y hacer la operaci\u00f3n seleccionada. Tras esto debe mostrar un mensaje con el resultado de la operaci\u00f3n. Crea una funci\u00f3n para cada una de estas opciones. Si se elige la opci\u00f3n Informe de directorio , mostrar\u00e1 por pantalla el n\u00famero de ficheros que contiene, cuantos son carpetas, cuantos directorios y el tama\u00f1o total de ellos. Si la carpeta no existe, mostrar\u00e1 un error. Si elige la opci\u00f3n Copia de directorio , preguntar\u00e1 la carpeta de destino y mostrar\u00e1 fichero a fichero la copia. Realiza un script PowerShell que permita crear un informe de las IP libres en la red en la que se encuentra el equipo. Debe contener las siguientes opciones: el informe contendr\u00e1 un listado de todas las IP de la red a la que pertenece el equipo indicando si est\u00e1 libre o no (usa el comando ping). en el informe debe aparecer el tipo de red (A, B o C) en el que est\u00e1 inmerso el ordenador con el nombre de la red, su broadcast y su m\u00e1scara de subred.","title":"Actividades de desarrollo UD1_05"},{"location":"Practica14/Practica14_ImpWinServ.html","text":"Opciones avanzadas de Impresi\u00f3n La pesta\u00f1a 'Opciones Avanzadas' nos permite configurar aspectos relacionados con la gesti\u00f3n de los trabajos de impresi\u00f3n: Opciones avanzadas de impresi\u00f3n Aunque las opciones son bastante autoexplicativas, repasaremos las m\u00e1s interesantes desde el punto de vista de la administraci\u00f3n de una red: Disponible desde...: Permite establecer unos periodos de utilizaci\u00f3n del dispositivo de impresi\u00f3n. Prioridad: Asigna un nivel de prioridad en los trabajos de impresi\u00f3n, siendo el 1 el valor que indica menor prioridad. Esta opci\u00f3n es especialmente \u00fatil cuando tenemos varias impresoras l\u00f3gicas apuntando al mismo dispositivo f\u00edsico y queremos que la prioridad de cada impresora l\u00f3gica sea diferente. Controlador: nos permite modificar el controlador de la impresora. Imprimir usando la cola para que el programa termine m\u00e1s r\u00e1pido: Al realizar la impresi\u00f3n de un documento largo, en primer lugar el equipo lo convierte al lenguaje de la impresora, y a continuaci\u00f3n env\u00eda p\u00e1gina por p\u00e1gina de acuerdo a la velocidad del dispositivo de impresi\u00f3n. La colocaci\u00f3n en cola de impresi\u00f3n de un documento permite enviar el documento en segundo plano para que el resto de aplicaciones puedan seguir trabajando con normalidad. Sin embargo, la opci\u00f3n 'Imprimir directamente en la impresora' requiere que el sistema espere hasta que la impresi\u00f3n haya terminado para seguir trabajando con la aplicaci\u00f3n que envi\u00f3 el trabajo de impresi\u00f3n. Existen dos opciones en 'Imprimir usando la cola para que el programa termine m\u00e1s r\u00e1pido': 1. Iniciar la impresi\u00f3n al entrar la \u00faltima p\u00e1gina en la cola: permite no empezar a imprimir hasta el momento en que todo el documento est\u00e9 en la cola, lo que podr\u00eda ser \u00fatil cuando los trabajos de impresi\u00f3n requieren la interacci\u00f3n del usuario. 1. Empezar a imprimir de inmediato: Los clientes tratan parcialmente el documento antes de enviarlo a la impresora l\u00f3gica. En el momento en el que hay espacio en la cola remota del servidor, el documento es enviado y tratado completamente. Se coloca entonces en espera antes de ser dirigido hacia un dispositivo de impresi\u00f3n Imprimir primero los documentos de la cola de impresi\u00f3n: En este caso la prioridad ya no se basa \u00fanicamente en el grado de prioridad proporcionado expl\u00edcitamente; el documento que haya entrado en la cola de impresi\u00f3n tendr\u00e1 una prioridad superior frente al que acceda posteriormente (incluso si el nuevo documento dispone de un nivel de prioridad m\u00e1s alto). Conservar los documentos despu\u00e9s de su impresi\u00f3n: Esta opci\u00f3n permite mantener en el administrador de impresi\u00f3n los trabajos impresos. Si no se selecciona esta opci\u00f3n, el documento una vez impreso se elimina de la cola de impresi\u00f3n. Habilitar caracter\u00edsticas de impresi\u00f3n avanzadas: Permite modificar aspectos como el n\u00famero de p\u00e1ginas a imprimir por hoja, el orden de las mismas, etc. Actividades Actividad 1 En esta actividad instalaremos una impresora en el controlador de dominio y la compartiremos y administraremos en red, como hemos visto en los diferentes apartados de este tema. La principal diferencia con lo visto hasta ahora consiste en que la impresora que 'conectaremos' al servidor ser\u00e1 una impresora pdf, por lo que con el instalable se crear\u00e1 el puerto de impresora y se instalar\u00e1n los drivers necesarios de una manera pr\u00e1cticamente trasparente para nosotros. En primer lugar instalaremos la impresora pdf. La descargaremos de aqu\u00ed (es una versi\u00f3n antigua, pero funciona en modo servidor, las nuevas versiones no) y la instalaremos con las opciones por defecto pero en modo servidor. Compartiremos la impresora en red (desde el Administrador de Impresi\u00f3n) para que los usuarios de dominio tengan permiso de impresi\u00f3n. Crearemos una GPO en el dominio pero que solo aplicaremos al grupo (no a la UO) Ventas de nuestra organizaci\u00f3n de Empresa Configura la impresora pdf para que se despliegue autom\u00e1ticamente en todos los usuarios del grupo Ventas (utiliza la GPO que hemos creado en el punto anterior). Crea un documento de texto en un equipo cliente al que has accedido con un miembro del grupo Ventas. Desde el bloc de notas (notepad) imprime (en la impresora pdf que est\u00e1 albergada en el servidor y que debe aparecer autom\u00e1ticamente a los miembros de Ventas) el fichero que acabas de generar. Inicia sesi\u00f3n con un usuario que no pertenezca a Ventas y comprueba que no aparece la impresora pdf en las opciones de impresi\u00f3n. Adjunta las capturas de pantalla describiendo el proceso, en especial las correspondientes a los puntos 4, 5, 7 y 8. Instalaci\u00f3n de la Impresora PDFCreator Para realizar la instalaci\u00f3n de la impresora PDFCreator, vamos a utilizar el instalador que se encuentra en el siguiente enlace . A continuaci\u00f3n har\u00e9 una breve gu\u00eda de c\u00f3mo realizar la instalaci\u00f3n, ya que es una versi\u00f3n un poco m\u00e1s antigua que la hay ahora disponible, pero esta ofrece la posibilidad de hacer una instalaci\u00f3n en modo servidor. Tambi\u00e9n mostrar\u00e9 el objetivo final de la actividad sobre un usuario de ventas de la organizaci\u00f3n Pistonazo. Iniciaremos el asistente de instalaci\u00f3n sin descargar la nueva versi\u00f3n: Instalaci\u00f3n de PDFCreator Activaremos la instalaci\u00f3n modo experto: Activar modo experto Seleccionaremos la instalaci\u00f3n modo servidor: Instalaci\u00f3n modo servidor Impresora PDFCreator La siguiente pantalla nos permite seleccionar los controladores para m\u00e1quinas con arquitecturas en 32 bits, en nuestro caso no tenemos ninguna, pero si se diera el caso, podr\u00edamos imprimir tambi\u00e9n con los controladores de 32 bits. Selecci\u00f3n de controladores 32 bits A continuaci\u00f3n podemos seleccionar un Visor PDF que va con el programa de instalaci\u00f3n, PDFArchitect... Si quisierais ver los PDFs generados pod\u00e9is marcar la opci\u00f3n. Componente adicionales y procedemos a la instalaci\u00f3n: Instalaci\u00f3n de PDFCreator Como todos los programas free, siempre a\u00f1aden alg\u00fan programa adicional... seleccionaremos Saltar... para que no instale nada m\u00e1s: No instalar programas adicionales Una vez instalado, nos aparecer\u00e1 un icono en el escritorio. Ahora lo que vamos a hacer es configurar las opciones de autoguardado de los documentos PDF, para que de manera autom\u00e1tica guarde los documentos en los directorios de las carpetas particulares de los usuarios: Configurar opciones Y seleccionar autoguardado: Configurar autoguardado Activaremos la casilla de autoguardado y configuraremos el directorio donde queremos que se guarden los documentos, para el caso de la empresa Pistonazo, este directorio ser\u00e1 \"\\192.168.100.1\\Pistonazo_users$\\ \\PDF\". De esta forma cuando se imprima un documento en PDF desde una m\u00e1quina cliente, se generar\u00e1 de manera autom\u00e1tica ese documento en su carpeta personal, dentro de un directorio PDF. Tras configurar las opciones de las GPOs y las propiedades de la impresora creada, si iniciamos sesi\u00f3n con un usuario nos aparecer\u00e1 la impresora PDFCreator: Impresi\u00f3n en PDFCreator Por \u00faltimo veremos c\u00f3mo se ha generado el nuevo documento en el directorio PDF de la carpeta personal: Impresi\u00f3n de documentos PDF El objetivo es que se configure la impresora para nuestra organizaci\u00f3n y para el grupo de Ventas. Inici\u00e9is sesi\u00f3n y comprob\u00e9is los resultados. Obra publicada con Licencia Creative Commons Reconocimiento Compartir igual 4.0","title":"Practica14 ImpWinServ"},{"location":"Practicas/Practica12_RemoteAppTS.html","text":"Pr\u00e1ctica 12 RemoteApp y Escritorio Remoto \u00b6 Para esta pr\u00e1ctica vamos a instalar un servidor miembro dentro del dominio realizado en el tema2 para Active Directory y este servidor ser\u00e1 el equipo donde instalaremos los servicios de RemoteApp y de Terminal Server. Para poner en marcha el servicio RemoteAPP , es necesario configurar el servidor Terminal Services lo que est\u00e1 completamente desaconsejado en un controlador de dominio. El motivo de esta separaci\u00f3n f\u00edsica entre el controlador de dominio y el servidor de aplicaciones reside en que: Los usuarios del dominio deben poder iniciar sesi\u00f3n en el servidor de aplicaciones para poder ponerlas en marcha, lo cual est\u00e1 completamente desaconsejado en el controlador de domino, ya que en este \u00faltimo se gestionan aspectos de seguridad y autenticaci\u00f3n, demasiado sensibles como para permitir a cualquier usuario del dominio iniciar sesi\u00f3n en \u00e9l. El consumo de recursos que provoca la ejecuci\u00f3n remota de las aplicaciones puede entorpecer el correcto funcionamiento del controlador de dominio: recordad que este puede tener numerosos servicios ejecut\u00e1ndose (AD, DNS, DHCP, servidor de impresi\u00f3n, VPN, etc.) De esta manera, el esquema de red propuesto, ser\u00eda como el de la siguiente figura, donde un equipo servidor realiza las tareas de controlador de dominio, y otro equipo servidor realiza las tareas de servidor de aplicaciones: Estructura de red propuesta Instalaci\u00f3n y validaci\u00f3n en el dominio del Servidor de Aplicaciones \u00b6 Crearemos otra m\u00e1quina virtual con otro sistema Windows 2019 Server y validaremos esta m\u00e1quina en el dominio CEFIRE2019.LOCAL (o el dominio utilizado en la pr\u00e1ctica Instalaci\u00f3n Active Directory I en el tema 2.3): Instalaci\u00f3n y validaci\u00f3n de un servidor miembro Si ahora accedemos al controlador de dominio, vemos que en Usuarios y Equipos de Active Directory, en la secci\u00f3n de Computers habr\u00e1 a\u00f1adido el nuevo servidor miembro: AppServer validado en dominio Instalaci\u00f3n de RemoteApp y Servicios de Escritorio Remoto \u00b6 Instalaci\u00f3n de RemoteApp \u00b6 Para instalar RemoteApp , vamos a iniciar sesi\u00f3n como Administrador del dominio en el servidor miembro que hemos instalado, en nuestro APPSERVER . Desde el Panel del Administrador haremos clic en Agregar Roles y Caracter\u00edsticas: Agregar roles y caracter\u00edsticas en APPSERVER Despu\u00e9s seleccionaremos el tipo de instalaci\u00f3n de Servicios de Escritorio Remoto : Instalaci\u00f3n de Servicios de Escritorio Remoto Despu\u00e9s seleccionaremos la implementaci\u00f3n de Servicios de Escritorio Remoto , en nuestro caso, seleccionaremos la opci\u00f3n de Inicio R\u00e1pido que para la publicaci\u00f3n de aplicaciones RemoteApp es suficiente. Selecci\u00f3n del tipo de implementaci\u00f3n Seleccionada la opci\u00f3n de Inicio R\u00e1pido , seleccionaremos la implementaci\u00f3n de escritorio basado en sesi\u00f3n, para que los clientes puedan acceder a los programas que luego publicaremos en RemoteApp: Implementaci\u00f3n basada en sesi\u00f3n Seleccionaremos nuestro servidor para que inicie el agente de RemoteApp : Seleccionamos APPSERVER Y por \u00faltimo hacemos clic en Implementar: Realizar la instalaci\u00f3n Proceso de instalaci\u00f3n El proceso reiniciar\u00e1 y finalmente tendremos los Servicios de Escritorio Remoto instalado en el panel del administrador: Proceso de instalaci\u00f3n II Servicios de Escritorio Remoto Publicar programas en RemoteApp \u00b6 Ahora que ya hemos finalizado la instalaci\u00f3n del RemoteApp y Escritorio Remoto , ya podemos configurar y poner en marcha el servidor de aplicaciones. Para ello, accederemos al Panel del Administrador: Acceso a RemoteApp En la siguiente figura vemos la pantalla principal donde podemos publicar los programas que estar\u00e1n disponibles en nuestro servidor de aplicaciones. Servicios de escritorio remoto Desde la p\u00e1gina principal podemos acceder a la colecci\u00f3n que hemos creado tras la instalaci\u00f3n. Esta es la implementaci\u00f3n m\u00e1s b\u00e1sica que se puede realizar sobre un servidor de aplicaciones. Se podr\u00eda tener m\u00e1s servidores y configurarlos para que repartiera cargas en funci\u00f3n de las aplicaciones y de los usuarios conectados, pero esto ya entrar\u00eda a formar parte de aspectos m\u00e1s avanzados. Accedemos pues la pantalla principal: Pantalla principal servicios de Escritorio Remoto Como vemos los programas que se publican por defecto son la Calculadora, Paint y WordPad. Veremos m\u00e1s adelante c\u00f3mo podemos agregar y organizar los programas que queremos publicar. Conexi\u00f3n al acceso Web del Escritorio Remoto \u00b6 Desde la sesi\u00f3n del administrador podemos iniciar sesi\u00f3n a trav\u00e9s de un navegador a la direcci\u00f3n https://appserver/rdweb . Nos mostrar\u00e1 unos avisos de que hay un problema con el certificado ya que no lo puede comprobar. Pasaremos por alto esta advertencia y accederemos a la pantalla de login del RDWeb. Iniciaremos sesi\u00f3n con el Administrador. Acceso web a RemoteApp Pantalla de login de RDWeb Al iniciar sesi\u00f3n podemos ver las aplicaciones publicadas por defecto: Aplicaciones publicadas Podemos iniciar cualquier aplicaci\u00f3n publicada, por ejemplo, seleccionamos WordPad y esta aplicaci\u00f3n se ejecutar\u00e1 en el servidor APPSERVER: Iniciar una aplicaci\u00f3n publicada Iniciar WordPad Desde la sesi\u00f3n de Administrador tambi\u00e9n podemos iniciar escritorio remoto: Acceso remoto web Publicar programas \u00b6 Podemos tambi\u00e9n a\u00f1adir m\u00e1s programas para publicar en nuestro servidor de aplicaciones. Por ejemplo, vamos a descargar en nuestro servidor el LibreOffice y vamos a agregar la suite LibreOffice a RemoteApp. Para ello descargaremos primero la suite LibreOffice: Descarga LibreOffice Instalaci\u00f3n de LibreOffice Instalaci\u00f3n de LibreOffice II Ahora vamos a publicar la suite del LibreOffice para que est\u00e9 disponible en nuestro servidor de aplicaciones. Para ello accederemos a Pogramas RemoteApp -> Tareas y Publicar Progrmas RemoteApp : Publicar programas Nos aparecer\u00e1 la lista de programas disponibles para poder publicar. Seleccionaremos la suite LibreOffice: Selecci\u00f3n de programas para publicar Una vez seleccionados, pasamos a la siguiente pantalla del asistente y los publicamos: Publicar programas Programas publicados Iniciar sesi\u00f3n en RemoteApp \u00b6 Una vez publicados los programas, podemos iniciar sesi\u00f3n en una m\u00e1quina cliente y comprobar realmente qu\u00e9 programas est\u00e1n disponibles. En nuestro caso vamos a iniciar una sesi\u00f3n con el usuario usucomp1 y comprobaremos qu\u00e9 programas est\u00e1n publicados: Inicio sesi\u00f3n RDWeb m\u00e1quina cliente Programas publicados RemoteApp Ahora, podemos iniciar el Writer: Inicio aplicaci\u00f3n Writer por RDWeb Writer ejecutado por RDWeb Realmente lo que est\u00e1 haciendo es ejecutar en un Remote Desktop la aplicaci\u00f3n Writer de manera predeterminada. De hecho, si intent\u00e1is guardar el documento, ver\u00e9is que realmente la aplicaci\u00f3n se est\u00e1 ejecutando en el servidor APPSERVER. Si por ejemplo, guardamos el documento, veremos que la m\u00e1quina realmente es el servidor APPSERVER. En este caso, podremos guardar los documentos en sus carpetas personales: Guardar un documento writer en RDWeb Como vemos tenemos mapeadas las unidades de la m\u00e1quina cliente en Remote Desktop. Organizaci\u00f3n de aplicaciones en RemoteApp \u00b6 Hay veces que es interesante agrupar las aplicaciones en funci\u00f3n de las caracter\u00edsticas de las mismas o simplemente por el conjunto de usuarios que van a acceder. Para poder organizar las aplicaciones, seleccionaremos qu\u00e9 aplicaciones queremos que se agrupen en una carpeta y a\u00f1adiremos el nombre de la carpeta donde se encontrar\u00e1n las aplicaciones. Seleccionaremos una aplicaci\u00f3n y con el bot\u00f3n de la derecha del rat\u00f3n haremos clic en editar propiedades: Organizaci\u00f3n de las aplicaciones en RDWeb Seleccionaremos la carpeta del programa de RemoteApp y escribiremos la carpeta donde queramos agruparla y as\u00ed para todas las aplicaciones con una funcionalidad parecida, en nuestro caso, vamos a agrupar todas las aplicaciones de la suite de LibreOffice en una carpeta llamada Ofim\u00e1tica: Organizaci\u00f3n de las aplicaciones en RDWeb Y ahora ya podemos iniciar sesi\u00f3n y comprobar que tenemos las aplicaciones agrupadas en una carpeta llamada Ofim\u00e1tica: Agrupaci\u00f3n de aplicaciones en RemoteApp Agrupaci\u00f3n de aplicaciones en RemoteApp II Asignaci\u00f3n de usuarios a programas \u00b6 Los programas en RemoteApp se pueden limitar para que solo usuarios o grupos puedan ver el icono para poder iniciar la aplicaci\u00f3n. Para ello podemos configurar para cada programa publicado qu\u00e9 grupos o usuarios pueden acceder. Por ejemplo, vamos a definir para los programas Calculadora, Paint y WordPad que solo puedan acceder los del grupo Compras. Para ello seleccionaremos el programa publicado y entramos a las propiedades: Asignaci\u00f3n de grupos a programas en RemoteApp Asignaci\u00f3n de grupos a programas en RemoteApp II Si ahora iniciamos sesi\u00f3n con un usuario que no sea del grupo de ventas, podremos ver como no aparecen los iconos de las aplicaciones. Por ejemplo, iniciamos sesi\u00f3n con un usuario del grupo Ventas: Inicio de sesi\u00f3n usuario grupo Ventas Actividades Actividad 1 En esta pr\u00e1ctica vamos a configurar un servidor de aplicaciones que se hallar\u00e1 en el dominio, y al que acceder\u00e1n los clientes para ejecutar software como por ejemplo GIMP. A\u00f1ade un equipo servidor a tu red e instala y configura el servidor de terminales para utilizar RemoteApp. Instala la aplicaci\u00f3n GIMP . Configura el acceso web para que los usuarios de nuestra Empresa puedan ejecutar dicha aplicaci\u00f3n. Inicia sesi\u00f3n en un par de clientes con dos usuarios del dominio diferentes y ejecuta simult\u00e1neamente la aplicaci\u00f3n que acabas de instalar. Entrega un documento pdf detallando el trabajo realizado \u00fanicamente en los pasos 3 y 4.","title":"Pr\u00e1ctica 12 RemoteApp y Escritorio Remoto"},{"location":"Practicas/Practica12_RemoteAppTS.html#practica-12-remoteapp-y-escritorio-remoto","text":"Para esta pr\u00e1ctica vamos a instalar un servidor miembro dentro del dominio realizado en el tema2 para Active Directory y este servidor ser\u00e1 el equipo donde instalaremos los servicios de RemoteApp y de Terminal Server. Para poner en marcha el servicio RemoteAPP , es necesario configurar el servidor Terminal Services lo que est\u00e1 completamente desaconsejado en un controlador de dominio. El motivo de esta separaci\u00f3n f\u00edsica entre el controlador de dominio y el servidor de aplicaciones reside en que: Los usuarios del dominio deben poder iniciar sesi\u00f3n en el servidor de aplicaciones para poder ponerlas en marcha, lo cual est\u00e1 completamente desaconsejado en el controlador de domino, ya que en este \u00faltimo se gestionan aspectos de seguridad y autenticaci\u00f3n, demasiado sensibles como para permitir a cualquier usuario del dominio iniciar sesi\u00f3n en \u00e9l. El consumo de recursos que provoca la ejecuci\u00f3n remota de las aplicaciones puede entorpecer el correcto funcionamiento del controlador de dominio: recordad que este puede tener numerosos servicios ejecut\u00e1ndose (AD, DNS, DHCP, servidor de impresi\u00f3n, VPN, etc.) De esta manera, el esquema de red propuesto, ser\u00eda como el de la siguiente figura, donde un equipo servidor realiza las tareas de controlador de dominio, y otro equipo servidor realiza las tareas de servidor de aplicaciones: Estructura de red propuesta","title":"Pr\u00e1ctica 12 RemoteApp y Escritorio Remoto"},{"location":"Practicas/Practica12_RemoteAppTS.html#instalacion-y-validacion-en-el-dominio-del-servidor-de-aplicaciones","text":"Crearemos otra m\u00e1quina virtual con otro sistema Windows 2019 Server y validaremos esta m\u00e1quina en el dominio CEFIRE2019.LOCAL (o el dominio utilizado en la pr\u00e1ctica Instalaci\u00f3n Active Directory I en el tema 2.3): Instalaci\u00f3n y validaci\u00f3n de un servidor miembro Si ahora accedemos al controlador de dominio, vemos que en Usuarios y Equipos de Active Directory, en la secci\u00f3n de Computers habr\u00e1 a\u00f1adido el nuevo servidor miembro: AppServer validado en dominio","title":"Instalaci\u00f3n y validaci\u00f3n en el dominio del Servidor de Aplicaciones"},{"location":"Practicas/Practica12_RemoteAppTS.html#instalacion-de-remoteapp-y-servicios-de-escritorio-remoto","text":"","title":"Instalaci\u00f3n de RemoteApp y Servicios de Escritorio Remoto"},{"location":"Practicas/Practica12_RemoteAppTS.html#instalacion-de-remoteapp","text":"Para instalar RemoteApp , vamos a iniciar sesi\u00f3n como Administrador del dominio en el servidor miembro que hemos instalado, en nuestro APPSERVER . Desde el Panel del Administrador haremos clic en Agregar Roles y Caracter\u00edsticas: Agregar roles y caracter\u00edsticas en APPSERVER Despu\u00e9s seleccionaremos el tipo de instalaci\u00f3n de Servicios de Escritorio Remoto : Instalaci\u00f3n de Servicios de Escritorio Remoto Despu\u00e9s seleccionaremos la implementaci\u00f3n de Servicios de Escritorio Remoto , en nuestro caso, seleccionaremos la opci\u00f3n de Inicio R\u00e1pido que para la publicaci\u00f3n de aplicaciones RemoteApp es suficiente. Selecci\u00f3n del tipo de implementaci\u00f3n Seleccionada la opci\u00f3n de Inicio R\u00e1pido , seleccionaremos la implementaci\u00f3n de escritorio basado en sesi\u00f3n, para que los clientes puedan acceder a los programas que luego publicaremos en RemoteApp: Implementaci\u00f3n basada en sesi\u00f3n Seleccionaremos nuestro servidor para que inicie el agente de RemoteApp : Seleccionamos APPSERVER Y por \u00faltimo hacemos clic en Implementar: Realizar la instalaci\u00f3n Proceso de instalaci\u00f3n El proceso reiniciar\u00e1 y finalmente tendremos los Servicios de Escritorio Remoto instalado en el panel del administrador: Proceso de instalaci\u00f3n II Servicios de Escritorio Remoto","title":"Instalaci\u00f3n de RemoteApp"},{"location":"Practicas/Practica12_RemoteAppTS.html#publicar-programas-en-remoteapp","text":"Ahora que ya hemos finalizado la instalaci\u00f3n del RemoteApp y Escritorio Remoto , ya podemos configurar y poner en marcha el servidor de aplicaciones. Para ello, accederemos al Panel del Administrador: Acceso a RemoteApp En la siguiente figura vemos la pantalla principal donde podemos publicar los programas que estar\u00e1n disponibles en nuestro servidor de aplicaciones. Servicios de escritorio remoto Desde la p\u00e1gina principal podemos acceder a la colecci\u00f3n que hemos creado tras la instalaci\u00f3n. Esta es la implementaci\u00f3n m\u00e1s b\u00e1sica que se puede realizar sobre un servidor de aplicaciones. Se podr\u00eda tener m\u00e1s servidores y configurarlos para que repartiera cargas en funci\u00f3n de las aplicaciones y de los usuarios conectados, pero esto ya entrar\u00eda a formar parte de aspectos m\u00e1s avanzados. Accedemos pues la pantalla principal: Pantalla principal servicios de Escritorio Remoto Como vemos los programas que se publican por defecto son la Calculadora, Paint y WordPad. Veremos m\u00e1s adelante c\u00f3mo podemos agregar y organizar los programas que queremos publicar.","title":"Publicar programas en RemoteApp"},{"location":"Practicas/Practica12_RemoteAppTS.html#conexion-al-acceso-web-del-escritorio-remoto","text":"Desde la sesi\u00f3n del administrador podemos iniciar sesi\u00f3n a trav\u00e9s de un navegador a la direcci\u00f3n https://appserver/rdweb . Nos mostrar\u00e1 unos avisos de que hay un problema con el certificado ya que no lo puede comprobar. Pasaremos por alto esta advertencia y accederemos a la pantalla de login del RDWeb. Iniciaremos sesi\u00f3n con el Administrador. Acceso web a RemoteApp Pantalla de login de RDWeb Al iniciar sesi\u00f3n podemos ver las aplicaciones publicadas por defecto: Aplicaciones publicadas Podemos iniciar cualquier aplicaci\u00f3n publicada, por ejemplo, seleccionamos WordPad y esta aplicaci\u00f3n se ejecutar\u00e1 en el servidor APPSERVER: Iniciar una aplicaci\u00f3n publicada Iniciar WordPad Desde la sesi\u00f3n de Administrador tambi\u00e9n podemos iniciar escritorio remoto: Acceso remoto web","title":"Conexi\u00f3n al acceso Web del Escritorio Remoto"},{"location":"Practicas/Practica12_RemoteAppTS.html#publicar-programas","text":"Podemos tambi\u00e9n a\u00f1adir m\u00e1s programas para publicar en nuestro servidor de aplicaciones. Por ejemplo, vamos a descargar en nuestro servidor el LibreOffice y vamos a agregar la suite LibreOffice a RemoteApp. Para ello descargaremos primero la suite LibreOffice: Descarga LibreOffice Instalaci\u00f3n de LibreOffice Instalaci\u00f3n de LibreOffice II Ahora vamos a publicar la suite del LibreOffice para que est\u00e9 disponible en nuestro servidor de aplicaciones. Para ello accederemos a Pogramas RemoteApp -> Tareas y Publicar Progrmas RemoteApp : Publicar programas Nos aparecer\u00e1 la lista de programas disponibles para poder publicar. Seleccionaremos la suite LibreOffice: Selecci\u00f3n de programas para publicar Una vez seleccionados, pasamos a la siguiente pantalla del asistente y los publicamos: Publicar programas Programas publicados","title":"Publicar programas"},{"location":"Practicas/Practica12_RemoteAppTS.html#iniciar-sesion-en-remoteapp","text":"Una vez publicados los programas, podemos iniciar sesi\u00f3n en una m\u00e1quina cliente y comprobar realmente qu\u00e9 programas est\u00e1n disponibles. En nuestro caso vamos a iniciar una sesi\u00f3n con el usuario usucomp1 y comprobaremos qu\u00e9 programas est\u00e1n publicados: Inicio sesi\u00f3n RDWeb m\u00e1quina cliente Programas publicados RemoteApp Ahora, podemos iniciar el Writer: Inicio aplicaci\u00f3n Writer por RDWeb Writer ejecutado por RDWeb Realmente lo que est\u00e1 haciendo es ejecutar en un Remote Desktop la aplicaci\u00f3n Writer de manera predeterminada. De hecho, si intent\u00e1is guardar el documento, ver\u00e9is que realmente la aplicaci\u00f3n se est\u00e1 ejecutando en el servidor APPSERVER. Si por ejemplo, guardamos el documento, veremos que la m\u00e1quina realmente es el servidor APPSERVER. En este caso, podremos guardar los documentos en sus carpetas personales: Guardar un documento writer en RDWeb Como vemos tenemos mapeadas las unidades de la m\u00e1quina cliente en Remote Desktop.","title":"Iniciar sesi\u00f3n en RemoteApp"},{"location":"Practicas/Practica12_RemoteAppTS.html#organizacion-de-aplicaciones-en-remoteapp","text":"Hay veces que es interesante agrupar las aplicaciones en funci\u00f3n de las caracter\u00edsticas de las mismas o simplemente por el conjunto de usuarios que van a acceder. Para poder organizar las aplicaciones, seleccionaremos qu\u00e9 aplicaciones queremos que se agrupen en una carpeta y a\u00f1adiremos el nombre de la carpeta donde se encontrar\u00e1n las aplicaciones. Seleccionaremos una aplicaci\u00f3n y con el bot\u00f3n de la derecha del rat\u00f3n haremos clic en editar propiedades: Organizaci\u00f3n de las aplicaciones en RDWeb Seleccionaremos la carpeta del programa de RemoteApp y escribiremos la carpeta donde queramos agruparla y as\u00ed para todas las aplicaciones con una funcionalidad parecida, en nuestro caso, vamos a agrupar todas las aplicaciones de la suite de LibreOffice en una carpeta llamada Ofim\u00e1tica: Organizaci\u00f3n de las aplicaciones en RDWeb Y ahora ya podemos iniciar sesi\u00f3n y comprobar que tenemos las aplicaciones agrupadas en una carpeta llamada Ofim\u00e1tica: Agrupaci\u00f3n de aplicaciones en RemoteApp Agrupaci\u00f3n de aplicaciones en RemoteApp II","title":"Organizaci\u00f3n de aplicaciones en RemoteApp"},{"location":"Practicas/Practica12_RemoteAppTS.html#asignacion-de-usuarios-a-programas","text":"Los programas en RemoteApp se pueden limitar para que solo usuarios o grupos puedan ver el icono para poder iniciar la aplicaci\u00f3n. Para ello podemos configurar para cada programa publicado qu\u00e9 grupos o usuarios pueden acceder. Por ejemplo, vamos a definir para los programas Calculadora, Paint y WordPad que solo puedan acceder los del grupo Compras. Para ello seleccionaremos el programa publicado y entramos a las propiedades: Asignaci\u00f3n de grupos a programas en RemoteApp Asignaci\u00f3n de grupos a programas en RemoteApp II Si ahora iniciamos sesi\u00f3n con un usuario que no sea del grupo de ventas, podremos ver como no aparecen los iconos de las aplicaciones. Por ejemplo, iniciamos sesi\u00f3n con un usuario del grupo Ventas: Inicio de sesi\u00f3n usuario grupo Ventas Actividades Actividad 1 En esta pr\u00e1ctica vamos a configurar un servidor de aplicaciones que se hallar\u00e1 en el dominio, y al que acceder\u00e1n los clientes para ejecutar software como por ejemplo GIMP. A\u00f1ade un equipo servidor a tu red e instala y configura el servidor de terminales para utilizar RemoteApp. Instala la aplicaci\u00f3n GIMP . Configura el acceso web para que los usuarios de nuestra Empresa puedan ejecutar dicha aplicaci\u00f3n. Inicia sesi\u00f3n en un par de clientes con dos usuarios del dominio diferentes y ejecuta simult\u00e1neamente la aplicaci\u00f3n que acabas de instalar. Entrega un documento pdf detallando el trabajo realizado \u00fanicamente en los pasos 3 y 4.","title":"Asignaci\u00f3n de usuarios a programas"}]}