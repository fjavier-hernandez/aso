
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://fjavier-hernandez.github.io/aso/06_INTEGRA/NextCloudDockerSolucion.html">
      
      <link rel="icon" href="../imagenes/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>UD1 PRÁCTICA NEXTCLOUD-DOCKER SOLUCIÓN - Administración de Sistemas Operativos</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="javi" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ud1-practica-nextcloud-docker-solucion" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../index.html" title="Administración de Sistemas Operativos" class="md-header__button md-logo" aria-label="Administración de Sistemas Operativos" data-md-component="logo">
      
  <img src="../imagenes/logofp.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Administración de Sistemas Operativos
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              UD1 PRÁCTICA NEXTCLOUD-DOCKER SOLUCIÓN
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="javi" data-md-color-primary="" data-md-color-accent=""  aria-label="Cambiar a modo noche"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Cambiar a modo noche" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Cambiar a modo día"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Cambiar a modo día" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Administración de Sistemas Operativos" class="md-nav__button md-logo" aria-label="Administración de Sistemas Operativos" data-md-component="logo">
      
  <img src="../imagenes/logofp.png" alt="logo">

    </a>
    Administración de Sistemas Operativos
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Inicio
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          1.- UD1. ShellScripting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="1.- UD1. ShellScripting" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          1.- UD1. ShellScripting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/ProgramacionAula.html" class="md-nav__link">
        Programación de Aula
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/ResumenUD.html" class="md-nav__link">
        Resumen UD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/011_ShellScript_Intro.html" class="md-nav__link">
        1.1- Introducción
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/012_ShelScript_Sintaxis.html" class="md-nav__link">
        1.2- Sintaxis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/013_ShellScript_ControlFlujo.html" class="md-nav__link">
        1.3- Control de flujo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/014_ShellScript_VectoresFunciones.html" class="md-nav__link">
        1.4- Vectores y Funciones
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/015_ShellScript_RefuerzoAmpliacion.html" class="md-nav__link">
        1.5- Refuerzo y ampliación
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/016_ShellScript_PruebaEspecifica.html" class="md-nav__link">
        1.6- Prueba Auditoria
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          2.- UD2: PowerShell
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="2.- UD2: PowerShell" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          2.- UD2: PowerShell
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02_PowerShell/ProgramacionAula.html" class="md-nav__link">
        Programación de Aula
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02_PowerShell/021_Introduccio%CC%81nPwSh.html" class="md-nav__link">
        2.1- Introducción
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02_PowerShell/022_PowerShell_Sintaxis.html" class="md-nav__link">
        2.2- Sintaxis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02_PowerShell/023_PowerShell_ControlFlujo.html" class="md-nav__link">
        2.3- Control de flujo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02_PowerShell/024_PowerShell_VectoresFunciones.html" class="md-nav__link">
        2.4- Vectores y Funciones
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          3.- UD3: Administración de procesos del sistema
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="3.- UD3: Administración de procesos del sistema" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          3.- UD3: Administración de procesos del sistema
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03_Procesos/ProgramacionAula.html" class="md-nav__link">
        Programación de Aula
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03_Procesos/031_Planificador.html" class="md-nav__link">
        3.1- Introducción Procesos, Planificador
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03_Procesos/032_Hilos.html" class="md-nav__link">
        3.2- Hilos, Sincronización e interrupciones, Herramientas gráficas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03_Procesos/033_GestionProcesosShell.html" class="md-nav__link">
        3.3- Gestión de procesos en Shell de Linux.
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03_Procesos/034_GestionProcesosPWSH.html" class="md-nav__link">
        3.4- Gestión de procesos en PowerShell.
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03_Procesos/035_ArranqueServicios.html" class="md-nav__link">
        3.5- Arranque del sistema. Servicios. Systemd.
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          4.- Servicios de Directorio Libres: LDAP
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="4.- Servicios de Directorio Libres: LDAP" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          4.- Servicios de Directorio Libres: LDAP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04_LDAP/ProgramacionAula.html" class="md-nav__link">
        Programación de Aula
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04_LDAP/041_Introduccion_SDyLDAP.html" class="md-nav__link">
        4.1- Introducción Servicios de directorio y LDAP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04_LDAP/042_InstalacionConfigLDAP_PR.html" class="md-nav__link">
        4.2- Instalación y configuración de OpenLDAP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04_LDAP/043_LDAP_DIT.html" class="md-nav__link">
        4.3- Modelo de Información de LDAP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04_LDAP/044_UsersLDAP.html" class="md-nav__link">
        4.4- Creación y comprobación de Usuarios/Grupos OpenLDAP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04_LDAP/045_LDAP_EsquemaHerramientas.html" class="md-nav__link">
        4.5- Esquema LDAP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04_LDAP/046_LDAP_Graficas.html" class="md-nav__link">
        4.6- Gestión usuarios LDAP con GUI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          5.- Servicios de Directorio Propietarios: Active Directory
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="5.- Servicios de Directorio Propietarios: Active Directory" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          5.- Servicios de Directorio Propietarios: Active Directory
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05_AD/051_ActiveDirectory.html" class="md-nav__link">
        5.1- Introducción Active Directory
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7">
          6.- Integración de sistemas operativos en red libres y propietarios
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="6.- Integración de sistemas operativos en red libres y propietarios" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          6.- Integración de sistemas operativos en red libres y propietarios
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="061_ServiciosRedRecursosCompartidos.html" class="md-nav__link">
        6.1- Introducción: Sistemas heterogéneos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="062_NFS.html" class="md-nav__link">
        6.2- NFS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="063_DockerIntroNextCloud.html" class="md-nav__link">
        6.3- Docker Introducción y NextCloud
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="ud1-practica-nextcloud-docker-solucion">UD1 PRÁCTICA NEXTCLOUD-DOCKER SOLUCIÓN<a class="headerlink" href="#ud1-practica-nextcloud-docker-solucion" title="Permanent link">&para;</a></h1>
<h2 id="enunciado">Enunciado<a class="headerlink" href="#enunciado" title="Permanent link">&para;</a></h2>
<ul>
<li>Estamos trabajando en una empresa maravillosa y tienen la necesidad de compartir recursos (carpetas documentos, imágenes...), tanto entre las personas dentro de la empresa como con clientes fuera de ésta.</li>
<li>Para haceros valer dentro de la empresa indicáis que podéis montar un servidor <strong>NextCloud</strong> en unos pocos minutos para solventar dicho problema.</li>
<li>La empresa cuenta con un equipo Linux que hace de servidor, decidís hacer uso de <strong>docker</strong> para levantar el servicio NextCloud de una forma muy rápida y sencilla.</li>
</ul>
<h2 id="premisas">Premisas<a class="headerlink" href="#premisas" title="Permanent link">&para;</a></h2>
<ul>
<li>El servicio docker se debe levantar en la red <strong>192.168.20.0/24</strong>.</li>
<li>Debe tener la traducción estática del puerto <strong>80</strong> de la máquina anfitriona al puerto <strong>80</strong> del contenedor.</li>
<li>Debe tener un volumen asociado llamado <strong>"volNextCloud"</strong>.</li>
</ul>
<h2 id="investiga">Investiga<a class="headerlink" href="#investiga" title="Permanent link">&para;</a></h2>
<ul>
<li>Crea el contenedor Nextcloud ¿Al crear el contenedor se ha generado automáticamente algún volumen? ¿Cuál?</li>
<li>Dentro del sistema anfitrión (lliurex/Windows) ¿Dónde está guardado el fichero subido previamente?</li>
<li>¿Este contenedor es persistente? ¿Qué significa que el contenedor es persistente? ¿Cómo lo has comprobado?</li>
</ul>
<h2 id="pruebas">Pruebas<a class="headerlink" href="#pruebas" title="Permanent link">&para;</a></h2>
<ul>
<li>Sube un fichero de prueba, comprueba si está en la carpeta volumen creada. En caso de no estar:</li>
<li>Prueba a subir un fichero a la plataforma NextCloud. Acto seguido dentro del contenedor busca en que directorio se ha guardado dicho fichero.</li>
</ul>
<h2 id="ayuda">Ayuda<a class="headerlink" href="#ayuda" title="Permanent link">&para;</a></h2>
<ul>
<li>Página oficial para la Instalación en ubuntu en el siguiente enlace <a href="https://docs.docker.com/engine/install/ubuntu/">Instalación en Ubuntu Documentación</a></li>
<li>Lee la documentación sobre la imagen NextCloud que hay en <a href="https://hub.docker.com/_/nextcloud">Dockerhub Nextcloud_Docker</a>.</li>
</ul>
<div style="page-break-before:always;"></div>

<h2 id="solucion-propuesta">Solución propuesta<a class="headerlink" href="#solucion-propuesta" title="Permanent link">&para;</a></h2>
<h3 id="instalacion-docker">Instalación Docker<a class="headerlink" href="#instalacion-docker" title="Permanent link">&para;</a></h3>
<p>Se realiza la instalación de Docker en una máquina virtual de Ubuntu 22.04 siguiendo el método <a href="https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository">Install using the repository</a></p>
<ol>
<li>Se realiza un actualización y se instalan los paquetes necesarios para usar el repositorio sobre HTTPS:</li>
</ol>
<ul>
<li>Código para la actualización de paquetes:</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>sudo apt-get update
</code></pre></div>
- Resultado:</p>
<figure>
  <img src="./imagenes/101.png" width="800"/>
  <figcaption>Actualización repositorios</figcaption>
</figure>

<div style="page-break-before:always;"></div>

<ul>
<li>Código para instalar los paquetes necesarios para usar el repositorio sobre HTTPS:</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>sudo apt-get install ca-certificates curl gnupg lsb-release
</code></pre></div>
- Resultado:</p>
<figure>
  <img src="./imagenes/102.png" width="800"/>
  <figcaption>Instalación repositorios necesarios</figcaption>
</figure>

<div style="page-break-before:always;"></div>

<ol start="2">
<li>Se añade la clave GPG oficial de Docker y el comando para configurar el repositorio:</li>
</ol>
<ul>
<li>Código para los objetivos comentados en este punto:</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>sudo mkdir -p /etc/apt/keyrings
<span class="linenos" data-linenos="2 "></span>curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="p">|</span> sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
<span class="linenos" data-linenos="3 "></span><span class="nb">echo</span> <span class="s2">&quot;deb [arch=</span><span class="k">$(</span>dpkg --print-architecture<span class="k">)</span><span class="s2"> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu </span><span class="k">$(</span>lsb_release -cs<span class="k">)</span><span class="s2"> stable&quot;</span> <span class="p">|</span> sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</code></pre></div>
- Resultado:</p>
<figure>
  <img src="./imagenes/103.png" width="800"/>
  <figcaption>Clave GPG y configuración repositorio</figcaption>
</figure>

<div style="page-break-before:always;"></div>

<ol start="3">
<li>se realiza otra actualización:</li>
</ol>
<ul>
<li>Código para la nueva actualización de paquetes, debido a la configuración realizada:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>sudo apt-get update
</code></pre></div>
<ul>
<li>Resultado:</li>
</ul>
<figure>
  <img src="./imagenes/104.png" width="800"/>
  <figcaption>Nueva actualización</figcaption>
</figure>

<div style="page-break-before:always;"></div>

<ol start="4">
<li>Se Instala Docker Engine, containerd y Docker Compose:</li>
</ol>
<ul>
<li>Código para la instalación de paquetes Docker:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin
</code></pre></div>
<ul>
<li>Resultado:</li>
</ul>
<figure>
  <img src="./imagenes/105.png" width="800"/>
  <figcaption>Instalación Docker</figcaption>
</figure>

<div style="page-break-before:always;"></div>

<ol start="5">
<li>Comprobación que la instalación del motor Docker sea correcta ejecutando la imagen <strong>hello-world</strong>:</li>
</ol>
<ul>
<li>Código para la comprobación de Docker, mediante la ejecución de un contenedor:</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>sudo docker run hello-world
</code></pre></div>
- Resultado:</p>
<figure>
  <img src="./imagenes/106.png" width="800"/>
  <figcaption>Comprobación</figcaption>
</figure>

<div style="page-break-before:always;"></div>

<h2 id="instalacion-contenedor-nextcloud-sin-volumen-persistente">Instalación contenedor NextCloud sin volumen persistente.<a class="headerlink" href="#instalacion-contenedor-nextcloud-sin-volumen-persistente" title="Permanent link">&para;</a></h2>
<p>La instalación del contenedor se puede consultar en <a href="https://hub.docker.com/_/nextcloud">Imagen oficial NextCloud Docker Hub</a></p>
<ol>
<li>Se instala y ejecuta el contenedor:</li>
</ol>
<ul>
<li>Código para la instalación NextCloud:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>docker run -d -p <span class="m">8080</span>:80 nextcloud
</code></pre></div>
<ul>
<li>Resultado:</li>
</ul>
<figure>
  <img src="./imagenes/107.png" width="800"/>
  <figcaption>Instalación y ejecución del contenedor de NextCloud</figcaption>
</figure>

<div style="page-break-before:always;"></div>

<ol start="2">
<li>Comprobación de instalación correcta del contenedor NextCloud:</li>
</ol>
<ul>
<li>Se introduce en un navegador <strong>http://"IPmáquinaVirtual":8080</strong> debe aparecer el inicio de NextCloud para crear una cuenta de administrador, como se muestra en la siguiente figura:</li>
</ul>
<figure>
  <img src="./imagenes/108.png" width="800"/>
  <figcaption>Instalación de NextCloud</figcaption>
</figure>

<ul>
<li>Probamos a subir un archivo para ver donde se guardan:</li>
</ul>
<figure>
  <img src="./imagenes/109.png" width="800"/>
  <figcaption>Subir archivo NextCloud</figcaption>
</figure>

<div style="page-break-before:always;"></div>

<ul>
<li>Se comprueba en el GUI de NextCloud que esta subido:</li>
</ul>
<figure>
  <img src="./imagenes/110.png" width="800"/>
  <figcaption>Comprobación subido el archivo en el GUI de NextCloud</figcaption>
</figure>

<ul>
<li>Se comprueba en el bash del contenedor de NextCloud que esta subido:</li>
</ul>
<figure>
  <img src="./imagenes/111.png" width="800"/>
  <figcaption>Comprobación subido el archivo en el contenedor de NextCloud</figcaption>
</figure>

<div style="page-break-before:always;"></div>

<ul>
<li>Si borramos el contenedor y lo volvemos a crear se comprueba que se ha perdido el fichero:</li>
</ul>
<figure>
  <img src="./imagenes/112.png" width="800"/>
  <figcaption>Borrado del contenedor</figcaption>
</figure>

<figure>
  <img src="./imagenes/113.png" width="800"/>
  <figcaption>Comprobación del fichero borrado</figcaption>
</figure>

<div style="page-break-before:always;"></div>

<h2 id="instalacion-contenedor-nextcloud-con-volumen-persistente-y-red-interna">Instalación contenedor NextCloud con volumen persistente y red interna<a class="headerlink" href="#instalacion-contenedor-nextcloud-con-volumen-persistente-y-red-interna" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>Siguiendo los apuntes en el punto 3 se describen los volúmenes y la importancia de los mismos para salvaguardar los datos si el contenedor se corrompe, o incluso utilizarlo para un segundo contenedor de docker. El ejemplo 3.3 es una buena guía para realizar este punto.</p>
</li>
<li>
<p>Por lo tanto el código a ejecutar para que el volumen se llame <strong>"volNextCloud"</strong> podría ser:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>sudo docker run -d --name nextcloud --ip <span class="m">192</span>.168.20.2 --mount <span class="nv">type</span><span class="o">=</span>volume,source<span class="o">=</span>volNextCloud,target<span class="o">=</span>/var/www/html/data -p <span class="m">80</span>:80 nextcloud
</code></pre></div>
<figure>
  <img src="./imagenes/114.png" width="800"/>
  <figcaption>Creación NextCloud con Persistent Data y red interna</figcaption>
</figure>

<div style="page-break-before:always;"></div>

<h3 id="comprobacion">Comprobación<a class="headerlink" href="#comprobacion" title="Permanent link">&para;</a></h3>
<ol>
<li>Se sube un fichero como el caso anterior.</li>
</ol>
<figure>
  <img src="./imagenes/115.png" width="800"/>
  <figcaption>Subimos fichero</figcaption>
</figure>

<ol start="2">
<li>Se comprueba que esta en el contenedor.</li>
</ol>
<figure>
  <img src="./imagenes/116.png" width="800"/>
  <figcaption>El archivo existe en el path del volumen</figcaption>
</figure>

<div style="page-break-before:always;"></div>

<ol start="3">
<li>Se borra el contenedor, se crea uno nuevo apuntando al volumen y se comprueba que el fichero perdura.</li>
</ol>
<figure>
  <img src="./imagenes/117.png" width="800"/>
  <figcaption>Comprobación fichero existe, después de borrar contenedor y volver a crear uno nuevo</figcaption>
</figure>

<h2 id="network">Network<a class="headerlink" href="#network" title="Permanent link">&para;</a></h2>
<ul>
<li>Este apartado se comentó en clase que se podía dejar sin realizar. Pero como se observa en el código del ejercicio anterior en el mismo comando se ha estado introduciendo la IP del enunciado. Para que dicha IP se refleje en el contenedor además debe existir una red creada previamente y apuntar a ella. en los siguientes pasos se muestra.</li>
</ul>
<ol>
<li>Crear red:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>sudo docker network create --driver<span class="o">=</span>bridge --subnet<span class="o">=</span><span class="m">192</span>.168.20.0/24 nextCloudNet
</code></pre></div>
<ol start="2">
<li>Referenciamos contenedor a la red creada.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>sudo docker run -d --name nextcloud --network nextCloudNet --ip <span class="m">192</span>.168.20.2 --mount <span class="nv">type</span><span class="o">=</span>volume,source<span class="o">=</span>volNextCloud,target<span class="o">=</span>/var/www/html/data -p <span class="m">80</span>:80 nextcloud
</code></pre></div>
<div style="page-break-before:always;"></div>

<ol start="3">
<li>Confirmamos la IP.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>docker inspect -f <span class="s1">&#39;{{range.NetworkSettings.Networks}} {{.IPAddress}}{{end}}&#39;</span> CONTAINER_ID
</code></pre></div>
<h3 id="comprobacion_1">Comprobación<a class="headerlink" href="#comprobacion_1" title="Permanent link">&para;</a></h3>
<ul>
<li>En la siguiente figura se muestra la comprobación de la red y la IP del contenedor:</li>
</ul>
<figure>
  <img src="./imagenes/119.png" width="800"/>
  <figcaption>Contenedor en la IP del enunciado</figcaption>
</figure>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2021-2022 Fº Javier Hernández - Licencia CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["header.autohide", "toc.integrate", "navigation.indexes"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version.title": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>