
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://fjavier-hernandez.github.io/aso/04_LDAP/045_LDAP_EsquemaHerramientas.html">
      
      
        <link rel="prev" href="044_UsersLDAP.html">
      
      
        <link rel="next" href="046_LDAP_Graficas.html">
      
      
      <link rel="icon" href="../imagenes/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.48">
    
    
      
        <title>4.5- Esquema LDAP - Administración de Sistemas Operativos</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-0CPJP88MBF"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-0CPJP88MBF",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-0CPJP88MBF",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="javi" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#esquema-ldap" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../index.html" title="Administración de Sistemas Operativos" class="md-header__button md-logo" aria-label="Administración de Sistemas Operativos" data-md-component="logo">
      
  <img src="../imagenes/logofp.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Administración de Sistemas Operativos
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              4.5- Esquema LDAP
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="javi" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Cambiar a modo noche"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo noche" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Cambiar a modo día"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo día" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Administración de Sistemas Operativos" class="md-nav__button md-logo" aria-label="Administración de Sistemas Operativos" data-md-component="logo">
      
  <img src="../imagenes/logofp.png" alt="logo">

    </a>
    Administración de Sistemas Operativos
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    1.- UD1. ShellScripting
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            1.- UD1. ShellScripting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/ProgramacionAula.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Programación de Aula
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/ResumenUD.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resumen UD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/011_ShellScript_Intro.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.1- Introducción
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/012_ShelScript_Sintaxis.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.2- Sintaxis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/013_ShellScript_ControlFlujo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.3- Control de flujo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/014_ShellScript_VectoresFunciones.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.4- Vectores y Funciones
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/015_ShellScript_RefuerzoAmpliacion.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.5- Refuerzo y ampliación
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_ShellScripting/016_ShellScript_PruebaEspecifica.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.6- Prueba Auditoria
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2.- UD2: PowerShell
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            2.- UD2: PowerShell
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_PowerShell/ProgramacionAula.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Programación de Aula
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_PowerShell/021_IntroducciónPwSh.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.1- Introducción
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_PowerShell/022_PowerShell_Sintaxis.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.2- Sintaxis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_PowerShell/023_PowerShell_ControlFlujo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.3- Control de flujo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_PowerShell/024_PowerShell_VectoresFunciones.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.4- Vectores y Funciones
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    3.- UD3: Administración de procesos del sistema
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            3.- UD3: Administración de procesos del sistema
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_Procesos/ProgramacionAula.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Programación de Aula
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_Procesos/031_Planificador.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.1- Introducción Procesos, Planificador
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_Procesos/032_Hilos.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.2- Hilos, Sincronización e interrupciones, Herramientas gráficas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_Procesos/033_GestionProcesosShell.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.3- Gestión de procesos en Shell de Linux.
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_Procesos/034_GestionProcesosPWSH.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.4- Gestión de procesos en PowerShell.
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_Procesos/035_ArranqueServicios.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.5- Arranque del sistema. Servicios. Systemd.
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    4.- Servicios de Directorio Libres: LDAP
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            4.- Servicios de Directorio Libres: LDAP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ProgramacionAula.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Programación de Aula
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="041_Introduccion_SDyLDAP.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.1- Introducción Servicios de directorio y LDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="042_InstalacionConfigLDAP_PR.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.2- Instalación y configuración de OpenLDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="043_LDAP_DIT.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.3- Modelo de Información de LDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="044_UsersLDAP.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.4- Creación y comprobación de Usuarios/Grupos OpenLDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    4.5- Esquema LDAP
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="045_LDAP_EsquemaHerramientas.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    4.5- Esquema LDAP
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#esquema-ldap" class="md-nav__link">
    <span class="md-ellipsis">
      Esquema LDAP
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#herramientas-de-gestion-de-usuarios" class="md-nav__link">
    <span class="md-ellipsis">
      Herramientas de gestión de usuarios.
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Herramientas de gestión de usuarios.">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ldap-utils" class="md-nav__link">
    <span class="md-ellipsis">
      ldap-utils
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuracion-de-openldap" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración de OpenLDAP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuración de OpenLDAP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#slapdconf" class="md-nav__link">
    <span class="md-ellipsis">
      slapd.conf
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#actividades" class="md-nav__link">
    <span class="md-ellipsis">
      Actividades
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="046_LDAP_Graficas.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.6- Gestión usuarios LDAP con GUI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    5.- Servicios de Directorio Propietarios: Active Directory
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            5.- Servicios de Directorio Propietarios: Active Directory
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_AD/051_ActiveDirectory.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.1- Introducción Active Directory
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    6.- Integración de sistemas operativos en red libres y propietarios
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            6.- Integración de sistemas operativos en red libres y propietarios
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_INTEGRA/061_ServiciosRedRecursosCompartidos.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.1- Introducción: Sistemas heterogéneos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_INTEGRA/062_IntroSamba.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.2- Introducción Samba
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_INTEGRA/063_SambaSecUsers.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.3- Secciones y usuarios Samba
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_INTEGRA/064_SambaDC.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.4- Samba Domain Controller
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_INTEGRA/065_VagrantIntro.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.5- Despliegue de Sistemas Heterogéneos con Vagrant
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_INTEGRA/066_ConfigIntegra.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.6- Configuración Integrada con Vagrant
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_INTEGRA/067_NFS.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.7- NFS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_INTEGRA/068_DockerIntroNextCloud.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.8- Docker repaso y NextCloud
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_INTEGRA/069_HerramientasDocker.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.9- Herramientas de Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_INTEGRA/060_ActividadesRefuerzo.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Actividades de refuerzo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_INTEGRA/06_PruebaEspecifica.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prueba Específica
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_INTEGRA/06_ProgramacionAula.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Programación de Aula
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    7.- Información del sistema
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            7.- Información del sistema
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_INFORMA/071_EstructuraDirectorios.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7.1- Estructura de directorios
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_INFORMA/072_ArchivosVirtualSWinstaladoRendimiento.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7.2- VFS, Sw Instalado y Gestión Rendimiento
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_INFORMA/073_PlanificaciónTareas.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7.3- Planificación de Tareas
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    8.- Servicios de acceso y administración remota
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            8.- Servicios de acceso y administración remota
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_SSH/081_AccesoRemotoLinux.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8.1- Acceso Remoto en modo texto
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_SSH/082_EscritorioRemoto.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8.2- Escritorio Remoto
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_SSH/083_HerramientasGraficAdminRemota.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8.3- Herramientas gráficas externas.
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    9.- Administración de Servidores de Impresión
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            9.- Administración de Servidores de Impresión
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_IMPRESION/091_ServidoresImpresion.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.1- Servidores de Impresión
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_IMPRESION/092_ServidoresImpresionLinux.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.2- Servidor de impresión en GNU/Linux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_IMPRESION/093_ServidorImpresionWindowsServer.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.3- Servidor de impresión en Windows Server
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>4.5- Esquema LDAP</h1>

<h2 id="esquema-ldap">Esquema LDAP<a class="headerlink" href="#esquema-ldap" title="Permanent link">&para;</a></h2>
<p>El <strong>esquema</strong> es una parte importante de LDAP. Similar a la definición del esquema de la base de datos, el esquema LDAP define la estructura y las reglas que debe seguir un directorio LDAP, como qué atributos tendrá una clase de objeto, qué estructura tienen estos atributos, tipos de datos etc. </p>
<ul>
<li>El <strong>servidor LDAP</strong> proporciona una manera de <strong>identificar categorías, atributos</strong> y otra información en el directorio LDAP, para que el servidor LDAP pueda reconocerlos. <strong>Para realizarlo se utilizan esquemas</strong>, que no es más que una <strong>unidad de empaquetado para contener clases de objetos y atributos muy similares</strong>.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Recordatorio</p>
<ul>
<li>Las clase de objetos se pueden ver en <a href="https://www.zytrax.com/books/ldap/ape/index.html#objectclasses">ObjectClass Cytrax</a></li>
</ul>
</div>
<ul>
<li>La metáfora que se puede realizar es que el <strong>Esquema LDAP</strong> es como una <strong>base de datos relacional</strong>.</li>
<li><strong>La principal diferencia</strong> con las bases de datos relacionales con protocolo LDAP es que estas ya están predefinidas en los esquemas. por lo que nos ahorramos en insertar y definir las tablas de información.</li>
<li>En <strong>OpenLDAP</strong> los esquemas instalados se encuentran en cn = schema, cn = config y se pueden instalar esquemas adicionales usando este procedimiento.</li>
</ul>
<p>El siguiente diagrama ilustra el uso de esquemas como unidades de empaquetado:</p>
<figure>
  <img src="imagenes/02/EsquemaLdap.png" width="700"/>
  <figcaption>Ejemplo de la definición de Esquemas en LDAP</figcaption>
</figure>

<p>A nivel de comandos se pueden ver los esquemas predefinidos con:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">cd /etc/ldap/slapd.d/cn\=config/</span>
</code></pre></div>
<p>En el directorio <code>cn\=schema</code> se pueden ver los esquemas y ademas se pueden añadir más, pero no suele ser frecuente.</p>
<p>Para buscar los esquemas se puede utilizar:
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">grep olcObjectClasses cn\=\{3\}inetorgperson.ldif|awk &#39;{print $5}&#39;</span>
<span class="linenos" data-linenos="2 "></span><span class="l l-Scalar l-Scalar-Plain">grep olcObjectClasses cn\=\{2\}inetorgperson.ldif|awk &#39;{print $5}&#39;</span>
<span class="linenos" data-linenos="3 "></span><span class="l l-Scalar l-Scalar-Plain">grep olcObjectClasses cn\=\{2\}nis.ldif|awk &#39;{print $5}&#39;</span>
<span class="linenos" data-linenos="4 "></span><span class="l l-Scalar l-Scalar-Plain">grep olcObjectClasses cn\=\{1\}cosine.ldif|awk &#39;{print $5}&#39;</span>
<span class="linenos" data-linenos="5 "></span><span class="l l-Scalar l-Scalar-Plain">grep olcObjectClasses cn\=\{0\}core.ldif|awk &#39;{print $5}&#39;</span>
</code></pre></div></p>
<h2 id="herramientas-de-gestion-de-usuarios">Herramientas de gestión de usuarios.<a class="headerlink" href="#herramientas-de-gestion-de-usuarios" title="Permanent link">&para;</a></h2>
<p>Una vez configurado el servidor LDAP, para la utilización normal debemos aprender cómo se añaden nuevos usuarios o se modifican los atributos de los existentes.</p>
<ul>
<li>
<p>Para los objetos iniciales del directorio, primero se debe escribir un fichero en formato <strong>LDIF</strong> que incluya todos los atributos de la entrada y añadirla al directorio con slapadd. Como se realizó en el apartado  <strong>4.4-Creación y comprobación de Usuarios</strong>.</p>
</li>
<li>
<p>Este método es totalmente inadecuado para la utilización cuando el directorio está activo. Existen varias formas de actualizar las entradas del directorio o añadir nuevas, y en primer lugar veremos la utilización de las herramientas incluidas en el paquete <strong>ldap-utils</strong>.</p>
</li>
</ul>
<h3 id="ldap-utils">ldap-utils<a class="headerlink" href="#ldap-utils" title="Permanent link">&para;</a></h3>
<p>Para realizar modificaciones de los objetos del directorio directamente desde la línea de comandos, se pueden utilizar las herramientas del paquete <code>ldap-utils</code>, a continuación se describen algunas de ellas.</p>
<h4 id="mostrar-entradas">Mostrar entradas<a class="headerlink" href="#mostrar-entradas" title="Permanent link">&para;</a></h4>
<ul>
<li><code>ldapsearch</code> - buscar y mostrar entradas</li>
</ul>
<p>La herramienta <code>ldapsearch</code> resulta muy conveniente al momento de hacer consultas sobre los datos dentro de un directorio LDAP desde línea de comandos. </p>
<ul>
<li>A continuación se presentan una serie de consultas de ejemplo que pueden resultar muy útiles para obtener información valiosa de un árbol LDAP.</li>
</ul>
<h4 id="obtener-todos-los-objetos-de-un-directorio">Obtener todos los objetos de un directorio<a class="headerlink" href="#obtener-todos-los-objetos-de-un-directorio" title="Permanent link">&para;</a></h4>
<p>Para obtener todos los objetos en un directorio (dn) a partir de cierta base con el ejemplo de la práctica (<code>dc=pandora,dc=ldap</code>) y sin límite de para la respuesta, utilizar una consulta como la siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">ldapsearch -z 0 -H ldap://localhost:389 -W -D &quot;cn=admin,dc=pandora,dc=ldap&quot; -b &quot;dc=pandora,dc=ldap&quot; &quot;(objectclass=*)&quot;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><code>-z 0</code>: evita cortar la respuesta una vez alcanzado cierto límite (cantidad de entradas).</li>
<li><code>-H ldap://localhost:389</code>: indica que consulte al servidor LDAP en el puerto 389 del host local.</li>
<li><code>-W</code>: indica que solicite la contraseña para el método de autenticación simple de manera interactiva.</li>
<li><code>-D "cn=admin,dc=pandora,dc=ldap"</code>: especifica el usuario con el cual se autentica en el servidor LDAP.</li>
<li><code>-b "dc=pandora,dc=ldap"</code>: especifica la base desde donde comenzar la búsqueda (en este caso se trata de la raíz del directorio).</li>
<li><code>"(objectclass=*)"</code>: especifica el filtro para la búsqueda (en este ejemplo todos los objetos, este a su vez es el filtro por defecto).</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>El punto importante es no olvidar especificar la base (<code>-b</code>). De lo contrario probablemente no haya resultados en la búsqueda:</p>
</div>
<ul>
<li>A este ejemplo se le puede añadir <code>grep</code> para filtrar sólo los dn:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">ldapsearch -z 0 -H ldap://localhost:389 -W -D &quot;cn=admin,dc=pandora,dc=ldap&quot; -b &quot;dc=pandora,dc=ldap&quot; &quot;(objectclass=*)&quot; | grep &quot;dn:&quot;</span>
</code></pre></div>
<ul>
<li>El resultado sería parecido a:</li>
</ul>
<p><img alt="" src="imagenes/02/BusqObjtLDAP.png" /></p>
<h4 id="obtener-todas-las-unidades-organizacionales">Obtener todas las unidades organizacionales<a class="headerlink" href="#obtener-todas-las-unidades-organizacionales" title="Permanent link">&para;</a></h4>
<p>Las <a href="https://technet.microsoft.com/en-us/library/cc978003.aspx">ou</a> (<em>Organizational Unit</em>) definen la jerarquía dentro de un dominio. Generalmente se utilizan para definir los departamentos o áreas dentro de una organización (empresa, red, sociedad, etc.).</p>
<p>Para obtener una lista de todas las ou presentes en un directorio, se puede utilizar el filtro <code>"(ou=*)"</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">ldapsearch -z 0 -H ldap://localhost:389 -W -D &quot;cn=admin,dc=pandora,dc=ldap&quot; -b &quot;dc=pandora,dc=ldap&quot; &quot;(ou=*)&quot; | grep &quot;dn:&quot;</span>
</code></pre></div>
<ul>
<li>Resultado</li>
</ul>
<p><img alt="" src="imagenes/02/BusqOuLDAP.png" /></p>
<h4 id="listar-todos-los-usuarios">Listar todos los usuarios<a class="headerlink" href="#listar-todos-los-usuarios" title="Permanent link">&para;</a></h4>
<p>Esta consulta depende de la jerarquía y la clase utilizada para almacenar usuarios dentro de un árbol LDAP. Sin embargo, generalmente se utiliza la clase <a href="https://tools.ietf.org/html/rfc2798">inetOrgPerson</a> para almacenar usuarios dentro de un directorio LDAP, la cual posee el atributo <code>uid</code>.</p>
<p>De esta forma, para listar todos los usuarios presentes en un directorio, simplemente recurrir al filtro <code>"(uid=*)"</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">ldapsearch -z 0 -H ldap://localhost:389 -W -D &quot;cn=admin,dc=pandora,dc=ldap&quot; -b &quot;dc=pandora,dc=ldap&quot; &quot;(uid=*)&quot; | grep &quot;dn:&quot;</span>
</code></pre></div>
<ul>
<li>Resultado</li>
</ul>
<p><img alt="" src="imagenes/02/BusqUsuerLDAP.png" /></p>
<h4 id="determinar-todas-las-clases-en-uso">Determinar todas las clases en uso<a class="headerlink" href="#determinar-todas-las-clases-en-uso" title="Permanent link">&para;</a></h4>
<div class="admonition abstract">
<p class="admonition-title">Recordatorio</p>
<ul>
<li>Las clases de un directorio LDAP determinan el formato con el que se representan los datos de los objetos almacenados en el árbol. Cada objeto (entrada en un directorio LDAP) pertenece al menos una clase. </li>
<li>Sin embargo es común que cada objeto pertenezca a varias clases. Básicamente las clases definen qué atributos y de qué formato puede poseer un objeto.</li>
</ul>
</div>
<p>Para listar todas las clases actualmente en uso por todos los objetos, es necesario volcar todo el contenido del árbol y filtrar con <code>grep</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">ldapsearch -z 0 -H ldap://localhost:389 -W -D &quot;cn=admin,dc=pandora,dc=ldap&quot; -b &quot;dc=pandora,dc=ldap&quot; &quot;(objectclass=*)&quot; | grep objectClass | sort | uniq</span>
</code></pre></div>
<ul>
<li>Resultado</li>
</ul>
<p><img alt="" src="imagenes/02/BusqClassLDAP.png" /></p>
<h4 id="manipular-entradas">Manipular entradas<a class="headerlink" href="#manipular-entradas" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p><code>ldapmodify</code> - modificar una entrada</p>
</li>
<li>
<p><code>ldapadd</code> - agregar una nueva entrada</p>
</li>
<li>
<p><code>ldapdelete</code> - eliminar y entrar</p>
</li>
<li>
<p><code>ldapmodrdn</code> - cambiar el nombre de una entrada</p>
</li>
<li>
<p><code>ldappasswd</code> : cambie la contraseña de una entrada</p>
</li>
</ul>
<h6 id="ejemplos">Ejemplos:<a class="headerlink" href="#ejemplos" title="Permanent link">&para;</a></h6>
<ol>
<li>
<p>Añadir y eliminar nuevos grupos con <code>ldapadd</code> &amp; <code>ldapdelete</code></p>
<ol>
<li>Se crea un archivo .ldif para añadir un nuevo grupo y se añade con <code>ldapadd</code>:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">nano aso.ldif</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nt">dn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ou=aso,dc=pandora,dc=ldap</span>
<span class="linenos" data-linenos="2 "></span><span class="nt">objectClass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">organizationalUnit</span>
<span class="linenos" data-linenos="3 "></span><span class="nt">objectClass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">top</span>
<span class="linenos" data-linenos="4 "></span><span class="nt">ou</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aso</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">ldapadd -x -W -D &quot;cn=admin,dc=pandora,dc=ldap&quot; -f aso.ldif</span>
</code></pre></div>
<ol start="2">
<li>Para borrarlo se utilizaría: </li>
</ol>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">ldapdelete -W -D &quot;cn=admin,dc=pandora,dc=ldap&quot; &quot;ou=aso,dc=pandora,dc=ldap&quot;</span>
</code></pre></div>
</li>
<li>
<p>Añadir y eliminar usuarios con <code>ldapadd</code> &amp; <code>ldapdelete</code></p>
<ol>
<li>Se crea un archivo .ldif para añadir un nuevo usuario y se añade con <code>ldapadd</code>:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">nano javier.ldif</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="nt">dn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uid=javier,ou=usuarios,dc=pandora,dc=ldap</span>
<span class="linenos" data-linenos=" 2 "></span><span class="nt">objectClass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">inetOrgPerson</span>
<span class="linenos" data-linenos=" 3 "></span><span class="nt">objectClass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">posixAccount</span>
<span class="linenos" data-linenos=" 4 "></span><span class="nt">objectClass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shadowAccount</span>
<span class="linenos" data-linenos=" 5 "></span><span class="nt">cn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Javier</span>
<span class="linenos" data-linenos=" 6 "></span><span class="nt">sn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hernandez</span>
<span class="linenos" data-linenos=" 7 "></span><span class="nt">userPassword</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nv">SSHA</span><span class="p p-Indicator">}</span><span class="l l-Scalar l-Scalar-Plain">latDDmodpsLUWDqwd/adk/j2tTDgz3NX</span>
<span class="linenos" data-linenos=" 8 "></span><span class="nt">loginshell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/bin/bash</span>
<span class="linenos" data-linenos=" 9 "></span><span class="nt">uidNumber</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10001</span>
<span class="linenos" data-linenos="10 "></span><span class="nt">gidNumber</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10001</span>
<span class="linenos" data-linenos="11 "></span><span class="nt">homeDirectory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/home/javier</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">ldapadd -x -W -D &quot;cn=admin,dc=pandora,dc=ldap&quot; -f javier.ldif</span>
</code></pre></div>
<ol start="2">
<li>Para borrarlo se utilizaría: </li>
</ol>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">ldapdelete -W -D &quot;cn=admin,dc=pandora,dc=ldap&quot; &quot;uid=javier,ou=aso,dc=pandora,dc=ldap&quot;</span>
</code></pre></div>
</li>
<li>
<p>modificar <code>uidnumber</code> de usuario existente <code>ldapmodify</code></p>
<ol>
<li>Se crea un archivo .ldif especificando las modificaciones:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">nano cambios1.ldif</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nt">dn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uid=javier,ou=aso,dc=pandora,dc=ldap</span>
<span class="linenos" data-linenos="2 "></span><span class="l l-Scalar l-Scalar-Plain">changetype:modify</span>
<span class="linenos" data-linenos="3 "></span><span class="l l-Scalar l-Scalar-Plain">replace:uidNumber</span>
<span class="linenos" data-linenos="4 "></span><span class="l l-Scalar l-Scalar-Plain">uidNumber:10002</span>
</code></pre></div>
<ol start="2">
<li>Para modificarlo se utilizaría: </li>
</ol>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">ldapmodify -x -W -D &quot;cn=admin,dc=pandora,dc=ldap&quot; -f cambios1.ldif</span>
</code></pre></div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>Cuatro tipos de cambios son posibles<ol>
<li>add--adds a new entry</li>
<li>modify--changes an existing entry, that is, it adds, deletes, or replaces attributes of the entry</li>
<li>delete--deletes an existing entry</li>
<li>modrdn--modifies the RDN of an existing entry</li>
</ol>
</li>
</ul>
</div>
<ol start="4">
<li>
<p>Añadir y cambiar contraseña a un usuario existente con <code>ldappasswd</code></p>
<ol>
<li>Añadir contraseña</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">ldappasswd -s 1234 -W -D &quot;cn=admin,dc=pandora,dc=ldap&quot; -x &quot;uid=javier,ou=aso,dc=pandora,dc=ldap&quot;</span>
</code></pre></div>
</li>
</ol>
<h4 id="operaciones">Operaciones<a class="headerlink" href="#operaciones" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p><code>ldapwhoami</code> : muestra con qué entrada estoy vinculado al servidor</p>
</li>
<li>
<p><code>ldapcompare</code> : compara un campo en la entrada con algún valor</p>
</li>
</ul>
<h2 id="configuracion-de-openldap">Configuración de OpenLDAP<a class="headerlink" href="#configuracion-de-openldap" title="Permanent link">&para;</a></h2>
<h3 id="slapdconf"><code>slapd.conf</code><a class="headerlink" href="#slapdconf" title="Permanent link">&para;</a></h3>
<p>Es el archivo principal de OpenLDAP y es aquí donde se configuran todos sus parámetros.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><code>slapd.conf</code>se encuentra dentro del directorio <code>/etc/ldap/slapd.d</code></li>
</ul>
</div>
<h4 id="diseno-de-configuracion">Diseño de configuración<a class="headerlink" href="#diseno-de-configuracion" title="Permanent link">&para;</a></h4>
<p>La configuración de slapd se almacena <strong>como un directorio LDAP especial con un esquema y DIT predefinidos</strong>. </p>
<ul>
<li>Hay clases de objetos específicas que se utilizan para llevar opciones de configuración global, definiciones de esquema, definiciones de base de datos y back-end, y otros elementos variados.</li>
</ul>
<figure>
  <img src="imagenes/02/ConfigTreeLDAP.png" width="600"/>
  <figcaption>Árbol de configuración de muestra.</figcaption>
</figure>

<ul>
<li>En el servidor se podría observar:</li>
</ul>
<figure>
  <img src="imagenes/02/TreeLDAPconf.png" width="400"/>
  <figcaption>Árbol (DIT)de configuración En Ubuntu Server.</figcaption>
</figure>

<p>El árbol de configuración de slapd-config tiene una estructura muy específica. La raíz del árbol se denomina cn = config y contiene ajustes de configuración global.</p>
<h4 id="directivas-de-configuracion">Directivas de configuración<a class="headerlink" href="#directivas-de-configuracion" title="Permanent link">&para;</a></h4>
<p>De las directivas más comunes mostradas en el árbol se destaca dentro de <code>cn = config</code> la directiva <code>olcLogLevel</code></p>
<ul>
<li>Esta directiva especifica el nivel en el que las declaraciones de depuración y las estadísticas de operación deben registrarse en el syslog (actualmente registrado en la función <strong>syslogd (8) LOG_LOCAL4 )</strong>. </li>
<li>Debe haber configurado OpenLDAP --enable-debug (el predeterminado) para que esto funcione (excepto para los dos niveles de estadísticas, que siempre están habilitados).</li>
</ul>
<h5 id="configuracion-logging">Configuración logging<a class="headerlink" href="#configuracion-logging" title="Permanent link">&para;</a></h5>
<p>El registro de actividad para slapd es muy útil cuando se implementa una solución basada en OpenLDAP, pero debe habilitarse manualmente después de la instalación del software. De lo contrario, solo aparecerán mensajes rudimentarios en los registros. El registro, como cualquier otra configuración similar, se habilita a través de la base de datos <strong>slapd-config</strong> .</p>
<ul>
<li>OpenLDAP viene con múltiples niveles de registro.</li>
<li>Un buen nivel para probar son las <em>estadísticas</em> y se pueden configurar en La página de manual oficial en ubuntu de <a href="https://manpages.ubuntu.com/manpages/focal/en/man5/slapd-config.5.html?_ga=2.248400327.1524111619.1636497214-637147953.1635270894">slapd-config</a>.</li>
</ul>
<!-- - Los pasos a realizar serían:

1. Cree el archivo `logging.ldif` con el siguiente contenido:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nt">dn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cn=config</span>
<span class="linenos" data-linenos="2 "></span><span class="nt">changetype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">modify</span>
<span class="linenos" data-linenos="3 "></span><span class="nt">replace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">olcLogLevel</span>
<span class="linenos" data-linenos="4 "></span><span class="nt">olcLogLevel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stats</span>
</code></pre></div>

2. Se implementa el cambio:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">sudo ldapmodify -Q -Y EXTERNAL -H ldapi:/// -f logging.ldif</span>
</code></pre></div>

Esto producirá una cantidad significativa de registro y querrá volver a un nivel menos detallado una vez que su sistema esté en producción. Mientras está en este modo detallado, el motor syslog de su host (rsyslog) puede tener dificultades para mantenerse al día y puede dejar caer mensajes:

!!! Warning
    **rsyslogd-2177: imuxsock lost 228 messages from pid 2547 due to rate-limiting**

Puede considerarse un cambio en la configuración de para evitar estos problemas `rsyslog`. En `/etc/rsyslog.conf`, ponga:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="c1"># Disable rate limiting</span>
<span class="linenos" data-linenos="2 "></span><span class="c1"># (default is 200 messages in 5 seconds; below we make the 5 become 0)</span>
<span class="linenos" data-linenos="3 "></span><span class="l l-Scalar l-Scalar-Plain">$SystemLogRateLimitInterval 0</span>
</code></pre></div>

3. Y luego reinicie el demonio rsyslog:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="l l-Scalar l-Scalar-Plain">sudo systemctl restart syslog.service</span>
</code></pre></div>

4. Los Registros de OpenLDAP a través de syslogd **LOCAL4** (Nivel warning de Syslog). Para transmitir el registro LDAP a un archivo separado de syslog, agregue una línea como esta a **syslog.conf** ( `/etc/rsyslog.conf`):

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="c1"># a. agregar a syslog.conf</span>
<span class="linenos" data-linenos=" 2 "></span><span class="l l-Scalar l-Scalar-Plain">local4. * /var/log/ldap.log</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="l l-Scalar l-Scalar-Plain"># b. crear un archivo de registro vacío</span>
<span class="linenos" data-linenos=" 5 "></span><span class="l l-Scalar l-Scalar-Plain">toque /var/log/ldap.log</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="l l-Scalar l-Scalar-Plain"># c. reiniciar syslogd</span>
<span class="linenos" data-linenos=" 8 "></span><span class="l l-Scalar l-Scalar-Plain">killall -HUP syslogd</span>
<span class="linenos" data-linenos=" 9 "></span><span class="l l-Scalar l-Scalar-Plain">O</span>
<span class="linenos" data-linenos="10 "></span><span class="l l-Scalar l-Scalar-Plain">systemctl restart syslog.service</span>
</code></pre></div>

[Más información sobre looging OpenLdap](http://www.zytrax.com/books/ldap/ch6/#logfile) -->

<h2 id="actividades">Actividades<a class="headerlink" href="#actividades" title="Permanent link">&para;</a></h2>
<ol start="201">
<li>En este ejercicio se deben utilizar los <strong>comandos de OpenLdap</strong> instalados en el paquete <code>LDAPutils</code>.<ol>
<li>Añade un nuevo grupo y dentro de el un nuevo usuario a la estructura de directorio creada en la práctica superior.</li>
<li>Crea una contraseña para el usuario.</li>
<li>Modifica el uid creado de inicio.</li>
<li>Crea un segundo usuario, dentro de <strong>usuarios</strong></li>
<li>Elimina el segundo usuario creado.</li>
</ol>
</li>
</ol>
<p>En cada sub-apartado comprueba que se han introducido correctamente las modificaciones en el <strong>DIT</strong>.</p>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2022-2023 Fº Javier Hernández - Licencia CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="mailto:<fj.hernandez@edu.gva.es>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l217.6 163.2c11.4 8.5 27 8.5 38.4 0l217.6-163.2c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 176v208c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V176L294.4 339.2a63.9 63.9 0 0 1-76.8 0z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/fjavier-hernandez-illan" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  




  


<h4>Consentimiento de cookie</h4>
<p>Esta página de apuntes utiliza cookies para reconocer las visitas, medir la efectividad de la documentación y averiguar si encuentras aquello que buscas o cómo has llegado a estos apuntes. Con tu consentimiento, me ayudas a mejorar estos materiales.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Aceptar</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Gestionar cookies</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["header.autohide", "toc.integrate", "navigation.indexes"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>